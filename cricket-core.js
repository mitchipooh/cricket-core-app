(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();function cg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vd={exports:{}},ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function Jy(){if(qm)return ml;qm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(a,r,c){var d=null;if(c!==void 0&&(d=""+c),r.key!==void 0&&(d=""+r.key),"key"in r){c={};for(var f in r)f!=="key"&&(c[f]=r[f])}else c=r;return r=c.ref,{$$typeof:t,type:a,key:d,ref:r!==void 0?r:null,props:c}}return ml.Fragment=e,ml.jsx=s,ml.jsxs=s,ml}var Vm;function Wy(){return Vm||(Vm=1,Vd.exports=Jy()),Vd.exports}var i=Wy(),Hd={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function Yy(){if(Hm)return qe;Hm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),y=Symbol.iterator;function N(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,E={};function T(A,$,re){this.props=A,this.context=$,this.refs=E,this.updater=re||S}T.prototype.isReactComponent={},T.prototype.setState=function(A,$){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,$,"setState")},T.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function M(){}M.prototype=T.prototype;function C(A,$,re){this.props=A,this.context=$,this.refs=E,this.updater=re||S}var D=C.prototype=new M;D.constructor=C,k(D,T.prototype),D.isPureReactComponent=!0;var R=Array.isArray;function B(){}var G={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function z(A,$,re){var ve=re.ref;return{$$typeof:t,type:A,key:$,ref:ve!==void 0?ve:null,props:re}}function P(A,$){return z(A.type,$,A.props)}function ne(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function le(A){var $={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(re){return $[re]})}var ie=/\/+/g;function J(A,$){return typeof A=="object"&&A!==null&&A.key!=null?le(""+A.key):$.toString(36)}function pe(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(B,B):(A.status="pending",A.then(function($){A.status==="pending"&&(A.status="fulfilled",A.value=$)},function($){A.status==="pending"&&(A.status="rejected",A.reason=$)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function U(A,$,re,ve,Ne){var ge=typeof A;(ge==="undefined"||ge==="boolean")&&(A=null);var Se=!1;if(A===null)Se=!0;else switch(ge){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(A.$$typeof){case t:case e:Se=!0;break;case g:return Se=A._init,U(Se(A._payload),$,re,ve,Ne)}}if(Se)return Ne=Ne(A),Se=ve===""?"."+J(A,0):ve,R(Ne)?(re="",Se!=null&&(re=Se.replace(ie,"$&/")+"/"),U(Ne,$,re,"",function(ye){return ye})):Ne!=null&&(ne(Ne)&&(Ne=P(Ne,re+(Ne.key==null||A&&A.key===Ne.key?"":(""+Ne.key).replace(ie,"$&/")+"/")+Se)),$.push(Ne)),1;Se=0;var Ee=ve===""?".":ve+":";if(R(A))for(var Q=0;Q<A.length;Q++)ve=A[Q],ge=Ee+J(ve,Q),Se+=U(ve,$,re,ge,Ne);else if(Q=N(A),typeof Q=="function")for(A=Q.call(A),Q=0;!(ve=A.next()).done;)ve=ve.value,ge=Ee+J(ve,Q++),Se+=U(ve,$,re,ge,Ne);else if(ge==="object"){if(typeof A.then=="function")return U(pe(A),$,re,ve,Ne);throw $=String(A),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Se}function O(A,$,re){if(A==null)return A;var ve=[],Ne=0;return U(A,ve,"","",function(ge){return $.call(re,ge,Ne++)}),ve}function V(A){if(A._status===-1){var $=A._result;$=$(),$.then(function(re){(A._status===0||A._status===-1)&&(A._status=1,A._result=re)},function(re){(A._status===0||A._status===-1)&&(A._status=2,A._result=re)}),A._status===-1&&(A._status=0,A._result=$)}if(A._status===1)return A._result.default;throw A._result}var he=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},W={map:O,forEach:function(A,$,re){O(A,function(){$.apply(this,arguments)},re)},count:function(A){var $=0;return O(A,function(){$++}),$},toArray:function(A){return O(A,function($){return $})||[]},only:function(A){if(!ne(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return qe.Activity=v,qe.Children=W,qe.Component=T,qe.Fragment=s,qe.Profiler=r,qe.PureComponent=C,qe.StrictMode=a,qe.Suspense=m,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,qe.__COMPILER_RUNTIME={__proto__:null,c:function(A){return G.H.useMemoCache(A)}},qe.cache=function(A){return function(){return A.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(A,$,re){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var ve=k({},A.props),Ne=A.key;if($!=null)for(ge in $.key!==void 0&&(Ne=""+$.key),$)!H.call($,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&$.ref===void 0||(ve[ge]=$[ge]);var ge=arguments.length-2;if(ge===1)ve.children=re;else if(1<ge){for(var Se=Array(ge),Ee=0;Ee<ge;Ee++)Se[Ee]=arguments[Ee+2];ve.children=Se}return z(A.type,Ne,ve)},qe.createContext=function(A){return A={$$typeof:d,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:c,_context:A},A},qe.createElement=function(A,$,re){var ve,Ne={},ge=null;if($!=null)for(ve in $.key!==void 0&&(ge=""+$.key),$)H.call($,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Ne[ve]=$[ve]);var Se=arguments.length-2;if(Se===1)Ne.children=re;else if(1<Se){for(var Ee=Array(Se),Q=0;Q<Se;Q++)Ee[Q]=arguments[Q+2];Ne.children=Ee}if(A&&A.defaultProps)for(ve in Se=A.defaultProps,Se)Ne[ve]===void 0&&(Ne[ve]=Se[ve]);return z(A,ge,Ne)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(A){return{$$typeof:f,render:A}},qe.isValidElement=ne,qe.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:V}},qe.memo=function(A,$){return{$$typeof:p,type:A,compare:$===void 0?null:$}},qe.startTransition=function(A){var $=G.T,re={};G.T=re;try{var ve=A(),Ne=G.S;Ne!==null&&Ne(re,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(B,he)}catch(ge){he(ge)}finally{$!==null&&re.types!==null&&($.types=re.types),G.T=$}},qe.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},qe.use=function(A){return G.H.use(A)},qe.useActionState=function(A,$,re){return G.H.useActionState(A,$,re)},qe.useCallback=function(A,$){return G.H.useCallback(A,$)},qe.useContext=function(A){return G.H.useContext(A)},qe.useDebugValue=function(){},qe.useDeferredValue=function(A,$){return G.H.useDeferredValue(A,$)},qe.useEffect=function(A,$){return G.H.useEffect(A,$)},qe.useEffectEvent=function(A){return G.H.useEffectEvent(A)},qe.useId=function(){return G.H.useId()},qe.useImperativeHandle=function(A,$,re){return G.H.useImperativeHandle(A,$,re)},qe.useInsertionEffect=function(A,$){return G.H.useInsertionEffect(A,$)},qe.useLayoutEffect=function(A,$){return G.H.useLayoutEffect(A,$)},qe.useMemo=function(A,$){return G.H.useMemo(A,$)},qe.useOptimistic=function(A,$){return G.H.useOptimistic(A,$)},qe.useReducer=function(A,$,re){return G.H.useReducer(A,$,re)},qe.useRef=function(A){return G.H.useRef(A)},qe.useState=function(A){return G.H.useState(A)},qe.useSyncExternalStore=function(A,$,re){return G.H.useSyncExternalStore(A,$,re)},qe.useTransition=function(){return G.H.useTransition()},qe.version="19.2.4",qe}var $m;function Au(){return $m||($m=1,Hd.exports=Yy()),Hd.exports}var j=Au();const Ru=cg(j);var $d={exports:{}},xl={},Fd={exports:{}},zd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function Ky(){return Fm||(Fm=1,(function(t){function e(U,O){var V=U.length;U.push(O);e:for(;0<V;){var he=V-1>>>1,W=U[he];if(0<r(W,O))U[he]=O,U[V]=W,V=he;else break e}}function s(U){return U.length===0?null:U[0]}function a(U){if(U.length===0)return null;var O=U[0],V=U.pop();if(V!==O){U[0]=V;e:for(var he=0,W=U.length,A=W>>>1;he<A;){var $=2*(he+1)-1,re=U[$],ve=$+1,Ne=U[ve];if(0>r(re,V))ve<W&&0>r(Ne,re)?(U[he]=Ne,U[ve]=V,he=ve):(U[he]=re,U[$]=V,he=$);else if(ve<W&&0>r(Ne,V))U[he]=Ne,U[ve]=V,he=ve;else break e}}return O}function r(U,O){var V=U.sortIndex-O.sortIndex;return V!==0?V:U.id-O.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();t.unstable_now=function(){return d.now()-f}}var m=[],p=[],g=1,v=null,y=3,N=!1,S=!1,k=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(U){for(var O=s(p);O!==null;){if(O.callback===null)a(p);else if(O.startTime<=U)a(p),O.sortIndex=O.expirationTime,e(m,O);else break;O=s(p)}}function R(U){if(k=!1,D(U),!S)if(s(m)!==null)S=!0,B||(B=!0,le());else{var O=s(p);O!==null&&pe(R,O.startTime-U)}}var B=!1,G=-1,H=5,z=-1;function P(){return E?!0:!(t.unstable_now()-z<H)}function ne(){if(E=!1,B){var U=t.unstable_now();z=U;var O=!0;try{e:{S=!1,k&&(k=!1,M(G),G=-1),N=!0;var V=y;try{t:{for(D(U),v=s(m);v!==null&&!(v.expirationTime>U&&P());){var he=v.callback;if(typeof he=="function"){v.callback=null,y=v.priorityLevel;var W=he(v.expirationTime<=U);if(U=t.unstable_now(),typeof W=="function"){v.callback=W,D(U),O=!0;break t}v===s(m)&&a(m),D(U)}else a(m);v=s(m)}if(v!==null)O=!0;else{var A=s(p);A!==null&&pe(R,A.startTime-U),O=!1}}break e}finally{v=null,y=V,N=!1}O=void 0}}finally{O?le():B=!1}}}var le;if(typeof C=="function")le=function(){C(ne)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,J=ie.port2;ie.port1.onmessage=ne,le=function(){J.postMessage(null)}}else le=function(){T(ne,0)};function pe(U,O){G=T(function(){U(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(U){switch(y){case 1:case 2:case 3:var O=3;break;default:O=y}var V=y;y=O;try{return U()}finally{y=V}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(U,O){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var V=y;y=U;try{return O()}finally{y=V}},t.unstable_scheduleCallback=function(U,O,V){var he=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?he+V:he):V=he,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=V+W,U={id:g++,callback:O,priorityLevel:U,startTime:V,expirationTime:W,sortIndex:-1},V>he?(U.sortIndex=V,e(p,U),s(m)===null&&U===s(p)&&(k?(M(G),G=-1):k=!0,pe(R,V-he))):(U.sortIndex=W,e(m,U),S||N||(S=!0,B||(B=!0,le()))),U},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(U){var O=y;return function(){var V=y;y=O;try{return U.apply(this,arguments)}finally{y=V}}}})(zd)),zd}var zm;function Xy(){return zm||(zm=1,Fd.exports=Ky()),Fd.exports}var Jd={exports:{}},Xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm;function Qy(){if(Jm)return Xt;Jm=1;var t=Au();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(m,p,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:m,containerInfo:p,implementation:g}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Xt.createPortal=function(m,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(m,p,null,g)},Xt.flushSync=function(m){var p=d.T,g=a.p;try{if(d.T=null,a.p=2,m)return m()}finally{d.T=p,a.p=g,a.d.f()}},Xt.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(m,p))},Xt.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},Xt.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var g=p.as,v=f(g,p.crossOrigin),y=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?a.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:N}):g==="script"&&a.d.X(m,{crossOrigin:v,integrity:y,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Xt.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=f(p.as,p.crossOrigin);a.d.M(m,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(m)},Xt.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,v=f(g,p.crossOrigin);a.d.L(m,g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Xt.preloadModule=function(m,p){if(typeof m=="string")if(p){var g=f(p.as,p.crossOrigin);a.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(m)},Xt.requestFormReset=function(m){a.d.r(m)},Xt.unstable_batchedUpdates=function(m,p){return m(p)},Xt.useFormState=function(m,p,g){return d.H.useFormState(m,p,g)},Xt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Xt.version="19.2.4",Xt}var Wm;function Zy(){if(Wm)return Jd.exports;Wm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jd.exports=Qy(),Jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym;function ew(){if(Ym)return xl;Ym=1;var t=Xy(),e=Au(),s=Zy();function a(n){var l="https://react.dev/errors/"+n;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)l+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var l=n,o=n;if(n.alternate)for(;l.return;)l=l.return;else{n=l;do l=n,(l.flags&4098)!==0&&(o=l.return),n=l.return;while(n)}return l.tag===3?o:null}function d(n){if(n.tag===13){var l=n.memoizedState;if(l===null&&(n=n.alternate,n!==null&&(l=n.memoizedState)),l!==null)return l.dehydrated}return null}function f(n){if(n.tag===31){var l=n.memoizedState;if(l===null&&(n=n.alternate,n!==null&&(l=n.memoizedState)),l!==null)return l.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(a(188))}function p(n){var l=n.alternate;if(!l){if(l=c(n),l===null)throw Error(a(188));return l!==n?null:n}for(var o=n,u=l;;){var b=o.return;if(b===null)break;var w=b.alternate;if(w===null){if(u=b.return,u!==null){o=u;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===o)return m(b),n;if(w===u)return m(b),l;w=w.sibling}throw Error(a(188))}if(o.return!==u.return)o=b,u=w;else{for(var _=!1,I=b.child;I;){if(I===o){_=!0,o=b,u=w;break}if(I===u){_=!0,u=b,o=w;break}I=I.sibling}if(!_){for(I=w.child;I;){if(I===o){_=!0,o=w,u=b;break}if(I===u){_=!0,u=w,o=b;break}I=I.sibling}if(!_)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?n:l}function g(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n;for(n=n.child;n!==null;){if(l=g(n),l!==null)return l;n=n.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function le(n){return n===null||typeof n!="object"?null:(n=ne&&n[ne]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Symbol.for("react.client.reference");function J(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ie?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case B:return"SuspenseList";case z:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case S:return"Portal";case C:return n.displayName||"Context";case M:return(n._context.displayName||"Context")+".Consumer";case D:var l=n.render;return n=n.displayName,n||(n=l.displayName||l.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case G:return l=n.displayName||null,l!==null?l:J(n.type)||"Memo";case H:l=n._payload,n=n._init;try{return J(n(l))}catch{}}return null}var pe=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},he=[],W=-1;function A(n){return{current:n}}function $(n){0>W||(n.current=he[W],he[W]=null,W--)}function re(n,l){W++,he[W]=n.current,n.current=l}var ve=A(null),Ne=A(null),ge=A(null),Se=A(null);function Ee(n,l){switch(re(ge,l),re(Ne,n),re(ve,null),l.nodeType){case 9:case 11:n=(n=l.documentElement)&&(n=n.namespaceURI)?dm(n):0;break;default:if(n=l.tagName,l=l.namespaceURI)l=dm(l),n=um(l,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(ve),re(ve,n)}function Q(){$(ve),$(Ne),$(ge)}function ye(n){n.memoizedState!==null&&re(Se,n);var l=ve.current,o=um(l,n.type);l!==o&&(re(Ne,n),re(ve,o))}function je(n){Ne.current===n&&($(ve),$(Ne)),Se.current===n&&($(Se),ul._currentValue=V)}var Be,et;function ct(n){if(Be===void 0)try{throw Error()}catch(o){var l=o.stack.trim().match(/\n( *(at )?)/);Be=l&&l[1]||"",et=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Be+n+et}var pt=!1;function wt(n,l){if(!n||pt)return"";pt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(l){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(se){var Z=se}Reflect.construct(n,[],ue)}else{try{ue.call()}catch(se){Z=se}n.call(ue.prototype)}}else{try{throw Error()}catch(se){Z=se}(ue=n())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(se){if(se&&Z&&typeof se.stack=="string")return[se.stack,Z.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=u.DetermineComponentFrameRoot(),_=w[0],I=w[1];if(_&&I){var L=_.split(`
`),X=I.split(`
`);for(b=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;b<X.length&&!X[b].includes("DetermineComponentFrameRoot");)b++;if(u===L.length||b===X.length)for(u=L.length-1,b=X.length-1;1<=u&&0<=b&&L[u]!==X[b];)b--;for(;1<=u&&0<=b;u--,b--)if(L[u]!==X[b]){if(u!==1||b!==1)do if(u--,b--,0>b||L[u]!==X[b]){var ae=`
`+L[u].replace(" at new "," at ");return n.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",n.displayName)),ae}while(1<=u&&0<=b);break}}}finally{pt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?ct(o):""}function Fe(n,l){switch(n.tag){case 26:case 27:case 5:return ct(n.type);case 16:return ct("Lazy");case 13:return n.child!==l&&l!==null?ct("Suspense Fallback"):ct("Suspense");case 19:return ct("SuspenseList");case 0:case 15:return wt(n.type,!1);case 11:return wt(n.type.render,!1);case 1:return wt(n.type,!0);case 31:return ct("Activity");default:return""}}function dt(n){try{var l="",o=null;do l+=Fe(n,o),o=n,n=n.return;while(n);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Tt=Object.prototype.hasOwnProperty,Nt=t.unstable_scheduleCallback,Et=t.unstable_cancelCallback,de=t.unstable_shouldYield,ce=t.unstable_requestPaint,be=t.unstable_now,Ae=t.unstable_getCurrentPriorityLevel,Qe=t.unstable_ImmediatePriority,gt=t.unstable_UserBlockingPriority,At=t.unstable_NormalPriority,Ue=t.unstable_LowPriority,at=t.unstable_IdlePriority,Zt=t.log,us=t.unstable_setDisableYieldValue,ws=null,Rt=null;function ee(n){if(typeof Zt=="function"&&us(n),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(ws,n)}catch{}}var me=Math.clz32?Math.clz32:te,we=Math.log,Y=Math.LN2;function te(n){return n>>>=0,n===0?32:31-(we(n)/Y|0)|0}var xe=256,Re=262144,Ge=4194304;function Me(n){var l=n&42;if(l!==0)return l;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ze(n,l,o){var u=n.pendingLanes;if(u===0)return 0;var b=0,w=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var I=u&134217727;return I!==0?(u=I&~w,u!==0?b=Me(u):(_&=I,_!==0?b=Me(_):o||(o=I&~n,o!==0&&(b=Me(o))))):(I=u&~w,I!==0?b=Me(I):_!==0?b=Me(_):o||(o=u&~n,o!==0&&(b=Me(o)))),b===0?0:l!==0&&l!==b&&(l&w)===0&&(w=b&-b,o=l&-l,w>=o||w===32&&(o&4194048)!==0)?l:b}function We(n,l){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&l)===0}function Os(n,l){switch(n){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fe(){var n=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),n}function Ve(n){for(var l=[],o=0;31>o;o++)l.push(n);return l}function lt(n,l){n.pendingLanes|=l,l!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function It(n,l,o,u,b,w){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var I=n.entanglements,L=n.expirationTimes,X=n.hiddenUpdates;for(o=_&~o;0<o;){var ae=31-me(o),ue=1<<ae;I[ae]=0,L[ae]=-1;var Z=X[ae];if(Z!==null)for(X[ae]=null,ae=0;ae<Z.length;ae++){var se=Z[ae];se!==null&&(se.lane&=-536870913)}o&=~ue}u!==0&&Yn(n,u,0),w!==0&&b===0&&n.tag!==0&&(n.suspendedLanes|=w&~(_&~l))}function Yn(n,l,o){n.pendingLanes|=l,n.suspendedLanes&=~l;var u=31-me(l);n.entangledLanes|=l,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function es(n,l){var o=n.entangledLanes|=l;for(n=n.entanglements;o;){var u=31-me(o),b=1<<u;b&l|n[u]&l&&(n[u]|=l),o&=~b}}function Ul(n,l){var o=l&-l;return o=(o&42)!==0?1:wn(o),(o&(n.suspendedLanes|l))!==0?0:o}function wn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Io(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Wu(){var n=O.p;return n!==0?n:(n=window.event,n===void 0?32:Dm(n.type))}function Yu(n,l){var o=O.p;try{return O.p=n,l()}finally{O.p=o}}var Nn=Math.random().toString(36).slice(2),$t="__reactFiber$"+Nn,is="__reactProps$"+Nn,wi="__reactContainer$"+Nn,Mo="__reactEvents$"+Nn,Ub="__reactListeners$"+Nn,Pb="__reactHandles$"+Nn,Ku="__reactResources$"+Nn,Ta="__reactMarker$"+Nn;function Do(n){delete n[$t],delete n[is],delete n[Mo],delete n[Ub],delete n[Pb]}function Ni(n){var l=n[$t];if(l)return l;for(var o=n.parentNode;o;){if(l=o[wi]||o[$t]){if(o=l.alternate,l.child!==null||o!==null&&o.child!==null)for(n=bm(n);n!==null;){if(o=n[$t])return o;n=bm(n)}return l}n=o,o=n.parentNode}return null}function Si(n){if(n=n[$t]||n[wi]){var l=n.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return n}return null}function Ea(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n.stateNode;throw Error(a(33))}function _i(n){var l=n[Ku];return l||(l=n[Ku]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Gt(n){n[Ta]=!0}var Xu=new Set,Qu={};function Kn(n,l){ki(n,l),ki(n+"Capture",l)}function ki(n,l){for(Qu[n]=l,n=0;n<l.length;n++)Xu.add(l[n])}var Lb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zu={},ef={};function Bb(n){return Tt.call(ef,n)?!0:Tt.call(Zu,n)?!1:Lb.test(n)?ef[n]=!0:(Zu[n]=!0,!1)}function Pl(n,l,o){if(Bb(l))if(o===null)n.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(l);return;case"boolean":var u=l.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(l);return}}n.setAttribute(l,""+o)}}function Ll(n,l,o){if(o===null)n.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttribute(l,""+o)}}function Xs(n,l,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(l,o,""+u)}}function Ns(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function tf(n){var l=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Gb(n,l,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,l);if(!n.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var b=u.get,w=u.set;return Object.defineProperty(n,l,{configurable:!0,get:function(){return b.call(this)},set:function(_){o=""+_,w.call(this,_)}}),Object.defineProperty(n,l,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[l]}}}}function Oo(n){if(!n._valueTracker){var l=tf(n)?"checked":"value";n._valueTracker=Gb(n,l,""+n[l])}}function sf(n){if(!n)return!1;var l=n._valueTracker;if(!l)return!0;var o=l.getValue(),u="";return n&&(u=tf(n)?n.checked?"true":"false":n.value),n=u,n!==o?(l.setValue(n),!0):!1}function Bl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var qb=/[\n"\\]/g;function Ss(n){return n.replace(qb,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Uo(n,l,o,u,b,w,_,I){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),l!=null?_==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+Ns(l)):n.value!==""+Ns(l)&&(n.value=""+Ns(l)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),l!=null?Po(n,_,Ns(l)):o!=null?Po(n,_,Ns(o)):u!=null&&n.removeAttribute("value"),b==null&&w!=null&&(n.defaultChecked=!!w),b!=null&&(n.checked=b&&typeof b!="function"&&typeof b!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.name=""+Ns(I):n.removeAttribute("name")}function nf(n,l,o,u,b,w,_,I){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),l!=null||o!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){Oo(n);return}o=o!=null?""+Ns(o):"",l=l!=null?""+Ns(l):o,I||l===n.value||(n.value=l),n.defaultValue=l}u=u??b,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=I?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Oo(n)}function Po(n,l,o){l==="number"&&Bl(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ti(n,l,o,u){if(n=n.options,l){l={};for(var b=0;b<o.length;b++)l["$"+o[b]]=!0;for(o=0;o<n.length;o++)b=l.hasOwnProperty("$"+n[o].value),n[o].selected!==b&&(n[o].selected=b),b&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Ns(o),l=null,b=0;b<n.length;b++){if(n[b].value===o){n[b].selected=!0,u&&(n[b].defaultSelected=!0);return}l!==null||n[b].disabled||(l=n[b])}l!==null&&(l.selected=!0)}}function af(n,l,o){if(l!=null&&(l=""+Ns(l),l!==n.value&&(n.value=l),o==null)){n.defaultValue!==l&&(n.defaultValue=l);return}n.defaultValue=o!=null?""+Ns(o):""}function lf(n,l,o,u){if(l==null){if(u!=null){if(o!=null)throw Error(a(92));if(pe(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),l=o}o=Ns(l),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Oo(n)}function Ei(n,l){if(l){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=l;return}}n.textContent=l}var Vb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rf(n,l,o){var u=l.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="":u?n.setProperty(l,o):typeof o!="number"||o===0||Vb.has(l)?l==="float"?n.cssFloat=o:n[l]=(""+o).trim():n[l]=o+"px"}function of(n,l,o){if(l!=null&&typeof l!="object")throw Error(a(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||l!=null&&l.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var b in l)u=l[b],l.hasOwnProperty(b)&&o[b]!==u&&rf(n,b,u)}else for(var w in l)l.hasOwnProperty(w)&&rf(n,w,l[w])}function Lo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$b=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gl(n){return $b.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Qs(){}var Bo=null;function Go(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ci=null,ji=null;function cf(n){var l=Si(n);if(l&&(n=l.stateNode)){var o=n[is]||null;e:switch(n=l.stateNode,l.type){case"input":if(Uo(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),l=o.name,o.type==="radio"&&l!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ss(""+l)+'"][type="radio"]'),l=0;l<o.length;l++){var u=o[l];if(u!==n&&u.form===n.form){var b=u[is]||null;if(!b)throw Error(a(90));Uo(u,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(l=0;l<o.length;l++)u=o[l],u.form===n.form&&sf(u)}break e;case"textarea":af(n,o.value,o.defaultValue);break e;case"select":l=o.value,l!=null&&Ti(n,!!o.multiple,l,!1)}}}var qo=!1;function df(n,l,o){if(qo)return n(l,o);qo=!0;try{var u=n(l);return u}finally{if(qo=!1,(Ci!==null||ji!==null)&&(Er(),Ci&&(l=Ci,n=ji,ji=Ci=null,cf(l),n)))for(l=0;l<n.length;l++)cf(n[l])}}function Ca(n,l){var o=n.stateNode;if(o===null)return null;var u=o[is]||null;if(u===null)return null;o=u[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(a(231,l,typeof o));return o}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vo=!1;if(Zs)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){Vo=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{Vo=!1}var Sn=null,Ho=null,ql=null;function uf(){if(ql)return ql;var n,l=Ho,o=l.length,u,b="value"in Sn?Sn.value:Sn.textContent,w=b.length;for(n=0;n<o&&l[n]===b[n];n++);var _=o-n;for(u=1;u<=_&&l[o-u]===b[w-u];u++);return ql=b.slice(n,1<u?1-u:void 0)}function Vl(n){var l=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&l===13&&(n=13)):n=l,n===10&&(n=13),32<=n||n===13?n:0}function Hl(){return!0}function ff(){return!1}function as(n){function l(o,u,b,w,_){this._reactName=o,this._targetInst=b,this.type=u,this.nativeEvent=w,this.target=_,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(o=n[I],this[I]=o?o(w):w[I]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Hl:ff,this.isPropagationStopped=ff,this}return v(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Hl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Hl)},persist:function(){},isPersistent:Hl}),l}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$l=as(Xn),Aa=v({},Xn,{view:0,detail:0}),Fb=as(Aa),$o,Fo,Ra,Fl=v({},Aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jo,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ra&&(Ra&&n.type==="mousemove"?($o=n.screenX-Ra.screenX,Fo=n.screenY-Ra.screenY):Fo=$o=0,Ra=n),$o)},movementY:function(n){return"movementY"in n?n.movementY:Fo}}),hf=as(Fl),zb=v({},Fl,{dataTransfer:0}),Jb=as(zb),Wb=v({},Aa,{relatedTarget:0}),zo=as(Wb),Yb=v({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Kb=as(Yb),Xb=v({},Xn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Qb=as(Xb),Zb=v({},Xn,{data:0}),pf=as(Zb),ev={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nv(n){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(n):(n=sv[n])?!!l[n]:!1}function Jo(){return nv}var iv=v({},Aa,{key:function(n){if(n.key){var l=ev[n.key]||n.key;if(l!=="Unidentified")return l}return n.type==="keypress"?(n=Vl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jo,charCode:function(n){return n.type==="keypress"?Vl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),av=as(iv),lv=v({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mf=as(lv),rv=v({},Aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jo}),ov=as(rv),cv=v({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),dv=as(cv),uv=v({},Fl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),fv=as(uv),hv=v({},Xn,{newState:0,oldState:0}),pv=as(hv),mv=[9,13,27,32],Wo=Zs&&"CompositionEvent"in window,Ia=null;Zs&&"documentMode"in document&&(Ia=document.documentMode);var xv=Zs&&"TextEvent"in window&&!Ia,xf=Zs&&(!Wo||Ia&&8<Ia&&11>=Ia),gf=" ",bf=!1;function vf(n,l){switch(n){case"keyup":return mv.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ai=!1;function gv(n,l){switch(n){case"compositionend":return yf(l);case"keypress":return l.which!==32?null:(bf=!0,gf);case"textInput":return n=l.data,n===gf&&bf?null:n;default:return null}}function bv(n,l){if(Ai)return n==="compositionend"||!Wo&&vf(n,l)?(n=uf(),ql=Ho=Sn=null,Ai=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return xf&&l.locale!=="ko"?null:l.data;default:return null}}var vv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wf(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l==="input"?!!vv[n.type]:l==="textarea"}function Nf(n,l,o,u){Ci?ji?ji.push(u):ji=[u]:Ci=u,l=Dr(l,"onChange"),0<l.length&&(o=new $l("onChange","change",null,o,u),n.push({event:o,listeners:l}))}var Ma=null,Da=null;function yv(n){im(n,0)}function zl(n){var l=Ea(n);if(sf(l))return n}function Sf(n,l){if(n==="change")return l}var _f=!1;if(Zs){var Yo;if(Zs){var Ko="oninput"in document;if(!Ko){var kf=document.createElement("div");kf.setAttribute("oninput","return;"),Ko=typeof kf.oninput=="function"}Yo=Ko}else Yo=!1;_f=Yo&&(!document.documentMode||9<document.documentMode)}function Tf(){Ma&&(Ma.detachEvent("onpropertychange",Ef),Da=Ma=null)}function Ef(n){if(n.propertyName==="value"&&zl(Da)){var l=[];Nf(l,Da,n,Go(n)),df(yv,l)}}function wv(n,l,o){n==="focusin"?(Tf(),Ma=l,Da=o,Ma.attachEvent("onpropertychange",Ef)):n==="focusout"&&Tf()}function Nv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return zl(Da)}function Sv(n,l){if(n==="click")return zl(l)}function _v(n,l){if(n==="input"||n==="change")return zl(l)}function kv(n,l){return n===l&&(n!==0||1/n===1/l)||n!==n&&l!==l}var fs=typeof Object.is=="function"?Object.is:kv;function Oa(n,l){if(fs(n,l))return!0;if(typeof n!="object"||n===null||typeof l!="object"||l===null)return!1;var o=Object.keys(n),u=Object.keys(l);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var b=o[u];if(!Tt.call(l,b)||!fs(n[b],l[b]))return!1}return!0}function Cf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jf(n,l){var o=Cf(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=l&&u>=l)return{node:o,offset:l-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Cf(o)}}function Af(n,l){return n&&l?n===l?!0:n&&n.nodeType===3?!1:l&&l.nodeType===3?Af(n,l.parentNode):"contains"in n?n.contains(l):n.compareDocumentPosition?!!(n.compareDocumentPosition(l)&16):!1:!1}function Rf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var l=Bl(n.document);l instanceof n.HTMLIFrameElement;){try{var o=typeof l.contentWindow.location.href=="string"}catch{o=!1}if(o)n=l.contentWindow;else break;l=Bl(n.document)}return l}function Xo(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l&&(l==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||l==="textarea"||n.contentEditable==="true")}var Tv=Zs&&"documentMode"in document&&11>=document.documentMode,Ri=null,Qo=null,Ua=null,Zo=!1;function If(n,l,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Zo||Ri==null||Ri!==Bl(u)||(u=Ri,"selectionStart"in u&&Xo(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ua&&Oa(Ua,u)||(Ua=u,u=Dr(Qo,"onSelect"),0<u.length&&(l=new $l("onSelect","select",null,l,o),n.push({event:l,listeners:u}),l.target=Ri)))}function Qn(n,l){var o={};return o[n.toLowerCase()]=l.toLowerCase(),o["Webkit"+n]="webkit"+l,o["Moz"+n]="moz"+l,o}var Ii={animationend:Qn("Animation","AnimationEnd"),animationiteration:Qn("Animation","AnimationIteration"),animationstart:Qn("Animation","AnimationStart"),transitionrun:Qn("Transition","TransitionRun"),transitionstart:Qn("Transition","TransitionStart"),transitioncancel:Qn("Transition","TransitionCancel"),transitionend:Qn("Transition","TransitionEnd")},ec={},Mf={};Zs&&(Mf=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function Zn(n){if(ec[n])return ec[n];if(!Ii[n])return n;var l=Ii[n],o;for(o in l)if(l.hasOwnProperty(o)&&o in Mf)return ec[n]=l[o];return n}var Df=Zn("animationend"),Of=Zn("animationiteration"),Uf=Zn("animationstart"),Ev=Zn("transitionrun"),Cv=Zn("transitionstart"),jv=Zn("transitioncancel"),Pf=Zn("transitionend"),Lf=new Map,tc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tc.push("scrollEnd");function Us(n,l){Lf.set(n,l),Kn(l,[n])}var Jl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},_s=[],Mi=0,sc=0;function Wl(){for(var n=Mi,l=sc=Mi=0;l<n;){var o=_s[l];_s[l++]=null;var u=_s[l];_s[l++]=null;var b=_s[l];_s[l++]=null;var w=_s[l];if(_s[l++]=null,u!==null&&b!==null){var _=u.pending;_===null?b.next=b:(b.next=_.next,_.next=b),u.pending=b}w!==0&&Bf(o,b,w)}}function Yl(n,l,o,u){_s[Mi++]=n,_s[Mi++]=l,_s[Mi++]=o,_s[Mi++]=u,sc|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function nc(n,l,o,u){return Yl(n,l,o,u),Kl(n)}function ei(n,l){return Yl(n,null,null,l),Kl(n)}function Bf(n,l,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var b=!1,w=n.return;w!==null;)w.childLanes|=o,u=w.alternate,u!==null&&(u.childLanes|=o),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(b=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,b&&l!==null&&(b=31-me(o),n=w.hiddenUpdates,u=n[b],u===null?n[b]=[l]:u.push(l),l.lane=o|536870912),w):null}function Kl(n){if(50<il)throw il=0,fd=null,Error(a(185));for(var l=n.return;l!==null;)n=l,l=n.return;return n.tag===3?n.stateNode:null}var Di={};function Av(n,l,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(n,l,o,u){return new Av(n,l,o,u)}function ic(n){return n=n.prototype,!(!n||!n.isReactComponent)}function en(n,l){var o=n.alternate;return o===null?(o=hs(n.tag,l,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=l,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,l=n.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Gf(n,l){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=l,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,l=o.dependencies,n.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),n}function Xl(n,l,o,u,b,w){var _=0;if(u=n,typeof n=="function")ic(n)&&(_=1);else if(typeof n=="string")_=Oy(n,o,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case z:return n=hs(31,o,l,b),n.elementType=z,n.lanes=w,n;case k:return ti(o.children,b,w,l);case E:_=8,b|=24;break;case T:return n=hs(12,o,l,b|2),n.elementType=T,n.lanes=w,n;case R:return n=hs(13,o,l,b),n.elementType=R,n.lanes=w,n;case B:return n=hs(19,o,l,b),n.elementType=B,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:_=10;break e;case M:_=9;break e;case D:_=11;break e;case G:_=14;break e;case H:_=16,u=null;break e}_=29,o=Error(a(130,n===null?"null":typeof n,"")),u=null}return l=hs(_,o,l,b),l.elementType=n,l.type=u,l.lanes=w,l}function ti(n,l,o,u){return n=hs(7,n,u,l),n.lanes=o,n}function ac(n,l,o){return n=hs(6,n,null,l),n.lanes=o,n}function qf(n){var l=hs(18,null,null,0);return l.stateNode=n,l}function lc(n,l,o){return l=hs(4,n.children!==null?n.children:[],n.key,l),l.lanes=o,l.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},l}var Vf=new WeakMap;function ks(n,l){if(typeof n=="object"&&n!==null){var o=Vf.get(n);return o!==void 0?o:(l={value:n,source:l,stack:dt(l)},Vf.set(n,l),l)}return{value:n,source:l,stack:dt(l)}}var Oi=[],Ui=0,Ql=null,Pa=0,Ts=[],Es=0,_n=null,Js=1,Ws="";function tn(n,l){Oi[Ui++]=Pa,Oi[Ui++]=Ql,Ql=n,Pa=l}function Hf(n,l,o){Ts[Es++]=Js,Ts[Es++]=Ws,Ts[Es++]=_n,_n=n;var u=Js;n=Ws;var b=32-me(u)-1;u&=~(1<<b),o+=1;var w=32-me(l)+b;if(30<w){var _=b-b%5;w=(u&(1<<_)-1).toString(32),u>>=_,b-=_,Js=1<<32-me(l)+b|o<<b|u,Ws=w+n}else Js=1<<w|o<<b|u,Ws=n}function rc(n){n.return!==null&&(tn(n,1),Hf(n,1,0))}function oc(n){for(;n===Ql;)Ql=Oi[--Ui],Oi[Ui]=null,Pa=Oi[--Ui],Oi[Ui]=null;for(;n===_n;)_n=Ts[--Es],Ts[Es]=null,Ws=Ts[--Es],Ts[Es]=null,Js=Ts[--Es],Ts[Es]=null}function $f(n,l){Ts[Es++]=Js,Ts[Es++]=Ws,Ts[Es++]=_n,Js=l.id,Ws=l.overflow,_n=n}var Ft=null,bt=null,Xe=!1,kn=null,Cs=!1,cc=Error(a(519));function Tn(n){var l=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw La(ks(l,n)),cc}function Ff(n){var l=n.stateNode,o=n.type,u=n.memoizedProps;switch(l[$t]=n,l[is]=u,o){case"dialog":Je("cancel",l),Je("close",l);break;case"iframe":case"object":case"embed":Je("load",l);break;case"video":case"audio":for(o=0;o<ll.length;o++)Je(ll[o],l);break;case"source":Je("error",l);break;case"img":case"image":case"link":Je("error",l),Je("load",l);break;case"details":Je("toggle",l);break;case"input":Je("invalid",l),nf(l,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Je("invalid",l);break;case"textarea":Je("invalid",l),lf(l,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||l.textContent===""+o||u.suppressHydrationWarning===!0||om(l.textContent,o)?(u.popover!=null&&(Je("beforetoggle",l),Je("toggle",l)),u.onScroll!=null&&Je("scroll",l),u.onScrollEnd!=null&&Je("scrollend",l),u.onClick!=null&&(l.onclick=Qs),l=!0):l=!1,l||Tn(n,!0)}function zf(n){for(Ft=n.return;Ft;)switch(Ft.tag){case 5:case 31:case 13:Cs=!1;return;case 27:case 3:Cs=!0;return;default:Ft=Ft.return}}function Pi(n){if(n!==Ft)return!1;if(!Xe)return zf(n),Xe=!0,!1;var l=n.tag,o;if((o=l!==3&&l!==27)&&((o=l===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ed(n.type,n.memoizedProps)),o=!o),o&&bt&&Tn(n),zf(n),l===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));bt=gm(n)}else if(l===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));bt=gm(n)}else l===27?(l=bt,Gn(n.type)?(n=Id,Id=null,bt=n):bt=l):bt=Ft?As(n.stateNode.nextSibling):null;return!0}function si(){bt=Ft=null,Xe=!1}function dc(){var n=kn;return n!==null&&(cs===null?cs=n:cs.push.apply(cs,n),kn=null),n}function La(n){kn===null?kn=[n]:kn.push(n)}var uc=A(null),ni=null,sn=null;function En(n,l,o){re(uc,l._currentValue),l._currentValue=o}function nn(n){n._currentValue=uc.current,$(uc)}function fc(n,l,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&l)!==l?(n.childLanes|=l,u!==null&&(u.childLanes|=l)):u!==null&&(u.childLanes&l)!==l&&(u.childLanes|=l),n===o)break;n=n.return}}function hc(n,l,o,u){var b=n.child;for(b!==null&&(b.return=n);b!==null;){var w=b.dependencies;if(w!==null){var _=b.child;w=w.firstContext;e:for(;w!==null;){var I=w;w=b;for(var L=0;L<l.length;L++)if(I.context===l[L]){w.lanes|=o,I=w.alternate,I!==null&&(I.lanes|=o),fc(w.return,o,n),u||(_=null);break e}w=I.next}}else if(b.tag===18){if(_=b.return,_===null)throw Error(a(341));_.lanes|=o,w=_.alternate,w!==null&&(w.lanes|=o),fc(_,o,n),_=null}else _=b.child;if(_!==null)_.return=b;else for(_=b;_!==null;){if(_===n){_=null;break}if(b=_.sibling,b!==null){b.return=_.return,_=b;break}_=_.return}b=_}}function Li(n,l,o,u){n=null;for(var b=l,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var _=b.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var I=b.type;fs(b.pendingProps.value,_.value)||(n!==null?n.push(I):n=[I])}}else if(b===Se.current){if(_=b.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(n!==null?n.push(ul):n=[ul])}b=b.return}n!==null&&hc(l,n,o,u),l.flags|=262144}function Zl(n){for(n=n.firstContext;n!==null;){if(!fs(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ii(n){ni=n,sn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function zt(n){return Jf(ni,n)}function er(n,l){return ni===null&&ii(n),Jf(n,l)}function Jf(n,l){var o=l._currentValue;if(l={context:l,memoizedValue:o,next:null},sn===null){if(n===null)throw Error(a(308));sn=l,n.dependencies={lanes:0,firstContext:l},n.flags|=524288}else sn=sn.next=l;return o}var Rv=typeof AbortController<"u"?AbortController:function(){var n=[],l=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){l.aborted=!0,n.forEach(function(o){return o()})}},Iv=t.unstable_scheduleCallback,Mv=t.unstable_NormalPriority,Mt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pc(){return{controller:new Rv,data:new Map,refCount:0}}function Ba(n){n.refCount--,n.refCount===0&&Iv(Mv,function(){n.controller.abort()})}var Ga=null,mc=0,Bi=0,Gi=null;function Dv(n,l){if(Ga===null){var o=Ga=[];mc=0,Bi=bd(),Gi={status:"pending",value:void 0,then:function(u){o.push(u)}}}return mc++,l.then(Wf,Wf),l}function Wf(){if(--mc===0&&Ga!==null){Gi!==null&&(Gi.status="fulfilled");var n=Ga;Ga=null,Bi=0,Gi=null;for(var l=0;l<n.length;l++)(0,n[l])()}}function Ov(n,l){var o=[],u={status:"pending",value:null,reason:null,then:function(b){o.push(b)}};return n.then(function(){u.status="fulfilled",u.value=l;for(var b=0;b<o.length;b++)(0,o[b])(l)},function(b){for(u.status="rejected",u.reason=b,b=0;b<o.length;b++)(0,o[b])(void 0)}),u}var Yf=U.S;U.S=function(n,l){Ip=be(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&Dv(n,l),Yf!==null&&Yf(n,l)};var ai=A(null);function xc(){var n=ai.current;return n!==null?n:mt.pooledCache}function tr(n,l){l===null?re(ai,ai.current):re(ai,l.pool)}function Kf(){var n=xc();return n===null?null:{parent:Mt._currentValue,pool:n}}var qi=Error(a(460)),gc=Error(a(474)),sr=Error(a(542)),nr={then:function(){}};function Xf(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Qf(n,l,o){switch(o=n[o],o===void 0?n.push(l):o!==l&&(l.then(Qs,Qs),l=o),l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,eh(n),n;default:if(typeof l.status=="string")l.then(Qs,Qs);else{if(n=mt,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=l,n.status="pending",n.then(function(u){if(l.status==="pending"){var b=l;b.status="fulfilled",b.value=u}},function(u){if(l.status==="pending"){var b=l;b.status="rejected",b.reason=u}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,eh(n),n}throw ri=l,qi}}function li(n){try{var l=n._init;return l(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ri=o,qi):o}}var ri=null;function Zf(){if(ri===null)throw Error(a(459));var n=ri;return ri=null,n}function eh(n){if(n===qi||n===sr)throw Error(a(483))}var Vi=null,qa=0;function ir(n){var l=qa;return qa+=1,Vi===null&&(Vi=[]),Qf(Vi,n,l)}function Va(n,l){l=l.props.ref,n.ref=l!==void 0?l:null}function ar(n,l){throw l.$$typeof===y?Error(a(525)):(n=Object.prototype.toString.call(l),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":n)))}function th(n){function l(F,q){if(n){var K=F.deletions;K===null?(F.deletions=[q],F.flags|=16):K.push(q)}}function o(F,q){if(!n)return null;for(;q!==null;)l(F,q),q=q.sibling;return null}function u(F){for(var q=new Map;F!==null;)F.key!==null?q.set(F.key,F):q.set(F.index,F),F=F.sibling;return q}function b(F,q){return F=en(F,q),F.index=0,F.sibling=null,F}function w(F,q,K){return F.index=K,n?(K=F.alternate,K!==null?(K=K.index,K<q?(F.flags|=67108866,q):K):(F.flags|=67108866,q)):(F.flags|=1048576,q)}function _(F){return n&&F.alternate===null&&(F.flags|=67108866),F}function I(F,q,K,oe){return q===null||q.tag!==6?(q=ac(K,F.mode,oe),q.return=F,q):(q=b(q,K),q.return=F,q)}function L(F,q,K,oe){var Ie=K.type;return Ie===k?ae(F,q,K.props.children,oe,K.key):q!==null&&(q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===H&&li(Ie)===q.type)?(q=b(q,K.props),Va(q,K),q.return=F,q):(q=Xl(K.type,K.key,K.props,null,F.mode,oe),Va(q,K),q.return=F,q)}function X(F,q,K,oe){return q===null||q.tag!==4||q.stateNode.containerInfo!==K.containerInfo||q.stateNode.implementation!==K.implementation?(q=lc(K,F.mode,oe),q.return=F,q):(q=b(q,K.children||[]),q.return=F,q)}function ae(F,q,K,oe,Ie){return q===null||q.tag!==7?(q=ti(K,F.mode,oe,Ie),q.return=F,q):(q=b(q,K),q.return=F,q)}function ue(F,q,K){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=ac(""+q,F.mode,K),q.return=F,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case N:return K=Xl(q.type,q.key,q.props,null,F.mode,K),Va(K,q),K.return=F,K;case S:return q=lc(q,F.mode,K),q.return=F,q;case H:return q=li(q),ue(F,q,K)}if(pe(q)||le(q))return q=ti(q,F.mode,K,null),q.return=F,q;if(typeof q.then=="function")return ue(F,ir(q),K);if(q.$$typeof===C)return ue(F,er(F,q),K);ar(F,q)}return null}function Z(F,q,K,oe){var Ie=q!==null?q.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ie!==null?null:I(F,q,""+K,oe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case N:return K.key===Ie?L(F,q,K,oe):null;case S:return K.key===Ie?X(F,q,K,oe):null;case H:return K=li(K),Z(F,q,K,oe)}if(pe(K)||le(K))return Ie!==null?null:ae(F,q,K,oe,null);if(typeof K.then=="function")return Z(F,q,ir(K),oe);if(K.$$typeof===C)return Z(F,q,er(F,K),oe);ar(F,K)}return null}function se(F,q,K,oe,Ie){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return F=F.get(K)||null,I(q,F,""+oe,Ie);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:return F=F.get(oe.key===null?K:oe.key)||null,L(q,F,oe,Ie);case S:return F=F.get(oe.key===null?K:oe.key)||null,X(q,F,oe,Ie);case H:return oe=li(oe),se(F,q,K,oe,Ie)}if(pe(oe)||le(oe))return F=F.get(K)||null,ae(q,F,oe,Ie,null);if(typeof oe.then=="function")return se(F,q,K,ir(oe),Ie);if(oe.$$typeof===C)return se(F,q,K,er(q,oe),Ie);ar(q,oe)}return null}function ke(F,q,K,oe){for(var Ie=null,tt=null,Te=q,$e=q=0,Ke=null;Te!==null&&$e<K.length;$e++){Te.index>$e?(Ke=Te,Te=null):Ke=Te.sibling;var st=Z(F,Te,K[$e],oe);if(st===null){Te===null&&(Te=Ke);break}n&&Te&&st.alternate===null&&l(F,Te),q=w(st,q,$e),tt===null?Ie=st:tt.sibling=st,tt=st,Te=Ke}if($e===K.length)return o(F,Te),Xe&&tn(F,$e),Ie;if(Te===null){for(;$e<K.length;$e++)Te=ue(F,K[$e],oe),Te!==null&&(q=w(Te,q,$e),tt===null?Ie=Te:tt.sibling=Te,tt=Te);return Xe&&tn(F,$e),Ie}for(Te=u(Te);$e<K.length;$e++)Ke=se(Te,F,$e,K[$e],oe),Ke!==null&&(n&&Ke.alternate!==null&&Te.delete(Ke.key===null?$e:Ke.key),q=w(Ke,q,$e),tt===null?Ie=Ke:tt.sibling=Ke,tt=Ke);return n&&Te.forEach(function(Fn){return l(F,Fn)}),Xe&&tn(F,$e),Ie}function De(F,q,K,oe){if(K==null)throw Error(a(151));for(var Ie=null,tt=null,Te=q,$e=q=0,Ke=null,st=K.next();Te!==null&&!st.done;$e++,st=K.next()){Te.index>$e?(Ke=Te,Te=null):Ke=Te.sibling;var Fn=Z(F,Te,st.value,oe);if(Fn===null){Te===null&&(Te=Ke);break}n&&Te&&Fn.alternate===null&&l(F,Te),q=w(Fn,q,$e),tt===null?Ie=Fn:tt.sibling=Fn,tt=Fn,Te=Ke}if(st.done)return o(F,Te),Xe&&tn(F,$e),Ie;if(Te===null){for(;!st.done;$e++,st=K.next())st=ue(F,st.value,oe),st!==null&&(q=w(st,q,$e),tt===null?Ie=st:tt.sibling=st,tt=st);return Xe&&tn(F,$e),Ie}for(Te=u(Te);!st.done;$e++,st=K.next())st=se(Te,F,$e,st.value,oe),st!==null&&(n&&st.alternate!==null&&Te.delete(st.key===null?$e:st.key),q=w(st,q,$e),tt===null?Ie=st:tt.sibling=st,tt=st);return n&&Te.forEach(function(zy){return l(F,zy)}),Xe&&tn(F,$e),Ie}function ht(F,q,K,oe){if(typeof K=="object"&&K!==null&&K.type===k&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case N:e:{for(var Ie=K.key;q!==null;){if(q.key===Ie){if(Ie=K.type,Ie===k){if(q.tag===7){o(F,q.sibling),oe=b(q,K.props.children),oe.return=F,F=oe;break e}}else if(q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===H&&li(Ie)===q.type){o(F,q.sibling),oe=b(q,K.props),Va(oe,K),oe.return=F,F=oe;break e}o(F,q);break}else l(F,q);q=q.sibling}K.type===k?(oe=ti(K.props.children,F.mode,oe,K.key),oe.return=F,F=oe):(oe=Xl(K.type,K.key,K.props,null,F.mode,oe),Va(oe,K),oe.return=F,F=oe)}return _(F);case S:e:{for(Ie=K.key;q!==null;){if(q.key===Ie)if(q.tag===4&&q.stateNode.containerInfo===K.containerInfo&&q.stateNode.implementation===K.implementation){o(F,q.sibling),oe=b(q,K.children||[]),oe.return=F,F=oe;break e}else{o(F,q);break}else l(F,q);q=q.sibling}oe=lc(K,F.mode,oe),oe.return=F,F=oe}return _(F);case H:return K=li(K),ht(F,q,K,oe)}if(pe(K))return ke(F,q,K,oe);if(le(K)){if(Ie=le(K),typeof Ie!="function")throw Error(a(150));return K=Ie.call(K),De(F,q,K,oe)}if(typeof K.then=="function")return ht(F,q,ir(K),oe);if(K.$$typeof===C)return ht(F,q,er(F,K),oe);ar(F,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,q!==null&&q.tag===6?(o(F,q.sibling),oe=b(q,K),oe.return=F,F=oe):(o(F,q),oe=ac(K,F.mode,oe),oe.return=F,F=oe),_(F)):o(F,q)}return function(F,q,K,oe){try{qa=0;var Ie=ht(F,q,K,oe);return Vi=null,Ie}catch(Te){if(Te===qi||Te===sr)throw Te;var tt=hs(29,Te,null,F.mode);return tt.lanes=oe,tt.return=F,tt}finally{}}}var oi=th(!0),sh=th(!1),Cn=!1;function bc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vc(n,l){n=n.updateQueue,l.updateQueue===n&&(l.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function jn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function An(n,l,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(it&2)!==0){var b=u.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),u.pending=l,l=Kl(n),Bf(n,null,o),l}return Yl(n,u,l,o),Kl(n)}function Ha(n,l,o){if(l=l.updateQueue,l!==null&&(l=l.shared,(o&4194048)!==0)){var u=l.lanes;u&=n.pendingLanes,o|=u,l.lanes=o,es(n,o)}}function yc(n,l){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var b=null,w=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};w===null?b=w=_:w=w.next=_,o=o.next}while(o!==null);w===null?b=w=l:w=w.next=l}else b=w=l;o={baseState:u.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=l:n.next=l,o.lastBaseUpdate=l}var wc=!1;function $a(){if(wc){var n=Gi;if(n!==null)throw n}}function Fa(n,l,o,u){wc=!1;var b=n.updateQueue;Cn=!1;var w=b.firstBaseUpdate,_=b.lastBaseUpdate,I=b.shared.pending;if(I!==null){b.shared.pending=null;var L=I,X=L.next;L.next=null,_===null?w=X:_.next=X,_=L;var ae=n.alternate;ae!==null&&(ae=ae.updateQueue,I=ae.lastBaseUpdate,I!==_&&(I===null?ae.firstBaseUpdate=X:I.next=X,ae.lastBaseUpdate=L))}if(w!==null){var ue=b.baseState;_=0,ae=X=L=null,I=w;do{var Z=I.lane&-536870913,se=Z!==I.lane;if(se?(Ye&Z)===Z:(u&Z)===Z){Z!==0&&Z===Bi&&(wc=!0),ae!==null&&(ae=ae.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ke=n,De=I;Z=l;var ht=o;switch(De.tag){case 1:if(ke=De.payload,typeof ke=="function"){ue=ke.call(ht,ue,Z);break e}ue=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=De.payload,Z=typeof ke=="function"?ke.call(ht,ue,Z):ke,Z==null)break e;ue=v({},ue,Z);break e;case 2:Cn=!0}}Z=I.callback,Z!==null&&(n.flags|=64,se&&(n.flags|=8192),se=b.callbacks,se===null?b.callbacks=[Z]:se.push(Z))}else se={lane:Z,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ae===null?(X=ae=se,L=ue):ae=ae.next=se,_|=Z;if(I=I.next,I===null){if(I=b.shared.pending,I===null)break;se=I,I=se.next,se.next=null,b.lastBaseUpdate=se,b.shared.pending=null}}while(!0);ae===null&&(L=ue),b.baseState=L,b.firstBaseUpdate=X,b.lastBaseUpdate=ae,w===null&&(b.shared.lanes=0),On|=_,n.lanes=_,n.memoizedState=ue}}function nh(n,l){if(typeof n!="function")throw Error(a(191,n));n.call(l)}function ih(n,l){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)nh(o[n],l)}var Hi=A(null),lr=A(0);function ah(n,l){n=hn,re(lr,n),re(Hi,l),hn=n|l.baseLanes}function Nc(){re(lr,hn),re(Hi,Hi.current)}function Sc(){hn=lr.current,$(Hi),$(lr)}var ps=A(null),js=null;function Rn(n){var l=n.alternate;re(Ct,Ct.current&1),re(ps,n),js===null&&(l===null||Hi.current!==null||l.memoizedState!==null)&&(js=n)}function _c(n){re(Ct,Ct.current),re(ps,n),js===null&&(js=n)}function lh(n){n.tag===22?(re(Ct,Ct.current),re(ps,n),js===null&&(js=n)):In()}function In(){re(Ct,Ct.current),re(ps,ps.current)}function ms(n){$(ps),js===n&&(js=null),$(Ct)}var Ct=A(0);function rr(n){for(var l=n;l!==null;){if(l.tag===13){var o=l.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Ad(o)||Rd(o)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var an=0,He=null,ut=null,Dt=null,or=!1,$i=!1,ci=!1,cr=0,za=0,Fi=null,Uv=0;function St(){throw Error(a(321))}function kc(n,l){if(l===null)return!1;for(var o=0;o<l.length&&o<n.length;o++)if(!fs(n[o],l[o]))return!1;return!0}function Tc(n,l,o,u,b,w){return an=w,He=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,U.H=n===null||n.memoizedState===null?Hh:qc,ci=!1,w=o(u,b),ci=!1,$i&&(w=oh(l,o,u,b)),rh(n),w}function rh(n){U.H=Ya;var l=ut!==null&&ut.next!==null;if(an=0,Dt=ut=He=null,or=!1,za=0,Fi=null,l)throw Error(a(300));n===null||Ot||(n=n.dependencies,n!==null&&Zl(n)&&(Ot=!0))}function oh(n,l,o,u){He=n;var b=0;do{if($i&&(Fi=null),za=0,$i=!1,25<=b)throw Error(a(301));if(b+=1,Dt=ut=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}U.H=$h,w=l(o,u)}while($i);return w}function Pv(){var n=U.H,l=n.useState()[0];return l=typeof l.then=="function"?Ja(l):l,n=n.useState()[0],(ut!==null?ut.memoizedState:null)!==n&&(He.flags|=1024),l}function Ec(){var n=cr!==0;return cr=0,n}function Cc(n,l,o){l.updateQueue=n.updateQueue,l.flags&=-2053,n.lanes&=~o}function jc(n){if(or){for(n=n.memoizedState;n!==null;){var l=n.queue;l!==null&&(l.pending=null),n=n.next}or=!1}an=0,Dt=ut=He=null,$i=!1,za=cr=0,Fi=null}function ts(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?He.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function jt(){if(ut===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=ut.next;var l=Dt===null?He.memoizedState:Dt.next;if(l!==null)Dt=l,ut=n;else{if(n===null)throw He.alternate===null?Error(a(467)):Error(a(310));ut=n,n={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Dt===null?He.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function dr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ja(n){var l=za;return za+=1,Fi===null&&(Fi=[]),n=Qf(Fi,n,l),l=He,(Dt===null?l.memoizedState:Dt.next)===null&&(l=l.alternate,U.H=l===null||l.memoizedState===null?Hh:qc),n}function ur(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ja(n);if(n.$$typeof===C)return zt(n)}throw Error(a(438,String(n)))}function Ac(n){var l=null,o=He.updateQueue;if(o!==null&&(l=o.memoCache),l==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(l={data:u.data.map(function(b){return b.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),o===null&&(o=dr(),He.updateQueue=o),o.memoCache=l,o=l.data[l.index],o===void 0)for(o=l.data[l.index]=Array(n),u=0;u<n;u++)o[u]=P;return l.index++,o}function ln(n,l){return typeof l=="function"?l(n):l}function fr(n){var l=jt();return Rc(l,ut,n)}function Rc(n,l,o){var u=n.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var b=n.baseQueue,w=u.pending;if(w!==null){if(b!==null){var _=b.next;b.next=w.next,w.next=_}l.baseQueue=b=w,u.pending=null}if(w=n.baseState,b===null)n.memoizedState=w;else{l=b.next;var I=_=null,L=null,X=l,ae=!1;do{var ue=X.lane&-536870913;if(ue!==X.lane?(Ye&ue)===ue:(an&ue)===ue){var Z=X.revertLane;if(Z===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ue===Bi&&(ae=!0);else if((an&Z)===Z){X=X.next,Z===Bi&&(ae=!0);continue}else ue={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(I=L=ue,_=w):L=L.next=ue,He.lanes|=Z,On|=Z;ue=X.action,ci&&o(w,ue),w=X.hasEagerState?X.eagerState:o(w,ue)}else Z={lane:ue,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(I=L=Z,_=w):L=L.next=Z,He.lanes|=ue,On|=ue;X=X.next}while(X!==null&&X!==l);if(L===null?_=w:L.next=I,!fs(w,n.memoizedState)&&(Ot=!0,ae&&(o=Gi,o!==null)))throw o;n.memoizedState=w,n.baseState=_,n.baseQueue=L,u.lastRenderedState=w}return b===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Ic(n){var l=jt(),o=l.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=n;var u=o.dispatch,b=o.pending,w=l.memoizedState;if(b!==null){o.pending=null;var _=b=b.next;do w=n(w,_.action),_=_.next;while(_!==b);fs(w,l.memoizedState)||(Ot=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),o.lastRenderedState=w}return[w,u]}function ch(n,l,o){var u=He,b=jt(),w=Xe;if(w){if(o===void 0)throw Error(a(407));o=o()}else o=l();var _=!fs((ut||b).memoizedState,o);if(_&&(b.memoizedState=o,Ot=!0),b=b.queue,Oc(fh.bind(null,u,b,n),[n]),b.getSnapshot!==l||_||Dt!==null&&Dt.memoizedState.tag&1){if(u.flags|=2048,zi(9,{destroy:void 0},uh.bind(null,u,b,o,l),null),mt===null)throw Error(a(349));w||(an&127)!==0||dh(u,l,o)}return o}function dh(n,l,o){n.flags|=16384,n={getSnapshot:l,value:o},l=He.updateQueue,l===null?(l=dr(),He.updateQueue=l,l.stores=[n]):(o=l.stores,o===null?l.stores=[n]:o.push(n))}function uh(n,l,o,u){l.value=o,l.getSnapshot=u,hh(l)&&ph(n)}function fh(n,l,o){return o(function(){hh(l)&&ph(n)})}function hh(n){var l=n.getSnapshot;n=n.value;try{var o=l();return!fs(n,o)}catch{return!0}}function ph(n){var l=ei(n,2);l!==null&&ds(l,n,2)}function Mc(n){var l=ts();if(typeof n=="function"){var o=n;if(n=o(),ci){ee(!0);try{o()}finally{ee(!1)}}}return l.memoizedState=l.baseState=n,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:n},l}function mh(n,l,o,u){return n.baseState=o,Rc(n,ut,typeof u=="function"?u:ln)}function Lv(n,l,o,u,b){if(mr(n))throw Error(a(485));if(n=l.action,n!==null){var w={payload:b,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){w.listeners.push(_)}};U.T!==null?o(!0):w.isTransition=!1,u(w),o=l.pending,o===null?(w.next=l.pending=w,xh(l,w)):(w.next=o.next,l.pending=o.next=w)}}function xh(n,l){var o=l.action,u=l.payload,b=n.state;if(l.isTransition){var w=U.T,_={};U.T=_;try{var I=o(b,u),L=U.S;L!==null&&L(_,I),gh(n,l,I)}catch(X){Dc(n,l,X)}finally{w!==null&&_.types!==null&&(w.types=_.types),U.T=w}}else try{w=o(b,u),gh(n,l,w)}catch(X){Dc(n,l,X)}}function gh(n,l,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){bh(n,l,u)},function(u){return Dc(n,l,u)}):bh(n,l,o)}function bh(n,l,o){l.status="fulfilled",l.value=o,vh(l),n.state=o,l=n.pending,l!==null&&(o=l.next,o===l?n.pending=null:(o=o.next,l.next=o,xh(n,o)))}function Dc(n,l,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do l.status="rejected",l.reason=o,vh(l),l=l.next;while(l!==u)}n.action=null}function vh(n){n=n.listeners;for(var l=0;l<n.length;l++)(0,n[l])()}function yh(n,l){return l}function wh(n,l){if(Xe){var o=mt.formState;if(o!==null){e:{var u=He;if(Xe){if(bt){t:{for(var b=bt,w=Cs;b.nodeType!==8;){if(!w){b=null;break t}if(b=As(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){bt=As(b.nextSibling),u=b.data==="F!";break e}}Tn(u)}u=!1}u&&(l=o[0])}}return o=ts(),o.memoizedState=o.baseState=l,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yh,lastRenderedState:l},o.queue=u,o=Gh.bind(null,He,u),u.dispatch=o,u=Mc(!1),w=Gc.bind(null,He,!1,u.queue),u=ts(),b={state:l,dispatch:null,action:n,pending:null},u.queue=b,o=Lv.bind(null,He,b,w,o),b.dispatch=o,u.memoizedState=n,[l,o,!1]}function Nh(n){var l=jt();return Sh(l,ut,n)}function Sh(n,l,o){if(l=Rc(n,l,yh)[0],n=fr(ln)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var u=Ja(l)}catch(_){throw _===qi?sr:_}else u=l;l=jt();var b=l.queue,w=b.dispatch;return o!==l.memoizedState&&(He.flags|=2048,zi(9,{destroy:void 0},Bv.bind(null,b,o),null)),[u,w,n]}function Bv(n,l){n.action=l}function _h(n){var l=jt(),o=ut;if(o!==null)return Sh(l,o,n);jt(),l=l.memoizedState,o=jt();var u=o.queue.dispatch;return o.memoizedState=n,[l,u,!1]}function zi(n,l,o,u){return n={tag:n,create:o,deps:u,inst:l,next:null},l=He.updateQueue,l===null&&(l=dr(),He.updateQueue=l),o=l.lastEffect,o===null?l.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,l.lastEffect=n),n}function kh(){return jt().memoizedState}function hr(n,l,o,u){var b=ts();He.flags|=n,b.memoizedState=zi(1|l,{destroy:void 0},o,u===void 0?null:u)}function pr(n,l,o,u){var b=jt();u=u===void 0?null:u;var w=b.memoizedState.inst;ut!==null&&u!==null&&kc(u,ut.memoizedState.deps)?b.memoizedState=zi(l,w,o,u):(He.flags|=n,b.memoizedState=zi(1|l,w,o,u))}function Th(n,l){hr(8390656,8,n,l)}function Oc(n,l){pr(2048,8,n,l)}function Gv(n){He.flags|=4;var l=He.updateQueue;if(l===null)l=dr(),He.updateQueue=l,l.events=[n];else{var o=l.events;o===null?l.events=[n]:o.push(n)}}function Eh(n){var l=jt().memoizedState;return Gv({ref:l,nextImpl:n}),function(){if((it&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}function Ch(n,l){return pr(4,2,n,l)}function jh(n,l){return pr(4,4,n,l)}function Ah(n,l){if(typeof l=="function"){n=n();var o=l(n);return function(){typeof o=="function"?o():l(null)}}if(l!=null)return n=n(),l.current=n,function(){l.current=null}}function Rh(n,l,o){o=o!=null?o.concat([n]):null,pr(4,4,Ah.bind(null,l,n),o)}function Uc(){}function Ih(n,l){var o=jt();l=l===void 0?null:l;var u=o.memoizedState;return l!==null&&kc(l,u[1])?u[0]:(o.memoizedState=[n,l],n)}function Mh(n,l){var o=jt();l=l===void 0?null:l;var u=o.memoizedState;if(l!==null&&kc(l,u[1]))return u[0];if(u=n(),ci){ee(!0);try{n()}finally{ee(!1)}}return o.memoizedState=[u,l],u}function Pc(n,l,o){return o===void 0||(an&1073741824)!==0&&(Ye&261930)===0?n.memoizedState=l:(n.memoizedState=o,n=Dp(),He.lanes|=n,On|=n,o)}function Dh(n,l,o,u){return fs(o,l)?o:Hi.current!==null?(n=Pc(n,o,u),fs(n,l)||(Ot=!0),n):(an&42)===0||(an&1073741824)!==0&&(Ye&261930)===0?(Ot=!0,n.memoizedState=o):(n=Dp(),He.lanes|=n,On|=n,l)}function Oh(n,l,o,u,b){var w=O.p;O.p=w!==0&&8>w?w:8;var _=U.T,I={};U.T=I,Gc(n,!1,l,o);try{var L=b(),X=U.S;if(X!==null&&X(I,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ae=Ov(L,u);Wa(n,l,ae,bs(n))}else Wa(n,l,u,bs(n))}catch(ue){Wa(n,l,{then:function(){},status:"rejected",reason:ue},bs())}finally{O.p=w,_!==null&&I.types!==null&&(_.types=I.types),U.T=_}}function qv(){}function Lc(n,l,o,u){if(n.tag!==5)throw Error(a(476));var b=Uh(n).queue;Oh(n,b,l,V,o===null?qv:function(){return Ph(n),o(u)})}function Uh(n){var l=n.memoizedState;if(l!==null)return l;l={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:V},next:null};var o={};return l.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:o},next:null},n.memoizedState=l,n=n.alternate,n!==null&&(n.memoizedState=l),l}function Ph(n){var l=Uh(n);l.next===null&&(l=n.alternate.memoizedState),Wa(n,l.next.queue,{},bs())}function Bc(){return zt(ul)}function Lh(){return jt().memoizedState}function Bh(){return jt().memoizedState}function Vv(n){for(var l=n.return;l!==null;){switch(l.tag){case 24:case 3:var o=bs();n=jn(o);var u=An(l,n,o);u!==null&&(ds(u,l,o),Ha(u,l,o)),l={cache:pc()},n.payload=l;return}l=l.return}}function Hv(n,l,o){var u=bs();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},mr(n)?qh(l,o):(o=nc(n,l,o,u),o!==null&&(ds(o,n,u),Vh(o,l,u)))}function Gh(n,l,o){var u=bs();Wa(n,l,o,u)}function Wa(n,l,o,u){var b={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(mr(n))qh(l,b);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var _=l.lastRenderedState,I=w(_,o);if(b.hasEagerState=!0,b.eagerState=I,fs(I,_))return Yl(n,l,b,0),mt===null&&Wl(),!1}catch{}finally{}if(o=nc(n,l,b,u),o!==null)return ds(o,n,u),Vh(o,l,u),!0}return!1}function Gc(n,l,o,u){if(u={lane:2,revertLane:bd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},mr(n)){if(l)throw Error(a(479))}else l=nc(n,o,u,2),l!==null&&ds(l,n,2)}function mr(n){var l=n.alternate;return n===He||l!==null&&l===He}function qh(n,l){$i=or=!0;var o=n.pending;o===null?l.next=l:(l.next=o.next,o.next=l),n.pending=l}function Vh(n,l,o){if((o&4194048)!==0){var u=l.lanes;u&=n.pendingLanes,o|=u,l.lanes=o,es(n,o)}}var Ya={readContext:zt,use:ur,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};Ya.useEffectEvent=St;var Hh={readContext:zt,use:ur,useCallback:function(n,l){return ts().memoizedState=[n,l===void 0?null:l],n},useContext:zt,useEffect:Th,useImperativeHandle:function(n,l,o){o=o!=null?o.concat([n]):null,hr(4194308,4,Ah.bind(null,l,n),o)},useLayoutEffect:function(n,l){return hr(4194308,4,n,l)},useInsertionEffect:function(n,l){hr(4,2,n,l)},useMemo:function(n,l){var o=ts();l=l===void 0?null:l;var u=n();if(ci){ee(!0);try{n()}finally{ee(!1)}}return o.memoizedState=[u,l],u},useReducer:function(n,l,o){var u=ts();if(o!==void 0){var b=o(l);if(ci){ee(!0);try{o(l)}finally{ee(!1)}}}else b=l;return u.memoizedState=u.baseState=b,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:b},u.queue=n,n=n.dispatch=Hv.bind(null,He,n),[u.memoizedState,n]},useRef:function(n){var l=ts();return n={current:n},l.memoizedState=n},useState:function(n){n=Mc(n);var l=n.queue,o=Gh.bind(null,He,l);return l.dispatch=o,[n.memoizedState,o]},useDebugValue:Uc,useDeferredValue:function(n,l){var o=ts();return Pc(o,n,l)},useTransition:function(){var n=Mc(!1);return n=Oh.bind(null,He,n.queue,!0,!1),ts().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,l,o){var u=He,b=ts();if(Xe){if(o===void 0)throw Error(a(407));o=o()}else{if(o=l(),mt===null)throw Error(a(349));(Ye&127)!==0||dh(u,l,o)}b.memoizedState=o;var w={value:o,getSnapshot:l};return b.queue=w,Th(fh.bind(null,u,w,n),[n]),u.flags|=2048,zi(9,{destroy:void 0},uh.bind(null,u,w,o,l),null),o},useId:function(){var n=ts(),l=mt.identifierPrefix;if(Xe){var o=Ws,u=Js;o=(u&~(1<<32-me(u)-1)).toString(32)+o,l="_"+l+"R_"+o,o=cr++,0<o&&(l+="H"+o.toString(32)),l+="_"}else o=Uv++,l="_"+l+"r_"+o.toString(32)+"_";return n.memoizedState=l},useHostTransitionStatus:Bc,useFormState:wh,useActionState:wh,useOptimistic:function(n){var l=ts();l.memoizedState=l.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=o,l=Gc.bind(null,He,!0,o),o.dispatch=l,[n,l]},useMemoCache:Ac,useCacheRefresh:function(){return ts().memoizedState=Vv.bind(null,He)},useEffectEvent:function(n){var l=ts(),o={impl:n};return l.memoizedState=o,function(){if((it&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},qc={readContext:zt,use:ur,useCallback:Ih,useContext:zt,useEffect:Oc,useImperativeHandle:Rh,useInsertionEffect:Ch,useLayoutEffect:jh,useMemo:Mh,useReducer:fr,useRef:kh,useState:function(){return fr(ln)},useDebugValue:Uc,useDeferredValue:function(n,l){var o=jt();return Dh(o,ut.memoizedState,n,l)},useTransition:function(){var n=fr(ln)[0],l=jt().memoizedState;return[typeof n=="boolean"?n:Ja(n),l]},useSyncExternalStore:ch,useId:Lh,useHostTransitionStatus:Bc,useFormState:Nh,useActionState:Nh,useOptimistic:function(n,l){var o=jt();return mh(o,ut,n,l)},useMemoCache:Ac,useCacheRefresh:Bh};qc.useEffectEvent=Eh;var $h={readContext:zt,use:ur,useCallback:Ih,useContext:zt,useEffect:Oc,useImperativeHandle:Rh,useInsertionEffect:Ch,useLayoutEffect:jh,useMemo:Mh,useReducer:Ic,useRef:kh,useState:function(){return Ic(ln)},useDebugValue:Uc,useDeferredValue:function(n,l){var o=jt();return ut===null?Pc(o,n,l):Dh(o,ut.memoizedState,n,l)},useTransition:function(){var n=Ic(ln)[0],l=jt().memoizedState;return[typeof n=="boolean"?n:Ja(n),l]},useSyncExternalStore:ch,useId:Lh,useHostTransitionStatus:Bc,useFormState:_h,useActionState:_h,useOptimistic:function(n,l){var o=jt();return ut!==null?mh(o,ut,n,l):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Ac,useCacheRefresh:Bh};$h.useEffectEvent=Eh;function Vc(n,l,o,u){l=n.memoizedState,o=o(u,l),o=o==null?l:v({},l,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Hc={enqueueSetState:function(n,l,o){n=n._reactInternals;var u=bs(),b=jn(u);b.payload=l,o!=null&&(b.callback=o),l=An(n,b,u),l!==null&&(ds(l,n,u),Ha(l,n,u))},enqueueReplaceState:function(n,l,o){n=n._reactInternals;var u=bs(),b=jn(u);b.tag=1,b.payload=l,o!=null&&(b.callback=o),l=An(n,b,u),l!==null&&(ds(l,n,u),Ha(l,n,u))},enqueueForceUpdate:function(n,l){n=n._reactInternals;var o=bs(),u=jn(o);u.tag=2,l!=null&&(u.callback=l),l=An(n,u,o),l!==null&&(ds(l,n,o),Ha(l,n,o))}};function Fh(n,l,o,u,b,w,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,w,_):l.prototype&&l.prototype.isPureReactComponent?!Oa(o,u)||!Oa(b,w):!0}function zh(n,l,o,u){n=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(o,u),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(o,u),l.state!==n&&Hc.enqueueReplaceState(l,l.state,null)}function di(n,l){var o=l;if("ref"in l){o={};for(var u in l)u!=="ref"&&(o[u]=l[u])}if(n=n.defaultProps){o===l&&(o=v({},o));for(var b in n)o[b]===void 0&&(o[b]=n[b])}return o}function Jh(n){Jl(n)}function Wh(n){console.error(n)}function Yh(n){Jl(n)}function xr(n,l){try{var o=n.onUncaughtError;o(l.value,{componentStack:l.stack})}catch(u){setTimeout(function(){throw u})}}function Kh(n,l,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function $c(n,l,o){return o=jn(o),o.tag=3,o.payload={element:null},o.callback=function(){xr(n,l)},o}function Xh(n){return n=jn(n),n.tag=3,n}function Qh(n,l,o,u){var b=o.type.getDerivedStateFromError;if(typeof b=="function"){var w=u.value;n.payload=function(){return b(w)},n.callback=function(){Kh(l,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Kh(l,o,u),typeof b!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function $v(n,l,o,u,b){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(l=o.alternate,l!==null&&Li(l,o,b,!0),o=ps.current,o!==null){switch(o.tag){case 31:case 13:return js===null?Cr():o.alternate===null&&_t===0&&(_t=3),o.flags&=-257,o.flags|=65536,o.lanes=b,u===nr?o.flags|=16384:(l=o.updateQueue,l===null?o.updateQueue=new Set([u]):l.add(u),md(n,u,b)),!1;case 22:return o.flags|=65536,u===nr?o.flags|=16384:(l=o.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=l):(o=l.retryQueue,o===null?l.retryQueue=new Set([u]):o.add(u)),md(n,u,b)),!1}throw Error(a(435,o.tag))}return md(n,u,b),Cr(),!1}if(Xe)return l=ps.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=b,u!==cc&&(n=Error(a(422),{cause:u}),La(ks(n,o)))):(u!==cc&&(l=Error(a(423),{cause:u}),La(ks(l,o))),n=n.current.alternate,n.flags|=65536,b&=-b,n.lanes|=b,u=ks(u,o),b=$c(n.stateNode,u,b),yc(n,b),_t!==4&&(_t=2)),!1;var w=Error(a(520),{cause:u});if(w=ks(w,o),nl===null?nl=[w]:nl.push(w),_t!==4&&(_t=2),l===null)return!0;u=ks(u,o),o=l;do{switch(o.tag){case 3:return o.flags|=65536,n=b&-b,o.lanes|=n,n=$c(o.stateNode,u,n),yc(o,n),!1;case 1:if(l=o.type,w=o.stateNode,(o.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Un===null||!Un.has(w))))return o.flags|=65536,b&=-b,o.lanes|=b,b=Xh(b),Qh(b,n,o,u),yc(o,b),!1}o=o.return}while(o!==null);return!1}var Fc=Error(a(461)),Ot=!1;function Jt(n,l,o,u){l.child=n===null?sh(l,null,o,u):oi(l,n.child,o,u)}function Zh(n,l,o,u,b){o=o.render;var w=l.ref;if("ref"in u){var _={};for(var I in u)I!=="ref"&&(_[I]=u[I])}else _=u;return ii(l),u=Tc(n,l,o,_,w,b),I=Ec(),n!==null&&!Ot?(Cc(n,l,b),rn(n,l,b)):(Xe&&I&&rc(l),l.flags|=1,Jt(n,l,u,b),l.child)}function ep(n,l,o,u,b){if(n===null){var w=o.type;return typeof w=="function"&&!ic(w)&&w.defaultProps===void 0&&o.compare===null?(l.tag=15,l.type=w,tp(n,l,w,u,b)):(n=Xl(o.type,null,u,l,l.mode,b),n.ref=l.ref,n.return=l,l.child=n)}if(w=n.child,!Zc(n,b)){var _=w.memoizedProps;if(o=o.compare,o=o!==null?o:Oa,o(_,u)&&n.ref===l.ref)return rn(n,l,b)}return l.flags|=1,n=en(w,u),n.ref=l.ref,n.return=l,l.child=n}function tp(n,l,o,u,b){if(n!==null){var w=n.memoizedProps;if(Oa(w,u)&&n.ref===l.ref)if(Ot=!1,l.pendingProps=u=w,Zc(n,b))(n.flags&131072)!==0&&(Ot=!0);else return l.lanes=n.lanes,rn(n,l,b)}return zc(n,l,o,u,b)}function sp(n,l,o,u){var b=u.children,w=n!==null?n.memoizedState:null;if(n===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|o:o,n!==null){for(u=l.child=n.child,b=0;u!==null;)b=b|u.lanes|u.childLanes,u=u.sibling;u=b&~w}else u=0,l.child=null;return np(n,l,w,o,u)}if((o&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},n!==null&&tr(l,w!==null?w.cachePool:null),w!==null?ah(l,w):Nc(),lh(l);else return u=l.lanes=536870912,np(n,l,w!==null?w.baseLanes|o:o,o,u)}else w!==null?(tr(l,w.cachePool),ah(l,w),In(),l.memoizedState=null):(n!==null&&tr(l,null),Nc(),In());return Jt(n,l,b,o),l.child}function Ka(n,l){return n!==null&&n.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function np(n,l,o,u,b){var w=xc();return w=w===null?null:{parent:Mt._currentValue,pool:w},l.memoizedState={baseLanes:o,cachePool:w},n!==null&&tr(l,null),Nc(),lh(l),n!==null&&Li(n,l,u,!0),l.childLanes=b,null}function gr(n,l){return l=vr({mode:l.mode,children:l.children},n.mode),l.ref=n.ref,n.child=l,l.return=n,l}function ip(n,l,o){return oi(l,n.child,null,o),n=gr(l,l.pendingProps),n.flags|=2,ms(l),l.memoizedState=null,n}function Fv(n,l,o){var u=l.pendingProps,b=(l.flags&128)!==0;if(l.flags&=-129,n===null){if(Xe){if(u.mode==="hidden")return n=gr(l,u),l.lanes=536870912,Ka(null,n);if(_c(l),(n=bt)?(n=xm(n,Cs),n=n!==null&&n.data==="&"?n:null,n!==null&&(l.memoizedState={dehydrated:n,treeContext:_n!==null?{id:Js,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},o=qf(n),o.return=l,l.child=o,Ft=l,bt=null)):n=null,n===null)throw Tn(l);return l.lanes=536870912,null}return gr(l,u)}var w=n.memoizedState;if(w!==null){var _=w.dehydrated;if(_c(l),b)if(l.flags&256)l.flags&=-257,l=ip(n,l,o);else if(l.memoizedState!==null)l.child=n.child,l.flags|=128,l=null;else throw Error(a(558));else if(Ot||Li(n,l,o,!1),b=(o&n.childLanes)!==0,Ot||b){if(u=mt,u!==null&&(_=Ul(u,o),_!==0&&_!==w.retryLane))throw w.retryLane=_,ei(n,_),ds(u,n,_),Fc;Cr(),l=ip(n,l,o)}else n=w.treeContext,bt=As(_.nextSibling),Ft=l,Xe=!0,kn=null,Cs=!1,n!==null&&$f(l,n),l=gr(l,u),l.flags|=4096;return l}return n=en(n.child,{mode:u.mode,children:u.children}),n.ref=l.ref,l.child=n,n.return=l,n}function br(n,l){var o=l.ref;if(o===null)n!==null&&n.ref!==null&&(l.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(n===null||n.ref!==o)&&(l.flags|=4194816)}}function zc(n,l,o,u,b){return ii(l),o=Tc(n,l,o,u,void 0,b),u=Ec(),n!==null&&!Ot?(Cc(n,l,b),rn(n,l,b)):(Xe&&u&&rc(l),l.flags|=1,Jt(n,l,o,b),l.child)}function ap(n,l,o,u,b,w){return ii(l),l.updateQueue=null,o=oh(l,u,o,b),rh(n),u=Ec(),n!==null&&!Ot?(Cc(n,l,w),rn(n,l,w)):(Xe&&u&&rc(l),l.flags|=1,Jt(n,l,o,w),l.child)}function lp(n,l,o,u,b){if(ii(l),l.stateNode===null){var w=Di,_=o.contextType;typeof _=="object"&&_!==null&&(w=zt(_)),w=new o(u,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Hc,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=u,w.state=l.memoizedState,w.refs={},bc(l),_=o.contextType,w.context=typeof _=="object"&&_!==null?zt(_):Di,w.state=l.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Vc(l,o,_,u),w.state=l.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(_=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),_!==w.state&&Hc.enqueueReplaceState(w,w.state,null),Fa(l,u,w,b),$a(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),u=!0}else if(n===null){w=l.stateNode;var I=l.memoizedProps,L=di(o,I);w.props=L;var X=w.context,ae=o.contextType;_=Di,typeof ae=="object"&&ae!==null&&(_=zt(ae));var ue=o.getDerivedStateFromProps;ae=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function",I=l.pendingProps!==I,ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(I||X!==_)&&zh(l,w,u,_),Cn=!1;var Z=l.memoizedState;w.state=Z,Fa(l,u,w,b),$a(),X=l.memoizedState,I||Z!==X||Cn?(typeof ue=="function"&&(Vc(l,o,ue,u),X=l.memoizedState),(L=Cn||Fh(l,o,L,u,Z,X,_))?(ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=u,l.memoizedState=X),w.props=u,w.state=X,w.context=_,u=L):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),u=!1)}else{w=l.stateNode,vc(n,l),_=l.memoizedProps,ae=di(o,_),w.props=ae,ue=l.pendingProps,Z=w.context,X=o.contextType,L=Di,typeof X=="object"&&X!==null&&(L=zt(X)),I=o.getDerivedStateFromProps,(X=typeof I=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(_!==ue||Z!==L)&&zh(l,w,u,L),Cn=!1,Z=l.memoizedState,w.state=Z,Fa(l,u,w,b),$a();var se=l.memoizedState;_!==ue||Z!==se||Cn||n!==null&&n.dependencies!==null&&Zl(n.dependencies)?(typeof I=="function"&&(Vc(l,o,I,u),se=l.memoizedState),(ae=Cn||Fh(l,o,ae,u,Z,se,L)||n!==null&&n.dependencies!==null&&Zl(n.dependencies))?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(u,se,L),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(u,se,L)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||_===n.memoizedProps&&Z===n.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Z===n.memoizedState||(l.flags|=1024),l.memoizedProps=u,l.memoizedState=se),w.props=u,w.state=se,w.context=L,u=ae):(typeof w.componentDidUpdate!="function"||_===n.memoizedProps&&Z===n.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&Z===n.memoizedState||(l.flags|=1024),u=!1)}return w=u,br(n,l),u=(l.flags&128)!==0,w||u?(w=l.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,n!==null&&u?(l.child=oi(l,n.child,null,b),l.child=oi(l,null,o,b)):Jt(n,l,o,b),l.memoizedState=w.state,n=l.child):n=rn(n,l,b),n}function rp(n,l,o,u){return si(),l.flags|=256,Jt(n,l,o,u),l.child}var Jc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wc(n){return{baseLanes:n,cachePool:Kf()}}function Yc(n,l,o){return n=n!==null?n.childLanes&~o:0,l&&(n|=gs),n}function op(n,l,o){var u=l.pendingProps,b=!1,w=(l.flags&128)!==0,_;if((_=w)||(_=n!==null&&n.memoizedState===null?!1:(Ct.current&2)!==0),_&&(b=!0,l.flags&=-129),_=(l.flags&32)!==0,l.flags&=-33,n===null){if(Xe){if(b?Rn(l):In(),(n=bt)?(n=xm(n,Cs),n=n!==null&&n.data!=="&"?n:null,n!==null&&(l.memoizedState={dehydrated:n,treeContext:_n!==null?{id:Js,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},o=qf(n),o.return=l,l.child=o,Ft=l,bt=null)):n=null,n===null)throw Tn(l);return Rd(n)?l.lanes=32:l.lanes=536870912,null}var I=u.children;return u=u.fallback,b?(In(),b=l.mode,I=vr({mode:"hidden",children:I},b),u=ti(u,b,o,null),I.return=l,u.return=l,I.sibling=u,l.child=I,u=l.child,u.memoizedState=Wc(o),u.childLanes=Yc(n,_,o),l.memoizedState=Jc,Ka(null,u)):(Rn(l),Kc(l,I))}var L=n.memoizedState;if(L!==null&&(I=L.dehydrated,I!==null)){if(w)l.flags&256?(Rn(l),l.flags&=-257,l=Xc(n,l,o)):l.memoizedState!==null?(In(),l.child=n.child,l.flags|=128,l=null):(In(),I=u.fallback,b=l.mode,u=vr({mode:"visible",children:u.children},b),I=ti(I,b,o,null),I.flags|=2,u.return=l,I.return=l,u.sibling=I,l.child=u,oi(l,n.child,null,o),u=l.child,u.memoizedState=Wc(o),u.childLanes=Yc(n,_,o),l.memoizedState=Jc,l=Ka(null,u));else if(Rn(l),Rd(I)){if(_=I.nextSibling&&I.nextSibling.dataset,_)var X=_.dgst;_=X,u=Error(a(419)),u.stack="",u.digest=_,La({value:u,source:null,stack:null}),l=Xc(n,l,o)}else if(Ot||Li(n,l,o,!1),_=(o&n.childLanes)!==0,Ot||_){if(_=mt,_!==null&&(u=Ul(_,o),u!==0&&u!==L.retryLane))throw L.retryLane=u,ei(n,u),ds(_,n,u),Fc;Ad(I)||Cr(),l=Xc(n,l,o)}else Ad(I)?(l.flags|=192,l.child=n.child,l=null):(n=L.treeContext,bt=As(I.nextSibling),Ft=l,Xe=!0,kn=null,Cs=!1,n!==null&&$f(l,n),l=Kc(l,u.children),l.flags|=4096);return l}return b?(In(),I=u.fallback,b=l.mode,L=n.child,X=L.sibling,u=en(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,X!==null?I=en(X,I):(I=ti(I,b,o,null),I.flags|=2),I.return=l,u.return=l,u.sibling=I,l.child=u,Ka(null,u),u=l.child,I=n.child.memoizedState,I===null?I=Wc(o):(b=I.cachePool,b!==null?(L=Mt._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=Kf(),I={baseLanes:I.baseLanes|o,cachePool:b}),u.memoizedState=I,u.childLanes=Yc(n,_,o),l.memoizedState=Jc,Ka(n.child,u)):(Rn(l),o=n.child,n=o.sibling,o=en(o,{mode:"visible",children:u.children}),o.return=l,o.sibling=null,n!==null&&(_=l.deletions,_===null?(l.deletions=[n],l.flags|=16):_.push(n)),l.child=o,l.memoizedState=null,o)}function Kc(n,l){return l=vr({mode:"visible",children:l},n.mode),l.return=n,n.child=l}function vr(n,l){return n=hs(22,n,null,l),n.lanes=0,n}function Xc(n,l,o){return oi(l,n.child,null,o),n=Kc(l,l.pendingProps.children),n.flags|=2,l.memoizedState=null,n}function cp(n,l,o){n.lanes|=l;var u=n.alternate;u!==null&&(u.lanes|=l),fc(n.return,l,o)}function Qc(n,l,o,u,b,w){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:b,treeForkCount:w}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=b,_.treeForkCount=w)}function dp(n,l,o){var u=l.pendingProps,b=u.revealOrder,w=u.tail;u=u.children;var _=Ct.current,I=(_&2)!==0;if(I?(_=_&1|2,l.flags|=128):_&=1,re(Ct,_),Jt(n,l,u,o),u=Xe?Pa:0,!I&&n!==null&&(n.flags&128)!==0)e:for(n=l.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&cp(n,o,l);else if(n.tag===19)cp(n,o,l);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===l)break e;for(;n.sibling===null;){if(n.return===null||n.return===l)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(b){case"forwards":for(o=l.child,b=null;o!==null;)n=o.alternate,n!==null&&rr(n)===null&&(b=o),o=o.sibling;o=b,o===null?(b=l.child,l.child=null):(b=o.sibling,o.sibling=null),Qc(l,!1,b,o,w,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,b=l.child,l.child=null;b!==null;){if(n=b.alternate,n!==null&&rr(n)===null){l.child=b;break}n=b.sibling,b.sibling=o,o=b,b=n}Qc(l,!0,o,null,w,u);break;case"together":Qc(l,!1,null,null,void 0,u);break;default:l.memoizedState=null}return l.child}function rn(n,l,o){if(n!==null&&(l.dependencies=n.dependencies),On|=l.lanes,(o&l.childLanes)===0)if(n!==null){if(Li(n,l,o,!1),(o&l.childLanes)===0)return null}else return null;if(n!==null&&l.child!==n.child)throw Error(a(153));if(l.child!==null){for(n=l.child,o=en(n,n.pendingProps),l.child=o,o.return=l;n.sibling!==null;)n=n.sibling,o=o.sibling=en(n,n.pendingProps),o.return=l;o.sibling=null}return l.child}function Zc(n,l){return(n.lanes&l)!==0?!0:(n=n.dependencies,!!(n!==null&&Zl(n)))}function zv(n,l,o){switch(l.tag){case 3:Ee(l,l.stateNode.containerInfo),En(l,Mt,n.memoizedState.cache),si();break;case 27:case 5:ye(l);break;case 4:Ee(l,l.stateNode.containerInfo);break;case 10:En(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,_c(l),null;break;case 13:var u=l.memoizedState;if(u!==null)return u.dehydrated!==null?(Rn(l),l.flags|=128,null):(o&l.child.childLanes)!==0?op(n,l,o):(Rn(l),n=rn(n,l,o),n!==null?n.sibling:null);Rn(l);break;case 19:var b=(n.flags&128)!==0;if(u=(o&l.childLanes)!==0,u||(Li(n,l,o,!1),u=(o&l.childLanes)!==0),b){if(u)return dp(n,l,o);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),re(Ct,Ct.current),u)break;return null;case 22:return l.lanes=0,sp(n,l,o,l.pendingProps);case 24:En(l,Mt,n.memoizedState.cache)}return rn(n,l,o)}function up(n,l,o){if(n!==null)if(n.memoizedProps!==l.pendingProps)Ot=!0;else{if(!Zc(n,o)&&(l.flags&128)===0)return Ot=!1,zv(n,l,o);Ot=(n.flags&131072)!==0}else Ot=!1,Xe&&(l.flags&1048576)!==0&&Hf(l,Pa,l.index);switch(l.lanes=0,l.tag){case 16:e:{var u=l.pendingProps;if(n=li(l.elementType),l.type=n,typeof n=="function")ic(n)?(u=di(n,u),l.tag=1,l=lp(null,l,n,u,o)):(l.tag=0,l=zc(null,l,n,u,o));else{if(n!=null){var b=n.$$typeof;if(b===D){l.tag=11,l=Zh(null,l,n,u,o);break e}else if(b===G){l.tag=14,l=ep(null,l,n,u,o);break e}}throw l=J(n)||n,Error(a(306,l,""))}}return l;case 0:return zc(n,l,l.type,l.pendingProps,o);case 1:return u=l.type,b=di(u,l.pendingProps),lp(n,l,u,b,o);case 3:e:{if(Ee(l,l.stateNode.containerInfo),n===null)throw Error(a(387));u=l.pendingProps;var w=l.memoizedState;b=w.element,vc(n,l),Fa(l,u,null,o);var _=l.memoizedState;if(u=_.cache,En(l,Mt,u),u!==w.cache&&hc(l,[Mt],o,!0),$a(),u=_.element,w.isDehydrated)if(w={element:u,isDehydrated:!1,cache:_.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=rp(n,l,u,o);break e}else if(u!==b){b=ks(Error(a(424)),l),La(b),l=rp(n,l,u,o);break e}else{switch(n=l.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(bt=As(n.firstChild),Ft=l,Xe=!0,kn=null,Cs=!0,o=sh(l,null,u,o),l.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(si(),u===b){l=rn(n,l,o);break e}Jt(n,l,u,o)}l=l.child}return l;case 26:return br(n,l),n===null?(o=Nm(l.type,null,l.pendingProps,null))?l.memoizedState=o:Xe||(o=l.type,n=l.pendingProps,u=Or(ge.current).createElement(o),u[$t]=l,u[is]=n,Wt(u,o,n),Gt(u),l.stateNode=u):l.memoizedState=Nm(l.type,n.memoizedProps,l.pendingProps,n.memoizedState),null;case 27:return ye(l),n===null&&Xe&&(u=l.stateNode=vm(l.type,l.pendingProps,ge.current),Ft=l,Cs=!0,b=bt,Gn(l.type)?(Id=b,bt=As(u.firstChild)):bt=b),Jt(n,l,l.pendingProps.children,o),br(n,l),n===null&&(l.flags|=4194304),l.child;case 5:return n===null&&Xe&&((b=u=bt)&&(u=Ny(u,l.type,l.pendingProps,Cs),u!==null?(l.stateNode=u,Ft=l,bt=As(u.firstChild),Cs=!1,b=!0):b=!1),b||Tn(l)),ye(l),b=l.type,w=l.pendingProps,_=n!==null?n.memoizedProps:null,u=w.children,Ed(b,w)?u=null:_!==null&&Ed(b,_)&&(l.flags|=32),l.memoizedState!==null&&(b=Tc(n,l,Pv,null,null,o),ul._currentValue=b),br(n,l),Jt(n,l,u,o),l.child;case 6:return n===null&&Xe&&((n=o=bt)&&(o=Sy(o,l.pendingProps,Cs),o!==null?(l.stateNode=o,Ft=l,bt=null,n=!0):n=!1),n||Tn(l)),null;case 13:return op(n,l,o);case 4:return Ee(l,l.stateNode.containerInfo),u=l.pendingProps,n===null?l.child=oi(l,null,u,o):Jt(n,l,u,o),l.child;case 11:return Zh(n,l,l.type,l.pendingProps,o);case 7:return Jt(n,l,l.pendingProps,o),l.child;case 8:return Jt(n,l,l.pendingProps.children,o),l.child;case 12:return Jt(n,l,l.pendingProps.children,o),l.child;case 10:return u=l.pendingProps,En(l,l.type,u.value),Jt(n,l,u.children,o),l.child;case 9:return b=l.type._context,u=l.pendingProps.children,ii(l),b=zt(b),u=u(b),l.flags|=1,Jt(n,l,u,o),l.child;case 14:return ep(n,l,l.type,l.pendingProps,o);case 15:return tp(n,l,l.type,l.pendingProps,o);case 19:return dp(n,l,o);case 31:return Fv(n,l,o);case 22:return sp(n,l,o,l.pendingProps);case 24:return ii(l),u=zt(Mt),n===null?(b=xc(),b===null&&(b=mt,w=pc(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=o),b=w),l.memoizedState={parent:u,cache:b},bc(l),En(l,Mt,b)):((n.lanes&o)!==0&&(vc(n,l),Fa(l,null,null,o),$a()),b=n.memoizedState,w=l.memoizedState,b.parent!==u?(b={parent:u,cache:u},l.memoizedState=b,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=b),En(l,Mt,u)):(u=w.cache,En(l,Mt,u),u!==b.cache&&hc(l,[Mt],o,!0))),Jt(n,l,l.pendingProps.children,o),l.child;case 29:throw l.pendingProps}throw Error(a(156,l.tag))}function on(n){n.flags|=4}function ed(n,l,o,u,b){if((l=(n.mode&32)!==0)&&(l=!1),l){if(n.flags|=16777216,(b&335544128)===b)if(n.stateNode.complete)n.flags|=8192;else if(Lp())n.flags|=8192;else throw ri=nr,gc}else n.flags&=-16777217}function fp(n,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Em(l))if(Lp())n.flags|=8192;else throw ri=nr,gc}function yr(n,l){l!==null&&(n.flags|=4),n.flags&16384&&(l=n.tag!==22?fe():536870912,n.lanes|=l,Ki|=l)}function Xa(n,l){if(!Xe)switch(n.tailMode){case"hidden":l=n.tail;for(var o=null;l!==null;)l.alternate!==null&&(o=l),l=l.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?l||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function vt(n){var l=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(l)for(var b=n.child;b!==null;)o|=b.lanes|b.childLanes,u|=b.subtreeFlags&65011712,u|=b.flags&65011712,b.return=n,b=b.sibling;else for(b=n.child;b!==null;)o|=b.lanes|b.childLanes,u|=b.subtreeFlags,u|=b.flags,b.return=n,b=b.sibling;return n.subtreeFlags|=u,n.childLanes=o,l}function Jv(n,l,o){var u=l.pendingProps;switch(oc(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(l),null;case 1:return vt(l),null;case 3:return o=l.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),nn(Mt),Q(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Pi(l)?on(l):n===null||n.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,dc())),vt(l),null;case 26:var b=l.type,w=l.memoizedState;return n===null?(on(l),w!==null?(vt(l),fp(l,w)):(vt(l),ed(l,b,null,u,o))):w?w!==n.memoizedState?(on(l),vt(l),fp(l,w)):(vt(l),l.flags&=-16777217):(n=n.memoizedProps,n!==u&&on(l),vt(l),ed(l,b,n,u,o)),null;case 27:if(je(l),o=ge.current,b=l.type,n!==null&&l.stateNode!=null)n.memoizedProps!==u&&on(l);else{if(!u){if(l.stateNode===null)throw Error(a(166));return vt(l),null}n=ve.current,Pi(l)?Ff(l):(n=vm(b,u,o),l.stateNode=n,on(l))}return vt(l),null;case 5:if(je(l),b=l.type,n!==null&&l.stateNode!=null)n.memoizedProps!==u&&on(l);else{if(!u){if(l.stateNode===null)throw Error(a(166));return vt(l),null}if(w=ve.current,Pi(l))Ff(l);else{var _=Or(ge.current);switch(w){case 1:w=_.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=_.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=_.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=_.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=_.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?w.multiple=!0:u.size&&(w.size=u.size);break;default:w=typeof u.is=="string"?_.createElement(b,{is:u.is}):_.createElement(b)}}w[$t]=l,w[is]=u;e:for(_=l.child;_!==null;){if(_.tag===5||_.tag===6)w.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===l)break e;for(;_.sibling===null;){if(_.return===null||_.return===l)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}l.stateNode=w;e:switch(Wt(w,b,u),b){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&on(l)}}return vt(l),ed(l,l.type,n===null?null:n.memoizedProps,l.pendingProps,o),null;case 6:if(n&&l.stateNode!=null)n.memoizedProps!==u&&on(l);else{if(typeof u!="string"&&l.stateNode===null)throw Error(a(166));if(n=ge.current,Pi(l)){if(n=l.stateNode,o=l.memoizedProps,u=null,b=Ft,b!==null)switch(b.tag){case 27:case 5:u=b.memoizedProps}n[$t]=l,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||om(n.nodeValue,o)),n||Tn(l,!0)}else n=Or(n).createTextNode(u),n[$t]=l,l.stateNode=n}return vt(l),null;case 31:if(o=l.memoizedState,n===null||n.memoizedState!==null){if(u=Pi(l),o!==null){if(n===null){if(!u)throw Error(a(318));if(n=l.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[$t]=l}else si(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;vt(l),n=!1}else o=dc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return l.flags&256?(ms(l),l):(ms(l),null);if((l.flags&128)!==0)throw Error(a(558))}return vt(l),null;case 13:if(u=l.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(b=Pi(l),u!==null&&u.dehydrated!==null){if(n===null){if(!b)throw Error(a(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(a(317));b[$t]=l}else si(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;vt(l),b=!1}else b=dc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=b),b=!0;if(!b)return l.flags&256?(ms(l),l):(ms(l),null)}return ms(l),(l.flags&128)!==0?(l.lanes=o,l):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=l.child,b=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(b=u.alternate.memoizedState.cachePool.pool),w=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(w=u.memoizedState.cachePool.pool),w!==b&&(u.flags|=2048)),o!==n&&o&&(l.child.flags|=8192),yr(l,l.updateQueue),vt(l),null);case 4:return Q(),n===null&&Nd(l.stateNode.containerInfo),vt(l),null;case 10:return nn(l.type),vt(l),null;case 19:if($(Ct),u=l.memoizedState,u===null)return vt(l),null;if(b=(l.flags&128)!==0,w=u.rendering,w===null)if(b)Xa(u,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=l.child;n!==null;){if(w=rr(n),w!==null){for(l.flags|=128,Xa(u,!1),n=w.updateQueue,l.updateQueue=n,yr(l,n),l.subtreeFlags=0,n=o,o=l.child;o!==null;)Gf(o,n),o=o.sibling;return re(Ct,Ct.current&1|2),Xe&&tn(l,u.treeForkCount),l.child}n=n.sibling}u.tail!==null&&be()>kr&&(l.flags|=128,b=!0,Xa(u,!1),l.lanes=4194304)}else{if(!b)if(n=rr(w),n!==null){if(l.flags|=128,b=!0,n=n.updateQueue,l.updateQueue=n,yr(l,n),Xa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!w.alternate&&!Xe)return vt(l),null}else 2*be()-u.renderingStartTime>kr&&o!==536870912&&(l.flags|=128,b=!0,Xa(u,!1),l.lanes=4194304);u.isBackwards?(w.sibling=l.child,l.child=w):(n=u.last,n!==null?n.sibling=w:l.child=w,u.last=w)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=be(),n.sibling=null,o=Ct.current,re(Ct,b?o&1|2:o&1),Xe&&tn(l,u.treeForkCount),n):(vt(l),null);case 22:case 23:return ms(l),Sc(),u=l.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(l.flags|=8192):u&&(l.flags|=8192),u?(o&536870912)!==0&&(l.flags&128)===0&&(vt(l),l.subtreeFlags&6&&(l.flags|=8192)):vt(l),o=l.updateQueue,o!==null&&yr(l,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==o&&(l.flags|=2048),n!==null&&$(ai),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),l.memoizedState.cache!==o&&(l.flags|=2048),nn(Mt),vt(l),null;case 25:return null;case 30:return null}throw Error(a(156,l.tag))}function Wv(n,l){switch(oc(l),l.tag){case 1:return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 3:return nn(Mt),Q(),n=l.flags,(n&65536)!==0&&(n&128)===0?(l.flags=n&-65537|128,l):null;case 26:case 27:case 5:return je(l),null;case 31:if(l.memoizedState!==null){if(ms(l),l.alternate===null)throw Error(a(340));si()}return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 13:if(ms(l),n=l.memoizedState,n!==null&&n.dehydrated!==null){if(l.alternate===null)throw Error(a(340));si()}return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 19:return $(Ct),null;case 4:return Q(),null;case 10:return nn(l.type),null;case 22:case 23:return ms(l),Sc(),n!==null&&$(ai),n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 24:return nn(Mt),null;case 25:return null;default:return null}}function hp(n,l){switch(oc(l),l.tag){case 3:nn(Mt),Q();break;case 26:case 27:case 5:je(l);break;case 4:Q();break;case 31:l.memoizedState!==null&&ms(l);break;case 13:ms(l);break;case 19:$(Ct);break;case 10:nn(l.type);break;case 22:case 23:ms(l),Sc(),n!==null&&$(ai);break;case 24:nn(Mt)}}function Qa(n,l){try{var o=l.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var b=u.next;o=b;do{if((o.tag&n)===n){u=void 0;var w=o.create,_=o.inst;u=w(),_.destroy=u}o=o.next}while(o!==b)}}catch(I){ot(l,l.return,I)}}function Mn(n,l,o){try{var u=l.updateQueue,b=u!==null?u.lastEffect:null;if(b!==null){var w=b.next;u=w;do{if((u.tag&n)===n){var _=u.inst,I=_.destroy;if(I!==void 0){_.destroy=void 0,b=l;var L=o,X=I;try{X()}catch(ae){ot(b,L,ae)}}}u=u.next}while(u!==w)}}catch(ae){ot(l,l.return,ae)}}function pp(n){var l=n.updateQueue;if(l!==null){var o=n.stateNode;try{ih(l,o)}catch(u){ot(n,n.return,u)}}}function mp(n,l,o){o.props=di(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){ot(n,l,u)}}function Za(n,l){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(b){ot(n,l,b)}}function Ys(n,l){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(b){ot(n,l,b)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(b){ot(n,l,b)}else o.current=null}function xp(n){var l=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(b){ot(n,n.return,b)}}function td(n,l,o){try{var u=n.stateNode;xy(u,n.type,o,l),u[is]=l}catch(b){ot(n,n.return,b)}}function gp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Gn(n.type)||n.tag===4}function sd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Gn(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function nd(n,l,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,l?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,l):(l=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.appendChild(n),o=o._reactRootContainer,o!=null||l.onclick!==null||(l.onclick=Qs));else if(u!==4&&(u===27&&Gn(n.type)&&(o=n.stateNode,l=null),n=n.child,n!==null))for(nd(n,l,o),n=n.sibling;n!==null;)nd(n,l,o),n=n.sibling}function wr(n,l,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,l?o.insertBefore(n,l):o.appendChild(n);else if(u!==4&&(u===27&&Gn(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(wr(n,l,o),n=n.sibling;n!==null;)wr(n,l,o),n=n.sibling}function bp(n){var l=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,b=l.attributes;b.length;)l.removeAttributeNode(b[0]);Wt(l,u,o),l[$t]=n,l[is]=o}catch(w){ot(n,n.return,w)}}var cn=!1,Ut=!1,id=!1,vp=typeof WeakSet=="function"?WeakSet:Set,qt=null;function Yv(n,l){if(n=n.containerInfo,kd=Vr,n=Rf(n),Xo(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var b=u.anchorOffset,w=u.focusNode;u=u.focusOffset;try{o.nodeType,w.nodeType}catch{o=null;break e}var _=0,I=-1,L=-1,X=0,ae=0,ue=n,Z=null;t:for(;;){for(var se;ue!==o||b!==0&&ue.nodeType!==3||(I=_+b),ue!==w||u!==0&&ue.nodeType!==3||(L=_+u),ue.nodeType===3&&(_+=ue.nodeValue.length),(se=ue.firstChild)!==null;)Z=ue,ue=se;for(;;){if(ue===n)break t;if(Z===o&&++X===b&&(I=_),Z===w&&++ae===u&&(L=_),(se=ue.nextSibling)!==null)break;ue=Z,Z=ue.parentNode}ue=se}o=I===-1||L===-1?null:{start:I,end:L}}else o=null}o=o||{start:0,end:0}}else o=null;for(Td={focusedElem:n,selectionRange:o},Vr=!1,qt=l;qt!==null;)if(l=qt,n=l.child,(l.subtreeFlags&1028)!==0&&n!==null)n.return=l,qt=n;else for(;qt!==null;){switch(l=qt,w=l.alternate,n=l.flags,l.tag){case 0:if((n&4)!==0&&(n=l.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)b=n[o],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,o=l,b=w.memoizedProps,w=w.memoizedState,u=o.stateNode;try{var ke=di(o.type,b);n=u.getSnapshotBeforeUpdate(ke,w),u.__reactInternalSnapshotBeforeUpdate=n}catch(De){ot(o,o.return,De)}}break;case 3:if((n&1024)!==0){if(n=l.stateNode.containerInfo,o=n.nodeType,o===9)jd(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":jd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=l.sibling,n!==null){n.return=l.return,qt=n;break}qt=l.return}}function yp(n,l,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:un(n,o),u&4&&Qa(5,o);break;case 1:if(un(n,o),u&4)if(n=o.stateNode,l===null)try{n.componentDidMount()}catch(_){ot(o,o.return,_)}else{var b=di(o.type,l.memoizedProps);l=l.memoizedState;try{n.componentDidUpdate(b,l,n.__reactInternalSnapshotBeforeUpdate)}catch(_){ot(o,o.return,_)}}u&64&&pp(o),u&512&&Za(o,o.return);break;case 3:if(un(n,o),u&64&&(n=o.updateQueue,n!==null)){if(l=null,o.child!==null)switch(o.child.tag){case 27:case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}try{ih(n,l)}catch(_){ot(o,o.return,_)}}break;case 27:l===null&&u&4&&bp(o);case 26:case 5:un(n,o),l===null&&u&4&&xp(o),u&512&&Za(o,o.return);break;case 12:un(n,o);break;case 31:un(n,o),u&4&&Sp(n,o);break;case 13:un(n,o),u&4&&_p(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=iy.bind(null,o),_y(n,o))));break;case 22:if(u=o.memoizedState!==null||cn,!u){l=l!==null&&l.memoizedState!==null||Ut,b=cn;var w=Ut;cn=u,(Ut=l)&&!w?fn(n,o,(o.subtreeFlags&8772)!==0):un(n,o),cn=b,Ut=w}break;case 30:break;default:un(n,o)}}function wp(n){var l=n.alternate;l!==null&&(n.alternate=null,wp(l)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(l=n.stateNode,l!==null&&Do(l)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var yt=null,ls=!1;function dn(n,l,o){for(o=o.child;o!==null;)Np(n,l,o),o=o.sibling}function Np(n,l,o){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(ws,o)}catch{}switch(o.tag){case 26:Ut||Ys(o,l),dn(n,l,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ut||Ys(o,l);var u=yt,b=ls;Gn(o.type)&&(yt=o.stateNode,ls=!1),dn(n,l,o),ol(o.stateNode),yt=u,ls=b;break;case 5:Ut||Ys(o,l);case 6:if(u=yt,b=ls,yt=null,dn(n,l,o),yt=u,ls=b,yt!==null)if(ls)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(o.stateNode)}catch(w){ot(o,l,w)}else try{yt.removeChild(o.stateNode)}catch(w){ot(o,l,w)}break;case 18:yt!==null&&(ls?(n=yt,pm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),ia(n)):pm(yt,o.stateNode));break;case 4:u=yt,b=ls,yt=o.stateNode.containerInfo,ls=!0,dn(n,l,o),yt=u,ls=b;break;case 0:case 11:case 14:case 15:Mn(2,o,l),Ut||Mn(4,o,l),dn(n,l,o);break;case 1:Ut||(Ys(o,l),u=o.stateNode,typeof u.componentWillUnmount=="function"&&mp(o,l,u)),dn(n,l,o);break;case 21:dn(n,l,o);break;case 22:Ut=(u=Ut)||o.memoizedState!==null,dn(n,l,o),Ut=u;break;default:dn(n,l,o)}}function Sp(n,l){if(l.memoizedState===null&&(n=l.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ia(n)}catch(o){ot(l,l.return,o)}}}function _p(n,l){if(l.memoizedState===null&&(n=l.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ia(n)}catch(o){ot(l,l.return,o)}}function Kv(n){switch(n.tag){case 31:case 13:case 19:var l=n.stateNode;return l===null&&(l=n.stateNode=new vp),l;case 22:return n=n.stateNode,l=n._retryCache,l===null&&(l=n._retryCache=new vp),l;default:throw Error(a(435,n.tag))}}function Nr(n,l){var o=Kv(n);l.forEach(function(u){if(!o.has(u)){o.add(u);var b=ay.bind(null,n,u);u.then(b,b)}})}function rs(n,l){var o=l.deletions;if(o!==null)for(var u=0;u<o.length;u++){var b=o[u],w=n,_=l,I=_;e:for(;I!==null;){switch(I.tag){case 27:if(Gn(I.type)){yt=I.stateNode,ls=!1;break e}break;case 5:yt=I.stateNode,ls=!1;break e;case 3:case 4:yt=I.stateNode.containerInfo,ls=!0;break e}I=I.return}if(yt===null)throw Error(a(160));Np(w,_,b),yt=null,ls=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)kp(l,n),l=l.sibling}var Ps=null;function kp(n,l){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:rs(l,n),os(n),u&4&&(Mn(3,n,n.return),Qa(3,n),Mn(5,n,n.return));break;case 1:rs(l,n),os(n),u&512&&(Ut||o===null||Ys(o,o.return)),u&64&&cn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var b=Ps;if(rs(l,n),os(n),u&512&&(Ut||o===null||Ys(o,o.return)),u&4){var w=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,b=b.ownerDocument||b;t:switch(u){case"title":w=b.getElementsByTagName("title")[0],(!w||w[Ta]||w[$t]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(u),b.head.insertBefore(w,b.querySelector("head > title"))),Wt(w,u,o),w[$t]=n,Gt(w),u=w;break e;case"link":var _=km("link","href",b).get(u+(o.href||""));if(_){for(var I=0;I<_.length;I++)if(w=_[I],w.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&w.getAttribute("rel")===(o.rel==null?null:o.rel)&&w.getAttribute("title")===(o.title==null?null:o.title)&&w.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(I,1);break t}}w=b.createElement(u),Wt(w,u,o),b.head.appendChild(w);break;case"meta":if(_=km("meta","content",b).get(u+(o.content||""))){for(I=0;I<_.length;I++)if(w=_[I],w.getAttribute("content")===(o.content==null?null:""+o.content)&&w.getAttribute("name")===(o.name==null?null:o.name)&&w.getAttribute("property")===(o.property==null?null:o.property)&&w.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&w.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(I,1);break t}}w=b.createElement(u),Wt(w,u,o),b.head.appendChild(w);break;default:throw Error(a(468,u))}w[$t]=n,Gt(w),u=w}n.stateNode=u}else Tm(b,n.type,n.stateNode);else n.stateNode=_m(b,u,n.memoizedProps);else w!==u?(w===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):w.count--,u===null?Tm(b,n.type,n.stateNode):_m(b,u,n.memoizedProps)):u===null&&n.stateNode!==null&&td(n,n.memoizedProps,o.memoizedProps)}break;case 27:rs(l,n),os(n),u&512&&(Ut||o===null||Ys(o,o.return)),o!==null&&u&4&&td(n,n.memoizedProps,o.memoizedProps);break;case 5:if(rs(l,n),os(n),u&512&&(Ut||o===null||Ys(o,o.return)),n.flags&32){b=n.stateNode;try{Ei(b,"")}catch(ke){ot(n,n.return,ke)}}u&4&&n.stateNode!=null&&(b=n.memoizedProps,td(n,b,o!==null?o.memoizedProps:b)),u&1024&&(id=!0);break;case 6:if(rs(l,n),os(n),u&4){if(n.stateNode===null)throw Error(a(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(ke){ot(n,n.return,ke)}}break;case 3:if(Lr=null,b=Ps,Ps=Ur(l.containerInfo),rs(l,n),Ps=b,os(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ia(l.containerInfo)}catch(ke){ot(n,n.return,ke)}id&&(id=!1,Tp(n));break;case 4:u=Ps,Ps=Ur(n.stateNode.containerInfo),rs(l,n),os(n),Ps=u;break;case 12:rs(l,n),os(n);break;case 31:rs(l,n),os(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Nr(n,u)));break;case 13:rs(l,n),os(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(_r=be()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Nr(n,u)));break;case 22:b=n.memoizedState!==null;var L=o!==null&&o.memoizedState!==null,X=cn,ae=Ut;if(cn=X||b,Ut=ae||L,rs(l,n),Ut=ae,cn=X,os(n),u&8192)e:for(l=n.stateNode,l._visibility=b?l._visibility&-2:l._visibility|1,b&&(o===null||L||cn||Ut||ui(n)),o=null,l=n;;){if(l.tag===5||l.tag===26){if(o===null){L=o=l;try{if(w=L.stateNode,b)_=w.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{I=L.stateNode;var ue=L.memoizedProps.style,Z=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;I.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(ke){ot(L,L.return,ke)}}}else if(l.tag===6){if(o===null){L=l;try{L.stateNode.nodeValue=b?"":L.memoizedProps}catch(ke){ot(L,L.return,ke)}}}else if(l.tag===18){if(o===null){L=l;try{var se=L.stateNode;b?mm(se,!0):mm(L.stateNode,!1)}catch(ke){ot(L,L.return,ke)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===n)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break e;for(;l.sibling===null;){if(l.return===null||l.return===n)break e;o===l&&(o=null),l=l.return}o===l&&(o=null),l.sibling.return=l.return,l=l.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Nr(n,o))));break;case 19:rs(l,n),os(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Nr(n,u)));break;case 30:break;case 21:break;default:rs(l,n),os(n)}}function os(n){var l=n.flags;if(l&2){try{for(var o,u=n.return;u!==null;){if(gp(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var b=o.stateNode,w=sd(n);wr(n,w,b);break;case 5:var _=o.stateNode;o.flags&32&&(Ei(_,""),o.flags&=-33);var I=sd(n);wr(n,I,_);break;case 3:case 4:var L=o.stateNode.containerInfo,X=sd(n);nd(n,X,L);break;default:throw Error(a(161))}}catch(ae){ot(n,n.return,ae)}n.flags&=-3}l&4096&&(n.flags&=-4097)}function Tp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var l=n;Tp(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),n=n.sibling}}function un(n,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)yp(n,l.alternate,l),l=l.sibling}function ui(n){for(n=n.child;n!==null;){var l=n;switch(l.tag){case 0:case 11:case 14:case 15:Mn(4,l,l.return),ui(l);break;case 1:Ys(l,l.return);var o=l.stateNode;typeof o.componentWillUnmount=="function"&&mp(l,l.return,o),ui(l);break;case 27:ol(l.stateNode);case 26:case 5:Ys(l,l.return),ui(l);break;case 22:l.memoizedState===null&&ui(l);break;case 30:ui(l);break;default:ui(l)}n=n.sibling}}function fn(n,l,o){for(o=o&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var u=l.alternate,b=n,w=l,_=w.flags;switch(w.tag){case 0:case 11:case 15:fn(b,w,o),Qa(4,w);break;case 1:if(fn(b,w,o),u=w,b=u.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(X){ot(u,u.return,X)}if(u=w,b=u.updateQueue,b!==null){var I=u.stateNode;try{var L=b.shared.hiddenCallbacks;if(L!==null)for(b.shared.hiddenCallbacks=null,b=0;b<L.length;b++)nh(L[b],I)}catch(X){ot(u,u.return,X)}}o&&_&64&&pp(w),Za(w,w.return);break;case 27:bp(w);case 26:case 5:fn(b,w,o),o&&u===null&&_&4&&xp(w),Za(w,w.return);break;case 12:fn(b,w,o);break;case 31:fn(b,w,o),o&&_&4&&Sp(b,w);break;case 13:fn(b,w,o),o&&_&4&&_p(b,w);break;case 22:w.memoizedState===null&&fn(b,w,o),Za(w,w.return);break;case 30:break;default:fn(b,w,o)}l=l.sibling}}function ad(n,l){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(n=l.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Ba(o))}function ld(n,l){n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&Ba(n))}function Ls(n,l,o,u){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ep(n,l,o,u),l=l.sibling}function Ep(n,l,o,u){var b=l.flags;switch(l.tag){case 0:case 11:case 15:Ls(n,l,o,u),b&2048&&Qa(9,l);break;case 1:Ls(n,l,o,u);break;case 3:Ls(n,l,o,u),b&2048&&(n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&Ba(n)));break;case 12:if(b&2048){Ls(n,l,o,u),n=l.stateNode;try{var w=l.memoizedProps,_=w.id,I=w.onPostCommit;typeof I=="function"&&I(_,l.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){ot(l,l.return,L)}}else Ls(n,l,o,u);break;case 31:Ls(n,l,o,u);break;case 13:Ls(n,l,o,u);break;case 23:break;case 22:w=l.stateNode,_=l.alternate,l.memoizedState!==null?w._visibility&2?Ls(n,l,o,u):el(n,l):w._visibility&2?Ls(n,l,o,u):(w._visibility|=2,Ji(n,l,o,u,(l.subtreeFlags&10256)!==0||!1)),b&2048&&ad(_,l);break;case 24:Ls(n,l,o,u),b&2048&&ld(l.alternate,l);break;default:Ls(n,l,o,u)}}function Ji(n,l,o,u,b){for(b=b&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=n,_=l,I=o,L=u,X=_.flags;switch(_.tag){case 0:case 11:case 15:Ji(w,_,I,L,b),Qa(8,_);break;case 23:break;case 22:var ae=_.stateNode;_.memoizedState!==null?ae._visibility&2?Ji(w,_,I,L,b):el(w,_):(ae._visibility|=2,Ji(w,_,I,L,b)),b&&X&2048&&ad(_.alternate,_);break;case 24:Ji(w,_,I,L,b),b&&X&2048&&ld(_.alternate,_);break;default:Ji(w,_,I,L,b)}l=l.sibling}}function el(n,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var o=n,u=l,b=u.flags;switch(u.tag){case 22:el(o,u),b&2048&&ad(u.alternate,u);break;case 24:el(o,u),b&2048&&ld(u.alternate,u);break;default:el(o,u)}l=l.sibling}}var tl=8192;function Wi(n,l,o){if(n.subtreeFlags&tl)for(n=n.child;n!==null;)Cp(n,l,o),n=n.sibling}function Cp(n,l,o){switch(n.tag){case 26:Wi(n,l,o),n.flags&tl&&n.memoizedState!==null&&Uy(o,Ps,n.memoizedState,n.memoizedProps);break;case 5:Wi(n,l,o);break;case 3:case 4:var u=Ps;Ps=Ur(n.stateNode.containerInfo),Wi(n,l,o),Ps=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=tl,tl=16777216,Wi(n,l,o),tl=u):Wi(n,l,o));break;default:Wi(n,l,o)}}function jp(n){var l=n.alternate;if(l!==null&&(n=l.child,n!==null)){l.child=null;do l=n.sibling,n.sibling=null,n=l;while(n!==null)}}function sl(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var o=0;o<l.length;o++){var u=l[o];qt=u,Rp(u,n)}jp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ap(n),n=n.sibling}function Ap(n){switch(n.tag){case 0:case 11:case 15:sl(n),n.flags&2048&&Mn(9,n,n.return);break;case 3:sl(n);break;case 12:sl(n);break;case 22:var l=n.stateNode;n.memoizedState!==null&&l._visibility&2&&(n.return===null||n.return.tag!==13)?(l._visibility&=-3,Sr(n)):sl(n);break;default:sl(n)}}function Sr(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var o=0;o<l.length;o++){var u=l[o];qt=u,Rp(u,n)}jp(n)}for(n=n.child;n!==null;){switch(l=n,l.tag){case 0:case 11:case 15:Mn(8,l,l.return),Sr(l);break;case 22:o=l.stateNode,o._visibility&2&&(o._visibility&=-3,Sr(l));break;default:Sr(l)}n=n.sibling}}function Rp(n,l){for(;qt!==null;){var o=qt;switch(o.tag){case 0:case 11:case 15:Mn(8,o,l);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ba(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,qt=u;else e:for(o=n;qt!==null;){u=qt;var b=u.sibling,w=u.return;if(wp(u),u===o){qt=null;break e}if(b!==null){b.return=w,qt=b;break e}qt=w}}}var Xv={getCacheForType:function(n){var l=zt(Mt),o=l.data.get(n);return o===void 0&&(o=n(),l.data.set(n,o)),o},cacheSignal:function(){return zt(Mt).controller.signal}},Qv=typeof WeakMap=="function"?WeakMap:Map,it=0,mt=null,ze=null,Ye=0,rt=0,xs=null,Dn=!1,Yi=!1,rd=!1,hn=0,_t=0,On=0,fi=0,od=0,gs=0,Ki=0,nl=null,cs=null,cd=!1,_r=0,Ip=0,kr=1/0,Tr=null,Un=null,Lt=0,Pn=null,Xi=null,pn=0,dd=0,ud=null,Mp=null,il=0,fd=null;function bs(){return(it&2)!==0&&Ye!==0?Ye&-Ye:U.T!==null?bd():Wu()}function Dp(){if(gs===0)if((Ye&536870912)===0||Xe){var n=Re;Re<<=1,(Re&3932160)===0&&(Re=262144),gs=n}else gs=536870912;return n=ps.current,n!==null&&(n.flags|=32),gs}function ds(n,l,o){(n===mt&&(rt===2||rt===9)||n.cancelPendingCommit!==null)&&(Qi(n,0),Ln(n,Ye,gs,!1)),lt(n,o),((it&2)===0||n!==mt)&&(n===mt&&((it&2)===0&&(fi|=o),_t===4&&Ln(n,Ye,gs,!1)),Ks(n))}function Op(n,l,o){if((it&6)!==0)throw Error(a(327));var u=!o&&(l&127)===0&&(l&n.expiredLanes)===0||We(n,l),b=u?ty(n,l):pd(n,l,!0),w=u;do{if(b===0){Yi&&!u&&Ln(n,l,0,!1);break}else{if(o=n.current.alternate,w&&!Zv(o)){b=pd(n,l,!1),w=!1;continue}if(b===2){if(w=l,n.errorRecoveryDisabledLanes&w)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){l=_;e:{var I=n;b=nl;var L=I.current.memoizedState.isDehydrated;if(L&&(Qi(I,_).flags|=256),_=pd(I,_,!1),_!==2){if(rd&&!L){I.errorRecoveryDisabledLanes|=w,fi|=w,b=4;break e}w=cs,cs=b,w!==null&&(cs===null?cs=w:cs.push.apply(cs,w))}b=_}if(w=!1,b!==2)continue}}if(b===1){Qi(n,0),Ln(n,l,0,!0);break}e:{switch(u=n,w=b,w){case 0:case 1:throw Error(a(345));case 4:if((l&4194048)!==l)break;case 6:Ln(u,l,gs,!Dn);break e;case 2:cs=null;break;case 3:case 5:break;default:throw Error(a(329))}if((l&62914560)===l&&(b=_r+300-be(),10<b)){if(Ln(u,l,gs,!Dn),Ze(u,0,!0)!==0)break e;pn=l,u.timeoutHandle=fm(Up.bind(null,u,o,cs,Tr,cd,l,gs,fi,Ki,Dn,w,"Throttled",-0,0),b);break e}Up(u,o,cs,Tr,cd,l,gs,fi,Ki,Dn,w,null,-0,0)}}break}while(!0);Ks(n)}function Up(n,l,o,u,b,w,_,I,L,X,ae,ue,Z,se){if(n.timeoutHandle=-1,ue=l.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qs},Cp(l,w,ue);var ke=(w&62914560)===w?_r-be():(w&4194048)===w?Ip-be():0;if(ke=Py(ue,ke),ke!==null){pn=w,n.cancelPendingCommit=ke($p.bind(null,n,l,w,o,u,b,_,I,L,ae,ue,null,Z,se)),Ln(n,w,_,!X);return}}$p(n,l,w,o,u,b,_,I,L)}function Zv(n){for(var l=n;;){var o=l.tag;if((o===0||o===11||o===15)&&l.flags&16384&&(o=l.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var b=o[u],w=b.getSnapshot;b=b.value;try{if(!fs(w(),b))return!1}catch{return!1}}if(o=l.child,l.subtreeFlags&16384&&o!==null)o.return=l,l=o;else{if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ln(n,l,o,u){l&=~od,l&=~fi,n.suspendedLanes|=l,n.pingedLanes&=~l,u&&(n.warmLanes|=l),u=n.expirationTimes;for(var b=l;0<b;){var w=31-me(b),_=1<<w;u[w]=-1,b&=~_}o!==0&&Yn(n,o,l)}function Er(){return(it&6)===0?(al(0),!1):!0}function hd(){if(ze!==null){if(rt===0)var n=ze.return;else n=ze,sn=ni=null,jc(n),Vi=null,qa=0,n=ze;for(;n!==null;)hp(n.alternate,n),n=n.return;ze=null}}function Qi(n,l){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,vy(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),pn=0,hd(),mt=n,ze=o=en(n.current,null),Ye=l,rt=0,xs=null,Dn=!1,Yi=We(n,l),rd=!1,Ki=gs=od=fi=On=_t=0,cs=nl=null,cd=!1,(l&8)!==0&&(l|=l&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=l;0<u;){var b=31-me(u),w=1<<b;l|=n[b],u&=~w}return hn=l,Wl(),o}function Pp(n,l){He=null,U.H=Ya,l===qi||l===sr?(l=Zf(),rt=3):l===gc?(l=Zf(),rt=4):rt=l===Fc?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,xs=l,ze===null&&(_t=1,xr(n,ks(l,n.current)))}function Lp(){var n=ps.current;return n===null?!0:(Ye&4194048)===Ye?js===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?n===js:!1}function Bp(){var n=U.H;return U.H=Ya,n===null?Ya:n}function Gp(){var n=U.A;return U.A=Xv,n}function Cr(){_t=4,Dn||(Ye&4194048)!==Ye&&ps.current!==null||(Yi=!0),(On&134217727)===0&&(fi&134217727)===0||mt===null||Ln(mt,Ye,gs,!1)}function pd(n,l,o){var u=it;it|=2;var b=Bp(),w=Gp();(mt!==n||Ye!==l)&&(Tr=null,Qi(n,l)),l=!1;var _=_t;e:do try{if(rt!==0&&ze!==null){var I=ze,L=xs;switch(rt){case 8:hd(),_=6;break e;case 3:case 2:case 9:case 6:ps.current===null&&(l=!0);var X=rt;if(rt=0,xs=null,Zi(n,I,L,X),o&&Yi){_=0;break e}break;default:X=rt,rt=0,xs=null,Zi(n,I,L,X)}}ey(),_=_t;break}catch(ae){Pp(n,ae)}while(!0);return l&&n.shellSuspendCounter++,sn=ni=null,it=u,U.H=b,U.A=w,ze===null&&(mt=null,Ye=0,Wl()),_}function ey(){for(;ze!==null;)qp(ze)}function ty(n,l){var o=it;it|=2;var u=Bp(),b=Gp();mt!==n||Ye!==l?(Tr=null,kr=be()+500,Qi(n,l)):Yi=We(n,l);e:do try{if(rt!==0&&ze!==null){l=ze;var w=xs;t:switch(rt){case 1:rt=0,xs=null,Zi(n,l,w,1);break;case 2:case 9:if(Xf(w)){rt=0,xs=null,Vp(l);break}l=function(){rt!==2&&rt!==9||mt!==n||(rt=7),Ks(n)},w.then(l,l);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Xf(w)?(rt=0,xs=null,Vp(l)):(rt=0,xs=null,Zi(n,l,w,7));break;case 5:var _=null;switch(ze.tag){case 26:_=ze.memoizedState;case 5:case 27:var I=ze;if(_?Em(_):I.stateNode.complete){rt=0,xs=null;var L=I.sibling;if(L!==null)ze=L;else{var X=I.return;X!==null?(ze=X,jr(X)):ze=null}break t}}rt=0,xs=null,Zi(n,l,w,5);break;case 6:rt=0,xs=null,Zi(n,l,w,6);break;case 8:hd(),_t=6;break e;default:throw Error(a(462))}}sy();break}catch(ae){Pp(n,ae)}while(!0);return sn=ni=null,U.H=u,U.A=b,it=o,ze!==null?0:(mt=null,Ye=0,Wl(),_t)}function sy(){for(;ze!==null&&!de();)qp(ze)}function qp(n){var l=up(n.alternate,n,hn);n.memoizedProps=n.pendingProps,l===null?jr(n):ze=l}function Vp(n){var l=n,o=l.alternate;switch(l.tag){case 15:case 0:l=ap(o,l,l.pendingProps,l.type,void 0,Ye);break;case 11:l=ap(o,l,l.pendingProps,l.type.render,l.ref,Ye);break;case 5:jc(l);default:hp(o,l),l=ze=Gf(l,hn),l=up(o,l,hn)}n.memoizedProps=n.pendingProps,l===null?jr(n):ze=l}function Zi(n,l,o,u){sn=ni=null,jc(l),Vi=null,qa=0;var b=l.return;try{if($v(n,b,l,o,Ye)){_t=1,xr(n,ks(o,n.current)),ze=null;return}}catch(w){if(b!==null)throw ze=b,w;_t=1,xr(n,ks(o,n.current)),ze=null;return}l.flags&32768?(Xe||u===1?n=!0:Yi||(Ye&536870912)!==0?n=!1:(Dn=n=!0,(u===2||u===9||u===3||u===6)&&(u=ps.current,u!==null&&u.tag===13&&(u.flags|=16384))),Hp(l,n)):jr(l)}function jr(n){var l=n;do{if((l.flags&32768)!==0){Hp(l,Dn);return}n=l.return;var o=Jv(l.alternate,l,hn);if(o!==null){ze=o;return}if(l=l.sibling,l!==null){ze=l;return}ze=l=n}while(l!==null);_t===0&&(_t=5)}function Hp(n,l){do{var o=Wv(n.alternate,n);if(o!==null){o.flags&=32767,ze=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!l&&(n=n.sibling,n!==null)){ze=n;return}ze=n=o}while(n!==null);_t=6,ze=null}function $p(n,l,o,u,b,w,_,I,L){n.cancelPendingCommit=null;do Ar();while(Lt!==0);if((it&6)!==0)throw Error(a(327));if(l!==null){if(l===n.current)throw Error(a(177));if(w=l.lanes|l.childLanes,w|=sc,It(n,o,w,_,I,L),n===mt&&(ze=mt=null,Ye=0),Xi=l,Pn=n,pn=o,dd=w,ud=b,Mp=u,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,ly(At,function(){return Yp(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||u){u=U.T,U.T=null,b=O.p,O.p=2,_=it,it|=4;try{Yv(n,l,o)}finally{it=_,O.p=b,U.T=u}}Lt=1,Fp(),zp(),Jp()}}function Fp(){if(Lt===1){Lt=0;var n=Pn,l=Xi,o=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||o){o=U.T,U.T=null;var u=O.p;O.p=2;var b=it;it|=4;try{kp(l,n);var w=Td,_=Rf(n.containerInfo),I=w.focusedElem,L=w.selectionRange;if(_!==I&&I&&I.ownerDocument&&Af(I.ownerDocument.documentElement,I)){if(L!==null&&Xo(I)){var X=L.start,ae=L.end;if(ae===void 0&&(ae=X),"selectionStart"in I)I.selectionStart=X,I.selectionEnd=Math.min(ae,I.value.length);else{var ue=I.ownerDocument||document,Z=ue&&ue.defaultView||window;if(Z.getSelection){var se=Z.getSelection(),ke=I.textContent.length,De=Math.min(L.start,ke),ht=L.end===void 0?De:Math.min(L.end,ke);!se.extend&&De>ht&&(_=ht,ht=De,De=_);var F=jf(I,De),q=jf(I,ht);if(F&&q&&(se.rangeCount!==1||se.anchorNode!==F.node||se.anchorOffset!==F.offset||se.focusNode!==q.node||se.focusOffset!==q.offset)){var K=ue.createRange();K.setStart(F.node,F.offset),se.removeAllRanges(),De>ht?(se.addRange(K),se.extend(q.node,q.offset)):(K.setEnd(q.node,q.offset),se.addRange(K))}}}}for(ue=[],se=I;se=se.parentNode;)se.nodeType===1&&ue.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ue.length;I++){var oe=ue[I];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Vr=!!kd,Td=kd=null}finally{it=b,O.p=u,U.T=o}}n.current=l,Lt=2}}function zp(){if(Lt===2){Lt=0;var n=Pn,l=Xi,o=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||o){o=U.T,U.T=null;var u=O.p;O.p=2;var b=it;it|=4;try{yp(n,l.alternate,l)}finally{it=b,O.p=u,U.T=o}}Lt=3}}function Jp(){if(Lt===4||Lt===3){Lt=0,ce();var n=Pn,l=Xi,o=pn,u=Mp;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Lt=5:(Lt=0,Xi=Pn=null,Wp(n,n.pendingLanes));var b=n.pendingLanes;if(b===0&&(Un=null),Io(o),l=l.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(ws,l,void 0,(l.current.flags&128)===128)}catch{}if(u!==null){l=U.T,b=O.p,O.p=2,U.T=null;try{for(var w=n.onRecoverableError,_=0;_<u.length;_++){var I=u[_];w(I.value,{componentStack:I.stack})}}finally{U.T=l,O.p=b}}(pn&3)!==0&&Ar(),Ks(n),b=n.pendingLanes,(o&261930)!==0&&(b&42)!==0?n===fd?il++:(il=0,fd=n):il=0,al(0)}}function Wp(n,l){(n.pooledCacheLanes&=l)===0&&(l=n.pooledCache,l!=null&&(n.pooledCache=null,Ba(l)))}function Ar(){return Fp(),zp(),Jp(),Yp()}function Yp(){if(Lt!==5)return!1;var n=Pn,l=dd;dd=0;var o=Io(pn),u=U.T,b=O.p;try{O.p=32>o?32:o,U.T=null,o=ud,ud=null;var w=Pn,_=pn;if(Lt=0,Xi=Pn=null,pn=0,(it&6)!==0)throw Error(a(331));var I=it;if(it|=4,Ap(w.current),Ep(w,w.current,_,o),it=I,al(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(ws,w)}catch{}return!0}finally{O.p=b,U.T=u,Wp(n,l)}}function Kp(n,l,o){l=ks(o,l),l=$c(n.stateNode,l,2),n=An(n,l,2),n!==null&&(lt(n,2),Ks(n))}function ot(n,l,o){if(n.tag===3)Kp(n,n,o);else for(;l!==null;){if(l.tag===3){Kp(l,n,o);break}else if(l.tag===1){var u=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Un===null||!Un.has(u))){n=ks(o,n),o=Xh(2),u=An(l,o,2),u!==null&&(Qh(o,u,l,n),lt(u,2),Ks(u));break}}l=l.return}}function md(n,l,o){var u=n.pingCache;if(u===null){u=n.pingCache=new Qv;var b=new Set;u.set(l,b)}else b=u.get(l),b===void 0&&(b=new Set,u.set(l,b));b.has(o)||(rd=!0,b.add(o),n=ny.bind(null,n,l,o),l.then(n,n))}function ny(n,l,o){var u=n.pingCache;u!==null&&u.delete(l),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,mt===n&&(Ye&o)===o&&(_t===4||_t===3&&(Ye&62914560)===Ye&&300>be()-_r?(it&2)===0&&Qi(n,0):od|=o,Ki===Ye&&(Ki=0)),Ks(n)}function Xp(n,l){l===0&&(l=fe()),n=ei(n,l),n!==null&&(lt(n,l),Ks(n))}function iy(n){var l=n.memoizedState,o=0;l!==null&&(o=l.retryLane),Xp(n,o)}function ay(n,l){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,b=n.memoizedState;b!==null&&(o=b.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(l),Xp(n,o)}function ly(n,l){return Nt(n,l)}var Rr=null,ea=null,xd=!1,Ir=!1,gd=!1,Bn=0;function Ks(n){n!==ea&&n.next===null&&(ea===null?Rr=ea=n:ea=ea.next=n),Ir=!0,xd||(xd=!0,oy())}function al(n,l){if(!gd&&Ir){gd=!0;do for(var o=!1,u=Rr;u!==null;){if(n!==0){var b=u.pendingLanes;if(b===0)var w=0;else{var _=u.suspendedLanes,I=u.pingedLanes;w=(1<<31-me(42|n)+1)-1,w&=b&~(_&~I),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(o=!0,tm(u,w))}else w=Ye,w=Ze(u,u===mt?w:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(w&3)===0||We(u,w)||(o=!0,tm(u,w));u=u.next}while(o);gd=!1}}function ry(){Qp()}function Qp(){Ir=xd=!1;var n=0;Bn!==0&&by()&&(n=Bn);for(var l=be(),o=null,u=Rr;u!==null;){var b=u.next,w=Zp(u,l);w===0?(u.next=null,o===null?Rr=b:o.next=b,b===null&&(ea=o)):(o=u,(n!==0||(w&3)!==0)&&(Ir=!0)),u=b}Lt!==0&&Lt!==5||al(n),Bn!==0&&(Bn=0)}function Zp(n,l){for(var o=n.suspendedLanes,u=n.pingedLanes,b=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var _=31-me(w),I=1<<_,L=b[_];L===-1?((I&o)===0||(I&u)!==0)&&(b[_]=Os(I,l)):L<=l&&(n.expiredLanes|=I),w&=~I}if(l=mt,o=Ye,o=Ze(n,n===l?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===l&&(rt===2||rt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Et(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||We(n,o)){if(l=o&-o,l===n.callbackPriority)return l;switch(u!==null&&Et(u),Io(o)){case 2:case 8:o=gt;break;case 32:o=At;break;case 268435456:o=at;break;default:o=At}return u=em.bind(null,n),o=Nt(o,u),n.callbackPriority=l,n.callbackNode=o,l}return u!==null&&u!==null&&Et(u),n.callbackPriority=2,n.callbackNode=null,2}function em(n,l){if(Lt!==0&&Lt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ar()&&n.callbackNode!==o)return null;var u=Ye;return u=Ze(n,n===mt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Op(n,u,l),Zp(n,be()),n.callbackNode!=null&&n.callbackNode===o?em.bind(null,n):null)}function tm(n,l){if(Ar())return null;Op(n,l,!0)}function oy(){yy(function(){(it&6)!==0?Nt(Qe,ry):Qp()})}function bd(){if(Bn===0){var n=Bi;n===0&&(n=xe,xe<<=1,(xe&261888)===0&&(xe=256)),Bn=n}return Bn}function sm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Gl(""+n)}function nm(n,l){var o=l.ownerDocument.createElement("input");return o.name=l.name,o.value=l.value,n.id&&o.setAttribute("form",n.id),l.parentNode.insertBefore(o,l),n=new FormData(n),o.parentNode.removeChild(o),n}function cy(n,l,o,u,b){if(l==="submit"&&o&&o.stateNode===b){var w=sm((b[is]||null).action),_=u.submitter;_&&(l=(l=_[is]||null)?sm(l.formAction):_.getAttribute("formAction"),l!==null&&(w=l,_=null));var I=new $l("action","action",null,u,b);n.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Bn!==0){var L=_?nm(b,_):new FormData(b);Lc(o,{pending:!0,data:L,method:b.method,action:w},null,L)}}else typeof w=="function"&&(I.preventDefault(),L=_?nm(b,_):new FormData(b),Lc(o,{pending:!0,data:L,method:b.method,action:w},w,L))},currentTarget:b}]})}}for(var vd=0;vd<tc.length;vd++){var yd=tc[vd],dy=yd.toLowerCase(),uy=yd[0].toUpperCase()+yd.slice(1);Us(dy,"on"+uy)}Us(Df,"onAnimationEnd"),Us(Of,"onAnimationIteration"),Us(Uf,"onAnimationStart"),Us("dblclick","onDoubleClick"),Us("focusin","onFocus"),Us("focusout","onBlur"),Us(Ev,"onTransitionRun"),Us(Cv,"onTransitionStart"),Us(jv,"onTransitionCancel"),Us(Pf,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ll));function im(n,l){l=(l&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],b=u.event;u=u.listeners;e:{var w=void 0;if(l)for(var _=u.length-1;0<=_;_--){var I=u[_],L=I.instance,X=I.currentTarget;if(I=I.listener,L!==w&&b.isPropagationStopped())break e;w=I,b.currentTarget=X;try{w(b)}catch(ae){Jl(ae)}b.currentTarget=null,w=L}else for(_=0;_<u.length;_++){if(I=u[_],L=I.instance,X=I.currentTarget,I=I.listener,L!==w&&b.isPropagationStopped())break e;w=I,b.currentTarget=X;try{w(b)}catch(ae){Jl(ae)}b.currentTarget=null,w=L}}}}function Je(n,l){var o=l[Mo];o===void 0&&(o=l[Mo]=new Set);var u=n+"__bubble";o.has(u)||(am(l,n,2,!1),o.add(u))}function wd(n,l,o){var u=0;l&&(u|=4),am(o,n,u,l)}var Mr="_reactListening"+Math.random().toString(36).slice(2);function Nd(n){if(!n[Mr]){n[Mr]=!0,Xu.forEach(function(o){o!=="selectionchange"&&(fy.has(o)||wd(o,!1,n),wd(o,!0,n))});var l=n.nodeType===9?n:n.ownerDocument;l===null||l[Mr]||(l[Mr]=!0,wd("selectionchange",!1,l))}}function am(n,l,o,u){switch(Dm(l)){case 2:var b=Gy;break;case 8:b=qy;break;default:b=Pd}o=b.bind(null,l,o,n),b=void 0,!Vo||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),u?b!==void 0?n.addEventListener(l,o,{capture:!0,passive:b}):n.addEventListener(l,o,!0):b!==void 0?n.addEventListener(l,o,{passive:b}):n.addEventListener(l,o,!1)}function Sd(n,l,o,u,b){var w=u;if((l&1)===0&&(l&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var I=u.stateNode.containerInfo;if(I===b)break;if(_===4)for(_=u.return;_!==null;){var L=_.tag;if((L===3||L===4)&&_.stateNode.containerInfo===b)return;_=_.return}for(;I!==null;){if(_=Ni(I),_===null)return;if(L=_.tag,L===5||L===6||L===26||L===27){u=w=_;continue e}I=I.parentNode}}u=u.return}df(function(){var X=w,ae=Go(o),ue=[];e:{var Z=Lf.get(n);if(Z!==void 0){var se=$l,ke=n;switch(n){case"keypress":if(Vl(o)===0)break e;case"keydown":case"keyup":se=av;break;case"focusin":ke="focus",se=zo;break;case"focusout":ke="blur",se=zo;break;case"beforeblur":case"afterblur":se=zo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Jb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=ov;break;case Df:case Of:case Uf:se=Kb;break;case Pf:se=dv;break;case"scroll":case"scrollend":se=Fb;break;case"wheel":se=fv;break;case"copy":case"cut":case"paste":se=Qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=mf;break;case"toggle":case"beforetoggle":se=pv}var De=(l&4)!==0,ht=!De&&(n==="scroll"||n==="scrollend"),F=De?Z!==null?Z+"Capture":null:Z;De=[];for(var q=X,K;q!==null;){var oe=q;if(K=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||K===null||F===null||(oe=Ca(q,F),oe!=null&&De.push(rl(q,oe,K))),ht)break;q=q.return}0<De.length&&(Z=new se(Z,ke,null,o,ae),ue.push({event:Z,listeners:De}))}}if((l&7)===0){e:{if(Z=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",Z&&o!==Bo&&(ke=o.relatedTarget||o.fromElement)&&(Ni(ke)||ke[wi]))break e;if((se||Z)&&(Z=ae.window===ae?ae:(Z=ae.ownerDocument)?Z.defaultView||Z.parentWindow:window,se?(ke=o.relatedTarget||o.toElement,se=X,ke=ke?Ni(ke):null,ke!==null&&(ht=c(ke),De=ke.tag,ke!==ht||De!==5&&De!==27&&De!==6)&&(ke=null)):(se=null,ke=X),se!==ke)){if(De=hf,oe="onMouseLeave",F="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(De=mf,oe="onPointerLeave",F="onPointerEnter",q="pointer"),ht=se==null?Z:Ea(se),K=ke==null?Z:Ea(ke),Z=new De(oe,q+"leave",se,o,ae),Z.target=ht,Z.relatedTarget=K,oe=null,Ni(ae)===X&&(De=new De(F,q+"enter",ke,o,ae),De.target=K,De.relatedTarget=ht,oe=De),ht=oe,se&&ke)t:{for(De=hy,F=se,q=ke,K=0,oe=F;oe;oe=De(oe))K++;oe=0;for(var Ie=q;Ie;Ie=De(Ie))oe++;for(;0<K-oe;)F=De(F),K--;for(;0<oe-K;)q=De(q),oe--;for(;K--;){if(F===q||q!==null&&F===q.alternate){De=F;break t}F=De(F),q=De(q)}De=null}else De=null;se!==null&&lm(ue,Z,se,De,!1),ke!==null&&ht!==null&&lm(ue,ht,ke,De,!0)}}e:{if(Z=X?Ea(X):window,se=Z.nodeName&&Z.nodeName.toLowerCase(),se==="select"||se==="input"&&Z.type==="file")var tt=Sf;else if(wf(Z))if(_f)tt=_v;else{tt=Nv;var Te=wv}else se=Z.nodeName,!se||se.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&Lo(X.elementType)&&(tt=Sf):tt=Sv;if(tt&&(tt=tt(n,X))){Nf(ue,tt,o,ae);break e}Te&&Te(n,Z,X),n==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&Po(Z,"number",Z.value)}switch(Te=X?Ea(X):window,n){case"focusin":(wf(Te)||Te.contentEditable==="true")&&(Ri=Te,Qo=X,Ua=null);break;case"focusout":Ua=Qo=Ri=null;break;case"mousedown":Zo=!0;break;case"contextmenu":case"mouseup":case"dragend":Zo=!1,If(ue,o,ae);break;case"selectionchange":if(Tv)break;case"keydown":case"keyup":If(ue,o,ae)}var $e;if(Wo)e:{switch(n){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Ai?vf(n,o)&&(Ke="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ke="onCompositionStart");Ke&&(xf&&o.locale!=="ko"&&(Ai||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Ai&&($e=uf()):(Sn=ae,Ho="value"in Sn?Sn.value:Sn.textContent,Ai=!0)),Te=Dr(X,Ke),0<Te.length&&(Ke=new pf(Ke,n,null,o,ae),ue.push({event:Ke,listeners:Te}),$e?Ke.data=$e:($e=yf(o),$e!==null&&(Ke.data=$e)))),($e=xv?gv(n,o):bv(n,o))&&(Ke=Dr(X,"onBeforeInput"),0<Ke.length&&(Te=new pf("onBeforeInput","beforeinput",null,o,ae),ue.push({event:Te,listeners:Ke}),Te.data=$e)),cy(ue,n,X,o,ae)}im(ue,l)})}function rl(n,l,o){return{instance:n,listener:l,currentTarget:o}}function Dr(n,l){for(var o=l+"Capture",u=[];n!==null;){var b=n,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=Ca(n,o),b!=null&&u.unshift(rl(n,b,w)),b=Ca(n,l),b!=null&&u.push(rl(n,b,w))),n.tag===3)return u;n=n.return}return[]}function hy(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function lm(n,l,o,u,b){for(var w=l._reactName,_=[];o!==null&&o!==u;){var I=o,L=I.alternate,X=I.stateNode;if(I=I.tag,L!==null&&L===u)break;I!==5&&I!==26&&I!==27||X===null||(L=X,b?(X=Ca(o,w),X!=null&&_.unshift(rl(o,X,L))):b||(X=Ca(o,w),X!=null&&_.push(rl(o,X,L)))),o=o.return}_.length!==0&&n.push({event:l,listeners:_})}var py=/\r\n?/g,my=/\u0000|\uFFFD/g;function rm(n){return(typeof n=="string"?n:""+n).replace(py,`
`).replace(my,"")}function om(n,l){return l=rm(l),rm(n)===l}function ft(n,l,o,u,b,w){switch(o){case"children":typeof u=="string"?l==="body"||l==="textarea"&&u===""||Ei(n,u):(typeof u=="number"||typeof u=="bigint")&&l!=="body"&&Ei(n,""+u);break;case"className":Ll(n,"class",u);break;case"tabIndex":Ll(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ll(n,o,u);break;case"style":of(n,u,w);break;case"data":if(l!=="object"){Ll(n,"data",u);break}case"src":case"href":if(u===""&&(l!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Gl(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(o==="formAction"?(l!=="input"&&ft(n,l,"name",b.name,b,null),ft(n,l,"formEncType",b.formEncType,b,null),ft(n,l,"formMethod",b.formMethod,b,null),ft(n,l,"formTarget",b.formTarget,b,null)):(ft(n,l,"encType",b.encType,b,null),ft(n,l,"method",b.method,b,null),ft(n,l,"target",b.target,b,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Gl(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Qs);break;case"onScroll":u!=null&&Je("scroll",n);break;case"onScrollEnd":u!=null&&Je("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(b.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Gl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Je("beforetoggle",n),Je("toggle",n),Pl(n,"popover",u);break;case"xlinkActuate":Xs(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Xs(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Xs(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Xs(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Xs(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Xs(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Xs(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Xs(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Xs(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Pl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Hb.get(o)||o,Pl(n,o,u))}}function _d(n,l,o,u,b,w){switch(o){case"style":of(n,u,w);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(b.children!=null)throw Error(a(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Ei(n,u):(typeof u=="number"||typeof u=="bigint")&&Ei(n,""+u);break;case"onScroll":u!=null&&Je("scroll",n);break;case"onScrollEnd":u!=null&&Je("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Qs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qu.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(b=o.endsWith("Capture"),l=o.slice(2,b?o.length-7:void 0),w=n[is]||null,w=w!=null?w[o]:null,typeof w=="function"&&n.removeEventListener(l,w,b),typeof u=="function")){typeof w!="function"&&w!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(l,u,b);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Pl(n,o,u)}}}function Wt(n,l,o){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",n),Je("load",n);var u=!1,b=!1,w;for(w in o)if(o.hasOwnProperty(w)){var _=o[w];if(_!=null)switch(w){case"src":u=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,l));default:ft(n,l,w,_,o,null)}}b&&ft(n,l,"srcSet",o.srcSet,o,null),u&&ft(n,l,"src",o.src,o,null);return;case"input":Je("invalid",n);var I=w=_=b=null,L=null,X=null;for(u in o)if(o.hasOwnProperty(u)){var ae=o[u];if(ae!=null)switch(u){case"name":b=ae;break;case"type":_=ae;break;case"checked":L=ae;break;case"defaultChecked":X=ae;break;case"value":w=ae;break;case"defaultValue":I=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,l));break;default:ft(n,l,u,ae,o,null)}}nf(n,w,I,L,X,_,b,!1);return;case"select":Je("invalid",n),u=_=w=null;for(b in o)if(o.hasOwnProperty(b)&&(I=o[b],I!=null))switch(b){case"value":w=I;break;case"defaultValue":_=I;break;case"multiple":u=I;default:ft(n,l,b,I,o,null)}l=w,o=_,n.multiple=!!u,l!=null?Ti(n,!!u,l,!1):o!=null&&Ti(n,!!u,o,!0);return;case"textarea":Je("invalid",n),w=b=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(I=o[_],I!=null))switch(_){case"value":u=I;break;case"defaultValue":b=I;break;case"children":w=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(a(91));break;default:ft(n,l,_,I,o,null)}lf(n,u,b,w);return;case"option":for(L in o)if(o.hasOwnProperty(L)&&(u=o[L],u!=null))switch(L){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ft(n,l,L,u,o,null)}return;case"dialog":Je("beforetoggle",n),Je("toggle",n),Je("cancel",n),Je("close",n);break;case"iframe":case"object":Je("load",n);break;case"video":case"audio":for(u=0;u<ll.length;u++)Je(ll[u],n);break;case"image":Je("error",n),Je("load",n);break;case"details":Je("toggle",n);break;case"embed":case"source":case"link":Je("error",n),Je("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,l));default:ft(n,l,X,u,o,null)}return;default:if(Lo(l)){for(ae in o)o.hasOwnProperty(ae)&&(u=o[ae],u!==void 0&&_d(n,l,ae,u,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(u=o[I],u!=null&&ft(n,l,I,u,o,null))}function xy(n,l,o,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,_=null,I=null,L=null,X=null,ae=null;for(se in o){var ue=o[se];if(o.hasOwnProperty(se)&&ue!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":L=ue;default:u.hasOwnProperty(se)||ft(n,l,se,null,u,ue)}}for(var Z in u){var se=u[Z];if(ue=o[Z],u.hasOwnProperty(Z)&&(se!=null||ue!=null))switch(Z){case"type":w=se;break;case"name":b=se;break;case"checked":X=se;break;case"defaultChecked":ae=se;break;case"value":_=se;break;case"defaultValue":I=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,l));break;default:se!==ue&&ft(n,l,Z,se,u,ue)}}Uo(n,_,I,L,X,ae,w,b);return;case"select":se=_=I=Z=null;for(w in o)if(L=o[w],o.hasOwnProperty(w)&&L!=null)switch(w){case"value":break;case"multiple":se=L;default:u.hasOwnProperty(w)||ft(n,l,w,null,u,L)}for(b in u)if(w=u[b],L=o[b],u.hasOwnProperty(b)&&(w!=null||L!=null))switch(b){case"value":Z=w;break;case"defaultValue":I=w;break;case"multiple":_=w;default:w!==L&&ft(n,l,b,w,u,L)}l=I,o=_,u=se,Z!=null?Ti(n,!!o,Z,!1):!!u!=!!o&&(l!=null?Ti(n,!!o,l,!0):Ti(n,!!o,o?[]:"",!1));return;case"textarea":se=Z=null;for(I in o)if(b=o[I],o.hasOwnProperty(I)&&b!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ft(n,l,I,null,u,b)}for(_ in u)if(b=u[_],w=o[_],u.hasOwnProperty(_)&&(b!=null||w!=null))switch(_){case"value":Z=b;break;case"defaultValue":se=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:b!==w&&ft(n,l,_,b,u,w)}af(n,Z,se);return;case"option":for(var ke in o)if(Z=o[ke],o.hasOwnProperty(ke)&&Z!=null&&!u.hasOwnProperty(ke))switch(ke){case"selected":n.selected=!1;break;default:ft(n,l,ke,null,u,Z)}for(L in u)if(Z=u[L],se=o[L],u.hasOwnProperty(L)&&Z!==se&&(Z!=null||se!=null))switch(L){case"selected":n.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:ft(n,l,L,Z,u,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)Z=o[De],o.hasOwnProperty(De)&&Z!=null&&!u.hasOwnProperty(De)&&ft(n,l,De,null,u,Z);for(X in u)if(Z=u[X],se=o[X],u.hasOwnProperty(X)&&Z!==se&&(Z!=null||se!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,l));break;default:ft(n,l,X,Z,u,se)}return;default:if(Lo(l)){for(var ht in o)Z=o[ht],o.hasOwnProperty(ht)&&Z!==void 0&&!u.hasOwnProperty(ht)&&_d(n,l,ht,void 0,u,Z);for(ae in u)Z=u[ae],se=o[ae],!u.hasOwnProperty(ae)||Z===se||Z===void 0&&se===void 0||_d(n,l,ae,Z,u,se);return}}for(var F in o)Z=o[F],o.hasOwnProperty(F)&&Z!=null&&!u.hasOwnProperty(F)&&ft(n,l,F,null,u,Z);for(ue in u)Z=u[ue],se=o[ue],!u.hasOwnProperty(ue)||Z===se||Z==null&&se==null||ft(n,l,ue,Z,u,se)}function cm(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function gy(){if(typeof performance.getEntriesByType=="function"){for(var n=0,l=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var b=o[u],w=b.transferSize,_=b.initiatorType,I=b.duration;if(w&&I&&cm(_)){for(_=0,I=b.responseEnd,u+=1;u<o.length;u++){var L=o[u],X=L.startTime;if(X>I)break;var ae=L.transferSize,ue=L.initiatorType;ae&&cm(ue)&&(L=L.responseEnd,_+=ae*(L<I?1:(I-X)/(L-X)))}if(--u,l+=8*(w+_)/(b.duration/1e3),n++,10<n)break}}if(0<n)return l/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var kd=null,Td=null;function Or(n){return n.nodeType===9?n:n.ownerDocument}function dm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function um(n,l){if(n===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&l==="foreignObject"?0:n}function Ed(n,l){return n==="textarea"||n==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Cd=null;function by(){var n=window.event;return n&&n.type==="popstate"?n===Cd?!1:(Cd=n,!0):(Cd=null,!1)}var fm=typeof setTimeout=="function"?setTimeout:void 0,vy=typeof clearTimeout=="function"?clearTimeout:void 0,hm=typeof Promise=="function"?Promise:void 0,yy=typeof queueMicrotask=="function"?queueMicrotask:typeof hm<"u"?function(n){return hm.resolve(null).then(n).catch(wy)}:fm;function wy(n){setTimeout(function(){throw n})}function Gn(n){return n==="head"}function pm(n,l){var o=l,u=0;do{var b=o.nextSibling;if(n.removeChild(o),b&&b.nodeType===8)if(o=b.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(b),ia(l);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")ol(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,ol(o);for(var w=o.firstChild;w;){var _=w.nextSibling,I=w.nodeName;w[Ta]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=_}}else o==="body"&&ol(n.ownerDocument.body);o=b}while(o);ia(l)}function mm(n,l){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?l?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(l?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function jd(n){var l=n.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var o=l;switch(l=l.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":jd(o),Do(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Ny(n,l,o,u){for(;n.nodeType===1;){var b=o;if(n.nodeName.toLowerCase()!==l.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ta])switch(l){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==b.rel||n.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||n.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||n.getAttribute("title")!==(b.title==null?null:b.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(b.src==null?null:b.src)||n.getAttribute("type")!==(b.type==null?null:b.type)||n.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(l==="input"&&n.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=As(n.nextSibling),n===null)break}return null}function Sy(n,l,o){if(l==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=As(n.nextSibling),n===null))return null;return n}function xm(n,l){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=As(n.nextSibling),n===null))return null;return n}function Ad(n){return n.data==="$?"||n.data==="$~"}function Rd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function _y(n,l){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=l;else if(n.data!=="$?"||o.readyState!=="loading")l();else{var u=function(){l(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function As(n){for(;n!=null;n=n.nextSibling){var l=n.nodeType;if(l===1||l===3)break;if(l===8){if(l=n.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return n}var Id=null;function gm(n){n=n.nextSibling;for(var l=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(l===0)return As(n.nextSibling);l--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||l++}n=n.nextSibling}return null}function bm(n){n=n.previousSibling;for(var l=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(l===0)return n;l--}else o!=="/$"&&o!=="/&"||l++}n=n.previousSibling}return null}function vm(n,l,o){switch(l=Or(o),n){case"html":if(n=l.documentElement,!n)throw Error(a(452));return n;case"head":if(n=l.head,!n)throw Error(a(453));return n;case"body":if(n=l.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function ol(n){for(var l=n.attributes;l.length;)n.removeAttributeNode(l[0]);Do(n)}var Rs=new Map,ym=new Set;function Ur(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var mn=O.d;O.d={f:ky,r:Ty,D:Ey,C:Cy,L:jy,m:Ay,X:Iy,S:Ry,M:My};function ky(){var n=mn.f(),l=Er();return n||l}function Ty(n){var l=Si(n);l!==null&&l.tag===5&&l.type==="form"?Ph(l):mn.r(n)}var ta=typeof document>"u"?null:document;function wm(n,l,o){var u=ta;if(u&&typeof l=="string"&&l){var b=Ss(l);b='link[rel="'+n+'"][href="'+b+'"]',typeof o=="string"&&(b+='[crossorigin="'+o+'"]'),ym.has(b)||(ym.add(b),n={rel:n,crossOrigin:o,href:l},u.querySelector(b)===null&&(l=u.createElement("link"),Wt(l,"link",n),Gt(l),u.head.appendChild(l)))}}function Ey(n){mn.D(n),wm("dns-prefetch",n,null)}function Cy(n,l){mn.C(n,l),wm("preconnect",n,l)}function jy(n,l,o){mn.L(n,l,o);var u=ta;if(u&&n&&l){var b='link[rel="preload"][as="'+Ss(l)+'"]';l==="image"&&o&&o.imageSrcSet?(b+='[imagesrcset="'+Ss(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(b+='[imagesizes="'+Ss(o.imageSizes)+'"]')):b+='[href="'+Ss(n)+'"]';var w=b;switch(l){case"style":w=sa(n);break;case"script":w=na(n)}Rs.has(w)||(n=v({rel:"preload",href:l==="image"&&o&&o.imageSrcSet?void 0:n,as:l},o),Rs.set(w,n),u.querySelector(b)!==null||l==="style"&&u.querySelector(cl(w))||l==="script"&&u.querySelector(dl(w))||(l=u.createElement("link"),Wt(l,"link",n),Gt(l),u.head.appendChild(l)))}}function Ay(n,l){mn.m(n,l);var o=ta;if(o&&n){var u=l&&typeof l.as=="string"?l.as:"script",b='link[rel="modulepreload"][as="'+Ss(u)+'"][href="'+Ss(n)+'"]',w=b;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=na(n)}if(!Rs.has(w)&&(n=v({rel:"modulepreload",href:n},l),Rs.set(w,n),o.querySelector(b)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(dl(w)))return}u=o.createElement("link"),Wt(u,"link",n),Gt(u),o.head.appendChild(u)}}}function Ry(n,l,o){mn.S(n,l,o);var u=ta;if(u&&n){var b=_i(u).hoistableStyles,w=sa(n);l=l||"default";var _=b.get(w);if(!_){var I={loading:0,preload:null};if(_=u.querySelector(cl(w)))I.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":l},o),(o=Rs.get(w))&&Md(n,o);var L=_=u.createElement("link");Gt(L),Wt(L,"link",n),L._p=new Promise(function(X,ae){L.onload=X,L.onerror=ae}),L.addEventListener("load",function(){I.loading|=1}),L.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Pr(_,l,u)}_={type:"stylesheet",instance:_,count:1,state:I},b.set(w,_)}}}function Iy(n,l){mn.X(n,l);var o=ta;if(o&&n){var u=_i(o).hoistableScripts,b=na(n),w=u.get(b);w||(w=o.querySelector(dl(b)),w||(n=v({src:n,async:!0},l),(l=Rs.get(b))&&Dd(n,l),w=o.createElement("script"),Gt(w),Wt(w,"link",n),o.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},u.set(b,w))}}function My(n,l){mn.M(n,l);var o=ta;if(o&&n){var u=_i(o).hoistableScripts,b=na(n),w=u.get(b);w||(w=o.querySelector(dl(b)),w||(n=v({src:n,async:!0,type:"module"},l),(l=Rs.get(b))&&Dd(n,l),w=o.createElement("script"),Gt(w),Wt(w,"link",n),o.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},u.set(b,w))}}function Nm(n,l,o,u){var b=(b=ge.current)?Ur(b):null;if(!b)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(l=sa(o.href),o=_i(b).hoistableStyles,u=o.get(l),u||(u={type:"style",instance:null,count:0,state:null},o.set(l,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=sa(o.href);var w=_i(b).hoistableStyles,_=w.get(n);if(_||(b=b.ownerDocument||b,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,_),(w=b.querySelector(cl(n)))&&!w._p&&(_.instance=w,_.state.loading=5),Rs.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Rs.set(n,o),w||Dy(b,n,o,_.state))),l&&u===null)throw Error(a(528,""));return _}if(l&&u!==null)throw Error(a(529,""));return null;case"script":return l=o.async,o=o.src,typeof o=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=na(o),o=_i(b).hoistableScripts,u=o.get(l),u||(u={type:"script",instance:null,count:0,state:null},o.set(l,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function sa(n){return'href="'+Ss(n)+'"'}function cl(n){return'link[rel="stylesheet"]['+n+"]"}function Sm(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function Dy(n,l,o,u){n.querySelector('link[rel="preload"][as="style"]['+l+"]")?u.loading=1:(l=n.createElement("link"),u.preload=l,l.addEventListener("load",function(){return u.loading|=1}),l.addEventListener("error",function(){return u.loading|=2}),Wt(l,"link",o),Gt(l),n.head.appendChild(l))}function na(n){return'[src="'+Ss(n)+'"]'}function dl(n){return"script[async]"+n}function _m(n,l,o){if(l.count++,l.instance===null)switch(l.type){case"style":var u=n.querySelector('style[data-href~="'+Ss(o.href)+'"]');if(u)return l.instance=u,Gt(u),u;var b=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Gt(u),Wt(u,"style",b),Pr(u,o.precedence,n),l.instance=u;case"stylesheet":b=sa(o.href);var w=n.querySelector(cl(b));if(w)return l.state.loading|=4,l.instance=w,Gt(w),w;u=Sm(o),(b=Rs.get(b))&&Md(u,b),w=(n.ownerDocument||n).createElement("link"),Gt(w);var _=w;return _._p=new Promise(function(I,L){_.onload=I,_.onerror=L}),Wt(w,"link",u),l.state.loading|=4,Pr(w,o.precedence,n),l.instance=w;case"script":return w=na(o.src),(b=n.querySelector(dl(w)))?(l.instance=b,Gt(b),b):(u=o,(b=Rs.get(w))&&(u=v({},o),Dd(u,b)),n=n.ownerDocument||n,b=n.createElement("script"),Gt(b),Wt(b,"link",u),n.head.appendChild(b),l.instance=b);case"void":return null;default:throw Error(a(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(u=l.instance,l.state.loading|=4,Pr(u,o.precedence,n));return l.instance}function Pr(n,l,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=u.length?u[u.length-1]:null,w=b,_=0;_<u.length;_++){var I=u[_];if(I.dataset.precedence===l)w=I;else if(w!==b)break}w?w.parentNode.insertBefore(n,w.nextSibling):(l=o.nodeType===9?o.head:o,l.insertBefore(n,l.firstChild))}function Md(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.title==null&&(n.title=l.title)}function Dd(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.integrity==null&&(n.integrity=l.integrity)}var Lr=null;function km(n,l,o){if(Lr===null){var u=new Map,b=Lr=new Map;b.set(o,u)}else b=Lr,u=b.get(o),u||(u=new Map,b.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),b=0;b<o.length;b++){var w=o[b];if(!(w[Ta]||w[$t]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var _=w.getAttribute(l)||"";_=n+_;var I=u.get(_);I?I.push(w):u.set(_,[w])}}return u}function Tm(n,l,o){n=n.ownerDocument||n,n.head.insertBefore(o,l==="title"?n.querySelector("head > title"):null)}function Oy(n,l,o){if(o===1||l.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return n=l.disabled,typeof l.precedence=="string"&&n==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Em(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Uy(n,l,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var b=sa(u.href),w=l.querySelector(cl(b));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(n.count++,n=Br.bind(n),l.then(n,n)),o.state.loading|=4,o.instance=w,Gt(w);return}w=l.ownerDocument||l,u=Sm(u),(b=Rs.get(b))&&Md(u,b),w=w.createElement("link"),Gt(w);var _=w;_._p=new Promise(function(I,L){_.onload=I,_.onerror=L}),Wt(w,"link",u),o.instance=w}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,l),(l=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Br.bind(n),l.addEventListener("load",o),l.addEventListener("error",o))}}var Od=0;function Py(n,l){return n.stylesheets&&n.count===0&&qr(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&qr(n,n.stylesheets),n.unsuspend){var w=n.unsuspend;n.unsuspend=null,w()}},6e4+l);0<n.imgBytes&&Od===0&&(Od=62500*gy());var b=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&qr(n,n.stylesheets),n.unsuspend)){var w=n.unsuspend;n.unsuspend=null,w()}},(n.imgBytes>Od?50:800)+l);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(b)}}:null}function Br(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qr(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Gr=null;function qr(n,l){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Gr=new Map,l.forEach(Ly,n),Gr=null,Br.call(n))}function Ly(n,l){if(!(l.state.loading&4)){var o=Gr.get(n);if(o)var u=o.get(null);else{o=new Map,Gr.set(n,o);for(var b=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var _=b[w];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}b=l.instance,_=b.getAttribute("data-precedence"),w=o.get(_)||u,w===u&&o.set(null,b),o.set(_,b),this.count++,u=Br.bind(this),b.addEventListener("load",u),b.addEventListener("error",u),w?w.parentNode.insertBefore(b,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(b,n.firstChild)),l.state.loading|=4}}var ul={$$typeof:C,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function By(n,l,o,u,b,w,_,I,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ve(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.hiddenUpdates=Ve(null),this.identifierPrefix=u,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function Cm(n,l,o,u,b,w,_,I,L,X,ae,ue){return n=new By(n,l,o,_,L,X,ae,ue,I),l=1,w===!0&&(l|=24),w=hs(3,null,null,l),n.current=w,w.stateNode=n,l=pc(),l.refCount++,n.pooledCache=l,l.refCount++,w.memoizedState={element:u,isDehydrated:o,cache:l},bc(w),n}function jm(n){return n?(n=Di,n):Di}function Am(n,l,o,u,b,w){b=jm(b),u.context===null?u.context=b:u.pendingContext=b,u=jn(l),u.payload={element:o},w=w===void 0?null:w,w!==null&&(u.callback=w),o=An(n,u,l),o!==null&&(ds(o,n,l),Ha(o,n,l))}function Rm(n,l){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<l?o:l}}function Ud(n,l){Rm(n,l),(n=n.alternate)&&Rm(n,l)}function Im(n){if(n.tag===13||n.tag===31){var l=ei(n,67108864);l!==null&&ds(l,n,67108864),Ud(n,67108864)}}function Mm(n){if(n.tag===13||n.tag===31){var l=bs();l=wn(l);var o=ei(n,l);o!==null&&ds(o,n,l),Ud(n,l)}}var Vr=!0;function Gy(n,l,o,u){var b=U.T;U.T=null;var w=O.p;try{O.p=2,Pd(n,l,o,u)}finally{O.p=w,U.T=b}}function qy(n,l,o,u){var b=U.T;U.T=null;var w=O.p;try{O.p=8,Pd(n,l,o,u)}finally{O.p=w,U.T=b}}function Pd(n,l,o,u){if(Vr){var b=Ld(u);if(b===null)Sd(n,l,u,Hr,o),Om(n,u);else if(Hy(b,n,l,o,u))u.stopPropagation();else if(Om(n,u),l&4&&-1<Vy.indexOf(n)){for(;b!==null;){var w=Si(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var _=Me(w.pendingLanes);if(_!==0){var I=w;for(I.pendingLanes|=2,I.entangledLanes|=2;_;){var L=1<<31-me(_);I.entanglements[1]|=L,_&=~L}Ks(w),(it&6)===0&&(kr=be()+500,al(0))}}break;case 31:case 13:I=ei(w,2),I!==null&&ds(I,w,2),Er(),Ud(w,2)}if(w=Ld(u),w===null&&Sd(n,l,u,Hr,o),w===b)break;b=w}b!==null&&u.stopPropagation()}else Sd(n,l,u,null,o)}}function Ld(n){return n=Go(n),Bd(n)}var Hr=null;function Bd(n){if(Hr=null,n=Ni(n),n!==null){var l=c(n);if(l===null)n=null;else{var o=l.tag;if(o===13){if(n=d(l),n!==null)return n;n=null}else if(o===31){if(n=f(l),n!==null)return n;n=null}else if(o===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;n=null}else l!==n&&(n=null)}}return Hr=n,null}function Dm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ae()){case Qe:return 2;case gt:return 8;case At:case Ue:return 32;case at:return 268435456;default:return 32}default:return 32}}var Gd=!1,qn=null,Vn=null,Hn=null,fl=new Map,hl=new Map,$n=[],Vy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Om(n,l){switch(n){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Vn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":fl.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(l.pointerId)}}function pl(n,l,o,u,b,w){return n===null||n.nativeEvent!==w?(n={blockedOn:l,domEventName:o,eventSystemFlags:u,nativeEvent:w,targetContainers:[b]},l!==null&&(l=Si(l),l!==null&&Im(l)),n):(n.eventSystemFlags|=u,l=n.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),n)}function Hy(n,l,o,u,b){switch(l){case"focusin":return qn=pl(qn,n,l,o,u,b),!0;case"dragenter":return Vn=pl(Vn,n,l,o,u,b),!0;case"mouseover":return Hn=pl(Hn,n,l,o,u,b),!0;case"pointerover":var w=b.pointerId;return fl.set(w,pl(fl.get(w)||null,n,l,o,u,b)),!0;case"gotpointercapture":return w=b.pointerId,hl.set(w,pl(hl.get(w)||null,n,l,o,u,b)),!0}return!1}function Um(n){var l=Ni(n.target);if(l!==null){var o=c(l);if(o!==null){if(l=o.tag,l===13){if(l=d(o),l!==null){n.blockedOn=l,Yu(n.priority,function(){Mm(o)});return}}else if(l===31){if(l=f(o),l!==null){n.blockedOn=l,Yu(n.priority,function(){Mm(o)});return}}else if(l===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $r(n){if(n.blockedOn!==null)return!1;for(var l=n.targetContainers;0<l.length;){var o=Ld(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Bo=u,o.target.dispatchEvent(u),Bo=null}else return l=Si(o),l!==null&&Im(l),n.blockedOn=o,!1;l.shift()}return!0}function Pm(n,l,o){$r(n)&&o.delete(l)}function $y(){Gd=!1,qn!==null&&$r(qn)&&(qn=null),Vn!==null&&$r(Vn)&&(Vn=null),Hn!==null&&$r(Hn)&&(Hn=null),fl.forEach(Pm),hl.forEach(Pm)}function Fr(n,l){n.blockedOn===l&&(n.blockedOn=null,Gd||(Gd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$y)))}var zr=null;function Lm(n){zr!==n&&(zr=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){zr===n&&(zr=null);for(var l=0;l<n.length;l+=3){var o=n[l],u=n[l+1],b=n[l+2];if(typeof u!="function"){if(Bd(u||o)===null)continue;break}var w=Si(o);w!==null&&(n.splice(l,3),l-=3,Lc(w,{pending:!0,data:b,method:o.method,action:u},u,b))}}))}function ia(n){function l(L){return Fr(L,n)}qn!==null&&Fr(qn,n),Vn!==null&&Fr(Vn,n),Hn!==null&&Fr(Hn,n),fl.forEach(l),hl.forEach(l);for(var o=0;o<$n.length;o++){var u=$n[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<$n.length&&(o=$n[0],o.blockedOn===null);)Um(o),o.blockedOn===null&&$n.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var b=o[u],w=o[u+1],_=b[is]||null;if(typeof w=="function")_||Lm(o);else if(_){var I=null;if(w&&w.hasAttribute("formAction")){if(b=w,_=w[is]||null)I=_.formAction;else if(Bd(b)!==null)continue}else I=_.action;typeof I=="function"?o[u+1]=I:(o.splice(u,3),u-=3),Lm(o)}}}function Bm(){function n(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(_){return b=_})},focusReset:"manual",scroll:"manual"})}function l(){b!==null&&(b(),b=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,b=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),b!==null&&(b(),b=null)}}}function qd(n){this._internalRoot=n}Jr.prototype.render=qd.prototype.render=function(n){var l=this._internalRoot;if(l===null)throw Error(a(409));var o=l.current,u=bs();Am(o,u,n,l,null,null)},Jr.prototype.unmount=qd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var l=n.containerInfo;Am(n.current,2,null,n,null,null),Er(),l[wi]=null}};function Jr(n){this._internalRoot=n}Jr.prototype.unstable_scheduleHydration=function(n){if(n){var l=Wu();n={blockedOn:null,target:n,priority:l};for(var o=0;o<$n.length&&l!==0&&l<$n[o].priority;o++);$n.splice(o,0,n),o===0&&Um(n)}};var Gm=e.version;if(Gm!=="19.2.4")throw Error(a(527,Gm,"19.2.4"));O.findDOMNode=function(n){var l=n._reactInternals;if(l===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=p(l),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var Fy={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wr.isDisabled&&Wr.supportsFiber)try{ws=Wr.inject(Fy),Rt=Wr}catch{}}return xl.createRoot=function(n,l){if(!r(n))throw Error(a(299));var o=!1,u="",b=Jh,w=Wh,_=Yh;return l!=null&&(l.unstable_strictMode===!0&&(o=!0),l.identifierPrefix!==void 0&&(u=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),l=Cm(n,1,!1,null,null,o,u,null,b,w,_,Bm),n[wi]=l.current,Nd(n),new qd(l)},xl.hydrateRoot=function(n,l,o){if(!r(n))throw Error(a(299));var u=!1,b="",w=Jh,_=Wh,I=Yh,L=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(b=o.identifierPrefix),o.onUncaughtError!==void 0&&(w=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(L=o.formState)),l=Cm(n,1,!0,l,o??null,u,b,L,w,_,I,Bm),l.context=jm(null),o=l.current,u=bs(),u=wn(u),b=jn(u),b.callback=null,An(o,b,u),o=u,l.current.lanes=o,lt(l,o),Ks(l),n[wi]=l.current,Nd(n),new Jr(l)},xl.version="19.2.4",xl}var Km;function tw(){if(Km)return $d.exports;Km=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$d.exports=ew(),$d.exports}var sw=tw();const nw=cg(sw),Xm="cc_sync_queue";class iw{constructor(){this.queue=[],this.isProcessing=!1,this.listeners=[],this.loadQueue(),window.addEventListener("online",()=>this.processQueue()),window.addEventListener("offline",()=>this.notifyListeners())}loadQueue(){try{const e=localStorage.getItem(Xm);e&&(this.queue=JSON.parse(e))}catch(e){console.error("Failed to load sync queue",e)}}saveQueue(){localStorage.setItem(Xm,JSON.stringify(this.queue)),this.notifyListeners()}enqueue(e,s){const a={id:crypto.randomUUID(),type:e,payload:s,timestamp:Date.now(),retryCount:0};this.queue.push(a),this.saveQueue(),navigator.onLine&&this.processQueue()}async processQueue(){if(this.isProcessing||this.queue.length===0||!navigator.onLine)return;this.isProcessing=!0,this.notifyListeners();const e=[...this.queue];for(const s of e)try{await this.syncItem(s),this.queue=this.queue.filter(a=>a.id!==s.id),this.saveQueue()}catch(a){console.error(`Failed to sync item ${s.id}`,a);const r=this.queue.findIndex(c=>c.id===s.id);r!==-1&&this.queue[r].retryCount++,this.saveQueue();break}this.isProcessing=!1,this.notifyListeners()}async syncItem(e){return new Promise((s,a)=>{setTimeout(()=>{console.log(`[SYNC] Processed ${e.type}`,e.payload),Math.random()<.05?a(new Error("Random network glitch")):s()},500)})}subscribe(e){return this.listeners.push(e),e(this.queue,navigator.onLine),()=>{this.listeners=this.listeners.filter(s=>s!==e)}}notifyListeners(){this.listeners.forEach(e=>e(this.queue,navigator.onLine))}getStatus(){return{pendingCount:this.queue.length,isOnline:navigator.onLine,isProcessing:this.isProcessing}}}const Qm=new iw,aw=()=>{const[t,e]=j.useState({pendingCount:0,isOnline:navigator.onLine,isProcessing:!1});j.useEffect(()=>Qm.subscribe((c,d)=>{e({pendingCount:c.length,isOnline:d,isProcessing:Qm.getStatus().isProcessing})}),[]);const s=t.pendingCount===0,a=!t.isOnline;return i.jsxs("div",{className:`
      flex items-center gap-3 px-4 py-2 rounded-full border shadow-lg backdrop-blur-md transition-all duration-500
      ${a?"bg-red-500/10 border-red-500/50 text-red-500":t.isProcessing?"bg-indigo-500/10 border-indigo-500/50 text-indigo-500":s?"bg-emerald-500/10 border-emerald-500/50 text-emerald-500":"bg-amber-500/10 border-amber-500/50 text-amber-500"}
    `,children:[i.jsxs("div",{className:"relative",children:[a?i.jsx("span",{className:"text-lg",children:""}):t.isProcessing?i.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):s?i.jsx("span",{className:"text-lg",children:""}):i.jsx("span",{className:"text-lg",children:""}),i.jsx("div",{className:`absolute -bottom-1 -right-1 w-2.5 h-2.5 rounded-full border-2 border-white ${a?"bg-red-500":s?"bg-emerald-500":"bg-amber-500"}`})]}),i.jsxs("div",{className:"flex flex-col leading-none",children:[i.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:a?"Offline":t.isProcessing?"Syncing...":s?"Cloud Synced":"Changes Pending"}),!s&&i.jsxs("span",{className:"text-[9px] font-bold opacity-80",children:[t.pendingCount," action",t.pendingCount!==1?"s":""," queued"]})]})]})},lw=(t,e)=>Array.from({length:t}).map((s,a)=>({id:`pl-${e}-${a}`,name:`${e} Player ${a+1}`,role:a===0?"Wicket-keeper":a<5?"Batsman":a<9?"All-rounder":"Bowler",stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}})),Yr=(t,e,s)=>({id:t,name:e,players:lw(15,s),logoUrl:""}),Zm=[{id:"reset",name:"Reset Data",description:"Clear all data and start fresh.",icon:"",generate:()=>({orgs:[],matches:[]})},{id:"quick_match",name:"Quick Match Ready",description:"Two teams and a match ready to start.",icon:"",generate:()=>{const t=Yr("tm-qm-1","Super Strikers","Strikers"),e=Yr("tm-qm-2","Thunder Bolts","Thunder"),s={id:`mx-qm-${Date.now()}`,teamAId:t.id,teamBId:e.id,date:new Date().toISOString(),teamAName:t.name,teamBName:e.name,venue:"Dev Ground",status:"Scheduled"};return{orgs:[{id:"org-dev-qm",name:"Quick Play",type:"CLUB",memberTeams:[t,e],fixtures:[],tournaments:[],groups:[],members:[],applications:[],sponsors:[],establishedYear:2026,isPublic:!1}],matches:[s]}}},{id:"tournament",name:"Tournament Mode",description:"Full tournament with 8 teams and groups.",icon:"",generate:()=>{const t=Array.from({length:8}).map((c,d)=>Yr(`tm-tr-${d}`,`Team ${String.fromCharCode(65+d)}`,`Team ${String.fromCharCode(65+d)}`)),e={id:"grp-A",name:"Group A",teams:t.slice(0,4)},s={id:"grp-B",name:"Group B",teams:t.slice(4,8)};return{orgs:[{id:"org-dev-trn",name:"Dev League",type:"GOVERNING_BODY",memberTeams:t,fixtures:[],tournaments:[{id:"trn-dev-1",name:"Dev Cup 2026",format:"T20",overs:20,groups:[e,s],status:"Ongoing",pointsConfig:{win:2,loss:0,tie:1,noResult:1}}],groups:[],members:[],applications:[],sponsors:[],establishedYear:2026,isPublic:!0}],matches:[]}}},{id:"central_zone_full",name:"Central Zone Setup",description:"Seeds the 24 Central Zone clubs with admins, captains, and squads.",icon:"",generate:()=>{const e=["Balmain United","Brickfield Sports","Orangefield Sports","Caparo Sports","Centric Academy","Countryside","Couva Sports","Agostini Sports","Esmeralda Sports","Ragoonanan Road Sports","Exchange 2","Felicity Sports","Friendship Hall Sports","Koreans Sports","Lange Park Sports","Line and Length","Madras Divergent Academy","Mc Bean Sports","Petersfield Sports","Preysal Valley Boys","Renoun Sports","Sital Felicity Youngsters","Supersonic Sports","Waterloo Sports"].map((r,c)=>{const d=r.toLowerCase().replace(/\s+/g,"-"),f=Yr(`tm-cz-${d}`,r,r.split(" ")[0]);return f.management="Managed by "+r+" Board",f.location="Central Trinidad",f}),s=[];return e.forEach(r=>{const c=r.id.replace("tm-cz-",""),d=c.split("-")[0];s.push({userId:`adm-${c}`,name:`${r.name} Admin`,handle:`@admin_${d}`,role:"Administrator",addedAt:Date.now(),permissions:{canEditOrg:!0,canManageMembers:!0,canEditSquad:!0,canSubmitReport:!0}});const f=r.players[0];s.push({userId:f.id,name:f.name,handle:`@capt_${d}`,role:"Player",addedAt:Date.now(),permissions:{canSubmitReport:!0,canEditSquad:!0,canViewReports:!0}}),s.push({userId:`coach-${c}`,name:`Coach ${r.name.split(" ")[0]}`,handle:`@coach_${d}`,role:"Coach",addedAt:Date.now(),permissions:{canEditSquad:!0,canViewReports:!0,canManagePractice:!0}}),s.push({userId:`scorer-${c}`,name:`Scorer ${r.name.split(" ")[0]}`,handle:`@scorer_${d}`,role:"Scorer",addedAt:Date.now(),permissions:{canScoreMatch:!0,canEditScorecard:!0,canViewReports:!0}})}),s.push({userId:"umpire-cz-1",name:"Umpire Steve",handle:"@ump_steve",role:"Umpire",addedAt:Date.now(),permissions:{canOfficiate:!0,canViewReports:!0}},{userId:"umpire-cz-2",name:"Umpire Mike",handle:"@ump_mike",role:"Umpire",addedAt:Date.now(),permissions:{canOfficiate:!0,canViewReports:!0}}),{orgs:[{id:"org-central-zone",name:"Central Zone",type:"GOVERNING_BODY",description:"The official governing body for the Central Zone containing all member clubs.",memberTeams:e,fixtures:[],tournaments:[],groups:[],members:s,applications:[],sponsors:[],establishedYear:1980,isPublic:!0,allowUserContent:!0,country:"Trinidad & Tobago"}],matches:[]}}}];function yo(t,e){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(s[a[r]]=t[a[r]]);return s}function rw(t,e,s,a){function r(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function f(g){try{p(a.next(g))}catch(v){d(v)}}function m(g){try{p(a.throw(g))}catch(v){d(v)}}function p(g){g.done?c(g.value):r(g.value).then(f,m)}p((a=a.apply(t,e||[])).next())})}const ow=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Iu extends Error{constructor(e,s="FunctionsError",a){super(e),this.name=s,this.context=a}}class cw extends Iu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class e0 extends Iu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class t0 extends Iu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var iu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(iu||(iu={}));class dw{constructor(e,{headers:s={},customFetch:a,region:r=iu.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=ow(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return rw(this,arguments,void 0,function*(s,a={}){var r;let c,d;try{const{headers:f,method:m,body:p,signal:g,timeout:v}=a;let y={},{region:N}=a;N||(N=this.region);const S=new URL(`${this.url}/${s}`);N&&N!=="any"&&(y["x-region"]=N,S.searchParams.set("forceFunctionRegion",N));let k;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",k=p):typeof p=="string"?(y["Content-Type"]="text/plain",k=p):typeof FormData<"u"&&p instanceof FormData?k=p:(y["Content-Type"]="application/json",k=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?k=JSON.stringify(p):k=p;let E=g;v&&(d=new AbortController,c=setTimeout(()=>d.abort(),v),g?(E=d.signal,g.addEventListener("abort",()=>d.abort())):E=d.signal);const T=yield this.fetch(S.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),f),body:k,signal:E}).catch(R=>{throw new cw(R)}),M=T.headers.get("x-relay-error");if(M&&M==="true")throw new e0(T);if(!T.ok)throw new t0(T);let C=((r=T.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),D;return C==="application/json"?D=yield T.json():C==="application/octet-stream"||C==="application/pdf"?D=yield T.blob():C==="text/event-stream"?D=T:C==="multipart/form-data"?D=yield T.formData():D=yield T.text(),{data:D,error:null,response:T}}catch(f){return{data:null,error:f,response:f instanceof t0||f instanceof e0?f.context:void 0}}finally{c&&clearTimeout(c)}})}}var uw=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},fw=class{constructor(t){var e,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let r=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let d=null,f=null,m=null,p=c.status,g=c.statusText;if(c.ok){var v,y;if(s.method!=="HEAD"){var N;const T=await c.text();T===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((N=s.headers.get("Accept"))===null||N===void 0)&&N.includes("application/vnd.pgrst.plan+text"))?f=T:f=JSON.parse(T))}const k=(v=s.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),E=(y=c.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");k&&E&&E.length>1&&(m=parseInt(E[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,p=406,g="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var S;const k=await c.text();try{d=JSON.parse(k),Array.isArray(d)&&c.status===404&&(f=[],d=null,p=200,g="OK")}catch{c.status===404&&k===""?(p=204,g="No Content"):d={message:k}}if(d&&s.isMaybeSingle&&(!(d==null||(S=d.details)===null||S===void 0)&&S.includes("0 rows"))&&(d=null,p=200,g="OK"),d&&s.shouldThrowOnError)throw new uw(d)}return{error:d,data:f,count:m,status:p,statusText:g}});return this.shouldThrowOnError||(r=r.catch(c=>{var d;let f="";const m=c==null?void 0:c.cause;if(m){var p,g,v,y;const S=(p=m==null?void 0:m.message)!==null&&p!==void 0?p:"",k=(g=m==null?void 0:m.code)!==null&&g!==void 0?g:"";f=`${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:"FetchError"}: ${c==null?void 0:c.message}`,f+=`

Caused by: ${(y=m==null?void 0:m.name)!==null&&y!==void 0?y:"Error"}: ${S}`,k&&(f+=` (${k})`),m!=null&&m.stack&&(f+=`
${m.stack}`)}else{var N;f=(N=c==null?void 0:c.stack)!==null&&N!==void 0?N:""}return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:f,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(t,e)}returns(){return this}overrideTypes(){return this}},hw=class extends fw{select(t){let e=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!e?"":(a==='"'&&(e=!e),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:s,foreignTable:a,referencedTable:r=a}={}){const c=r?`${r}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${t}.${e?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:s=e}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,e,{foreignTable:s,referencedTable:a=s}={}){const r=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(r,`${t}`),this.url.searchParams.set(c,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:s=!1,buffers:a=!1,wal:r=!1,format:c="text"}={}){var d;const f=[t?"analyze":null,e?"verbose":null,s?"settings":null,a?"buffers":null,r?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${m}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const s0=new RegExp("[,()]");var ua=class extends hw{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const s=Array.from(new Set(e)).map(a=>typeof a=="string"&&s0.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}notIn(t,e){const s=Array.from(new Set(e)).map(a=>typeof a=="string"&&s0.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`not.in.(${s})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:s,type:a}={}){let r="";a==="plain"?r="pl":a==="phrase"?r="ph":a==="websearch"&&(r="w");const c=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${r}fts${c}.${e}`),this}match(t){return Object.entries(t).forEach(([e,s])=>{this.url.searchParams.append(e,`eq.${s}`)}),this}not(t,e,s){return this.url.searchParams.append(t,`not.${e}.${s}`),this}or(t,{foreignTable:e,referencedTable:s=e}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,e,s){return this.url.searchParams.append(t,`${e}.${s}`),this}},pw=class{constructor(t,{headers:e={},schema:s,fetch:a}){this.url=t,this.headers=new Headers(e),this.schema=s,this.fetch=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:s=!1,count:a}=e??{},r=s?"HEAD":"GET";let c=!1;const d=(t??"*").split("").map(p=>/\s/.test(p)&&!c?"":(p==='"'&&(c=!c),p)).join(""),{url:f,headers:m}=this.cloneRequestState();return f.searchParams.set("select",d),a&&m.append("Prefer",`count=${a}`),new ua({method:r,url:f,headers:m,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:s=!0}={}){var a;const r="POST",{url:c,headers:d}=this.cloneRequestState();if(e&&d.append("Prefer",`count=${e}`),s||d.append("Prefer","missing=default"),Array.isArray(t)){const f=t.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(f.length>0){const m=[...new Set(f)].map(p=>`"${p}"`);c.searchParams.set("columns",m.join(","))}}return new ua({method:r,url:c,headers:d,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:s=!1,count:a,defaultToNull:r=!0}={}){var c;const d="POST",{url:f,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),e!==void 0&&f.searchParams.set("on_conflict",e),a&&m.append("Prefer",`count=${a}`),r||m.append("Prefer","missing=default"),Array.isArray(t)){const p=t.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(p.length>0){const g=[...new Set(p)].map(v=>`"${v}"`);f.searchParams.set("columns",g.join(","))}}return new ua({method:d,url:f,headers:m,schema:this.schema,body:t,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(t,{count:e}={}){var s;const a="PATCH",{url:r,headers:c}=this.cloneRequestState();return e&&c.append("Prefer",`count=${e}`),new ua({method:a,url:r,headers:c,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:t}={}){var e;const s="DELETE",{url:a,headers:r}=this.cloneRequestState();return t&&r.append("Prefer",`count=${t}`),new ua({method:s,url:a,headers:r,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},mw=class dg{constructor(e,{headers:s={},schema:a,fetch:r}={}){this.url=e,this.headers=new Headers(s),this.schemaName=a,this.fetch=r}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new pw(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new dg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:a=!1,get:r=!1,count:c}={}){var d;let f;const m=new URL(`${this.url}/rpc/${e}`);let p;const g=N=>N!==null&&typeof N=="object"&&(!Array.isArray(N)||N.some(g)),v=a&&Object.values(s).some(g);v?(f="POST",p=s):a||r?(f=a?"HEAD":"GET",Object.entries(s).filter(([N,S])=>S!==void 0).map(([N,S])=>[N,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([N,S])=>{m.searchParams.append(N,S)})):(f="POST",p=s);const y=new Headers(this.headers);return v?y.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&y.set("Prefer",`count=${c}`),new ua({method:f,url:m,headers:y,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class xw{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const a=s.versions;if(a&&a.node){const r=a.node,c=parseInt(r.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const a=this.getWebSocketConstructor();return new a(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const gw="2.93.3",bw=`realtime-js/${gw}`,vw="1.0.0",ug="2.0.0",n0=ug,au=1e4,yw=1e3,ww=100;var zn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(zn||(zn={}));var Bt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Bt||(Bt={}));var Vs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vs||(Vs={}));var lu;(function(t){t.websocket="websocket"})(lu||(lu={}));var gi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(gi||(gi={}));class Nw{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,s){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(e));let a=[e.join_ref,e.ref,e.topic,e.event,e.payload];return s(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(e){var s;return this._isArrayBuffer((s=e.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var s,a;const r=(a=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var s,a;const r=(a=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:{},d=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(e,s,a){var r,c;const d=e.topic,f=(r=e.ref)!==null&&r!==void 0?r:"",m=(c=e.join_ref)!==null&&c!==void 0?c:"",p=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},v=Object.keys(g).length===0?"":JSON.stringify(g);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+d.length+p.length+v.length,N=new ArrayBuffer(this.HEADER_LENGTH+y);let S=new DataView(N),k=0;S.setUint8(k++,this.KINDS.userBroadcastPush),S.setUint8(k++,m.length),S.setUint8(k++,f.length),S.setUint8(k++,d.length),S.setUint8(k++,p.length),S.setUint8(k++,v.length),S.setUint8(k++,s),Array.from(m,T=>S.setUint8(k++,T.charCodeAt(0))),Array.from(f,T=>S.setUint8(k++,T.charCodeAt(0))),Array.from(d,T=>S.setUint8(k++,T.charCodeAt(0))),Array.from(p,T=>S.setUint8(k++,T.charCodeAt(0))),Array.from(v,T=>S.setUint8(k++,T.charCodeAt(0)));var E=new Uint8Array(N.byteLength+a.byteLength);return E.set(new Uint8Array(N),0),E.set(new Uint8Array(a),N.byteLength),E.buffer}decode(e,s){if(this._isArrayBuffer(e)){let a=this._binaryDecode(e);return s(a)}if(typeof e=="string"){const a=JSON.parse(e),[r,c,d,f,m]=a;return s({join_ref:r,ref:c,topic:d,event:f,payload:m})}return s({})}_binaryDecode(e){const s=new DataView(e),a=s.getUint8(0),r=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,s,r)}}_decodeUserBroadcast(e,s,a){const r=s.getUint8(1),c=s.getUint8(2),d=s.getUint8(3),f=s.getUint8(4);let m=this.HEADER_LENGTH+4;const p=a.decode(e.slice(m,m+r));m=m+r;const g=a.decode(e.slice(m,m+c));m=m+c;const v=a.decode(e.slice(m,m+d));m=m+d;const y=e.slice(m,e.byteLength),N=f===this.JSON_ENCODING?JSON.parse(a.decode(y)):y,S={type:this.BROADCAST_EVENT,event:g,payload:N};return d>0&&(S.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var s;return e instanceof ArrayBuffer||((s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(e,s){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([a])=>s.includes(a)))}}class fg{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(xt||(xt={}));const i0=(t,e,s={})=>{var a;const r=(a=s.skipTypes)!==null&&a!==void 0?a:[];return e?Object.keys(e).reduce((c,d)=>(c[d]=Sw(d,t,e,r),c),{}):{}},Sw=(t,e,s,a)=>{const r=e.find(f=>f.name===t),c=r==null?void 0:r.type,d=s[t];return c&&!a.includes(c)?hg(c,d):ru(d)},hg=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Ew(e,s)}switch(t){case xt.bool:return _w(e);case xt.float4:case xt.float8:case xt.int2:case xt.int4:case xt.int8:case xt.numeric:case xt.oid:return kw(e);case xt.json:case xt.jsonb:return Tw(e);case xt.timestamp:return Cw(e);case xt.abstime:case xt.date:case xt.daterange:case xt.int4range:case xt.int8range:case xt.money:case xt.reltime:case xt.text:case xt.time:case xt.timestamptz:case xt.timetz:case xt.tsrange:case xt.tstzrange:return ru(e);default:return ru(e)}},ru=t=>t,_w=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},kw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Tw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Ew=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,a=t[s];if(t[0]==="{"&&a==="}"){let c;const d=t.slice(1,s);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(f=>hg(e,f))}return t},Cw=t=>typeof t=="string"?t.replace(" ","T"):t,pg=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Wd{constructor(e,s,a={},r=au){this.channel=e,this.event=s,this.payload=a,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var a;return this._hasReceived(e)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var a0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(a0||(a0={}));class Nl{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},r=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nl.syncState(this.state,r,c,d),this.pendingDiffs.forEach(m=>{this.state=Nl.syncDiff(this.state,m,c,d)}),this.pendingDiffs=[],f()}),this.channel._on(a.diff,{},r=>{const{onJoin:c,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Nl.syncDiff(this.state,r,c,d),f())}),this.onJoin((r,c,d)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:c,newPresences:d})}),this.onLeave((r,c,d)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,a,r){const c=this.cloneDeep(e),d=this.transformState(s),f={},m={};return this.map(c,(p,g)=>{d[p]||(m[p]=g)}),this.map(d,(p,g)=>{const v=c[p];if(v){const y=g.map(E=>E.presence_ref),N=v.map(E=>E.presence_ref),S=g.filter(E=>N.indexOf(E.presence_ref)<0),k=v.filter(E=>y.indexOf(E.presence_ref)<0);S.length>0&&(f[p]=S),k.length>0&&(m[p]=k)}else f[p]=g}),this.syncDiff(c,{joins:f,leaves:m},a,r)}static syncDiff(e,s,a,r){const{joins:c,leaves:d}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),r||(r=()=>{}),this.map(c,(f,m)=>{var p;const g=(p=e[f])!==null&&p!==void 0?p:[];if(e[f]=this.cloneDeep(m),g.length>0){const v=e[f].map(N=>N.presence_ref),y=g.filter(N=>v.indexOf(N.presence_ref)<0);e[f].unshift(...y)}a(f,g,m)}),this.map(d,(f,m)=>{let p=e[f];if(!p)return;const g=m.map(v=>v.presence_ref);p=p.filter(v=>g.indexOf(v.presence_ref)<0),e[f]=p,r(f,p,m),p.length===0&&delete e[f]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(a=>s(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,a)=>{const r=e[a];return"metas"in r?s[a]=r.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[a]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var l0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(l0||(l0={}));var Sl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Sl||(Sl={}));var xn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(xn||(xn={}));class ma{constructor(e,s={config:{}},a){var r,c;if(this.topic=e,this.params=s,this.socket=a,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Wd(this,Vs.join,this.params,this.timeout),this.rejoinTimer=new fg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vs.reply,{},(d,f)=>{this._trigger(this._replyEventName(f),d)}),this.presence=new Nl(this),this.broadcastEndpointURL=pg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var a,r,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:d,presence:f,private:m}}=this.params,p=(r=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(N=>N.filter))!==null&&r!==void 0?r:[],g=!!this.bindings[Sl.PRESENCE]&&this.bindings[Sl.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,v={},y={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:g}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(N=>e==null?void 0:e(xn.CHANNEL_ERROR,N)),this._onClose(()=>e==null?void 0:e(xn.CLOSED)),this.updateJoinPayload(Object.assign({config:y},v)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:N})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),N===void 0){e==null||e(xn.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,E=(S=k==null?void 0:k.length)!==null&&S!==void 0?S:0,T=[];for(let M=0;M<E;M++){const C=k[M],{filter:{event:D,schema:R,table:B,filter:G}}=C,H=N&&N[M];if(H&&H.event===D&&ma.isFilterValueEqual(H.schema,R)&&ma.isFilterValueEqual(H.table,B)&&ma.isFilterValueEqual(H.filter,G))T.push(Object.assign(Object.assign({},C),{id:H.id}));else{this.unsubscribe(),this.state=Bt.errored,e==null||e(xn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(xn.SUBSCRIBED);return}}).receive("error",N=>{this.state=Bt.errored,e==null||e(xn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(N).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,a){return this.state===Bt.joined&&e===Sl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,s,a)}async httpSend(e,s,a={}){var r;if(s==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=a.timeout)!==null&&r!==void 0?r:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const p=await f.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(e,s={}){var a,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:d}=e,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((r=p.body)===null||r===void 0?void 0:r.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,f,m;const p=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),p.receive("ok",()=>c("ok")),p.receive("error",()=>c("error")),p.receive("timeout",()=>c("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vs.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(r=>{a=new Wd(this,Vs.leave,{},e),a.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(e,s,a){const r=new AbortController,c=setTimeout(()=>r.abort(),a),d=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(c),d}_push(e,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Wd(this,e,s,a);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ww){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,a){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,a){var r,c;const d=e.toLocaleLowerCase(),{close:f,error:m,leave:p,join:g}=Vs;if(a&&[f,m,p,g].indexOf(d)>=0&&a!==this._joinRef())return;let y=this._onMessage(d,s,a);if(s&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(N=>{var S,k,E;return((S=N.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(k=N.filter)===null||k===void 0?void 0:k.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===d}).map(N=>N.callback(y,a)):(c=this.bindings[d])===null||c===void 0||c.filter(N=>{var S,k,E,T,M,C;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in N){const D=N.id,R=(S=N.filter)===null||S===void 0?void 0:S.event;return D&&((k=s.ids)===null||k===void 0?void 0:k.includes(D))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((E=s.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const D=(M=(T=N==null?void 0:N.filter)===null||T===void 0?void 0:T.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return D==="*"||D===((C=s==null?void 0:s.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return N.type.toLocaleLowerCase()===d}).map(N=>{if(typeof y=="object"&&"ids"in y){const S=y.data,{schema:k,table:E,commit_timestamp:T,type:M,errors:C}=S;y=Object.assign(Object.assign({},{schema:k,table:E,commit_timestamp:T,eventType:M,new:{},old:{},errors:C}),this._getPayloadRecords(S))}N.callback(y,a)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,a){const r=e.toLocaleLowerCase(),c={type:r,filter:s,callback:a};return this.bindings[r]?this.bindings[r].push(c):this.bindings[r]=[c],this}_off(e,s){const a=e.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(r=>{var c;return!(((c=r.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&ma.isEqual(r.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const a in e)if(e[a]!==s[a])return!1;return!0}static isFilterValueEqual(e,s){return(e??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vs.close,{},e)}_onError(e){this._on(Vs.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=i0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=i0(e.columns,e.old_record)),s}}const Yd=()=>{},Kr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},jw=[1e3,2e3,5e3,1e4],Aw=1e4,Rw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Iw{constructor(e,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=au,this.transport=null,this.heartbeatIntervalMs=Kr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yd,this.ref=0,this.reconnectTimer=null,this.vsn=n0,this.logger=Yd,this.conn=null,this.sendBuffer=[],this.serializer=new Nw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...c)=>r(...c):(...c)=>fetch(...c),!(!((a=s==null?void 0:s.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${lu.websocket}`,this.httpEndpoint=pg(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,a){this.logger(e,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case zn.connecting:return gi.Connecting;case zn.open:return gi.Open;case zn.closing:return gi.Closing;default:return gi.Closed}}isConnected(){return this.connectionState()===gi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const a=`realtime:${e}`,r=this.getChannels().find(c=>c.topic===a);if(r)return r;{const c=new ma(`realtime:${e}`,s,this);return this.channels.push(c),c}}push(e){const{topic:s,event:a,payload:r,ref:c}=e,d=()=>{this.encode(e,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${s} ${a} (${c})`,r),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(yw,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Kr.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",p)}catch(g){this.log("error","error in heartbeat callback",g)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:r,payload:c,ref:d}=s,f=d?`(${d})`:"",m=c.status||"";this.log("receive",`${m} ${a} ${r} ${f}`.trim(),c),this.channels.filter(p=>p._isMember(a)).forEach(p=>p._trigger(r,c,d)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===zn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===zn.open||this.conn.readyState===zn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(s){this.log("error","error in heartbeat callback",s)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vs.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const a=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${a}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const a=new Blob([Rw],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s,a=!1;if(e)s=e,a=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),s=this.accessTokenValue}else s=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const c={access_token:s,version:bw};s&&r.updateJoinPayload(c),r.joinedOnce&&r._isJoined()&&r._push(Vs.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(a=>{try{a(s)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(a){this.log("error",`error triggering ${e} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new fg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Kr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,a,r,c,d,f,m,p,g,v,y,N;switch(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(a=e==null?void 0:e.timeout)!==null&&a!==void 0?a:au,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Kr.HEARTBEAT_INTERVAL,this.worker=(c=e==null?void 0:e.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=e==null?void 0:e.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:Yd,this.vsn=(m=e==null?void 0:e.vsn)!==null&&m!==void 0?m:n0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(S=>jw[S-1]||Aw),this.vsn){case vw:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:((S,k)=>k(JSON.stringify(S))),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:((S,k)=>k(JSON.parse(S)));break;case ug:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(N=e==null?void 0:e.decode)!==null&&N!==void 0?N:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Tl=class extends Error{constructor(t,e){var s;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((s=e.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Mw(t,e,s){const a=new URL(e,t);if(s)for(const[r,c]of Object.entries(s))c!==void 0&&a.searchParams.set(r,c);return a.toString()}async function Dw(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Ow(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:s,path:a,query:r,body:c,headers:d}){const f=Mw(t.baseUrl,a,r),m=await Dw(t.auth),p=await e(f,{method:s,headers:{...c?{"Content-Type":"application/json"}:{},...m,...d},body:c?JSON.stringify(c):void 0}),g=await p.text(),v=(p.headers.get("content-type")||"").includes("application/json"),y=v&&g?JSON.parse(g):g;if(!p.ok){const N=v?y:void 0,S=N==null?void 0:N.error;throw new Tl((S==null?void 0:S.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:N})}return{status:p.status,headers:p.headers,data:y}}}}function Xr(t){return t.join("")}var Uw=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Xr(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(t,e){const s={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xr(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xr(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xr(t.namespace)}`}),!0}catch(e){if(e instanceof Tl&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(s){if(s instanceof Tl&&s.status===409)return;throw s}}};function aa(t){return t.join("")}var Pw=class{constructor(t,e="",s){this.client=t,this.prefix=e,this.accessDelegation=s}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables`,body:e,headers:s})).data.metadata}async updateTable(t,e){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(s){if(s instanceof Tl&&s.status===404)return!1;throw s}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(s){if(s instanceof Tl&&s.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw s}}},Lw=class{constructor(t){var a;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const s=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Ow({baseUrl:s,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(a=t.accessDelegation)==null?void 0:a.join(","),this.namespaceOps=new Uw(this.client,e),this.tableOps=new Pw(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},wo=class extends Error{constructor(t,e="storage",s,a){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=s,this.statusCode=a}};function No(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Qr=class extends wo{constructor(t,e,s,a="storage"){super(t,a,e,s),this.name=a==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},mg=class extends wo{constructor(t,e,s="storage"){super(t,s),this.name=s==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const Bw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Gw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ou=t=>{if(Array.isArray(t))return t.map(s=>ou(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,a])=>{const r=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));e[r]=ou(a)}),e},qw=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function El(t){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(t)}function Vw(t,e){if(El(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var a=s.call(t,e);if(El(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hw(t){var e=Vw(t,"string");return El(e)=="symbol"?e:e+""}function $w(t,e,s){return(e=Hw(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function r0(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),s.push.apply(s,a)}return s}function Pe(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?r0(Object(s),!0).forEach(function(a){$w(t,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r0(Object(s)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))})}return t}const o0=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Fw=async(t,e,s,a)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(s!=null&&s.noResolveJson)){const r=t,c=r.status||500;if(typeof r.json=="function")r.json().then(d=>{const f=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||c+"";e(new Qr(o0(d),c,f,a))}).catch(()=>{if(a==="vectors"){const d=c+"";e(new Qr(r.statusText||`HTTP ${c} error`,c,d,a))}else{const d=c+"";e(new Qr(r.statusText||`HTTP ${c} error`,c,d,a))}});else{const d=c+"";e(new Qr(r.statusText||`HTTP ${c} error`,c,d,a))}}else e(new mg(o0(t),t,a))},zw=(t,e,s,a)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!a?Pe(Pe({},r),s):(Gw(a)?(r.headers=Pe({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(a)):r.body=a,e!=null&&e.duplex&&(r.duplex=e.duplex),Pe(Pe({},r),s))};async function gl(t,e,s,a,r,c,d){return new Promise((f,m)=>{t(s,zw(e,a,r,c)).then(p=>{if(!p.ok)throw p;if(a!=null&&a.noResolveJson)return p;if(d==="vectors"){const g=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!g||!g.includes("application/json"))return{}}return p.json()}).then(p=>f(p)).catch(p=>Fw(p,m,a,d))})}function xg(t="storage"){return{get:async(e,s,a,r)=>gl(e,"GET",s,a,r,void 0,t),post:async(e,s,a,r,c)=>gl(e,"POST",s,r,c,a,t),put:async(e,s,a,r,c)=>gl(e,"PUT",s,r,c,a,t),head:async(e,s,a,r)=>gl(e,"HEAD",s,Pe(Pe({},a),{},{noResolveJson:!0}),r,void 0,t),remove:async(e,s,a,r,c)=>gl(e,"DELETE",s,r,c,a,t)}}const Jw=xg("storage"),{get:Cl,post:qs,put:cu,head:Ww,remove:Mu}=Jw,ys=xg("vectors");var Na=class{constructor(t,e={},s,a="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=Bw(s),this.namespace=a}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(No(s))return{data:null,error:s};throw s}}},Yw=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(No(e))return{data:null,error:e};throw e}}};let gg;gg=Symbol.toStringTag;var Kw=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[gg]="BlobDownloadBuilder",this.promise=null}asStream(){return new Yw(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(No(e))return{data:null,error:e};throw e}}};const Xw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},c0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Qw=class extends Na{constructor(t,e={},s,a){super(t,e,a,"storage"),this.bucketId=s}async uploadOrUpdate(t,e,s,a){var r=this;return r.handleOperation(async()=>{let c;const d=Pe(Pe({},c0),a);let f=Pe(Pe({},r.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),m&&c.append("metadata",r.encodeMetadata(m)),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.has("cacheControl")||c.append("cacheControl",d.cacheControl),m&&!c.has("metadata")&&c.append("metadata",r.encodeMetadata(m))):(c=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,m&&(f["x-metadata"]=r.toBase64(r.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!d.duplex&&(d.duplex="half")),a!=null&&a.headers&&(f=Pe(Pe({},f),a.headers));const p=r._removeEmptyFolders(e),g=r._getFinalPath(p),v=await(t=="PUT"?cu:qs)(r.fetch,`${r.url}/object/${g}`,c,Pe({headers:f},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{path:p,id:v.Id,fullPath:v.Key}})}async upload(t,e,s){return this.uploadOrUpdate("POST",t,e,s)}async uploadToSignedUrl(t,e,s,a){var r=this;const c=r._removeEmptyFolders(t),d=r._getFinalPath(c),f=new URL(r.url+`/object/upload/sign/${d}`);return f.searchParams.set("token",e),r.handleOperation(async()=>{let m;const p=Pe({upsert:c0.upsert},a),g=Pe(Pe({},r.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",p.cacheControl)):(m=s,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType),{path:c,fullPath:(await cu(r.fetch,f.toString(),m,{headers:g})).Key}})}async createSignedUploadUrl(t,e){var s=this;return s.handleOperation(async()=>{let a=s._getFinalPath(t);const r=Pe({},s.headers);e!=null&&e.upsert&&(r["x-upsert"]="true");const c=await qs(s.fetch,`${s.url}/object/upload/sign/${a}`,{},{headers:r}),d=new URL(s.url+c.url),f=d.searchParams.get("token");if(!f)throw new wo("No token returned by API");return{signedUrl:d.toString(),path:t,token:f}})}async update(t,e,s){return this.uploadOrUpdate("PUT",t,e,s)}async move(t,e,s){var a=this;return a.handleOperation(async()=>await qs(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:a.headers}))}async copy(t,e,s){var a=this;return a.handleOperation(async()=>({path:(await qs(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:a.headers})).Key}))}async createSignedUrl(t,e,s){var a=this;return a.handleOperation(async()=>{let r=a._getFinalPath(t),c=await qs(a.fetch,`${a.url}/object/sign/${r}`,Pe({expiresIn:e},s!=null&&s.transform?{transform:s.transform}:{}),{headers:a.headers});const d=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{signedUrl:encodeURI(`${a.url}${c.signedURL}${d}`)}})}async createSignedUrls(t,e,s){var a=this;return a.handleOperation(async()=>{const r=await qs(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:e,paths:t},{headers:a.headers}),c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return r.map(d=>Pe(Pe({},d),{},{signedUrl:d.signedURL?encodeURI(`${a.url}${d.signedURL}${c}`):null}))})}download(t,e){const s=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),r=a?`?${a}`:"",c=this._getFinalPath(t),d=()=>Cl(this.fetch,`${this.url}/${s}/${c}${r}`,{headers:this.headers,noResolveJson:!0});return new Kw(d,this.shouldThrowOnError)}async info(t){var e=this;const s=e._getFinalPath(t);return e.handleOperation(async()=>ou(await Cl(e.fetch,`${e.url}/object/info/${s}`,{headers:e.headers})))}async exists(t){var e=this;const s=e._getFinalPath(t);try{return await Ww(e.fetch,`${e.url}/object/${s}`,{headers:e.headers}),{data:!0,error:null}}catch(a){if(e.shouldThrowOnError)throw a;if(No(a)&&a instanceof mg){const r=a.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:a}}throw a}}getPublicUrl(t,e){const s=this._getFinalPath(t),a=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&a.push(r);const c=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});d!==""&&a.push(d);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${s}${f}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Mu(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,s){var a=this;return a.handleOperation(async()=>{const r=Pe(Pe(Pe({},Xw),e),{},{prefix:t||""});return await qs(a.fetch,`${a.url}/object/list/${a.bucketId}`,r,{headers:a.headers},s)})}async listV2(t,e){var s=this;return s.handleOperation(async()=>{const a=Pe({},t);return await qs(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,a,{headers:s.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Zw="2.93.3",Dl={"X-Client-Info":`storage-js/${Zw}`};var eN=class extends Na{constructor(t,e={},s,a){const r=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const c=r.href.replace(/\/$/,""),d=Pe(Pe({},Dl),e);super(c,d,s,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const s=e.listBucketOptionsToQueryString(t);return await Cl(e.fetch,`${e.url}/bucket${s}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Cl(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var s=this;return s.handleOperation(async()=>await qs(s.fetch,`${s.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}))}async updateBucket(t,e){var s=this;return s.handleOperation(async()=>await cu(s.fetch,`${s.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await qs(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Mu(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},tN=class extends Na{constructor(t,e={},s){const a=t.replace(/\/$/,""),r=Pe(Pe({},Dl),e);super(a,r,s,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await qs(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const s=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&s.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&s.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&s.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&s.set("sortOrder",t.sortOrder),t!=null&&t.search&&s.set("search",t.search);const a=s.toString(),r=a?`${e.url}/bucket?${a}`:`${e.url}/bucket`;return await Cl(e.fetch,r,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Mu(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!qw(t))throw new wo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new Lw({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(s,{get(r,c){const d=r[c];return typeof d!="function"?d:async(...f)=>{try{return{data:await d.apply(r,f),error:null}}catch(m){if(a)throw m;return{data:null,error:m}}}}})}},sN=class extends Na{constructor(t,e={},s){const a=t.replace(/\/$/,""),r=Pe(Pe({},Dl),{},{"Content-Type":"application/json"},e);super(a,r,s,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await ys.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var s=this;return s.handleOperation(async()=>await ys.post(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:s.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await ys.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var s=this;return s.handleOperation(async()=>await ys.post(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:s.headers})||{})}},nN=class extends Na{constructor(t,e={},s){const a=t.replace(/\/$/,""),r=Pe(Pe({},Dl),{},{"Content-Type":"application/json"},e);super(a,r,s,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await ys.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await ys.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await ys.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await ys.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await ys.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},iN=class extends Na{constructor(t,e={},s){const a=t.replace(/\/$/,""),r=Pe(Pe({},Dl),{},{"Content-Type":"application/json"},e);super(a,r,s,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await ys.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await ys.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await ys.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await ys.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},aN=class extends iN{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new lN(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,s=this;return e().call(s,t)}async getBucket(t){var e=()=>super.getBucket,s=this;return e().call(s,t)}async listBuckets(t={}){var e=()=>super.listBuckets,s=this;return e().call(s,t)}async deleteBucket(t){var e=()=>super.deleteBucket,s=this;return e().call(s,t)}},lN=class extends sN{constructor(t,e,s,a){super(t,e,a),this.vectorBucketName=s}async createIndex(t){var e=()=>super.createIndex,s=this;return e().call(s,Pe(Pe({},t),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,s=this;return e().call(s,Pe(Pe({},t),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,s=this;return e().call(s,s.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,s=this;return e().call(s,s.vectorBucketName,t)}index(t){return new rN(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},rN=class extends nN{constructor(t,e,s,a,r){super(t,e,r),this.vectorBucketName=s,this.indexName=a}async putVectors(t){var e=()=>super.putVectors,s=this;return e().call(s,Pe(Pe({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(t){var e=()=>super.getVectors,s=this;return e().call(s,Pe(Pe({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,s=this;return e().call(s,Pe(Pe({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,s=this;return e().call(s,Pe(Pe({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,s=this;return e().call(s,Pe(Pe({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},oN=class extends eN{constructor(t,e={},s,a){super(t,e,s,a)}from(t){return new Qw(this.url,this.headers,t,this.fetch)}get vectors(){return new aN(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tN(this.url+"/iceberg",this.headers,this.fetch)}};const bg="2.93.3",fa=30*1e3,du=3,Kd=du*fa,cN="http://localhost:9999",dN="supabase.auth.token",uN={"X-Client-Info":`gotrue-js/${bg}`},uu="X-Supabase-Api-Version",vg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},fN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hN=600*1e3;class jl extends Error{constructor(e,s,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function Ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class pN extends jl{constructor(e,s,a){super(e,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function mN(t){return Ce(t)&&t.name==="AuthApiError"}class bi extends jl{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class bn extends jl{constructor(e,s,a,r){super(e,a,r),this.name=s,this.status=a}}class vs extends bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xd(t){return Ce(t)&&t.name==="AuthSessionMissingError"}class la extends bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zr extends bn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class eo extends bn{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xN(t){return Ce(t)&&t.name==="AuthImplicitGrantRedirectError"}class d0 extends bn{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gN extends bn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class fu extends bn{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Qd(t){return Ce(t)&&t.name==="AuthRetryableFetchError"}class u0 extends bn{constructor(e,s,a){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class hu extends bn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),f0=` 	
\r=`.split(""),bN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<f0.length;e+=1)t[f0[e].charCodeAt(0)]=-2;for(let e=0;e<co.length;e+=1)t[co[e].charCodeAt(0)]=e;return t})();function h0(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;s(co[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;s(co[a]),e.queuedBits-=6}}function yg(t,e,s){const a=bN[t];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function p0(t){const e=[],s=d=>{e.push(String.fromCodePoint(d))},a={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},c=d=>{wN(d,a,s)};for(let d=0;d<t.length;d+=1)yg(t.charCodeAt(d),r,c);return e.join("")}function vN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function yN(t,e){for(let s=0;s<t.length;s+=1){let a=t.charCodeAt(s);if(a>55295&&a<=56319){const r=(a-55296)*1024&65535;a=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}vN(a,e)}}function wN(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let a=1;a<6;a+=1)if((t>>7-a&1)===0){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function ba(t){const e=[],s={queue:0,queuedBits:0},a=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)yg(t.charCodeAt(r),s,a);return new Uint8Array(e)}function NN(t){const e=[];return yN(t,s=>e.push(s)),new Uint8Array(e)}function vi(t){const e=[],s={queue:0,queuedBits:0},a=r=>{e.push(r)};return t.forEach(r=>h0(r,s,a)),h0(null,s,a),e.join("")}function SN(t){return Math.round(Date.now()/1e3)+t}function _N(){return Symbol("auth-callback")}const Kt=()=>typeof window<"u"&&typeof document<"u",hi={tested:!1,writable:!1},wg=()=>{if(!Kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hi.tested)return hi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),hi.tested=!0,hi.writable=!0}catch{hi.tested=!0,hi.writable=!1}return hi.writable};function kN(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,c)=>{e[c]=r})}catch{}return s.searchParams.forEach((a,r)=>{e[r]=a}),e}const Ng=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),TN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ha=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},pi=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Yt=async(t,e)=>{await t.removeItem(e)};class So{constructor(){this.promise=new So.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}So.promiseConstructor=Promise;function to(t){const e=t.split(".");if(e.length!==3)throw new hu("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!fN.test(e[a]))throw new hu("JWT not in base64url format");return{header:JSON.parse(p0(e[0])),payload:JSON.parse(p0(e[1])),signature:ba(e[2]),raw:{header:e[0],payload:e[1]}}}async function EN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function CN(t,e){return new Promise((a,r)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await t(c);if(!e(c,null,d)){a(d);return}}catch(d){if(!e(c,d)){r(d);return}}})()})}function jN(t){return("0"+t.toString(16)).substr(-2)}function AN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let r="";for(let c=0;c<56;c++)r+=s.charAt(Math.floor(Math.random()*a));return r}return crypto.getRandomValues(e),Array.from(e,jN).join("")}async function RN(t){const s=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(a);return Array.from(r).map(c=>String.fromCharCode(c)).join("")}async function IN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await RN(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ra(t,e,s=!1){const a=AN();let r=a;s&&(r+="/PASSWORD_RECOVERY"),await ha(t,`${e}-code-verifier`,r);const c=await IN(a);return[c,a===c?"plain":"s256"]}const MN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function DN(t){const e=t.headers.get(uu);if(!e||!e.match(MN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ON(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function UN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const PN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oa(t){if(!PN.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zd(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function LN(t,e){return new Proxy(t,{get:(s,a,r)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,a,r)}return!e.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,a,r)}})}function m0(t){return JSON.parse(JSON.stringify(t))}const mi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),BN=[502,503,504];async function x0(t){var e;if(!TN(t))throw new fu(mi(t),0);if(BN.includes(t.status))throw new fu(mi(t),t.status);let s;try{s=await t.json()}catch(c){throw new bi(mi(c),c)}let a;const r=DN(t);if(r&&r.getTime()>=vg["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new u0(mi(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new vs}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new u0(mi(s),t.status,s.weak_password.reasons);throw new pN(mi(s),t.status||500,a)}const GN=(t,e,s,a)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(a),Object.assign(Object.assign({},r),s))};async function Oe(t,e,s,a){var r;const c=Object.assign({},a==null?void 0:a.headers);c[uu]||(c[uu]=vg["2024-01-01"].name),a!=null&&a.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const d=(r=a==null?void 0:a.query)!==null&&r!==void 0?r:{};a!=null&&a.redirectTo&&(d.redirect_to=a.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await qN(t,e,s+f,{headers:c,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(m):{data:Object.assign({},m),error:null}}async function qN(t,e,s,a,r,c){const d=GN(e,a,r,c);let f;try{f=await t(s,Object.assign({},d))}catch(m){throw console.error(m),new fu(mi(m),0)}if(f.ok||await x0(f),a!=null&&a.noResolveJson)return f;try{return await f.json()}catch(m){await x0(m)}}function Bs(t){var e;let s=null;$N(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=SN(t.expires_in)));const a=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:a},error:null}}function g0(t){const e=Bs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Jn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function VN(t){return{data:t,error:null}}function HN(t){const{action_link:e,email_otp:s,hashed_token:a,redirect_to:r,verification_type:c}=t,d=yo(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:s,hashed_token:a,redirect_to:r,verification_type:c},m=Object.assign({},d);return{data:{properties:f,user:m},error:null}}function b0(t){return t}function $N(t){return t.access_token&&t.refresh_token&&t.expires_in}const eu=["global","local","others"];class FN{constructor({url:e="",headers:s={},fetch:a}){this.url=e,this.headers=s,this.fetch=Ng(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=eu[0]){if(eu.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${eu.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(Ce(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,s={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Jn})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:s}=e,a=yo(e,["options"]),r=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(r.new_email=a==null?void 0:a.newEmail,delete r.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:HN,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(Ce(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jn})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,a,r,c,d,f,m;try{const p={nextPage:null,lastPage:0,total:0},g=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(c=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&c!==void 0?c:""},xform:b0});if(g.error)throw g.error;const v=await g.json(),y=(d=g.headers.get("x-total-count"))!==null&&d!==void 0?d:0,N=(m=(f=g.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return N.length>0&&(N.forEach(S=>{const k=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);p[`${E}Page`]=k}),p.total=parseInt(y)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(Ce(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){oa(e);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jn})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){oa(e);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Jn})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,s=!1){oa(e);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Jn})}catch(a){if(Ce(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){oa(e.userId);try{const{data:s,error:a}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:a}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _deleteFactor(e){oa(e.userId),oa(e.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,a,r,c,d,f,m;try{const p={nextPage:null,lastPage:0,total:0},g=await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(c=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&c!==void 0?c:""},xform:b0});if(g.error)throw g.error;const v=await g.json(),y=(d=g.headers.get("x-total-count"))!==null&&d!==void 0?d:0,N=(m=(f=g.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return N.length>0&&(N.forEach(S=>{const k=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);p[`${E}Page`]=k}),p.total=parseInt(y)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(Ce(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(Ce(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(e){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}}function v0(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}const ca={debug:!!(globalThis&&wg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zN extends Sg{}async function JN(t,e,s){ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async r=>{if(r){ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new zN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ca.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function WN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function _g(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function YN(t){return parseInt(t,16)}function KN(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,a=>a.toString(16).padStart(2,"0")).join("")}function XN(t){var e;const{chainId:s,domain:a,expirationTime:r,issuedAt:c=new Date,nonce:d,notBefore:f,requestId:m,resources:p,scheme:g,uri:v,version:y}=t;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const N=_g(t.address),S=g?`${g}://${a}`:a,k=t.statement?`${t.statement}
`:"",E=`${S} wants you to sign in with your Ethereum account:
${N}

${k}`;let T=`URI: ${v}
Version: ${y}
Chain ID: ${s}${d?`
Nonce: ${d}`:""}
Issued At: ${c.toISOString()}`;if(r&&(T+=`
Expiration Time: ${r.toISOString()}`),f&&(T+=`
Not Before: ${f.toISOString()}`),m&&(T+=`
Request ID: ${m}`),p){let M=`
Resources:`;for(const C of p){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);M+=`
- ${C}`}T+=M}return`${E}
${T}`}class Pt extends Error{constructor({message:e,code:s,cause:a,name:r}){var c;super(e,{cause:a}),this.__isWebAuthnError=!0,this.name=(c=r??(a instanceof Error?a.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=s}}class uo extends Pt{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function QN({error:t,options:e}){var s,a,r;const{publicKey:c}=e;if(!c)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((s=c.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return c.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const d=window.location.hostname;if(kg(d)){if(c.rp.id!==d)return new Pt({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function ZN({error:t,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(kg(a)){if(s.rpId!==a)return new Pt({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class eS{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const tS=new eS;function sS(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:s,excludeCredentials:a}=t,r=yo(t,["challenge","user","excludeCredentials"]),c=ba(e).buffer,d=Object.assign(Object.assign({},s),{id:ba(s.id).buffer}),f=Object.assign(Object.assign({},r),{challenge:c,user:d});if(a&&a.length>0){f.excludeCredentials=new Array(a.length);for(let m=0;m<a.length;m++){const p=a[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:ba(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function nS(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:s}=t,a=yo(t,["challenge","allowCredentials"]),r=ba(e).buffer,c=Object.assign(Object.assign({},a),{challenge:r});if(s&&s.length>0){c.allowCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const f=s[d];c.allowCredentials[d]=Object.assign(Object.assign({},f),{id:ba(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function iS(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t;return{id:t.id,rawId:t.id,response:{attestationObject:vi(new Uint8Array(t.response.attestationObject)),clientDataJSON:vi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function aS(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t,a=t.getClientExtensionResults(),r=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:vi(new Uint8Array(r.authenticatorData)),clientDataJSON:vi(new Uint8Array(r.clientDataJSON)),signature:vi(new Uint8Array(r.signature)),userHandle:r.userHandle?vi(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function kg(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function y0(){var t,e;return!!(Kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function lS(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new uo("Browser returned unexpected credential type",e)}:{data:null,error:new uo("Empty credential response",e)}}catch(e){return{data:null,error:QN({error:e,options:t})}}}async function rS(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new uo("Browser returned unexpected credential type",e)}:{data:null,error:new uo("Empty credential response",e)}}catch(e){return{data:null,error:ZN({error:e,options:t})}}}const oS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},cS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function fo(...t){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),s=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),a={};for(const r of t)if(r)for(const c in r){const d=r[c];if(d!==void 0)if(Array.isArray(d))a[c]=d;else if(s(d))a[c]=d;else if(e(d)){const f=a[c];e(f)?a[c]=fo(f,d):a[c]=fo(d)}else a[c]=d}return a}function dS(t,e){return fo(oS,t,e||{})}function uS(t,e){return fo(cS,t,e||{})}class fS{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:a,signal:r},c){var d;try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!f)return{data:null,error:m};const p=r??tS.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:g}=f.webauthn.credential_options.publicKey;if(!g.name){const v=a;if(v)g.name=`${g.id}:${v}`;else{const N=(await this.client.getUser()).data.user,S=((d=N==null?void 0:N.user_metadata)===null||d===void 0?void 0:d.name)||(N==null?void 0:N.email)||(N==null?void 0:N.id)||"User";g.name=`${g.id}:${S}`}}g.displayName||(g.displayName=g.name)}switch(f.webauthn.type){case"create":{const g=dS(f.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:v,error:y}=await lS({publicKey:g,signal:p});return v?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}case"request":{const g=uS(f.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:v,error:y}=await rS(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:g,signal:p}));return v?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}}}catch(f){return Ce(f)?{data:null,error:f}:{data:null,error:new bi("Unexpected error in challenge",f)}}}async _verify({challengeId:e,factorId:s,webauthn:a}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:a})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},c){if(!s)return{data:null,error:new jl("rpId is required for WebAuthn authentication")};try{if(!y0())return{data:null,error:new bi("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:a},signal:r},{request:c});if(!d)return{data:null,error:f};const{webauthn:m}=d;return this._verify({factorId:e,challengeId:d.challengeId,webauthn:{type:m.type,rpId:s,rpOrigins:a,credential_response:m.credential_response}})}catch(d){return Ce(d)?{data:null,error:d}:{data:null,error:new bi("Unexpected error in authenticate",d)}}}async _register({friendlyName:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},c){if(!s)return{data:null,error:new jl("rpId is required for WebAuthn registration")};try{if(!y0())return{data:null,error:new bi("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this._enroll({friendlyName:e});if(!d)return await this.client.mfa.listFactors().then(g=>{var v;return(v=g.data)===null||v===void 0?void 0:v.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:s,rpOrigins:a},signal:r},{create:c});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:s,rpOrigins:a,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(d){return Ce(d)?{data:null,error:d}:{data:null,error:new bi("Unexpected error in register",d)}}}}WN();const hS={url:cN,storageKey:dN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function w0(t,e,s){return await s()}const da={};class Al{get jwks(){var e,s;return(s=(e=da[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){da[this.storageKey]=Object.assign(Object.assign({},da[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=da[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){da[this.storageKey]=Object.assign(Object.assign({},da[this.storageKey]),{cachedAt:e})}constructor(e){var s,a,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},hS),e);if(this.storageKey=c.storageKey,this.instanceID=(s=Al.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Al.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&Kt()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new FN({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Ng(c.fetch),this.lock=c.lock||w0,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&Kt()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=JN:this.lock=w0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new fS(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:wg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=v0(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=v0(this.memoryStorage)),Kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d);try{await this._notifyAllSubscribers(d.data.event,d.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(d=>{this._debug("#initialize()","error",d)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${bg}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},a="none";if(Kt()&&(s=kN(window.location.href),this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce")),Kt()&&this.detectSessionInUrl&&a!=="none"){const{data:r,error:c}=await this._getSessionFromURL(s,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),xN(c)){const m=(e=c.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:d,redirectType:f}=r;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Ce(s)?this._returnResult({error:s}):this._returnResult({error:new bi("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,a,r;try{const c=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Bs}),{data:d,error:f}=c;if(f||!d)return this._returnResult({data:{user:null,session:null},error:f});const m=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(c){if(Ce(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(e){var s,a,r;try{let c;if("email"in e){const{email:g,password:v,options:y}=e;let N=null,S=null;this.flowType==="pkce"&&([N,S]=await ra(this.storage,this.storageKey)),c=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:g,password:v,data:(s=y==null?void 0:y.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:N,code_challenge_method:S},xform:Bs})}else if("phone"in e){const{phone:g,password:v,options:y}=e;c=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(a=y==null?void 0:y.data)!==null&&a!==void 0?a:{},channel:(r=y==null?void 0:y.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Bs})}else throw new Zr("You must provide either an email or phone number and a password");const{data:d,error:f}=c;if(f||!d)return await Yt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(c){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ce(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(e){try{let s;if("email"in e){const{email:c,password:d,options:f}=e;s=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:g0})}else if("phone"in e){const{phone:c,password:d,options:f}=e;s=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:g0})}else throw new Zr("You must provide either an email or phone number and a password");const{data:a,error:r}=s;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!a||!a.session||!a.user){const c=new la;return this._returnResult({data:{user:null,session:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:r})}catch(s){if(Ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,a,r,c;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(c=e.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,a,r,c,d,f,m,p,g,v,y;let N,S;if("message"in e)N=e.message,S=e.signature;else{const{chain:k,wallet:E,statement:T,options:M}=e;let C;if(Kt())if(typeof E=="object")C=E;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")C=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=E}const D=new URL((s=M==null?void 0:M.url)!==null&&s!==void 0?s:window.location.href),R=await C.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=_g(R[0]);let G=(a=M==null?void 0:M.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!G){const z=await C.request({method:"eth_chainId"});G=YN(z)}const H={domain:D.host,address:B,statement:T,uri:D.href,version:"1",chainId:G,nonce:(r=M==null?void 0:M.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(d=(c=M==null?void 0:M.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(f=M==null?void 0:M.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=M==null?void 0:M.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=M==null?void 0:M.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=M==null?void 0:M.signInWithEthereum)===null||g===void 0?void 0:g.resources};N=XN(H),S=await C.request({method:"personal_sign",params:[KN(N),B]})}try{const{data:k,error:E}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:N,signature:S},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Bs});if(E)throw E;if(!k||!k.session||!k.user){const T=new la;return this._returnResult({data:{user:null,session:null},error:T})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:E})}catch(k){if(Ce(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(e){var s,a,r,c,d,f,m,p,g,v,y,N;let S,k;if("message"in e)S=e.message,k=e.signature;else{const{chain:E,wallet:T,statement:M,options:C}=e;let D;if(Kt())if(typeof T=="object")D=T;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))D=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=T}const R=new URL((s=C==null?void 0:C.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in D&&D.signIn){const B=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),M?{statement:M}:null));let G;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")G=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)G=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)S=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),k=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${R.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(r=(a=C==null?void 0:C.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((f=C==null?void 0:C.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((p=C==null?void 0:C.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((v=(g=C==null?void 0:C.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||v===void 0)&&v.length?["Resources",...C.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const B=await D.signMessage(new TextEncoder().encode(S),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=B}}try{const{data:E,error:T}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:vi(k)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(N=e.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:Bs});if(T)throw T;if(!E||!E.session||!E.user){const M=new la;return this._returnResult({data:{user:null,session:null},error:M})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:T})}catch(E){if(Ce(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const s=await pi(this.storage,`${this.storageKey}-code-verifier`),[a,r]=(s??"").split("/");try{if(!a&&this.flowType==="pkce")throw new gN;const{data:c,error:d}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:Bs});if(await Yt(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!c||!c.session||!c.user){const f=new la;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:r??null}),error:d})}catch(c){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ce(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(e){try{const{options:s,provider:a,token:r,access_token:c,nonce:d}=e,f=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:r,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Bs}),{data:m,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const g=new la;return this._returnResult({data:{user:null,session:null},error:g})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(s){if(Ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,a,r,c,d;try{if("email"in e){const{email:f,options:m}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await ra(this.storage,this.storageKey));const{error:v}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},create_user:(a=m==null?void 0:m.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:f,options:m}=e,{data:p,error:g}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(c=m==null?void 0:m.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(d=m==null?void 0:m.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:g})}throw new Zr("You must provide either an email or phone number.")}catch(f){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ce(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var s,a;try{let r,c;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,c=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:f}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:c}}),redirectTo:r,xform:Bs});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,p=d.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var s,a,r,c,d;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await ra(this.storage,this.storageKey));const p=await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:VN});return!((c=p.data)===null||c===void 0)&&c.url&&Kt()&&!(!((d=e.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ce(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:a}=e;if(a)throw a;if(!s)throw new vs;const{error:r}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(Ce(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:a,type:r,options:c}=e,{error:d}=await Oe(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:r,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in e){const{phone:a,type:r,options:c}=e,{data:d,error:f}=await Oe(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:r,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f})}throw new Zr("You must provide either an email or phone number and a type")}catch(s){if(Ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await pi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<Kd:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.userStorage){const d=await pi(this.userStorage,this.storageKey+"-user");d!=null&&d.user?e.user=d.user:e.user=Zd()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};e.user=LN(e.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(e){try{return e?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jn}):await this._useSession(async s=>{var a,r,c;const{data:d,error:f}=s;if(f)throw f;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vs}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(r=d.session)===null||r===void 0?void 0:r.access_token)!==null&&c!==void 0?c:void 0,xform:Jn})})}catch(s){if(Ce(s))return Xd(s)&&(await this._removeSession(),await Yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async a=>{const{data:r,error:c}=a;if(c)throw c;if(!r.session)throw new vs;const d=r.session;let f=null,m=null;this.flowType==="pkce"&&e.email!=null&&([f,m]=await ra(this.storage,this.storageKey));const{data:p,error:g}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:m}),jwt:d.access_token,xform:Jn});if(g)throw g;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(a){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ce(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new vs;const s=Date.now()/1e3;let a=s,r=!0,c=null;const{payload:d}=to(e.access_token);if(d.exp&&(a=d.exp,r=a<=s),r){const{data:f,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:m}=await this._getUser(e.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});c={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(s){if(Ce(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var a;if(!e){const{data:d,error:f}=s;if(f)throw f;e=(a=d.session)!==null&&a!==void 0?a:void 0}if(!(e!=null&&e.refresh_token))throw new vs;const{data:r,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(Ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!Kt())throw new eo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new eo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new d0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new eo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new d0("No code detected.");const{data:M,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:r,access_token:c,refresh_token:d,expires_in:f,expires_at:m,token_type:p}=e;if(!c||!f||!d||!p)throw new eo("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(f);let y=g+v;m&&(y=parseInt(m));const N=y-g;N*1e3<=fa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${N}s, should have been closer to ${v}s`);const S=y-v;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,y,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,y,g);const{data:k,error:E}=await this._getUser(c);if(E)throw E;const T={provider_token:a,provider_refresh_token:r,access_token:c,expires_in:v,expires_at:y,refresh_token:d,token_type:p,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(a){if(Ce(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await pi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:r,error:c}=s;if(c&&!Xd(c))return this._returnResult({error:c});const d=(a=r.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:f}=await this.admin.signOut(d,e);if(f&&!(mN(f)&&(f.status===404||f.status===401||f.status===403)||Xd(f)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await Yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=_N(),a={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async s=>{var a,r;try{const{data:{session:c},error:d}=s;if(d)throw d;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}})}async resetPasswordForEmail(e,s={}){let a=null,r=null;this.flowType==="pkce"&&([a,r]=await ra(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ce(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var e;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:a,error:r}=await this._useSession(async c=>{var d,f,m,p,g;const{data:v,error:y}=c;if(y)throw y;const N=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",N,{headers:this.headers,jwt:(g=(p=v.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(r)throw r;return Kt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),this._returnResult({data:{provider:e.provider,url:a==null?void 0:a.url},error:null})}catch(a){if(Ce(a))return this._returnResult({data:{provider:e.provider,url:null},error:a});throw a}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var a;try{const{error:r,data:{session:c}}=s;if(r)throw r;const{options:d,provider:f,token:m,access_token:p,nonce:g}=e,v=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=c==null?void 0:c.access_token)!==null&&a!==void 0?a:void 0,body:{provider:f,id_token:m,access_token:p,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Bs}),{data:y,error:N}=v;return N?this._returnResult({data:{user:null,session:null},error:N}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new la}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:N}))}catch(r){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var a,r;const{data:c,error:d}=s;if(d)throw d;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await CN(async r=>(r>0&&await EN(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Bs})),(r,c)=>{const d=200*Math.pow(2,r);return c&&Qd(c)&&Date.now()+d-a<fa})}catch(a){if(this._debug(s,"error",a),Ce(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",a),Kt()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const r=await pi(this.storage,this.storageKey);if(r&&this.userStorage){let d=await pi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:r.user},await ha(this.userStorage,this.storageKey+"-user",d)),r.user=(e=d==null?void 0:d.user)!==null&&e!==void 0?e:Zd()}else if(r&&!r.user&&!r.user){const d=await pi(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(r.user=d.user,await Yt(this.storage,this.storageKey+"-user"),await ha(this.storage,this.storageKey,r)):r.user=Zd()}if(this._debug(a,"session from storage",r),!this._isValidSession(r)){this._debug(a,"session is not valid"),r!==null&&await this._removeSession();return}const c=((s=r.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Kd;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${Kd}s`),c){if(this.autoRefreshToken&&r.refresh_token){const{error:d}=await this._callRefreshToken(r.refresh_token);d&&(console.error(d),Qd(d)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(r.access_token);!f&&(d!=null&&d.user)?(r.user=d.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(a,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(a,"error",r),console.error(r);return}finally{this._debug(a,"end")}}async _callRefreshToken(e){var s,a;if(!e)throw new vs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new So;const{data:c,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!c.session)throw new vs;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={data:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(r,"error",c),Ce(c)){const d={data:null,error:c};return Qd(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,a=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:s});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,s)}catch(m){c.push(m)}});if(await Promise.all(d),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Yt(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},e),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await ha(this.userStorage,this.storageKey+"-user",{user:s.user});const r=Object.assign({},s);delete r.user;const c=m0(r);await ha(this.storage,this.storageKey,c)}else{const r=m0(s);await ha(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Yt(this.storage,this.storageKey),await Yt(this.storage,this.storageKey+"-code-verifier"),await Yt(this.storage,this.storageKey+"-user"),this.userStorage&&await Yt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((a.expires_at*1e3-e)/fa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${fa}ms, refresh threshold is ${du} ticks`),r<=du&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Sg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,a){const r=[`provider=${encodeURIComponent(s)}`];if(a!=null&&a.redirectTo&&r.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&r.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,d]=await ra(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});r.push(f.toString())}if(a!=null&&a.queryParams){const c=new URLSearchParams(a.queryParams);r.push(c.toString())}return a!=null&&a.skipBrowserRedirect&&r.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var a;const{data:r,error:c}=s;return c?this._returnResult({data:null,error:c}):await Oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=r==null?void 0:r.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var a,r;const{data:c,error:d}=s;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:p}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(a=c==null?void 0:c.session)===null||a===void 0?void 0:a.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&m.type==="totp"&&(!((r=m==null?void 0:m.totp)===null||r===void 0)&&r.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:r,error:c}=s;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?iS(e.webauthn.credential_response):aS(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:m}=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:d,headers:this.headers,jwt:(a=r==null?void 0:r.session)===null||a===void 0?void 0:a.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:r,error:c}=s;if(c)return this._returnResult({data:null,error:c});const d=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(a=r==null?void 0:r.session)===null||a===void 0?void 0:a.access_token});if(d.error)return d;const{data:f}=d;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:sS(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:nS(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:a}=await this._challenge({factorId:e.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:a}=await this.getUser();if(a)return{data:null,error:a};const r={all:[],phone:[],totp:[],webauthn:[]};for(const c of(e=s==null?void 0:s.factors)!==null&&e!==void 0?e:[])r.all.push(c),c.status==="verified"&&r[c.factor_type].push(c);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(e){var s,a,r,c;if(e)try{const{payload:N}=to(e);let S=null;N.aal&&(S=N.aal);let k=S;const{data:{user:E},error:T}=await this.getUser(e);if(T)return this._returnResult({data:null,error:T});((a=(s=E==null?void 0:E.factors)===null||s===void 0?void 0:s.filter(D=>D.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(k="aal2");const C=N.amr||[];return{data:{currentLevel:S,nextLevel:k,currentAuthenticationMethods:C},error:null}}catch(N){if(Ce(N))return this._returnResult({data:null,error:N});throw N}const{data:{session:d},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=to(d.access_token);let p=null;m.aal&&(p=m.aal);let g=p;((c=(r=d.user.factors)===null||r===void 0?void 0:r.filter(N=>N.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(g="aal2");const y=m.amr||[];return{data:{currentLevel:p,nextLevel:g,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:a},error:r}=s;return r?this._returnResult({data:null,error:r}):a?await Oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:a.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new vs})})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async a=>{const{data:{session:r},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!r)return this._returnResult({data:null,error:new vs});const d=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&Kt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(a){if(Ce(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(e,s){try{return await this._useSession(async a=>{const{data:{session:r},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!r)return this._returnResult({data:null,error:new vs});const d=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&Kt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(a){if(Ce(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:s},error:a}=e;return a?this._returnResult({data:null,error:a}):s?await Oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new vs})})}catch(e){if(Ce(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async s=>{const{data:{session:a},error:r}=s;return r?this._returnResult({data:null,error:r}):a?(await Oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new vs})})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,s={keys:[]}){let a=s.keys.find(f=>f.kid===e);if(a)return a;const r=Date.now();if(a=this.jwks.keys.find(f=>f.kid===e),a&&this.jwks_cached_at+hN>r)return a;const{data:c,error:d}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=r,a=c.keys.find(f=>f.kid===e),!a)?null:a}async getClaims(e,s={}){try{let a=e;if(!a){const{data:N,error:S}=await this.getSession();if(S||!N.session)return this._returnResult({data:null,error:S});a=N.session.access_token}const{header:r,payload:c,signature:d,raw:{header:f,payload:m}}=to(a);s!=null&&s.allowExpired||ON(c.exp);const p=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!p){const{error:N}=await this.getUser(a);if(N)throw N;return{data:{claims:c,header:r,signature:d},error:null}}const g=UN(r.alg),v=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,v,d,NN(`${f}.${m}`)))throw new hu("Invalid JWT signature");return{data:{claims:c,header:r,signature:d},error:null}}catch(a){if(Ce(a))return this._returnResult({data:null,error:a});throw a}}}Al.nextInstanceID={};const pS=Al,mS="2.93.3";let yl="";typeof Deno<"u"?yl="deno":typeof document<"u"?yl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yl="react-native":yl="node";const xS={"X-Client-Info":`supabase-js-${yl}/${mS}`},gS={headers:xS},bS={schema:"public"},vS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yS={};function Rl(t){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rl(t)}function wS(t,e){if(Rl(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var a=s.call(t,e);if(Rl(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NS(t){var e=wS(t,"string");return Rl(e)=="symbol"?e:e+""}function SS(t,e,s){return(e=NS(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function N0(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),s.push.apply(s,a)}return s}function kt(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?N0(Object(s),!0).forEach(function(a){SS(t,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):N0(Object(s)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))})}return t}const _S=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),kS=()=>Headers,TS=(t,e,s)=>{const a=_S(s),r=kS();return async(c,d)=>{var f;const m=(f=await e())!==null&&f!==void 0?f:t;let p=new r(d==null?void 0:d.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),a(c,kt(kt({},d),{},{headers:p}))}};function ES(t){return t.endsWith("/")?t:t+"/"}function CS(t,e){var s,a;const{db:r,auth:c,realtime:d,global:f}=t,{db:m,auth:p,realtime:g,global:v}=e,y={db:kt(kt({},m),r),auth:kt(kt({},p),c),realtime:kt(kt({},g),d),storage:{},global:kt(kt(kt({},v),f),{},{headers:kt(kt({},(s=v==null?void 0:v.headers)!==null&&s!==void 0?s:{}),(a=f==null?void 0:f.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function jS(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ES(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var AS=class extends pS{constructor(t){super(t)}},RS=class{constructor(t,e,s){var a,r;this.supabaseUrl=t,this.supabaseKey=e;const c=jS(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:bS,realtime:yS,auth:kt(kt({},vS),{},{storageKey:d}),global:gS},m=CS(s??{},f);if(this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(r=m.global.headers)!==null&&r!==void 0?r:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=m.auth)!==null&&p!==void 0?p:{},this.headers,m.global.fetch)}this.fetch=TS(e,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(kt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new mw(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new oN(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new dw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,s)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,s;if(t.accessToken)return await t.accessToken();const{data:a}=await t.auth.getSession();return(e=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:a,userStorage:r,storageKey:c,flowType:d,lock:f,debug:m,throwOnError:p},g,v){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new AS({url:this.authUrl.href,headers:kt(kt({},y),g),storageKey:c,autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:a,userStorage:r,flowType:d,lock:f,debug:m,throwOnError:p,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Iw(this.realtimeUrl.href,kt(kt({},t),{},{params:kt(kt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const IS=(t,e,s)=>new RS(t,e,s);function MS(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const s=e.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}MS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const DS="https://tnvmpjxomfahszuhmlvj.supabase.co",OS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRudm1wanhvbWZhaHN6dWhtbHZqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk5OTA5OTYsImV4cCI6MjA4NTU2Njk5Nn0.0Hd-YhnzO-16dVptFHMjAc84dcy0P1Z58bDIWyVNZE4",Gs=IS(DS,OS),Tg=typeof window<"u"&&!!window.wpApiSettings,_l=Tg?`${window.wpApiSettings.root}cricket-core/v1/sync`:null,ho=Tg?`${window.wpApiSettings.root}cricket-core/v1/user`:null,US=async(t,e)=>{const{error:s}=await Gs.from("app_state").upsert({id:"global",payload:t,updated_at:new Date});if(!s)return!0;if(console.error("Supabase Push Error:",s),!_l)return!1;try{return(await fetch(_l,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings.nonce,...e?{"X-CC-User-ID":e}:{}},body:JSON.stringify(t)})).ok}catch(a){return console.error("Cloud Sync Failed:",a),!1}},PS=async t=>{var a,r,c,d;console.log(" Fetching from Supabase...");const{data:e,error:s}=await Gs.from("app_state").select("payload").eq("id","global").single();if(e&&e.payload)return console.log(" Supabase data fetched:",{orgs:(a=e.payload.orgs)==null?void 0:a.length,teams:(d=(c=(r=e.payload.orgs)==null?void 0:r[0])==null?void 0:c.memberTeams)==null?void 0:d.length}),e.payload;if(s&&s.code!=="PGRST116"?console.warn("Supabase Fetch Error (or empty):",s.message):s&&console.log("  No data in Supabase (table might be empty)"),!_l)return null;try{const f=t?`${_l}?user_id=${encodeURIComponent(t)}`:_l,m=await fetch(f,{headers:{"X-WP-Nonce":window.wpApiSettings.nonce}});return m.ok?await m.json():null}catch(f){return console.error("Cloud Fetch Failed:",f),null}},LS=async(t,e)=>{if(!ho)return!1;try{return(await fetch(`${ho}?user_id=${encodeURIComponent(t)}`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings.nonce},body:JSON.stringify(e)})).ok}catch(s){return console.error("User Data Sync Failed:",s),!1}},Eg=async t=>{if(!ho)return null;try{const e=await fetch(`${ho}?user_id=${encodeURIComponent(t)}`,{method:"GET",headers:{"X-WP-Nonce":window.wpApiSettings.nonce}});if(!e.ok)return null;const s=await e.json();return!s||Object.keys(s).length===0?null:s}catch(e){return console.error("User Data Fetch Failed:",e),null}},BS=({profile:t,orgs:e,standaloneMatches:s,mediaPosts:a,settings:r,following:c,setOrgsState:d,setMatchesState:f,setPostsState:m,setSettings:p,setFollowing:g})=>{const[v,y]=j.useState(!1),N=j.useRef(!1),S=j.useRef(!1),k=j.useCallback(async()=>{var C,D,R,B,G;if(N.current)return;N.current=!0,y(!0);const M=(t==null?void 0:t.googleId)||((t==null?void 0:t.role)!=="Guest"?t==null?void 0:t.id:void 0);try{const H=await PS(M);if(console.log(" Cloud data received:",H?{orgs:(C=H.orgs)==null?void 0:C.length,teams:(B=(R=(D=H.orgs)==null?void 0:D[0])==null?void 0:R.memberTeams)==null?void 0:B.length,matches:(G=H.standaloneMatches)==null?void 0:G.length}:"null"),H){const z=JSON.stringify(H.orgs)!==JSON.stringify(e),P=JSON.stringify(H.standaloneMatches)!==JSON.stringify(s),ne=JSON.stringify(H.mediaPosts)!==JSON.stringify(a);console.log(" Applying changes:",{orgsChanged:z,matchesChanged:P,postsChanged:ne}),z&&d(H.orgs||[]),P&&f(H.standaloneMatches||[]),ne&&m(H.mediaPosts||[])}else console.log(" No cloud data to sync");if(t&&t.role!=="Guest"){const z=await Eg(t.id);z&&(z.settings&&p(z.settings),z.following&&g(z.following))}}catch(H){console.error("Sync fetch failed:",H)}finally{N.current=!1,y(!1),S.current=!1}},[t==null?void 0:t.id,t==null?void 0:t.role]),E=j.useCallback(async()=>{const M=(t==null?void 0:t.googleId)||((t==null?void 0:t.role)!=="Guest"?t==null?void 0:t.id:void 0);await US({orgs:e,standaloneMatches:s,mediaPosts:a},M),t&&t.role!=="Guest"&&await LS(t.id,{profile:t,settings:r,following:c}),S.current=!1},[e,s,a,t,r,c]);return j.useEffect(()=>{k();const M=setInterval(k,3e4);return()=>clearInterval(M)},[k]),j.useEffect(()=>{if(!S.current)return;const M=setTimeout(()=>{E()},1e3);return()=>clearTimeout(M)},[e,s,a,t,r,c,E]),{isSyncing:v,syncNow:k,markDirty:()=>{S.current=!0}}},Cg=j.createContext(void 0),jg=()=>{const t=j.useContext(Cg);if(!t)throw new Error("useData must be used within a DataProvider");return t},S0={id:"guest",name:"Visitor",handle:"guest",role:"Guest",createdAt:Date.now()},GS=({children:t})=>{const[e,s]=j.useState(()=>{try{const B=localStorage.getItem("cc_profile");return B?JSON.parse(B):S0}catch{return S0}}),[a,r]=j.useState([]),[c,d]=j.useState([]),[f,m]=j.useState([]),[p,g]=j.useState(()=>{try{const B=localStorage.getItem("cc_settings");return B?JSON.parse(B):{notifications:!1,sound:!0,devMode:!1}}catch{return{notifications:!1,sound:!0,devMode:!1}}}),[v,y]=j.useState(()=>{try{const B=localStorage.getItem("cc_following");return B?JSON.parse(B):{teams:[],players:[],orgs:[]}}catch{return{teams:[],players:[],orgs:[]}}});j.useEffect(()=>{e&&e.role!=="Guest"?localStorage.setItem("cc_profile",JSON.stringify(e)):localStorage.removeItem("cc_profile")},[e]),j.useEffect(()=>{localStorage.setItem("cc_settings",JSON.stringify(p))},[p]),j.useEffect(()=>{localStorage.setItem("cc_following",JSON.stringify(v))},[v]);const{isSyncing:N,syncNow:S,markDirty:k}=BS({profile:e,orgs:a,standaloneMatches:c,mediaPosts:f,settings:p,following:v,setOrgsState:r,setMatchesState:d,setPostsState:m,setSettings:g,setFollowing:y}),E=B=>{r(B),k()},T=B=>{d(B),k()},M=B=>{m(B),k()},C=B=>{s(B),k()},D=B=>{g(B),k()},R=B=>{y(B),k()};return i.jsx(Cg.Provider,{value:{orgs:a,standaloneMatches:c,mediaPosts:f,profile:e,settings:p,following:v,setOrgs:E,setStandaloneMatches:T,setMediaPosts:M,updateProfile:C,updateSettings:D,updateFollowing:R,syncNow:S,isSyncing:N},children:t})},qS=()=>{const{setOrgs:t,setStandaloneMatches:e}=jg(),s=a=>{const r=Zm.find(d=>d.id===a);if(!r||!confirm(`Are you sure you want to load "${r.name}"? This will overwrite existing data.`))return;const c=r.generate();t(c.orgs),e(c.matches),alert(`Loaded profile: ${r.name}`)};return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-xs font-black text-indigo-400 uppercase tracking-widest mb-3",children:"Dev Data Profiles"}),i.jsx("div",{className:"grid grid-cols-1 gap-2",children:Zm.map(a=>i.jsxs("button",{onClick:()=>s(a.id),className:"flex items-center gap-3 p-3 bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-xl transition-all text-left group",children:[i.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:a.icon}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-white",children:a.name}),i.jsx("div",{className:"text-[10px] text-slate-500",children:a.description})]})]},a.id))})]})},VS=({children:t,activeTab:e,onTabChange:s,profile:a,theme:r,onThemeToggle:c,settings:d,onToggleSetting:f,onEditProfile:m,onApplyForAccreditation:p,onSignOut:g,onSignIn:v,onSwitchProfile:y,showCaptainHub:N})=>{var ne,le;const[S,k]=j.useState(!1),[E,T]=j.useState(!1),[M,C]=j.useState(!1),D=(ne=window.wpApiSettings)!=null&&ne.plugin_url?`${window.wpApiSettings.plugin_url}logo.jpg`:"/logo.jpg",R=d.devMode||a.handle==="Trinity"||a.handle==="@Trinity",B=((le=a.notifications)==null?void 0:le.filter(ie=>!ie.read).length)||0;j.useEffect(()=>{const ie=()=>{!document.fullscreenElement&&document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen().catch(J=>{console.log(`Error attempting to enable full-screen mode: ${J.message} (${J.name})`)}),document.removeEventListener("click",ie),document.removeEventListener("touchstart",ie)};return document.addEventListener("click",ie),document.addEventListener("touchstart",ie),()=>{document.removeEventListener("click",ie),document.removeEventListener("touchstart",ie)}},[]);const G=ie=>{s(ie),k(!1)},H=[];a.role==="Guest"?(H.push({id:"media",label:"Media & Fan Zone",icon:""}),H.push({id:"scorer",label:"Score Match",icon:""})):a.role==="Fan"?H.push({id:"home",label:"Media & Live",icon:""}):a.role==="Player"?(a.joinedClubIds&&a.joinedClubIds.length>0&&H.push({id:"my_club",label:"My Club",icon:""}),N&&H.push({id:"captain_hub",label:"Captain's Hub",icon:""}),H.push({id:"career",label:"My Career",icon:""}),H.push({id:"home",label:"Club Finder",icon:""}),H.push({id:"media",label:"Media",icon:""})):(H.push({id:"home",label:"Dashboard",icon:""}),N&&H.push({id:"captain_hub",label:"Captain's Hub",icon:""}),H.push({id:"scorer",label:"Scoring",icon:""}),a.role==="Administrator"&&H.push({id:"stats",label:"Analytics",icon:""}),H.push({id:"media",label:"Media",icon:""}));const P=["scorer","setup","media"].includes(e)?"h-[100dvh] w-full pt-16 lg:pt-20 overflow-hidden flex flex-col relative":"h-[100dvh] w-full pt-20 lg:pt-24 pb-12 px-4 md:px-8 lg:px-12 overflow-y-auto scroll-container custom-scrollbar relative flex flex-col";return i.jsxs("div",{className:`h-[100dvh] w-full ${r==="dark"?"bg-slate-950 text-white":"bg-slate-50 text-slate-900"} relative transition-colors duration-300 flex flex-col overflow-hidden`,children:[i.jsxs("div",{className:"fixed top-4 left-4 lg:top-6 lg:left-6 z-50 flex items-center gap-4",children:[i.jsxs("button",{onClick:()=>{k(!S),T(!1)},className:`w-12 h-12 lg:w-14 lg:h-14 rounded-2xl flex flex-col items-center justify-center gap-1.5 transition-all duration-300 shadow-2xl z-50 ${S?"bg-slate-800 text-white rotate-90 ring-2 ring-indigo-500":"bg-indigo-600 text-white hover:scale-105 active:scale-95 shadow-indigo-600/40"}`,"aria-label":"Menu",children:[i.jsx("span",{className:`w-6 h-1 bg-current rounded-full transition-all ${S?"rotate-45 translate-y-2.5":""}`}),i.jsx("span",{className:`w-6 h-1 bg-current rounded-full transition-all ${S?"opacity-0":""}`}),i.jsx("span",{className:`w-6 h-1 bg-current rounded-full transition-all ${S?"-rotate-45 -translate-y-2.5":""}`})]}),!S&&i.jsxs("div",{className:"hidden md:flex items-center gap-3 bg-slate-900/10 backdrop-blur-md p-1 pr-4 rounded-2xl border border-white/10 shadow-sm animate-in fade-in slide-in-from-left-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-black text-xs shadow-inner",children:a.name.charAt(0)}),i.jsxs("div",{className:"flex flex-col px-1 py-1",children:[i.jsxs("h1",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-0.5",children:[new Date().getHours()<12?"Good Morning":new Date().getHours()<18?"Good Afternoon":"Good Evening",", ",a.role," ",a.name.split(" ")[0]]}),i.jsx("span",{className:"text-xs text-indigo-600 font-black uppercase tracking-widest leading-none",children:e==="home"?a.role==="Fan"?"Media Center":"Dashboard":e.replace("_"," ")})]}),e==="scorer"&&i.jsxs("button",{onClick:()=>s("setup"),className:"h-8 px-3 bg-emerald-500 hover:bg-emerald-400 text-white rounded-xl shadow-lg transition-all active:scale-95 flex items-center gap-1.5 ml-2",title:"Start New Match",children:[i.jsx("span",{className:"font-black text-sm",children:"+"}),i.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"New"})]})]})]}),i.jsxs("div",{className:"fixed top-4 right-4 lg:top-6 lg:right-6 z-50 flex items-center gap-4",children:[i.jsx("div",{className:"hidden md:block",children:i.jsx(aw,{})}),a.role!=="Guest"&&i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>C(!M),className:"w-12 h-12 lg:w-14 lg:h-14 rounded-2xl flex items-center justify-center transition-all bg-white/10 backdrop-blur-md text-slate-400 border border-white/5 hover:bg-white/20 shadow-xl",children:[i.jsx("span",{className:"text-xl",children:""}),B>0&&i.jsx("span",{className:"absolute top-2 right-2 w-3 h-3 bg-red-500 rounded-full border-2 border-slate-900"})]}),M&&i.jsxs("div",{className:"absolute top-16 right-0 w-80 bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 z-[60]",children:[i.jsx("div",{className:"p-4 border-b border-slate-800 bg-slate-950/50",children:i.jsx("h3",{className:"text-xs font-black text-white uppercase tracking-widest",children:"Notifications"})}),i.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar p-2",children:a.notifications&&a.notifications.length>0?a.notifications.slice().reverse().map(ie=>i.jsxs("div",{className:`p-3 mb-2 rounded-xl border transition-all ${ie.read?"bg-slate-900/50 border-transparent opacity-60":"bg-slate-800 border-indigo-500/30"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-2 py-0.5 rounded ${ie.type==="ALERT"?"bg-red-900/30 text-red-400":"bg-emerald-900/30 text-emerald-400"}`,children:ie.type}),i.jsx("span",{className:"text-[9px] text-slate-500",children:new Date(ie.timestamp).toLocaleDateString()})]}),i.jsx("h4",{className:"text-xs font-bold text-white mb-1",children:ie.title}),i.jsx("p",{className:"text-[10px] text-slate-400 leading-relaxed",children:ie.message})]},ie.id)):i.jsx("div",{className:"text-center py-8 text-slate-500 text-xs font-bold uppercase",children:"No updates"})})]})]}),i.jsx("button",{onClick:()=>{T(!E),k(!1),C(!1)},className:`w-12 h-12 lg:w-14 lg:h-14 rounded-2xl flex items-center justify-center transition-all duration-300 shadow-2xl z-50 ${E?"bg-slate-800 text-white rotate-180 ring-2 ring-slate-600":"bg-white/10 backdrop-blur-md text-slate-400 border border-white/5 hover:bg-white/20"}`,"aria-label":"Settings",children:i.jsx("span",{className:"text-xl",children:""})})]}),i.jsx("div",{className:`fixed inset-0 bg-slate-950/90 backdrop-blur-md z-40 transition-opacity duration-300 ${S||E||M?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>{k(!1),T(!1),C(!1)}}),i.jsxs("nav",{className:`fixed top-0 left-0 h-full w-full sm:w-80 bg-slate-900 p-8 pt-24 sm:pt-8 flex flex-col gap-6 shadow-2xl z-40 transition-transform duration-500 ease-out border-r border-slate-800 ${S?"translate-x-0":"-translate-x-full"}`,children:[i.jsxs("div",{className:"flex flex-col items-start gap-4 mb-4",children:[i.jsx("img",{src:D,alt:"Cricket Core",className:"w-24 h-24 object-contain drop-shadow-lg"}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-xl font-black text-white leading-none",children:["CRICKET",i.jsx("br",{}),"CORE"]}),i.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:"v3.0.0 PRO"})]})]}),i.jsx("div",{className:"flex flex-col gap-2 overflow-y-auto max-h-[60vh] custom-scrollbar pr-2 scroll-container",children:H.map(ie=>i.jsxs("button",{onClick:()=>G(ie.id),className:`flex items-center gap-4 px-6 py-5 rounded-2xl transition-all ${e===ie.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50":"text-slate-400 hover:bg-slate-800"}`,children:[i.jsx("span",{className:"text-xl",children:ie.icon}),i.jsx("span",{className:"font-black uppercase text-xs tracking-widest",children:ie.label})]},ie.id))}),i.jsxs("div",{className:"mt-auto pt-8 border-t border-white/5 space-y-4",children:[a.role==="Guest"?i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest",children:"You are browsing as a Guest."}),i.jsx("button",{onClick:()=>{m&&m(),k(!1)},className:"w-full py-3 bg-emerald-500 text-white hover:bg-emerald-400 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-lg shadow-emerald-500/20",children:"Create Profile"}),v&&i.jsx("button",{onClick:()=>{v(),k(!1)},className:"w-full py-3 bg-indigo-600 text-white hover:bg-indigo-500 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-lg shadow-indigo-500/20",children:"Sign In"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-indigo-500 rounded-full flex items-center justify-center font-black text-white",children:a.name.charAt(0)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-xs font-black text-white truncate",children:a.name}),i.jsxs("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:["ID: ",a.id.substring(0,8)]})]})]}),i.jsx("button",{onClick:g,className:"w-full py-3 bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white rounded-xl text-xs font-black uppercase tracking-widest transition-all",children:"Sign Out"})]}),i.jsx("div",{className:"pt-4 border-t border-white/5 text-center",children:i.jsx("p",{className:"text-[9px] text-slate-600 font-bold uppercase tracking-widest",children:"Powered by mitchipoohdevs"})})]})]}),i.jsxs("aside",{className:`fixed top-0 right-0 h-full w-full sm:w-80 bg-slate-900 p-8 pt-24 sm:pt-8 flex flex-col gap-6 shadow-2xl z-40 transition-transform duration-500 ease-out border-l border-slate-800 ${E?"translate-x-0":"translate-x-full"}`,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"text-xl font-black text-white",children:"Application Settings"}),i.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Configure your experience"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar scroll-container space-y-4 pr-1",children:[(a.role==="Fan"||a.role==="Player")&&i.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl flex items-center justify-between border border-slate-700/50",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-bold text-white",children:"Official Accreditation"}),i.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:"Join Organizations"})]}),i.jsx("button",{onClick:()=>{p&&(p(),T(!1))},className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 rounded-lg text-[9px] font-black uppercase tracking-widest hover:bg-emerald-500 hover:text-white transition-all",children:"Apply"})]}),i.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-white",children:"Dark Mode"}),i.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:"Visual Theme"})]}),i.jsx("button",{onClick:c,className:`w-12 h-6 rounded-full transition-colors relative ${r==="dark"?"bg-indigo-600":"bg-slate-600"}`,children:i.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all ${r==="dark"?"left-7":"left-1"}`})})]}),i.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-white",children:"Developer Mode"}),i.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:"Restricted Access"})]}),i.jsx("button",{onClick:()=>{if(d.devMode)f("devMode");else{const ie=prompt("Enter developer password:");ie==="mitchipooh22"?f("devMode"):ie!==null&&alert("Incorrect password")}},className:`w-12 h-6 rounded-full transition-colors relative ${d.devMode?"bg-indigo-600":"bg-slate-600"}`,children:i.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all ${d.devMode?"left-7":"left-1"}`})})]}),R&&i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl border border-indigo-500/30 space-y-4",children:[i.jsx("h3",{className:"text-xs font-black text-indigo-400 uppercase tracking-widest mb-3",children:"Dev: Switch Persona"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{onClick:()=>{y("ADMIN"),T(!1)},className:"p-2 bg-purple-900/30 text-purple-400 border border-purple-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-purple-900/50",children:"Admin"}),i.jsx("button",{onClick:()=>{y("SCORER"),T(!1)},className:"p-2 bg-emerald-900/30 text-emerald-400 border border-emerald-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-emerald-900/50",children:"Scorer"}),i.jsx("button",{onClick:()=>{y("UMPIRE"),T(!1)},className:"p-2 bg-yellow-900/30 text-yellow-400 border border-yellow-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-yellow-900/50",children:"Umpire"}),i.jsx("button",{onClick:()=>{y("PLAYER"),T(!1)},className:"p-2 bg-pink-900/30 text-pink-400 border border-pink-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-pink-900/50",children:"Player"}),i.jsx("button",{onClick:()=>{y("FAN"),T(!1)},className:"p-2 bg-slate-700/30 text-slate-400 border border-slate-600/30 rounded-lg text-[9px] font-bold uppercase hover:bg-slate-700/50",children:"Fan"}),i.jsx("button",{onClick:()=>{y("GUEST"),T(!1)},className:"p-2 bg-slate-500/30 text-slate-300 border border-slate-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-slate-500/50",children:"Guest"}),i.jsx("button",{onClick:()=>{y("CAPTAIN"),T(!1)},className:"p-2 col-span-2 bg-indigo-900/30 text-indigo-400 border border-indigo-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-indigo-900/50",children:"Captain (Mock)"})]}),i.jsx("div",{className:"h-px bg-indigo-500/20 my-4"}),i.jsx(qS,{})]})]}),i.jsxs("div",{className:"mt-auto bg-slate-800/50 p-6 rounded-3xl text-center shrink-0",children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("h3",{className:"font-bold text-white mb-2",children:"Get Mobile App"}),i.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Install Cricket-Core on your device for best performance."}),i.jsx("button",{className:"w-full py-3 bg-white text-slate-900 rounded-xl text-xs font-black uppercase tracking-widest",children:"Install Now"}),i.jsx("div",{className:"pt-4 mt-4 border-t border-white/5 text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"Created by mitchipoohdevs"})]})]}),i.jsx("main",{className:P,children:i.jsx("div",{className:"max-w-[1920px] mx-auto h-full flex flex-col min-h-0 w-full",children:t})})]})},HS=(t,e,s)=>{const a=[],r=t.length,c=[...t];r%2!==0&&c.push({id:"BYE",name:"BYE",players:[]});const d=c.length-1,f=c.length/2;for(let m=0;m<d;m++){for(let g=0;g<f;g++){const v=c[g],y=c[c.length-1-g];v.id!=="BYE"&&y.id!=="BYE"&&a.push({id:`match-${Date.now()}-${m}-${g}`,tournamentId:e,groupId:s,stage:"Group",teamAId:v.id,teamBId:y.id,teamAName:v.name,teamBName:y.name,date:new Date(Date.now()+m*864e5).toISOString().split("T")[0],venue:"Arena "+(g+1),status:"Scheduled",format:"T20"})}const p=c.pop();c.splice(1,0,p)}return a},$S=(t,e,s="T20")=>{if(t.length<4)return[];const a=`match-final-${Date.now()}`,r=`match-sf1-${Date.now()}`,c=`match-sf2-${Date.now()}`,d={id:r,tournamentId:e,stage:"Semi-Final",relatedMatchId:a,teamAId:t[0].teamId,teamBId:t[3].teamId,teamAName:t[0].teamName,teamBName:t[3].teamName,date:new Date(Date.now()+864e5).toISOString().split("T")[0],venue:"Main Stadium",status:"Scheduled",format:s},f={id:c,tournamentId:e,stage:"Semi-Final",relatedMatchId:a,teamAId:t[1].teamId,teamBId:t[2].teamId,teamAName:t[1].teamName,teamBName:t[2].teamName,date:new Date(Date.now()+864e5).toISOString().split("T")[0],venue:"Main Stadium",status:"Scheduled",format:s},m={id:a,tournamentId:e,stage:"Final",teamAId:"TBD",teamBId:"TBD",teamAName:"Winner SF1",teamBName:"Winner SF2",date:new Date(Date.now()+1728e5).toISOString().split("T")[0],venue:"Grand Oval",status:"Scheduled",format:s};return[d,f,m]},Hs=t=>t!=="Wide"&&t!=="NoBall",wa=t=>{const e=Math.floor(t/6),s=t%6;return`${e}.${s}`},FS=(t,e)=>t.map(s=>({...s,memberTeams:s.memberTeams.map(a=>({...a,players:a.players.map(r=>{const c=e.playerPerformances.find(d=>d.playerId===r.id);return c?{...r,stats:{...r.stats,matches:r.stats.matches+1,runs:r.stats.runs+c.runs,ballsFaced:r.stats.ballsFaced+c.balls,wickets:r.stats.wickets+c.wickets,ballsBowled:r.stats.ballsBowled+c.overs*6,runsConceded:r.stats.runsConceded+c.runsConceded,catches:r.stats.catches+c.catches,stumpings:r.stats.stumpings+c.stumpings,runOuts:r.stats.runOuts+c.runOuts,fours:r.stats.fours+c.fours,sixes:r.stats.sixes+c.sixes,maidens:r.stats.maidens+c.maidens,highestScore:Math.max(r.stats.highestScore||0,c.runs),hundreds:r.stats.hundreds+(c.runs>=100?1:0),fifties:r.stats.fifties+(c.runs>=50&&c.runs<100?1:0),ducks:r.stats.ducks+(c.runs===0?1:0),threeWickets:r.stats.threeWickets+(c.wickets>=3&&c.wickets<5?1:0),fiveWickets:r.stats.fiveWickets+(c.wickets>=5?1:0)}}:r})})),fixtures:s.fixtures.map(a=>a.id===e.matchId?{...a,reportSubmission:{...e,status:"VERIFIED"}}:a)})),zS={Administrator:["org:create","org:delete","team:add","team:remove","tournament:add","fixture:generate"],Scorer:["match:score"],"Match Official":["match:view","match:umpire"]},kl=({role:t,perform:e,children:s,fallback:a=null})=>(zS[t]||[]).includes(e)?i.jsx(i.Fragment,{children:s}):i.jsx(i.Fragment,{children:a}),JS=({org:t,userRole:e,onOpen:s,onDeleteRequest:a})=>{const r=t.type==="CLUB";return i.jsxs("div",{onClick:()=>s(t.id),className:"group bg-white border border-slate-200 p-8 rounded-[2.5rem] hover:border-indigo-500 hover:shadow-2xl hover:shadow-indigo-100 transition-all cursor-pointer relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-[0.03] text-9xl font-black text-black group-hover:opacity-[0.06] transition-opacity select-none",children:t.name.charAt(0)}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsx("div",{className:`w-16 h-16 border rounded-2xl flex items-center justify-center text-3xl shadow-sm group-hover:scale-110 transition-transform duration-300 ${r?"bg-emerald-50 border-emerald-100 text-emerald-500":"bg-purple-50 border-purple-100 text-purple-500"}`,children:r?"":""}),i.jsx(kl,{role:e,perform:"org:delete",children:i.jsx("button",{onClick:c=>{c.stopPropagation(),a(t)},className:"text-slate-300 hover:text-red-500 p-2 transition-colors",children:""})})]}),i.jsx("div",{className:"mb-2",children:r?i.jsx("span",{className:"bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded text-[9px] font-black uppercase tracking-widest",children:"Cricket Club"}):i.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-0.5 rounded text-[9px] font-black uppercase tracking-widest",children:"Governing Body"})}),i.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-1 tracking-tight",children:t.name}),i.jsxs("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-8",children:[t.groundLocation?`${t.groundLocation}  `:"",t.country||"Global Entity"]}),i.jsxs("div",{className:"flex gap-6 border-t border-slate-100 pt-6",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-black text-slate-900",children:t.memberTeams.length}),i.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Squads"})]}),(!r||t.tournaments.length>0)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-black text-slate-900",children:t.tournaments.length}),i.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:r?"Leagues":"Seasons"})]}),t.establishedYear&&i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-black text-slate-900",children:t.establishedYear}),i.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Est."})]})]})]})]})},Ag=({isOpen:t,onClose:e,organizations:s,onApply:a})=>{const[r,c]=j.useState(""),[d,f]=j.useState(null);if(!t)return null;const m=s.filter(g=>g.name.toLowerCase().includes(r.toLowerCase())||g.id.toLowerCase().includes(r.toLowerCase())),p=()=>{d&&(a(d),e())};return i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[80vh]",children:[i.jsxs("div",{className:"bg-slate-50 p-8 border-b border-slate-100",children:[i.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Apply for Access"}),i.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-widest",children:"Join an Organization as Staff"})]}),i.jsxs("div",{className:"p-6 space-y-4 flex-1 overflow-hidden flex flex-col",children:[i.jsx("div",{children:i.jsx("input",{value:r,onChange:g=>c(g.target.value),placeholder:"Search Organization Name or ID...",className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500 transition-all shadow-sm"})}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2 pr-1",children:m.length===0?i.jsx("div",{className:"text-center py-10 text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No organizations found"}):m.map(g=>i.jsxs("button",{onClick:()=>f(g.id),className:`w-full p-4 rounded-xl border text-left flex items-center gap-4 transition-all ${d===g.id?"bg-indigo-600 border-indigo-600 text-white shadow-lg":"bg-white border-slate-100 hover:border-slate-300"}`,children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg font-black shrink-0 ${d===g.id?"bg-white/20":"bg-slate-100 text-slate-500"}`,children:g.name.charAt(0)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:`font-black text-sm truncate ${d===g.id?"text-white":"text-slate-900"}`,children:g.name}),i.jsxs("div",{className:`text-[10px] font-bold uppercase tracking-widest ${d===g.id?"text-indigo-200":"text-slate-400"}`,children:[g.memberTeams.length," Teams  ",g.country||"Global"]})]}),d===g.id&&i.jsx("div",{className:"text-white text-xl",children:""})]},g.id))})]}),i.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-4",children:[i.jsx("button",{onClick:e,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600 transition-all",children:"Cancel"}),i.jsx("button",{onClick:p,disabled:!d,className:"flex-1 py-4 bg-emerald-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-emerald-200 hover:bg-emerald-400 disabled:opacity-50 disabled:shadow-none transition-all",children:"Send Application"})]})]})})},WS=({organizations:t,profile:e,onUpdateProfile:s,onSelectOrg:a,onRequestDeleteOrg:r,onRequestCreateOrg:c,onRequestQuickMatch:d,onOpenMediaStudio:f,fixtures:m,topBatsmen:p,topBowlers:g,onStartMatch:v,onViewMatch:y,onViewTeam:N,currentUserId:S,onApplyForOrg:k,onUpgradeProfile:E,following:T,onToggleFollow:M,onRequestCaptainHub:C,showCaptainHub:D,onRequestMatchReports:R,onOpenCaptainHub:B})=>{const[G,H]=j.useState("LIVE"),[z,P]=j.useState("ALL"),[ne,le]=j.useState(!1),ie=t.filter(Q=>Q.members.some(ye=>ye.userId===S)),J=t.filter(Q=>Q.isPublic!==!1&&!Q.members.some(ye=>ye.userId===S)),pe=m.filter(Q=>Q.status==="Live"),O=m.filter(Q=>{const ye=t.find(je=>je.fixtures.some(Be=>Be.id===Q.id));if(ye&&ye.isPublic===!1&&!ye.members.some(Be=>Be.userId===S))return!1;switch(z){case"ALL":return!0;case"Test":return Q.format==="Test";case"T20":return Q.format==="T20";case"T10":return Q.format==="T10";case"ODI":return Q.format==="40-over"||Q.format==="50-over";default:return!1}}).filter(Q=>G==="MY_HISTORY"?Q.scorerId===S:G==="LIVE"?Q.status==="Live":G==="SCHEDULED"?Q.status==="Scheduled":G==="COMPLETED"?Q.status==="Completed":!0),V=e.role==="Administrator"||e.role==="Scorer",he=e.role==="Umpire",W=e.role==="Scorer",A=e.role==="Fan",$=e.role==="Player",re=e.role==="Guest",ve=[{key:"ALL",label:"All Formats",icon:""},{key:"Test",label:"Test Match",icon:""},{key:"T20",label:"T20 Series",icon:""},{key:"T10",label:"T10 League",icon:""},{key:"ODI",label:"One Day",icon:""}],Ne=Q=>{if(!V&&!he||Q.status==="Completed")return!1;const ye=t.find(Be=>Be.fixtures.some(et=>et.id===Q.id));return ye?ye.members.some(Be=>Be.userId===S):!0},ge=Q=>{const ye=t.find(je=>je.fixtures.some(Be=>Be.id===Q));return ye?ye.name:"Central Zone"},Se=["LIVE","SCHEDULED","COMPLETED"];W&&Se.push("MY_HISTORY");const Ee=Q=>{re&&E?(alert("Please create a profile to apply to organizations."),E()):k&&k(Q)};return i.jsxs("div",{className:"animate-in fade-in duration-700 pb-20",children:[i.jsx(Ag,{isOpen:ne,onClose:()=>le(!1),organizations:J,onApply:Ee}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 mb-8 md:mb-12",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 tracking-tighter",children:A||re?"Fun Hub":"Command Center"}),i.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-[0.2em] mt-2",children:A||re?"Fan Zone & Live Games":$?"Player Hub":"Global Operations"})]}),i.jsxs("div",{className:"flex flex-wrap gap-3 w-full md:w-auto",children:[i.jsx(kl,{role:e.role,perform:"fixture:generate",children:i.jsxs("button",{onClick:d,className:"flex-1 md:flex-none bg-emerald-500 text-white px-4 md:px-8 py-3 md:py-4 rounded-xl font-black uppercase text-[10px] md:text-xs tracking-widest shadow-xl shadow-emerald-200 hover:bg-emerald-400 hover:scale-105 transition-all flex items-center justify-center gap-2 whitespace-nowrap",children:[i.jsx("span",{children:""})," Quick Match"]})}),(A||$||re)&&E&&i.jsx("button",{onClick:E,className:"flex-1 md:flex-none bg-indigo-600 text-white px-4 md:px-8 py-3 md:py-4 rounded-xl font-black uppercase text-[10px] md:text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 hover:scale-105 transition-all whitespace-nowrap",children:re?"Create Profile":"Upgrade Profile"}),i.jsxs("button",{onClick:f,className:"flex-1 md:flex-none bg-gradient-to-r from-pink-500 to-purple-500 text-white px-4 md:px-8 py-3 md:py-4 rounded-xl font-black uppercase text-[10px] md:text-xs tracking-widest shadow-xl shadow-pink-200 hover:shadow-pink-300 hover:scale-105 transition-all flex items-center justify-center gap-2 whitespace-nowrap",children:[i.jsx("span",{children:""})," Media Studio"]}),D&&B&&i.jsxs("div",{className:"flex flex-wrap gap-3 w-full md:w-auto",children:[i.jsxs("button",{onClick:B,className:"flex-1 md:flex-none bg-indigo-600 text-white px-4 md:px-8 py-3 md:py-4 rounded-xl font-black uppercase text-[10px] md:text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 hover:scale-105 transition-all flex items-center justify-center gap-2 whitespace-nowrap",children:[i.jsx("span",{children:""})," Captain's Hub"]}),i.jsxs("button",{onClick:R,className:"flex-1 md:flex-none bg-slate-900 text-white px-4 md:px-8 py-3 md:py-4 rounded-xl font-black uppercase text-[10px] md:text-xs tracking-widest shadow-xl shadow-slate-200 hover:bg-slate-800 hover:scale-105 transition-all flex items-center justify-center gap-2 whitespace-nowrap",children:[i.jsx("span",{children:""})," Reports"]})]}),i.jsx(kl,{role:e.role,perform:"org:create",children:i.jsx("button",{onClick:c,className:"flex-1 md:flex-none bg-slate-900 text-white hover:bg-slate-800 px-4 md:px-8 py-3 md:py-4 rounded-xl font-black uppercase text-[10px] md:text-xs tracking-widest transition-all shadow-xl whitespace-nowrap",children:"+ New Org"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-12",children:[(he||W)&&i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-[2rem] p-8 shadow-sm",children:[i.jsxs("h3",{className:"text-xl font-black text-yellow-800 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:""})," Active Assignments"]}),pe.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:pe.map(Q=>i.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-yellow-100 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-black text-sm text-slate-900",children:[Q.teamAName," vs ",Q.teamBName]}),i.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:Q.venue})]}),i.jsx("button",{onClick:()=>v(Q),className:"bg-yellow-500 text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase hover:bg-yellow-600 transition-all",children:"Resume"})]},Q.id))}):i.jsx("p",{className:"text-yellow-700/60 text-xs font-bold uppercase tracking-widest",children:"No live matches to officiate currently."})]}),!A&&!re&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"text-xl font-black text-slate-900 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})," My Organizations"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ie.length>0?ie.map(Q=>i.jsx(JS,{org:Q,userRole:e.role,onOpen:a,onDeleteRequest:r},Q.id)):i.jsx("div",{className:"col-span-full py-12 text-center bg-slate-50 border-2 border-dashed border-slate-200 rounded-[2.5rem]",children:i.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"You are not a member of any organization."})}),i.jsx(kl,{role:e.role,perform:"org:create",children:i.jsxs("button",{onClick:c,className:"border-2 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center p-8 hover:bg-slate-50 hover:border-indigo-300 transition-all text-slate-400 hover:text-indigo-600 gap-4 group min-h-[250px]",children:[i.jsx("span",{className:"text-5xl font-thin group-hover:scale-110 transition-transform",children:"+"}),i.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Register New Org"})]})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h3",{className:"text-xl font-black text-slate-900 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-300"})," ",$?"Find Clubs":"Discover"]}),!A&&!re&&i.jsx("button",{onClick:()=>le(!0),className:"text-indigo-600 font-bold text-xs uppercase tracking-widest hover:underline",children:"Find More"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:J.slice(0,3).map(Q=>{const ye=T==null?void 0:T.orgs.includes(Q.id);return i.jsxs("div",{className:"bg-white border border-slate-200 p-6 rounded-[2rem] opacity-75 hover:opacity-100 transition-all relative overflow-hidden group",children:[i.jsx("h4",{className:"font-black text-lg text-slate-900",children:Q.name}),i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-2 py-0.5 rounded ${Q.type==="GOVERNING_BODY"?"bg-purple-100 text-purple-700":"bg-emerald-100 text-emerald-700"}`,children:Q.type==="GOVERNING_BODY"?"Governing Body":"Club"}),i.jsx("span",{className:"text-xs text-slate-500",children:Q.country||"Global"})]}),A||re?i.jsx("button",{onClick:()=>M&&M("ORG",Q.id),className:`w-full py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${ye?"bg-slate-900 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:ye?"Following ":"Follow"}):i.jsx("button",{onClick:()=>Ee(Q.id),className:"w-full py-2 bg-slate-100 text-slate-600 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-indigo-600 hover:text-white transition-all",children:$&&Q.type==="CLUB"?"Join Club":"Apply to Join"})]},Q.id)})})]})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-200 shadow-xl shadow-slate-100 flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest",children:"Matches"}),i.jsx("div",{className:"flex gap-1 bg-slate-100 p-1 rounded-lg overflow-x-auto no-scrollbar max-w-[200px]",children:Se.map(Q=>i.jsx("button",{onClick:()=>H(Q),className:`px-3 py-1 text-[8px] font-black uppercase tracking-widest rounded-md transition-all whitespace-nowrap ${G===Q?"bg-white text-slate-900 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:Q==="MY_HISTORY"?"MY GAMES":Q},Q))})]}),i.jsx("div",{className:"grid grid-cols-3 gap-2 mb-6",children:ve.map(Q=>i.jsxs("button",{onClick:()=>P(Q.key),className:`p-3 rounded-2xl border text-center transition-all flex flex-col items-center justify-center gap-1.5 ${z===Q.key?"bg-indigo-600 border-indigo-600 text-white shadow-lg":"bg-slate-50 border-slate-100 text-slate-400 hover:border-indigo-200"}`,children:[i.jsx("span",{className:"text-lg",children:Q.icon}),i.jsx("span",{className:"text-[8px] font-black uppercase tracking-tighter",children:Q.label})]},Q.key))}),i.jsx("div",{className:"space-y-3 flex-1 overflow-visible",children:O.length===0?i.jsxs("div",{className:"text-center py-12 flex flex-col items-center gap-3",children:[i.jsx("span",{className:"text-3xl opacity-20",children:""}),i.jsxs("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-widest",children:["No ",z!=="ALL"?z:""," ",G.toLowerCase()," matches"]})]}):O.map(Q=>{const ye=Ne(Q),je=ge(Q.id);return i.jsxs("div",{className:`p-4 rounded-2xl border transition-all ${Q.status==="Live"?"bg-slate-900 border-slate-800":"bg-slate-50 border-slate-100"}`,children:[i.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:Q.status==="Live"?"text-red-500 animate-pulse":"",children:Q.status==="Live"?" LIVE NOW":new Date(Q.date).toLocaleDateString()}),i.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),i.jsx("span",{className:"text-indigo-500 truncate max-w-[80px]",children:je})]}),i.jsx("span",{className:Q.status==="Live"?"text-slate-500":"text-slate-400",children:Q.venue})]}),i.jsxs("div",{className:"flex justify-between items-center px-2",children:[i.jsx("button",{onClick:()=>N(Q.teamAId),className:`font-black text-xs hover:underline ${Q.status==="Live"?"text-white":"text-slate-800"}`,children:Q.teamAName}),i.jsx("span",{className:"text-[10px] font-bold text-slate-300",children:"VS"}),i.jsx("button",{onClick:()=>N(Q.teamBId),className:`font-black text-xs hover:underline ${Q.status==="Live"?"text-white":"text-slate-800"}`,children:Q.teamBName})]}),Q.status==="Live"&&i.jsxs("div",{className:"mt-2 text-center text-white font-black text-sm tracking-tight bg-white/10 rounded py-1",children:[Q.teamAScore||"0/0"," - ",Q.teamBScore||"0/0"]}),Q.status==="Completed"&&i.jsxs("div",{className:"mt-2 text-center text-slate-500 font-bold text-[10px] bg-slate-200/50 rounded py-1",children:["Result: ",Q.result||"Match Concluded"]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[ye&&i.jsx("button",{onClick:()=>v(Q),className:`flex-1 py-2 border rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${Q.status==="Live"?"bg-red-600 border-red-600 text-white hover:bg-red-500":"bg-indigo-600 border-indigo-600 text-white hover:bg-indigo-500"}`,children:Q.status==="Live"?"Resume Scoring":"Claim Match"}),!ye&&Q.status!=="Completed"&&!A&&!re&&i.jsx("div",{className:"flex-1 py-2 border border-slate-200 bg-slate-100 text-slate-400 text-[9px] font-bold uppercase rounded-lg text-center flex items-center justify-center cursor-not-allowed",children:"Restricted"}),i.jsx("button",{onClick:()=>y(Q),className:"flex-1 py-2 bg-white border border-slate-200 text-slate-900 text-[10px] font-black uppercase rounded-lg hover:bg-slate-50",children:"Scorecard"})]})]},Q.id)})})]}),i.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-200 shadow-xl shadow-slate-100",children:[i.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-6",children:"Global Leaders"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mb-3",children:"Orange Cap"}),p.slice(0,3).map((Q,ye)=>i.jsxs("div",{className:"flex justify-between items-center text-xs mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-bold text-slate-700",children:Q.name}),i.jsx("button",{onClick:()=>N(Q.teamId),className:"text-[9px] font-bold text-slate-400 bg-slate-100 px-1 rounded hover:bg-slate-200",children:Q.teamName})]}),i.jsx("span",{className:"font-black text-slate-900",children:Q.stats.runs})]},Q.id))]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] font-black text-purple-500 uppercase tracking-widest mb-3",children:"Purple Cap"}),g.slice(0,3).map((Q,ye)=>i.jsxs("div",{className:"flex justify-between items-center text-xs mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-bold text-slate-700",children:Q.name}),i.jsx("button",{onClick:()=>N(Q.teamId),className:"text-[9px] font-bold text-slate-400 bg-slate-100 px-1 rounded hover:bg-slate-200",children:Q.teamName})]}),i.jsx("span",{className:"font-black text-slate-900",children:Q.stats.wickets})]},Q.id))]})]})]})]})]})]})},Du=({shots:t=[],onRecord:e,readonly:s=!1})=>{const a=j.useRef(null),r=c=>{if(s||!e||!a.current)return;const d=a.current.getBoundingClientRect(),f=(c.clientX-d.left)/d.width*100,m=(c.clientY-d.top)/d.height*100;e({x:f,y:m})};return i.jsxs("div",{className:"relative aspect-square w-full max-w-[300px] mx-auto",children:[i.jsxs("svg",{ref:a,viewBox:"0 0 100 100",className:`w-full h-full rounded-full bg-emerald-700 border-4 border-emerald-800 shadow-inner ${s?"":"cursor-crosshair"}`,onClick:r,children:[i.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",stroke:"rgba(255,255,255,0.2)",strokeWidth:"0.5"}),i.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"rgba(255,255,255,0.05)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5",strokeDasharray:"2 2"}),i.jsx("rect",{x:"48",y:"42",width:"4",height:"16",fill:"#e2e8f0",rx:"1",opacity:"0.8"})," ",t.map((c,d)=>i.jsxs("g",{children:[i.jsx("line",{x1:"50",y1:"50",x2:c.coords.x,y2:c.coords.y,stroke:c.color||"yellow",strokeWidth:"0.5",opacity:"0.6"}),i.jsx("circle",{cx:c.coords.x,cy:c.coords.y,r:"1.5",fill:c.color||"yellow",stroke:"white",strokeWidth:"0.2"})]},d))]}),i.jsx("div",{className:"absolute top-2 right-2 text-[8px] font-black text-white/50 uppercase tracking-widest pointer-events-none",children:"Wagon Wheel"})]})},Ou=({deliveries:t=[],onRecord:e,readonly:s=!1})=>{const a=j.useRef(null),r=c=>{if(s||!e||!a.current)return;const d=a.current.getBoundingClientRect(),f=(c.clientX-d.left)/d.width*100,m=(c.clientY-d.top)/d.height*100;e({x:f,y:m})};return i.jsxs("div",{className:"relative aspect-[1/2] w-full max-w-[150px] mx-auto",children:[i.jsxs("svg",{ref:a,viewBox:"0 0 100 200",className:`w-full h-full bg-[#d2b48c] border-2 border-[#b08d55] shadow-inner ${s?"":"cursor-crosshair"}`,onClick:r,children:[i.jsx("line",{x1:"10",y1:"20",x2:"90",y2:"20",stroke:"white",strokeWidth:"1"})," ",i.jsx("line",{x1:"10",y1:"40",x2:"90",y2:"40",stroke:"white",strokeWidth:"1"})," ",i.jsx("line",{x1:"10",y1:"180",x2:"90",y2:"180",stroke:"white",strokeWidth:"1"})," ",i.jsx("line",{x1:"10",y1:"160",x2:"90",y2:"160",stroke:"white",strokeWidth:"1"})," ",i.jsx("rect",{x:"48",y:"10",width:"4",height:"10",fill:"#333"}),i.jsx("rect",{x:"48",y:"180",width:"4",height:"10",fill:"#333"}),i.jsx("rect",{x:"0",y:"40",width:"100",height:"40",fill:"blue",fillOpacity:"0.05"})," ",i.jsx("rect",{x:"0",y:"80",width:"100",height:"40",fill:"green",fillOpacity:"0.05"})," ",i.jsx("rect",{x:"0",y:"120",width:"100",height:"40",fill:"red",fillOpacity:"0.05"})," ",t.map((c,d)=>i.jsx("circle",{cx:c.coords.x,cy:c.coords.y,r:"3",fill:c.color||"red",stroke:"black",strokeWidth:"0.5"},d))]}),i.jsx("div",{className:"absolute top-2 left-2 text-[8px] font-black text-black/30 uppercase tracking-widest pointer-events-none rotate-90 origin-top-left translate-x-4",children:"Pitch Map"})]})},Rg=({player:t,isOpen:e,onClose:s,isFollowed:a,onToggleFollow:r,allFixtures:c=[],onViewMatch:d,onUpdatePlayer:f})=>{const[m,p]=j.useState("SUMMARY"),[g,v]=j.useState("BATTING"),[y,N]=j.useState("OFFICIAL"),[S,k]=j.useState(!1),[E,T]=j.useState(!1),[M,C]=j.useState({name:"",role:"",bio:""}),D=j.useMemo(()=>c.filter(W=>y==="OFFICIAL"?W.isOfficial!==!1:W.isOfficial===!1),[c,y]),R=j.useMemo(()=>{if(!t)return{matches:0,runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,catches:0,stumpings:0,highestScore:0,fours:0,sixes:0,fiveWickets:0,threeWickets:0,maidens:0,ducks:0,hundreds:0,fifties:0,bestBowling:""};let W=0,A=0,$=0,re=0,ve=0,Ne=0,ge=0,Se=0,Ee=0,Q=0,ye=0,je=0,Be=0,et=0,ct=0,pt=0,wt=0,Fe="";return D.forEach(dt=>{var gt,At;if(!dt.savedState)return;(((gt=dt.teamASquadIds)==null?void 0:gt.includes(t.id))||((At=dt.teamBSquadIds)==null?void 0:At.includes(t.id))||dt.teamAId===t.teamId||dt.teamBId===t.teamId)&&Ne++;const Nt=dt.savedState.history,Et=Nt.filter(Ue=>{var at;return Ue.strikerId===t.id&&!((at=Ue.commentary)!=null&&at.startsWith("EVENT"))}),de=Et.reduce((Ue,at)=>Ue+(at.runs||0),0),ce=Et.filter(Ue=>Ue.extraType!=="Wide").length;(ce>0||Et.some(Ue=>Ue.isWicket&&Ue.outPlayerId===t.id))&&($+=ce,W+=de,de>Ee&&(Ee=de),de>=100?pt++:de>=50&&wt++,de===0&&Et.some(Ue=>Ue.isWicket&&Ue.outPlayerId===t.id)&&ct++,Q+=Et.filter(Ue=>Ue.runs===4).length,ye+=Et.filter(Ue=>Ue.runs===6).length);const be=Nt.filter(Ue=>{var at;return Ue.bowlerId===t.id&&!((at=Ue.commentary)!=null&&at.startsWith("EVENT"))}),Ae=be.filter(Ue=>Ue.isWicket&&Ue.creditBowler).length,Qe=be.reduce((Ue,at)=>{const Zt=at.extraType==="Wide"||at.extraType==="NoBall"?1:0;return Ue+(at.runs||0)+(at.extraRuns||0)+Zt},0);be.length>0&&(A+=Ae,ve+=Qe,re+=be.filter(Ue=>Ue.extraType!=="Wide"&&Ue.extraType!=="NoBall").length,Ae>=5?je++:Ae>=3&&Be++),ge+=Nt.filter(Ue=>Ue.isWicket&&Ue.wicketType==="Caught"&&Ue.fielderId===t.id).length,Se+=Nt.filter(Ue=>Ue.isWicket&&Ue.wicketType==="Stumped"&&Ue.fielderId===t.id).length}),{matches:Ne,runs:W,wickets:A,ballsFaced:$,ballsBowled:re,runsConceded:ve,catches:ge,stumpings:Se,highestScore:Ee,fours:Q,sixes:ye,fiveWickets:je,threeWickets:Be,maidens:et,ducks:ct,hundreds:pt,fifties:wt,bestBowling:Fe}},[D,t]),B=j.useMemo(()=>{if(!t)return[];const W=[];return D.forEach(A=>{var $;($=A.savedState)!=null&&$.history&&A.savedState.history.forEach(re=>{(re.strikerId===t.id||re.bowlerId===t.id)&&W.push(re)})}),W},[D,t]),G=j.useMemo(()=>B.filter(W=>t&&W.strikerId===t.id&&W.pitchCoords).map(W=>({coords:W.pitchCoords,color:W.isWicket?"red":W.runs>=4?"yellow":"green"})),[B,t]),H=j.useMemo(()=>B.filter(W=>t&&W.strikerId===t.id&&W.shotCoords).map(W=>({coords:W.shotCoords,color:W.runs===4?"indigo":W.runs===6?"emerald":"yellow"})),[B,t]),z=R.matches>0?(R.runs/Math.max(1,R.matches-R.ducks)).toFixed(1):"0.0",P=R.ballsFaced>0?(R.runs/R.ballsFaced*100).toFixed(1):"0.0",ne=Math.floor(R.ballsBowled/6)+R.ballsBowled%6/10,le=R.ballsBowled>0?(R.runsConceded/(R.ballsBowled/6)).toFixed(2):"0.0",ie=R.wickets>0?(R.runsConceded/R.wickets).toFixed(1):"0.0";if(!e||!t)return null;const J=t.role==="Wicket-keeper",pe=D.filter(W=>{var A,$;return W.teamAId===t.teamId||W.teamBId===t.teamId||((A=W.teamASquadIds)==null?void 0:A.includes(t.id))||(($=W.teamBSquadIds)==null?void 0:$.includes(t.id))}).sort((W,A)=>new Date(A.date).getTime()-new Date(W.date).getTime()),U=()=>{p("DETAILED"),t.role==="Bowler"?v("BOWLING"):v(J?"KEEPING":"BATTING")},O=["BATTING","BOWLING","SPATIAL","MATCHES"].filter(W=>!(W==="KEEPING"&&!J)),V=()=>{E?(f&&f({name:M.name,role:M.role,bio:M.bio}),T(!1)):(C({name:t.name,role:t.role,bio:t.bio||""}),T(!0))},he=W=>{var $;const A=($=W.target.files)==null?void 0:$[0];if(A&&f){k(!0);const re=new FileReader;re.onload=ve=>{var ge;const Ne=new Image;Ne.onload=()=>{const Se=document.createElement("canvas"),Ee=Se.getContext("2d"),Q=600;let ye=Ne.width,je=Ne.height;ye>je?ye>Q&&(je*=Q/ye,ye=Q):je>Q&&(ye*=Q/je,je=Q),Se.width=ye,Se.height=je,Ee==null||Ee.drawImage(Ne,0,0,ye,je);const Be=Se.toDataURL("image/jpeg",.7);f({photoUrl:Be}),k(!1)},Ne.src=(ge=ve.target)==null?void 0:ge.result},re.readAsDataURL(A)}};return i.jsx("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md z-[200] flex items-center justify-center p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-slate-900 w-full max-w-4xl rounded-[3rem] shadow-2xl border border-slate-800 relative overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300",children:[i.jsxs("div",{className:"relative h-64 md:h-80 shrink-0 overflow-hidden group",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-slate-900/60 to-slate-900 z-10"}),t.highlightVideoUrl?i.jsx("video",{src:t.highlightVideoUrl,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80"}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-900 via-purple-900 to-slate-900"}),i.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-30"})]}),i.jsx("div",{className:"absolute top-6 left-6 z-20",children:i.jsx("button",{onClick:s,className:"w-10 h-10 bg-black/20 hover:bg-black/40 backdrop-blur-md rounded-full text-white flex items-center justify-center transition-all font-black text-xl",children:""})}),i.jsxs("div",{className:"absolute top-6 right-6 z-20 flex gap-3",children:[f&&i.jsx("button",{onClick:V,className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${E?"bg-emerald-500 text-white":"bg-black/30 text-white backdrop-blur-md"}`,children:E?"Save Changes":"Edit Profile"}),i.jsx("button",{onClick:r,className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${a?"bg-emerald-500 text-white":"bg-black/30 text-slate-300 hover:bg-black/50 hover:text-white backdrop-blur-md"}`,children:a?"Following":"Follow"}),i.jsx("button",{onClick:s,className:"w-10 h-10 bg-black/20 hover:bg-black/40 backdrop-blur-md rounded-full text-white flex items-center justify-center transition-all",children:""})]}),i.jsxs("div",{className:"absolute -bottom-16 left-8 md:left-12 flex items-end gap-6 z-20",children:[i.jsxs("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-[2.5rem] border-4 border-slate-900 bg-slate-800 shadow-2xl overflow-hidden relative group transition-transform duration-500",children:[S?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-900",children:i.jsx("div",{className:"w-10 h-10 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})}):i.jsx("img",{src:t.photoUrl||`https://ui-avatars.com/api/?name=${t.name}&background=random&size=256`,className:"w-full h-full object-cover",alt:t.name}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 text-center",children:i.jsx("span",{className:"text-[10px] font-black uppercase text-white tracking-widest bg-indigo-600 px-2 py-0.5 rounded-full",children:t.role})}),f&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"file",accept:"image/*",onChange:he,className:"absolute inset-0 opacity-0 cursor-pointer z-30"}),i.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20 pointer-events-none",children:i.jsx("span",{className:"text-white text-[9px] font-bold uppercase",children:S?"Wait":"Change"})})]})]}),i.jsxs("div",{className:"pb-16 md:pb-4 mb-2",children:[E?i.jsx("input",{value:M.name,onChange:W=>C({...M,name:W.target.value}),className:"text-3xl md:text-5xl font-black text-white bg-transparent border-b border-white/20 outline-none w-full"}):i.jsx("h1",{className:"text-3xl md:text-5xl font-black text-white tracking-tight drop-shadow-lg",children:t.name}),i.jsxs("div",{className:"flex items-center gap-2 text-indigo-300 font-bold uppercase text-xs tracking-widest mt-1",children:[i.jsxs("span",{onClick:()=>{navigator.clipboard.writeText(t.id),alert("ID Copied!")},className:"cursor-pointer hover:text-white",title:"Click to Copy ID",children:["ID: ",t.id.substring(0,8),"..."]}),i.jsx("span",{className:"w-1 h-1 bg-indigo-300 rounded-full"}),i.jsx("span",{children:t.teamName})]})]})]})]}),i.jsxs("div",{className:"flex-1 bg-slate-900 pt-20 px-8 pb-8 overflow-y-auto custom-scrollbar relative z-10",children:[i.jsx("div",{className:"flex justify-end mb-6",children:i.jsxs("div",{className:"bg-slate-800 p-1 rounded-xl flex gap-1",children:[i.jsx("button",{onClick:()=>N("OFFICIAL"),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${y==="OFFICIAL"?"bg-indigo-600 text-white":"text-slate-400 hover:text-white"}`,children:"Official Career"}),i.jsx("button",{onClick:()=>N("UNOFFICIAL"),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${y==="UNOFFICIAL"?"bg-amber-600 text-white":"text-slate-400 hover:text-white"}`,children:"Friendlies"})]})}),m==="SUMMARY"?i.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4",children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{l:"Matches",v:R.matches},{l:"Total Runs",v:R.runs},{l:"Total Wickets",v:R.wickets},{l:J?"Dismissals":"Catches",v:J?R.catches+R.stumpings:R.catches}].map((W,A)=>i.jsxs("div",{className:"bg-slate-800 p-6 rounded-3xl border border-slate-700 text-center",children:[i.jsx("div",{className:"text-3xl font-black text-white",children:W.v}),i.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:W.l})]},A))}),i.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/20 to-purple-900/20 p-8 rounded-[2.5rem] border border-indigo-500/20 flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-xl font-black text-white mb-2",children:"Player Bio"}),E?i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:M.bio,onChange:W=>C({...M,bio:W.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white text-sm",placeholder:"Enter bio..."}),i.jsxs("select",{value:M.role,onChange:W=>C({...M,role:W.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-white text-sm",children:[i.jsx("option",{value:"Batsman",children:"Batsman"}),i.jsx("option",{value:"Bowler",children:"Bowler"}),i.jsx("option",{value:"All-rounder",children:"All-rounder"}),i.jsx("option",{value:"Wicket-keeper",children:"Wicket-keeper"})]})]}):i.jsx("p",{className:"text-slate-400 text-sm leading-relaxed max-w-lg",children:t.bio||`Representing ${t.teamName}. A key ${t.role.toLowerCase()} contributing to the squad's depth.`})]}),i.jsx("button",{onClick:U,className:"bg-white text-slate-900 px-8 py-4 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-indigo-50 hover:scale-105 transition-all shadow-xl whitespace-nowrap",children:"View Comprehensive Analytics "})]})]}):i.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-8",children:[i.jsx("div",{className:"flex overflow-x-auto no-scrollbar gap-2 border-b border-slate-800 pb-4 shrink-0",children:O.map(W=>i.jsx("button",{onClick:()=>v(W),className:`px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${g===W?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white"}`,children:W},W))}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"md:col-span-2 bg-slate-800 rounded-[2.5rem] p-8 border border-slate-700 shadow-xl relative overflow-hidden flex flex-col min-h-[400px]",children:[g==="BATTING"&&i.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[i.jsxs("div",{className:"flex justify-between items-end border-b border-slate-700 pb-6",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-5xl font-black text-white",children:R.runs}),i.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mt-2",children:"Career Runs"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-black text-indigo-400",children:R.highestScore||0}),i.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mt-1",children:"High Score"})]})]}),i.jsx("div",{className:"grid grid-cols-3 gap-6",children:[{l:"Average",v:z},{l:"Strike Rate",v:P},{l:"Hundreds",v:R.hundreds},{l:"Fifties",v:R.fifties},{l:"Ducks",v:R.ducks},{l:"Fours",v:R.fours},{l:"Sixes",v:R.sixes},{l:"Balls Faced",v:R.ballsFaced}].map((W,A)=>i.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-2xl border border-slate-700/50",children:[i.jsx("div",{className:"text-xl font-black text-white",children:W.v}),i.jsx("div",{className:"text-[9px] text-slate-500 uppercase tracking-widest",children:W.l})]},A))})]}),g==="BOWLING"&&i.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[i.jsxs("div",{className:"flex justify-between items-end border-b border-slate-700 pb-6",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-5xl font-black text-white",children:R.wickets}),i.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mt-2",children:"Career Wickets"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-black text-emerald-400",children:R.bestBowling||"-/-"}),i.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mt-1",children:"Best Figures"})]})]}),i.jsx("div",{className:"grid grid-cols-3 gap-6",children:[{l:"Economy",v:le},{l:"Average",v:ie},{l:"5W Hauls",v:R.fiveWickets},{l:"3W Hauls",v:R.threeWickets},{l:"Maidens",v:R.maidens},{l:"Overs",v:ne}].map((W,A)=>i.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-2xl border border-slate-700/50",children:[i.jsx("div",{className:"text-xl font-black text-white",children:W.v}),i.jsx("div",{className:"text-[9px] text-slate-500 uppercase tracking-widest",children:W.l})]},A))})]}),g==="SPATIAL"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center h-full animate-in fade-in",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest text-center",children:"Pitch Dispersion"}),i.jsx(Ou,{deliveries:G,readonly:!0})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-widest text-center",children:"Scoring Wagon Wheel"}),i.jsx(Du,{shots:H,readonly:!0})]})]}),g==="MATCHES"&&i.jsxs("div",{className:"space-y-4 h-full flex flex-col animate-in fade-in",children:[i.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Game History"}),pe.length===0?i.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-500 text-xs font-bold uppercase",children:"No match history available."}):i.jsx("div",{className:"space-y-3 overflow-y-auto max-h-[300px] custom-scrollbar pr-2",children:pe.map(W=>i.jsxs("div",{onClick:()=>{d&&(d(W),s())},className:"bg-slate-900/50 p-4 rounded-2xl border border-slate-700/50 hover:bg-slate-700 transition-colors cursor-pointer flex justify-between items-center group",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:[new Date(W.date).toLocaleDateString(),"  ",W.venue]}),i.jsxs("div",{className:"font-bold text-white text-sm group-hover:text-indigo-400 transition-colors",children:[W.teamAName," vs ",W.teamBName]})]}),i.jsx("div",{className:"text-right",children:i.jsx("div",{className:`text-[10px] font-black uppercase px-2 py-1 rounded ${W.status==="Completed"?"bg-emerald-500/20 text-emerald-400":"bg-amber-500/20 text-amber-400"}`,children:W.status})})]},W.id))})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-white text-slate-900 rounded-[2.5rem] p-6 text-center shadow-xl",children:[i.jsx("div",{className:"text-sm font-black uppercase tracking-widest mb-1",children:"Impact Score"}),i.jsx("div",{className:"text-5xl font-black text-indigo-600 tracking-tighter",children:Math.floor(R.runs/20+R.wickets*15+(R.catches+R.stumpings)*5)})]}),i.jsx("button",{onClick:()=>p("SUMMARY"),className:"w-full py-4 bg-slate-800 text-slate-400 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-slate-700 hover:text-white transition-all shadow-xl",children:" Exit Analytics"})]})]})]})]})]})})},Ig=({member:t,isOpen:e,onClose:s,allOrganizations:a=[]})=>{const r=j.useMemo(()=>{if(!t||t.role!=="Umpire"&&t.role!=="Match Official")return null;const c={totalGames:0,orgs:[]};return a.forEach(d=>{const f=d.fixtures.filter(m=>{var p;return(p=m.umpires)==null?void 0:p.includes(t.userId)}).length;f>0&&(c.totalGames+=f,c.orgs.push({name:d.name,count:f}))}),c},[t,a]);return!e||!t?null:i.jsx("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[400] flex items-center justify-center p-4 animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] shadow-2xl overflow-hidden relative border border-slate-200",children:[i.jsxs("div",{className:"h-32 bg-slate-900 relative overflow-hidden",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-br opacity-80 ${t.role==="Administrator"?"from-purple-600 to-indigo-900":t.role==="Umpire"?"from-yellow-600 to-amber-900":"from-teal-500 to-emerald-800"}`}),i.jsx("button",{onClick:s,className:"absolute top-4 right-4 w-8 h-8 bg-black/20 text-white rounded-full flex items-center justify-center hover:bg-black/40 transition-all backdrop-blur-md z-10",children:""}),i.jsx("div",{className:"absolute -bottom-10 -right-10 text-9xl opacity-10 text-white rotate-12",children:""})]}),i.jsxs("div",{className:"px-8 pb-8 -mt-12 relative max-h-[60vh] overflow-y-auto custom-scrollbar",children:[i.jsx("div",{className:"w-24 h-24 bg-white p-1.5 rounded-3xl shadow-xl mb-4",children:i.jsx("div",{className:`w-full h-full rounded-2xl flex items-center justify-center text-4xl font-black text-white shadow-inner ${t.role==="Administrator"?"bg-purple-600":t.role==="Umpire"?"bg-amber-500":"bg-teal-500"}`,children:t.name.charAt(0)})}),i.jsx("h2",{className:"text-2xl font-black text-slate-900 leading-tight",children:t.name}),i.jsx("p",{className:"text-sm font-bold text-slate-400 mb-8",children:t.handle}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 flex items-center justify-between",children:[i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Role"}),i.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest px-3 py-1.5 rounded-lg ${t.role==="Administrator"?"bg-purple-100 text-purple-600":"bg-teal-100 text-teal-600"}`,children:t.role})]}),r&&i.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Games Officiated"}),i.jsx("span",{className:"text-xl font-black text-amber-600",children:r.totalGames})]}),r.orgs.length>0&&i.jsx("div",{className:"pt-3 border-t border-slate-200/50 space-y-1",children:r.orgs.map((c,d)=>i.jsxs("div",{className:"flex justify-between text-[10px]",children:[i.jsx("span",{className:"font-bold text-slate-600",children:c.name}),i.jsx("span",{className:"font-black text-slate-900",children:c.count})]},d))})]}),i.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 flex items-center justify-between",children:[i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Member Since"}),i.jsx("span",{className:"text-xs font-bold text-slate-900",children:new Date(t.addedAt).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})})]}),i.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 flex items-center justify-between",children:[i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"ID"}),i.jsx("span",{className:"text-[10px] font-mono text-slate-500 truncate max-w-[100px]",children:t.userId})]})]})]})]})})},YS=({organization:t,onSave:e,onClose:s})=>{const[a,r]=j.useState("DETAILS"),[c,d]=j.useState(null),[f,m]=j.useState(!1),[p,g]=j.useState({name:t.name,description:t.description||"",country:t.country||"",location:t.groundLocation||"",logoUrl:t.logoUrl||"",isPublic:t.isPublic!==void 0?t.isPublic:!0,allowUserContent:t.allowUserContent!==void 0?t.allowUserContent:!0}),v=()=>{e(t.id,{name:p.name,description:p.description,country:p.country,groundLocation:p.location,logoUrl:p.logoUrl,isPublic:p.isPublic,allowUserContent:p.allowUserContent}),s()},y=C=>{var R;const D=(R=C.target.files)==null?void 0:R[0];if(D){m(!0);const B=new FileReader;B.onload=G=>{var z;const H=new Image;H.onload=()=>{const P=document.createElement("canvas"),ne=P.getContext("2d"),le=800;let ie=H.width,J=H.height;ie>J?ie>le&&(J*=le/ie,ie=le):J>le&&(ie*=le/J,J=le),P.width=ie,P.height=J,ne==null||ne.drawImage(H,0,0,ie,J);const pe=P.toDataURL("image/jpeg",.7);g(U=>({...U,logoUrl:pe})),m(!1)},H.src=(z=G.target)==null?void 0:z.result},B.readAsDataURL(D)}},N=C=>{const D=t.members.filter(G=>G.userId!==C.userId);let R=[...t.applications||[]];const B=R.findIndex(G=>G.applicantId===C.userId);if(B>=0)R[B]={...R[B],status:"REJECTED"};else{const G={id:`app-revoke-${Date.now()}`,type:"USER_JOIN",applicantId:C.userId,applicantName:C.name,applicantHandle:C.handle,status:"REJECTED",timestamp:Date.now()};R.push(G)}e(t.id,{members:D,applications:R})},S=C=>{const D=(t.applications||[]).map(B=>B.id===C.id?{...B,status:"APPROVED"}:B);let R=[...t.members];R.some(B=>B.userId===C.applicantId)||R.push({userId:C.applicantId,name:C.applicantName,handle:C.applicantHandle||"",role:"Scorer",addedAt:Date.now()}),e(t.id,{members:R,applications:D})},k=j.useMemo(()=>t.members.filter(C=>C.role==="Administrator"),[t.members]),E=j.useMemo(()=>t.members.filter(C=>C.role==="Scorer"),[t.members]),T=j.useMemo(()=>(t.applications||[]).filter(C=>C.status==="REJECTED"),[t.applications]),M=C=>i.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 flex items-center justify-between shadow-sm group hover:border-indigo-300 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-1",onClick:()=>d(C),children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black text-white shadow-sm ${C.role==="Administrator"?"bg-purple-600":"bg-teal-500"}`,children:C.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-sm text-slate-900 group-hover:text-indigo-600 transition-colors",children:C.name}),i.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:C.handle})]})]}),i.jsx("button",{onClick:()=>N(C),className:"px-4 py-2 border border-red-100 bg-red-50 text-red-500 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-red-100 transition-all",children:"Revoke"})]},C.userId);return i.jsxs("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:[i.jsx(Ig,{member:c,isOpen:!!c,onClose:()=>d(null)}),i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[85vh]",children:[i.jsxs("div",{className:"bg-slate-900 p-8 border-b border-slate-800 shrink-0",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"Organization Settings"}),i.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Manage Entity & Access"})]}),i.jsx("button",{onClick:s,className:"w-8 h-8 rounded-full bg-slate-800 text-slate-400 flex items-center justify-center hover:bg-slate-700 transition-all",children:""})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>r("DETAILS"),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${a==="DETAILS"?"bg-indigo-600 text-white":"bg-slate-800 text-slate-400 hover:text-white"}`,children:"Details"}),i.jsx("button",{onClick:()=>r("ACCESS"),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${a==="ACCESS"?"bg-indigo-600 text-white":"bg-slate-800 text-slate-400 hover:text-white"}`,children:"Access Control"})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-slate-50 p-8",children:[a==="DETAILS"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[i.jsxs("div",{className:"w-24 h-24 rounded-2xl bg-white border border-slate-200 flex items-center justify-center overflow-hidden shrink-0 relative group",children:[f?i.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}):p.logoUrl?i.jsx("img",{src:p.logoUrl,className:"w-full h-full object-cover"}):i.jsx("span",{className:"text-2xl text-slate-300 font-black",children:p.name.charAt(0)}),i.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"absolute inset-0 opacity-0 cursor-pointer"}),i.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:i.jsx("span",{className:"text-white text-[9px] font-bold uppercase",children:f?"Processing":"Change"})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-slate-900",children:"Organization Logo"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Tap image to upload. Auto-resized."})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Organization Name"}),i.jsx("input",{value:p.name,onChange:C=>g({...p,name:C.target.value}),className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Region / Country"}),i.jsx("input",{value:p.country,onChange:C=>g({...p,country:C.target.value}),className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Main Venue"}),i.jsx("input",{value:p.location,onChange:C=>g({...p,location:C.target.value}),className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Description"}),i.jsx("textarea",{value:p.description,onChange:C=>g({...p,description:C.target.value}),rows:3,className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500 resize-none"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-slate-900 text-sm",children:"Public Visibility"}),i.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Show in Global Feed"})]}),i.jsx("div",{onClick:()=>g({...p,isPublic:!p.isPublic}),className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${p.isPublic?"bg-indigo-600":"bg-slate-300"}`,children:i.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all shadow-sm ${p.isPublic?"left-7":"left-1"}`})})]}),i.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-slate-900 text-sm",children:"Allow User Posts"}),i.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Enable Public Feed"})]}),i.jsx("div",{onClick:()=>g({...p,allowUserContent:!p.allowUserContent}),className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${p.allowUserContent?"bg-emerald-500":"bg-slate-300"}`,children:i.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all shadow-sm ${p.allowUserContent?"left-7":"left-1"}`})})]})]}),i.jsx("button",{onClick:v,className:"w-full py-4 bg-slate-900 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-slate-800 transition-all mt-4",children:"Save Changes"})]}),a==="ACCESS"&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"text-xs font-black text-purple-600 uppercase tracking-widest mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 bg-purple-600 rounded-full"})," Administrators"]}),i.jsx("div",{className:"space-y-3",children:k.length>0?k.map(M):i.jsx("div",{className:"text-slate-400 text-xs italic pl-4",children:"No administrators defined."})})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-xs font-black text-teal-600 uppercase tracking-widest mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 bg-teal-600 rounded-full"})," Scorers"]}),i.jsx("div",{className:"space-y-3",children:E.length>0?E.map(M):i.jsx("div",{className:"text-slate-400 text-xs italic pl-4",children:"No scorers assigned."})})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-xs font-black text-red-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})," Restricted / Rejected"]}),T.length===0?i.jsx("div",{className:"p-6 bg-slate-100 rounded-2xl border border-dashed border-slate-300 text-center text-slate-400 text-xs font-bold uppercase",children:"No rejected applicants"}):i.jsx("div",{className:"space-y-3",children:T.map(C=>i.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 flex items-center justify-between shadow-sm opacity-75 hover:opacity-100 transition-opacity",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center font-black text-slate-400",children:C.applicantName.charAt(0)}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-sm text-slate-900",children:C.applicantName}),i.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:new Date(C.timestamp).toLocaleDateString()})]})]}),i.jsx("button",{onClick:()=>S(C),className:"px-4 py-2 border border-emerald-100 bg-emerald-50 text-emerald-600 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-emerald-100 transition-all",children:"Restore"})]},C.id))})]})]})]})]})]})},KS=({isOpen:t,mode:e,onClose:s,onConfirm:a,currentUserPassword:r})=>{const[c,d]=j.useState(""),[f,m]=j.useState(""),[p,g]=j.useState("INPUT"),[v,y]=j.useState("");if(!t)return null;const N=()=>{if(f===r){const S=c.split(`
`).map(k=>k.trim()).filter(k=>k.length>0);a(S)}else y("Incorrect Admin Password")};return i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[85vh]",children:[i.jsxs("div",{className:"bg-slate-900 p-8 text-white",children:[i.jsxs("h3",{className:"text-xl font-black mb-1",children:["Bulk Import ",e==="TEAMS"?"Teams":"Players"]}),i.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Administrative Action"})]}),i.jsx("div",{className:"p-8 flex-1 overflow-y-auto custom-scrollbar",children:p==="INPUT"?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-slate-600 mb-4 font-medium",children:e==="TEAMS"?"Paste team names below (one per line). Duplicates will be handled automatically.":"Paste players below (one per line). Format: Name - Role (Optional). e.g., 'John Smith - Bowler'"}),i.jsx("textarea",{value:c,onChange:S=>d(S.target.value),placeholder:e==="TEAMS"?`Team A
Team B
Team C...`:`John Doe - Batsman
Jane Smith
...`,className:"w-full h-64 bg-slate-50 border border-slate-200 rounded-xl p-4 font-mono text-sm outline-none focus:border-indigo-500 resize-none"})]}):i.jsxs("div",{className:"py-10 text-center",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("h4",{className:"text-lg font-black text-slate-900 mb-2",children:"Security Check"}),i.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Please enter your admin password to authorize this bulk update."}),i.jsx("input",{type:"password",value:f,onChange:S=>m(S.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold text-center outline-none focus:border-indigo-500",placeholder:"Admin Password",autoFocus:!0}),v&&i.jsx("p",{className:"text-red-500 text-xs font-bold mt-4 uppercase tracking-widest animate-pulse",children:v})]})}),i.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-4",children:[i.jsx("button",{onClick:s,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600 transition-all",children:"Cancel"}),p==="INPUT"?i.jsx("button",{onClick:()=>g("VERIFY"),disabled:!c.trim(),className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-500 shadow-lg disabled:opacity-50",children:"Proceed to Verify"}):i.jsx("button",{onClick:N,className:"flex-1 py-4 bg-emerald-500 text-white rounded-xl font-black uppercase text-xs tracking-widest hover:bg-emerald-400 shadow-lg",children:"Confirm Import"})]})]})})},XS=({isOpen:t,teamName:e,onClose:s,onSave:a})=>{const[r,c]=j.useState(""),[d,f]=j.useState("Batsman");if(!t)return null;const m=p=>{p.preventDefault(),r.trim()&&(a(r,d),c(""),f("Batsman"),s())};return i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden",children:[i.jsxs("div",{className:"bg-slate-900 p-6 text-white text-center",children:[i.jsx("h3",{className:"text-xl font-black mb-1",children:"Add Player"}),i.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:["To ",e]})]}),i.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Player Name"}),i.jsx("input",{value:r,onChange:p=>c(p.target.value),placeholder:"e.g. Virat Kohli",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500",autoFocus:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Primary Role"}),i.jsxs("select",{value:d,onChange:p=>f(p.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500",children:[i.jsx("option",{value:"Batsman",children:"Batsman"}),i.jsx("option",{value:"Bowler",children:"Bowler"}),i.jsx("option",{value:"All-rounder",children:"All-rounder"}),i.jsx("option",{value:"Wicket-keeper",children:"Wicket-keeper"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{type:"button",onClick:s,className:"flex-1 py-3 text-slate-400 font-black uppercase text-xs hover:text-slate-600",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:!r.trim(),className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-500 shadow-lg disabled:opacity-50",children:"Add to Squad"})]})]})]})})},QS=({isOpen:t,onClose:e,globalUsers:s,orgTeams:a,onAdd:r,existingMemberIds:c})=>{const[d,f]=j.useState("SEARCH"),[m,p]=j.useState(""),[g,v]=j.useState(null),[y,N]=j.useState("Scorer"),[S,k]=j.useState(""),E=j.useMemo(()=>m?s.filter(C=>!c.includes(C.id)&&(C.name.toLowerCase().includes(m.toLowerCase())||C.handle.toLowerCase().includes(m.toLowerCase()))).slice(0,10):[],[s,m,c]);if(!t)return null;const T=C=>{v(C),f("CONFIGURE"),C.role==="Player"?(N("Player"),a.length>0&&k(a[0].id)):C.role==="Umpire"?N("Umpire"):C.role==="Scorer"&&N("Scorer")},M=()=>{g&&(r(g,y,S),e(),f("SEARCH"),p(""),v(null))};return i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[80vh]",children:[i.jsxs("div",{className:"bg-slate-900 p-8 border-b border-slate-800 shrink-0",children:[i.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:"Add Member"}),i.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:d==="SEARCH"?"Search Global Directory":"Configure Role & Access"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-slate-50",children:d==="SEARCH"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{value:m,onChange:C=>p(C.target.value),placeholder:"Search by name or handle...",className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500 shadow-sm",autoFocus:!0}),i.jsxs("div",{className:"space-y-2",children:[E.map(C=>i.jsxs("button",{onClick:()=>T(C),className:"w-full p-4 bg-white rounded-xl border border-slate-200 hover:border-indigo-400 hover:shadow-md transition-all flex items-center gap-4 text-left group",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center font-black text-slate-500 group-hover:bg-indigo-100 group-hover:text-indigo-600",children:C.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("div",{className:"font-black text-slate-900 text-sm",children:C.name}),i.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:[C.handle,"  ",C.role]})]})]},C.id)),m&&E.length===0&&i.jsx("div",{className:"text-center py-8 text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No users found"}),!m&&i.jsxs("div",{className:"text-center py-12 opacity-30",children:[i.jsx("span",{className:"text-4xl mb-2 block",children:""}),i.jsx("p",{className:"text-xs font-black uppercase",children:"Type to search"})]})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-black text-xl",children:g==null?void 0:g.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-black text-slate-900",children:g==null?void 0:g.name}),i.jsx("p",{className:"text-xs text-slate-500 font-bold",children:g==null?void 0:g.handle})]}),i.jsx("button",{onClick:()=>f("SEARCH"),className:"ml-auto text-xs font-bold text-slate-400 underline hover:text-indigo-600",children:"Change"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Assign Role"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Administrator","Scorer","Umpire","Coach","Player"].map(C=>i.jsx("button",{onClick:()=>N(C),className:`py-3 px-2 rounded-xl text-[10px] font-black uppercase tracking-widest border-2 transition-all ${y===C?"bg-indigo-600 border-indigo-600 text-white shadow-lg":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:C},C))})]}),y==="Player"&&i.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2",children:[i.jsx("label",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest px-1",children:"Assign to Squad (Optional)"}),i.jsxs("select",{value:S,onChange:C=>k(C.target.value),className:"w-full bg-white border border-emerald-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-900 outline-none focus:border-emerald-500",children:[i.jsx("option",{value:"",children:"-- Add to Org Roster Only --"}),a.map(C=>i.jsx("option",{value:C.id,children:C.name},C.id))]}),i.jsx("p",{className:"text-[9px] text-slate-400 px-1",children:"Adding to a squad automatically creates a Player Profile in that team."})]})]})}),i.jsxs("div",{className:"p-6 border-t border-slate-200 bg-white flex gap-4",children:[i.jsx("button",{onClick:e,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600 transition-all",children:"Cancel"}),d==="CONFIGURE"&&i.jsx("button",{onClick:M,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-indigo-500 transition-all",children:"Confirm Assignment"})]})]})})},Mg=({organization:t,userRole:e,onBack:s,onViewTournament:a,onViewPlayer:r,onRequestAddTeam:c,onRequestAddTournament:d,players:f,onViewTeam:m,isFollowed:p,onToggleFollow:g,globalUsers:v,onAddMember:y,onUpdateOrg:N,onProcessApplication:S,allOrganizations:k=[],currentUserProfile:E})=>{const[T,M]=j.useState("SQUADS"),[C,D]=j.useState(""),[R,B]=j.useState(null),[G,H]=j.useState(!1),[z,P]=j.useState(null),[ne,le]=j.useState(!1),[ie,J]=j.useState(null),[pe,U]=j.useState(null),[O,V]=j.useState(null),[he,W]=j.useState(!1),[A,$]=j.useState(""),[re,ve]=j.useState(null),[Ne,ge]=j.useState(""),Se=j.useMemo(()=>{var de;return((de=t.applications)==null?void 0:de.filter(ce=>ce.status==="PENDING"||ce.status==="REVIEW"))||[]},[t.applications]),Ee=t.members.some(de=>de.userId===(E==null?void 0:E.id)&&de.role==="Administrator")||e==="Administrator",Q=t.type==="CLUB",ye=j.useMemo(()=>!t.childOrgIds||t.childOrgIds.length===0?[]:k.filter(ce=>{var be;return(be=t.childOrgIds)==null?void 0:be.includes(ce.id)}).flatMap(ce=>ce.memberTeams.map(be=>({...be,orgName:ce.name}))),[t.childOrgIds,k]),je=j.useMemo(()=>t.members.filter(de=>de.role==="Umpire"||de.role==="Match Official"),[t.members]),Be=de=>t.fixtures.filter(ce=>{var be;return(be=ce.umpires)==null?void 0:be.includes(de)}).length,et=de=>{B(de),r(de)},ct=(de,ce,be)=>{var Qe;const Ae={userId:de.id,name:de.name,handle:de.handle,role:ce,addedAt:Date.now()};if(N){let gt=[...t.members,Ae],At=t.memberTeams;if(ce==="Player"&&be){const Ue={id:de.id,name:de.name,role:((Qe=de.playerDetails)==null?void 0:Qe.primaryRole)||"All-rounder",photoUrl:de.avatarUrl,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}};At=At.map(at=>at.id===be?{...at,players:[...at.players,Ue]}:at)}N(t.id,{members:gt,memberTeams:At})}else y(Ae)},pt=de=>{re&&S&&(S(t.id,re.id,"APPROVED",de),ve(null))},wt=(de,ce)=>{if(!N||!O)return;const be={id:`pl-${Date.now()}`,name:de,role:ce,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}},Ae=t.memberTeams.map(Qe=>Qe.id===O.id?{...Qe,players:[...Qe.players,be]}:Qe);N(t.id,{memberTeams:Ae}),V(null)},Fe=()=>{var ce;if(!N||!A)return;const de=v.find(be=>be.id===A);if(de){if(t.memberTeams.length===0){alert("Please create a team/squad first.");return}const be=t.memberTeams[0].id,Ae={id:de.id,name:de.name,role:((ce=de.playerDetails)==null?void 0:ce.primaryRole)||"All-rounder",photoUrl:de.avatarUrl,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}},Qe=t.memberTeams.map(gt=>gt.id===be?{...gt,players:[...gt.players,Ae]}:gt);N(t.id,{memberTeams:Qe}),$(""),alert(`${de.name} added to ${t.memberTeams[0].name}.`)}else alert("User ID not found in global directory.")},dt=de=>{if(N){if(ie==="TEAMS"){const ce=de.map(Ae=>({id:`tm-${Date.now()}-${Math.floor(Math.random()*1e3)}`,name:Ae.trim(),players:[]})),be=[...t.memberTeams,...ce];N(t.id,{memberTeams:be})}else if(ie==="PLAYERS"){let ce=O==null?void 0:O.id;if(!ce)if(t.memberTeams.length===0){const Qe={id:`tm-gen-${Date.now()}`,name:"General Squad",players:[]};t.memberTeams.push(Qe),ce=Qe.id}else ce=t.memberTeams[0].id;const be=de.map((Qe,gt)=>{const[At,Ue]=Qe.split("-").map(Zt=>Zt.trim()),at=["Batsman","Bowler","All-rounder","Wicket-keeper"].includes(Ue)?Ue:"All-rounder";return{id:`pl-bulk-${Date.now()}-${gt}`,name:At,role:at,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}}}),Ae=t.memberTeams.map(Qe=>Qe.id===ce?{...Qe,players:[...Qe.players,...be]}:Qe);N(t.id,{memberTeams:Ae})}J(null),V(null)}},Tt=["SQUADS","PLAYERS","TOURNAMENTS","MEMBERS","OFFICIALS"];Ee&&(Tt.push("REQUESTS"),Tt.push("AFFILIATIONS"),Tt.push("ACCESS")),k.filter(de=>{var ce;return(ce=t.parentOrgIds)==null?void 0:ce.includes(de.id)});const Nt=Se.filter(de=>de.type==="ORG_AFFILIATE"),Et=Se.filter(de=>de.type!=="USER_JOIN");return i.jsxs("div",{className:"animate-in slide-in-from-right-8 duration-500",children:[i.jsx(Ig,{member:z,isOpen:!!z,onClose:()=>P(null),allOrganizations:k}),i.jsx(QS,{isOpen:G,onClose:()=>H(!1),globalUsers:v,orgTeams:t.memberTeams,existingMemberIds:t.members.map(de=>de.userId),onAdd:ct}),i.jsx(Rg,{isOpen:!!R,player:R,onClose:()=>B(null),isFollowed:!1,onToggleFollow:()=>{},onUpdatePlayer:(Ee||(R==null?void 0:R.id)===(E==null?void 0:E.id))&&N?de=>{const ce=t.memberTeams.map(be=>be.id===(R==null?void 0:R.teamId)?{...be,players:be.players.map(Ae=>Ae.id===R.id?{...Ae,...de}:Ae)}:be);N(t.id,{memberTeams:ce}),B(be=>be?{...be,...de}:null)}:void 0}),ne&&N&&i.jsx(YS,{organization:t,onClose:()=>le(!1),onSave:N}),ie&&i.jsx(KS,{isOpen:!0,mode:ie,onClose:()=>{J(null),V(null)},onConfirm:dt,currentUserPassword:E==null?void 0:E.password}),i.jsx(XS,{isOpen:he,teamName:(O==null?void 0:O.name)||"",onClose:()=>{W(!1),V(null)},onSave:wt}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start mb-6 md:mb-10",children:[i.jsxs("div",{className:"flex items-center gap-4 md:gap-6 w-full",children:[i.jsx("button",{onClick:s,className:"w-12 h-12 rounded-full bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-50 hover:text-black transition-all shadow-sm",children:""}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-20 h-20 bg-white p-1 rounded-2xl shadow-md border border-slate-100",children:t.logoUrl?i.jsx("img",{src:t.logoUrl,className:"w-full h-full object-cover rounded-xl"}):i.jsx("div",{className:"w-full h-full bg-slate-100 rounded-xl flex items-center justify-center font-black text-slate-300 text-2xl",children:t.name.charAt(0)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 mb-1",children:[i.jsx("h1",{className:"text-2xl md:text-4xl font-black text-slate-900 tracking-tight truncate",children:t.name}),Q&&i.jsx("span",{className:"bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded text-[10px] font-black uppercase tracking-widest align-middle whitespace-nowrap",children:"Club"})]}),i.jsxs("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest truncate",children:[Q?"Club Management":"League Operations","  ",t.memberTeams.length+ye.length," ",Q?"Teams":"Squads"]})]})]})]}),i.jsxs("div",{className:"flex gap-2 md:gap-3 mt-4 md:mt-0 w-full md:w-auto justify-end",children:[Ee&&N&&i.jsx("button",{onClick:()=>le(!0),className:"w-12 h-12 rounded-xl bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-900 flex items-center justify-center text-xl transition-all",title:"Settings",children:""}),i.jsx("button",{onClick:g,className:`px-4 md:px-6 py-3 rounded-xl font-black uppercase text-[10px] tracking-widest transition-all whitespace-nowrap ${p?"bg-emerald-500 text-white":"bg-slate-900 text-white hover:bg-slate-800"}`,children:p?"Following ":"Follow"})]})]}),i.jsx("div",{className:"bg-white p-1 rounded-2xl flex w-full gap-1 mb-6 md:mb-10 border border-slate-200 shadow-sm overflow-x-auto no-scrollbar",children:Tt.map(de=>{const ce=de==="REQUESTS"?Et.length:de==="AFFILIATIONS"?Nt.length:0;return i.jsxs("button",{onClick:()=>M(de),className:`flex-none px-4 md:px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap flex items-center gap-2 ${T===de?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-900"}`,children:[de==="TOURNAMENTS"&&Q?"LEAGUES":de,ce>0&&i.jsx("span",{className:"bg-red-500 text-white px-1.5 py-0.5 rounded text-[8px]",children:ce})]},de)})}),T==="SQUADS"&&i.jsxs("div",{className:"space-y-6",children:[Ee&&i.jsx("div",{className:"flex justify-end gap-2",children:i.jsx("button",{onClick:()=>J("TEAMS"),className:"bg-slate-100 text-slate-600 px-4 py-2 rounded-xl text-[10px] font-black uppercase hover:bg-slate-200",children:"Bulk Add Teams"})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(kl,{role:e,perform:"team:add",children:i.jsxs("button",{onClick:c,className:"border-2 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center p-8 hover:bg-white hover:border-indigo-400 hover:shadow-lg transition-all text-slate-400 hover:text-indigo-600 gap-4 min-h-[200px] bg-slate-50/50",children:[i.jsx("span",{className:"text-5xl font-thin",children:"+"}),i.jsxs("span",{className:"text-xs font-black uppercase tracking-widest",children:["Register ",Q?"Squad":"Team"]})]})}),t.memberTeams.map(de=>i.jsxs("div",{onClick:()=>m(de.id),className:"bg-white border border-slate-200 p-8 rounded-[2rem] hover:shadow-xl hover:shadow-slate-100 transition-all cursor-pointer group flex flex-col h-full",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-2xl font-black text-slate-900 group-hover:text-indigo-600 transition-colors",children:de.name}),i.jsxs("p",{className:"text-xs text-indigo-500 font-bold uppercase mt-1 tracking-wider",children:[" ",de.location||"Home Ground"]}),i.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100",children:i.jsxs("span",{className:"text-xs font-mono text-slate-500 bg-slate-100 px-3 py-1 rounded-lg",children:[de.players.length," Roster"]})})]}),Ee&&N&&i.jsxs("div",{className:"mt-6 flex gap-2 pt-4 border-t border-slate-100",onClick:ce=>ce.stopPropagation(),children:[i.jsx("button",{onClick:()=>{V(de),W(!0)},className:"flex-1 py-2 bg-slate-50 text-slate-600 hover:bg-indigo-600 hover:text-white rounded-xl text-[10px] font-black uppercase transition-all border border-slate-100 hover:border-indigo-600",children:"+ Add Player"}),i.jsx("button",{onClick:()=>{V(de),J("PLAYERS")},className:"flex-1 py-2 bg-slate-50 text-slate-600 hover:bg-emerald-600 hover:text-white rounded-xl text-[10px] font-black uppercase transition-all border border-slate-100 hover:border-emerald-600",children:"+ Bulk Import"})]})]},de.id))]}),ye.length>0&&i.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-200",children:[i.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest mb-6",children:"Affiliated Club Teams"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ye.map(de=>i.jsx("div",{onClick:()=>m(de.id),className:"bg-slate-50 border border-slate-200 p-8 rounded-[2rem] hover:bg-white hover:shadow-lg transition-all cursor-pointer group flex flex-col h-full",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("h3",{className:"text-2xl font-black text-slate-700 group-hover:text-emerald-600 transition-colors",children:de.name}),i.jsx("div",{className:"text-xl",children:""})]}),i.jsxs("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1 tracking-wider",children:["From ",de.orgName||"Affiliate"]}),i.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:i.jsxs("span",{className:"text-xs font-mono text-slate-500 bg-white px-3 py-1 rounded-lg border border-slate-200",children:[de.players.length," Players"]})})]})},de.id))})]})]}),T==="PLAYERS"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col gap-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{value:C,onChange:de=>D(de.target.value),placeholder:`Search ${Q?"club":"organizational"} roster...`,className:"flex-1 bg-slate-50 border-none outline-none p-4 rounded-xl font-bold text-sm"}),Ee&&i.jsx("button",{onClick:()=>J("PLAYERS"),className:"bg-slate-900 text-white px-6 py-4 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-slate-700 shadow-lg",children:"Bulk Import"})]}),Ee&&i.jsxs("div",{className:"flex gap-2 items-center bg-slate-50 p-2 rounded-xl border border-slate-100",children:[i.jsx("input",{value:A,onChange:de=>$(de.target.value),placeholder:"Add Player by User ID...",className:"flex-1 bg-white border-none outline-none px-4 py-3 rounded-lg font-mono text-xs"}),i.jsx("button",{onClick:Fe,className:"bg-indigo-600 text-white px-4 py-3 rounded-lg font-black uppercase text-xs tracking-widest hover:bg-indigo-500",children:"Add"})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.filter(de=>de.name.toLowerCase().includes(C.toLowerCase())).map(de=>i.jsxs("div",{onClick:()=>et(de),className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-sm cursor-pointer hover:border-indigo-400 transition-all flex items-center gap-4 group hover:shadow-lg",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-100 flex items-center justify-center text-lg overflow-hidden border border-slate-200 group-hover:border-indigo-300",children:i.jsx("img",{src:de.photoUrl||`https://ui-avatars.com/api/?name=${de.name}&background=random`,alt:de.name,className:"w-full h-full object-cover"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-black text-slate-900 text-sm group-hover:text-indigo-600 transition-colors",children:de.name}),i.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:de.teamName}),i.jsx("div",{className:"text-[9px] font-bold text-indigo-400 uppercase mt-0.5",children:de.role})]})]},de.id))})]}),T==="MEMBERS"&&i.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:"Registered Members"}),Ee&&i.jsx("button",{onClick:()=>H(!0),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-500 shadow-lg transition-all",children:"+ Add Member"})]}),["Administrator","Scorer","Umpire","Coach","Player"].map(de=>{const ce=t.members.filter(be=>be.role===de);return ce.length===0?null:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest border-b border-slate-200 pb-2",children:[de,"s"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ce.map(be=>i.jsxs("div",{onClick:()=>P(be),className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex items-center justify-between cursor-pointer hover:border-indigo-300 transition-all group",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center font-black text-lg text-white shadow-md ${de==="Administrator"?"bg-purple-600":de==="Scorer"?"bg-teal-500":de==="Umpire"?"bg-amber-500":"bg-slate-800"}`,children:be.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-black text-slate-900 group-hover:text-indigo-600 transition-colors",children:be.name}),i.jsx("p",{className:"text-xs font-bold text-slate-400",children:be.handle})]})]}),i.jsx("div",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-widest group-hover:text-indigo-400 transition-colors",children:"View"})]},be.userId))})]},de)}),t.members.length===0&&i.jsx("div",{className:"p-12 text-center bg-slate-50 border border-dashed border-slate-200 rounded-[2rem] text-slate-400 font-bold uppercase text-xs",children:"No members found. Add some to get started."})]}),T==="OFFICIALS"&&i.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:"Official Panel"}),Ee&&i.jsx("button",{onClick:()=>H(!0),className:"bg-slate-900 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest hover:bg-slate-700",children:"+ Register Official"})]}),je.length===0?i.jsx("div",{className:"p-12 text-center bg-slate-50 border border-dashed border-slate-200 rounded-[2rem] text-slate-400 font-bold uppercase text-xs",children:"No officials registered. Use the 'Add Member' feature to add Umpires."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:je.map(de=>i.jsxs("div",{onClick:()=>P(de),className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex items-center justify-between cursor-pointer hover:border-indigo-300 transition-all group",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 bg-slate-900 text-white rounded-xl flex items-center justify-center font-black text-lg",children:de.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-black text-slate-900",children:de.name}),i.jsx("p",{className:"text-xs font-bold text-slate-400",children:de.role})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-2xl font-black text-indigo-600",children:Be(de.userId)}),i.jsx("div",{className:"text-[8px] font-bold text-slate-400 uppercase tracking-widest",children:"Games"})]})]},de.userId))})]}),T==="ACCESS"&&i.jsx(ZS,{organization:t,onUpdateOrg:N}),re&&i.jsx("div",{className:"fixed inset-0 bg-slate-950/50 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[i.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"Accept Application"}),i.jsxs("p",{className:"text-slate-500 text-xs mb-6",children:["Approve ",i.jsx("span",{className:"font-bold text-slate-900",children:re.applicantName}),". They will be notified."]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>pt("Player"),className:"w-full p-4 rounded-xl border-2 border-slate-100 hover:border-indigo-500 hover:bg-indigo-50 transition-all text-left group",children:[i.jsx("div",{className:"font-black text-slate-900 group-hover:text-indigo-700",children:"Add as Player"}),i.jsx("div",{className:"text-[10px] text-slate-400 group-hover:text-indigo-600/70",children:"Assign to team roster."})]}),i.jsxs("button",{onClick:()=>pt("Scorer"),className:"w-full p-4 rounded-xl border-2 border-slate-100 hover:border-teal-500 hover:bg-teal-50 transition-all text-left group",children:[i.jsx("div",{className:"font-black text-slate-900 group-hover:text-teal-700",children:"Scorer / Staff"}),i.jsx("div",{className:"text-[10px] text-slate-400 group-hover:text-teal-600/70",children:"Can score matches."})]})]}),i.jsx("button",{onClick:()=>ve(null),className:"mt-6 w-full py-3 text-slate-400 font-black uppercase text-xs hover:text-slate-600",children:"Cancel"})]})})]})},ZS=({organization:t,onUpdateOrg:e})=>{var y;const[s,a]=j.useState("ALL"),[r,c]=j.useState(""),[d,f]=j.useState(null),m=N=>t.members.filter(S=>(N==="ALL_ROLES"||S.role===N)&&(S.name.toLowerCase().includes(r.toLowerCase())||S.handle.toLowerCase().includes(r.toLowerCase()))),p=()=>{switch(s){case"ADMINS":return m("Administrator");case"CAPTAINS":return t.members.filter(N=>{var S;return N.role==="Player"&&((S=N.permissions)==null?void 0:S.canSubmitReport)}).filter(N=>N.name.toLowerCase().includes(r.toLowerCase()));case"SCORERS":return m("Scorer");case"UMPIRES":return m("Umpire");case"COACHES":return m("Coach");default:return t.members.filter(N=>N.name.toLowerCase().includes(r.toLowerCase()))}},g=N=>{if(!d||!e)return;const S=d.permissions||{},k={...S,[N]:!S[N]},E=t.members.map(T=>T.userId===d.userId?{...T,permissions:k}:T);e(t.id,{members:E}),f({...d,permissions:k})},v=p();return i.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[i.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Access Control Center"}),i.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1 uppercase tracking-widest",children:"Manage Privileges & Permissions"})]}),i.jsx("div",{className:"w-full md:w-auto",children:i.jsx("input",{value:r,onChange:N=>c(N.target.value),placeholder:"Find user...",className:"bg-slate-50 px-5 py-3 rounded-xl border-none outline-none font-bold text-sm w-full md:w-64 focus:ring-2 focus:ring-indigo-100 transition-all"})})]}),i.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:["ALL","ADMINS","CAPTAINS","SCORERS","UMPIRES","COACHES"].map(N=>i.jsx("button",{onClick:()=>{a(N),f(null)},className:`px-4 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${s===N?"bg-indigo-600 text-white shadow-md":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:N},N))})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-3 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[v.map(N=>i.jsx("div",{onClick:()=>f(N),className:`p-4 rounded-xl border cursor-pointer transition-all ${(d==null?void 0:d.userId)===N.userId?"bg-indigo-50 border-indigo-200 shadow-md":"bg-white border-slate-100 hover:border-indigo-200"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-black text-xs ${N.role==="Administrator"?"bg-purple-500":N.role==="Scorer"?"bg-teal-500":"bg-slate-400"}`,children:N.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-900 text-sm",children:N.name}),i.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:N.role})]})]})},N.userId)),v.length===0&&i.jsx("div",{className:"p-8 text-center border-2 border-dashed border-slate-200 rounded-xl text-slate-400 font-bold text-xs uppercase",children:"No users found."})]}),i.jsx("div",{className:"lg:col-span-2",children:d?i.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-xl sticky top-6 animate-in slide-in-from-right-4 duration-300",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-900 text-white flex items-center justify-center text-2xl font-black",children:d.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-black text-slate-900",children:d.name}),i.jsxs("p",{className:"text-xs font-bold text-indigo-500 uppercase tracking-widest",children:[d.role,"  ",d.handle]}),i.jsxs("div",{className:"flex gap-2 mt-1",children:[d.role==="Administrator"&&i.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:"Default PW: admin"}),d.role==="Coach"&&i.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:"Default PW: coach"}),d.role==="Scorer"&&i.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:"Default PW: scorer"}),d.role==="Umpire"&&i.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:"Default PW: umpire"}),d.role==="Player"&&((y=d.permissions)==null?void 0:y.canSubmitReport)&&i.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:"Default PW: Captain"})]})]})]}),i.jsx("h4",{className:"text-sm font-black text-slate-400 uppercase tracking-widest border-b border-slate-100 pb-3 mb-6",children:"Permissions"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["canEditOrg","canManageMembers","canEditSquad","canSubmitReport","canViewReports","view_protests","canScoreMatch","canEditScorecard","canOfficiate"].map(N=>{var S,k;return i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-100",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-700 text-sm",children:N.replace(/([A-Z])/g," $1").replace(/^./,E=>E.toUpperCase())}),i.jsxs("p",{className:"text-[10px] text-slate-400",children:["Allow user to ",N.replace("can","").toLowerCase(),"..."]})]}),i.jsx("button",{onClick:()=>g(N),className:`w-12 h-6 rounded-full p-1 transition-all ${(S=d.permissions)!=null&&S[N]?"bg-emerald-500":"bg-slate-300"}`,children:i.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transition-all ${(k=d.permissions)!=null&&k[N]?"translate-x-6":"translate-x-0"}`})})]},N)})})]}):i.jsx("div",{className:"h-full min-h-[400px] flex items-center justify-center bg-slate-50 rounded-[2.5rem] border border-dashed border-slate-200",children:i.jsxs("div",{className:"text-center opacity-50",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsx("p",{className:"font-black text-slate-400 uppercase text-xs tracking-widest mt-4",children:"Select a user to manage permissions"})]})})})]})]})},Dg=({rows:t,onViewTeam:e})=>i.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2rem] overflow-hidden shadow-xl",children:[i.jsx("div",{className:"w-full",children:i.jsxs("table",{className:"w-full text-left border-collapse table-fixed md:table-auto",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-800/50 text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] border-b border-slate-800",children:[i.jsx("th",{className:"pl-4 pr-2 py-2 w-5/12 md:w-auto md:px-6 md:py-3",children:"Team"}),i.jsx("th",{className:"px-1 py-2 text-center md:px-4 md:py-3",children:"P"}),i.jsx("th",{className:"px-1 py-2 text-center md:px-4 md:py-3",children:"W"}),i.jsx("th",{className:"px-1 py-2 text-center md:px-4 md:py-3",children:"L"}),i.jsx("th",{className:"px-1 py-2 text-center hidden sm:table-cell md:px-4 md:py-3",children:"T"}),i.jsx("th",{className:"px-1 py-2 text-center md:px-4 md:py-3",children:"NRR"}),i.jsx("th",{className:"pr-4 pl-2 py-2 text-right text-indigo-400 md:px-6 md:py-3",children:"PTS"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-800/50",children:t.map((s,a)=>i.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[i.jsx("td",{className:"pl-4 pr-2 py-2 md:px-6 md:py-3 overflow-hidden",children:i.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[i.jsx("span",{className:"text-[10px] font-black text-slate-600 w-3 md:w-4 shrink-0",children:a+1}),e?i.jsx("button",{onClick:()=>e(s.teamId),className:"text-[11px] md:text-sm font-black text-slate-200 group-hover:text-white transition-colors hover:underline truncate block w-full text-left leading-tight",children:s.teamName}):i.jsx("span",{className:"text-[11px] md:text-sm font-black text-slate-200 group-hover:text-white transition-colors truncate block leading-tight",children:s.teamName})]})}),i.jsx("td",{className:"px-1 py-2 text-center text-slate-400 font-bold text-[10px] md:text-sm md:px-4 md:py-3",children:s.played}),i.jsx("td",{className:"px-1 py-2 text-center text-emerald-500 font-black text-[10px] md:text-sm md:px-4 md:py-3",children:s.won}),i.jsx("td",{className:"px-1 py-2 text-center text-red-500/70 font-bold text-[10px] md:text-sm md:px-4 md:py-3",children:s.lost}),i.jsx("td",{className:"px-1 py-2 text-center text-slate-500 font-medium text-[10px] md:text-sm hidden sm:table-cell md:px-4 md:py-3",children:s.tied}),i.jsxs("td",{className:`px-1 py-2 text-center font-bold text-[9px] md:text-xs md:px-4 md:py-3 ${s.nrr>=0?"text-emerald-400":"text-red-400"}`,children:[s.nrr>0?"+":"",s.nrr]}),i.jsx("td",{className:"pr-4 pl-2 py-2 text-right font-black text-xs md:text-base text-white tabular-nums md:px-6 md:py-3",children:s.points})]},s.teamId))})]})}),t.length===0&&i.jsxs("div",{className:"p-10 text-center flex flex-col items-center gap-2 opacity-20",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest",children:"No competition data"})]})]}),e_={win:2,loss:0,tie:1,nr:1};function _0(t,e,s=e_){switch(t){case"TIE":return s.tie;case"NO_RESULT":case"ABANDONED":return s.nr;case"HOME_WIN":return e==="A"?s.win:s.loss;case"AWAY_WIN":return e==="B"?s.win:s.loss;default:return 0}}function Og(t,e){const s=new Map;return e.forEach(a=>{s.set(a.id,{teamId:a.id,teamName:a.name,played:0,won:0,lost:0,tied:0,nr:0,points:0,runsFor:0,oversFor:0,runsAgainst:0,oversAgainst:0,nrr:0})}),t.forEach(a=>{const r=s.get(a.teamAId),c=s.get(a.teamBId);!r||!c||(r.played++,c.played++,r.runsFor+=a.teamAScore,r.oversFor+=a.teamAOvers,r.runsAgainst+=a.teamBScore,r.oversAgainst+=a.teamBOvers,c.runsFor+=a.teamBScore,c.oversFor+=a.teamBOvers,c.runsAgainst+=a.teamAScore,c.oversAgainst+=a.teamAOvers,r.points+=_0(a.result,"A"),c.points+=_0(a.result,"B"),a.result==="TIE"?(r.tied++,c.tied++):a.result==="HOME_WIN"?(r.won++,c.lost++):a.result==="AWAY_WIN"?(c.won++,r.lost++):(r.nr++,c.nr++))}),Array.from(s.values()).map(a=>{const r=a.oversFor>0?a.runsFor/a.oversFor:0,c=a.oversAgainst>0?a.runsAgainst/a.oversAgainst:0;return{...a,nrr:parseFloat((r-c).toFixed(3))}}).sort((a,r)=>r.points!==a.points?r.points-a.points:r.nrr-a.nrr)}const t_=({fixtures:t,onViewMatch:e})=>{const s=t.filter(c=>c.stage==="Semi-Final"),a=t.find(c=>c.stage==="Final"),r=({match:c,title:d})=>{if(!c)return i.jsx("div",{className:"w-64 h-32 bg-slate-800/50 rounded-2xl border-2 border-dashed border-slate-700 flex items-center justify-center",children:i.jsxs("span",{className:"text-slate-500 font-bold text-xs uppercase tracking-widest",children:[d," TBD"]})});const f=c.winnerId&&c.winnerId===c.teamAId,m=c.winnerId&&c.winnerId===c.teamBId;return i.jsxs("div",{onClick:()=>e(c),className:`w-64 bg-slate-800 rounded-2xl border transition-all cursor-pointer relative overflow-hidden group ${c.status==="Live"?"border-red-500 shadow-[0_0_15px_rgba(220,38,38,0.3)]":"border-slate-700 hover:border-indigo-500"}`,children:[i.jsxs("div",{className:"bg-slate-900 p-2 flex justify-between items-center border-b border-slate-700",children:[i.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:d}),c.status==="Completed"&&i.jsx("span",{className:"text-[9px] font-black bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded",children:"DONE"}),c.status==="Live"&&i.jsx("span",{className:"text-[9px] font-black bg-red-600 text-white px-2 py-0.5 rounded animate-pulse",children:"LIVE"})]}),i.jsxs("div",{className:"p-4 space-y-2",children:[i.jsxs("div",{className:`flex justify-between items-center ${f?"text-emerald-400":m?"text-slate-500":"text-white"}`,children:[i.jsx("span",{className:"font-bold text-sm truncate max-w-[120px]",children:c.teamAName}),i.jsx("span",{className:"font-black font-mono",children:c.teamAScore||"-"})]}),i.jsxs("div",{className:`flex justify-between items-center ${m?"text-emerald-400":f?"text-slate-500":"text-white"}`,children:[i.jsx("span",{className:"font-bold text-sm truncate max-w-[120px]",children:c.teamBName}),i.jsx("span",{className:"font-black font-mono",children:c.teamBScore||"-"})]})]}),c.result&&i.jsx("div",{className:"px-4 pb-2 text-[9px] text-slate-400 italic truncate",children:c.result})]})};return i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-12 p-8 overflow-x-auto min-h-[400px]",children:[i.jsxs("div",{className:"flex flex-col gap-12 relative",children:[i.jsx(r,{match:s[0],title:"Semi Final 1"}),i.jsx(r,{match:s[1],title:"Semi Final 2"}),i.jsx("div",{className:"absolute top-16 -right-6 w-6 h-[calc(100%-8rem)] border-r-2 border-t-2 border-b-2 border-slate-600 rounded-r-xl pointer-events-none md:block hidden"}),i.jsx("div",{className:"absolute top-1/2 -right-12 w-6 h-0.5 bg-slate-600 pointer-events-none md:block hidden"})]}),i.jsxs("div",{className:"flex flex-col items-center gap-6",children:[i.jsx("div",{className:"text-4xl",children:""}),i.jsx(r,{match:a,title:"Grand Final"}),(a==null?void 0:a.winnerId)&&i.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-yellow-600 text-white px-6 py-2 rounded-full font-black text-xs uppercase tracking-widest shadow-xl animate-in zoom-in",children:["Champion: ",a.winnerId===a.teamAId?a.teamAName:a.teamBName]})]})]})},s_=({tournament:t,organization:e,onBack:s,onStartMatch:a,onGenerateFixtures:r,onAddGroup:c,onUpdateGroupTeams:d,onViewTeam:f,onViewMatch:m,allOrganizations:p=[]})=>{var le,ie;const[g,v]=j.useState("OVERVIEW"),[y,N]=j.useState("SCHEDULED"),[S,k]=j.useState(""),[E,T]=j.useState(null),[M,C]=j.useState(new Set),D=e.fixtures.filter(J=>J.tournamentId===t.id),R=j.useMemo(()=>{const J=D.filter(pe=>pe.status==="Completed"&&pe.savedState).map(pe=>{const U=pe.savedState,O=U.inningsScores.find($=>$.teamId===pe.teamAId)||(U.innings===1&&U.battingTeamId===pe.teamAId?{score:U.score,wickets:U.wickets,overs:"0.0"}:{score:0,wickets:0,overs:"0.0"}),V=U.inningsScores.find($=>$.teamId===pe.teamBId)||(U.innings===2&&U.battingTeamId===pe.teamBId?{score:U.score,wickets:U.wickets,overs:"0.0"}:{score:0,wickets:0,overs:"0.0"}),he=typeof O.score=="number"?O.score:parseInt(O.score),W=typeof V.score=="number"?V.score:parseInt(V.score);let A="NO_RESULT";return he>W?A="HOME_WIN":W>he?A="AWAY_WIN":he===W&&he>0&&(A="TIE"),{matchId:pe.id,teamAId:pe.teamAId,teamBId:pe.teamBId,teamAName:pe.teamAName,teamBName:pe.teamBName,teamAScore:he,teamAWkts:O.wickets,teamAOvers:parseFloat(O.overs),teamBScore:W,teamBWkts:V.wickets,teamBOvers:parseFloat(V.overs),result:A}});return t.groups.map(pe=>{const U=J.filter(O=>{const V=D.find(W=>W.id===O.matchId);if((V==null?void 0:V.groupId)===pe.id)return!0;const he=pe.teams.map(W=>W.id);return he.includes(O.teamAId)&&he.includes(O.teamBId)});return{group:pe,rows:Og(U,pe.teams)}})},[D,t.groups]),B=j.useMemo(()=>{let J=[...e.memberTeams];return e.childOrgIds&&e.childOrgIds.length>0&&p.filter(U=>{var O;return(O=e.childOrgIds)==null?void 0:O.includes(U.id)}).forEach(U=>{J=[...J,...U.memberTeams]}),J},[e,p]),G=J=>{const pe=t.groups.find(U=>U.id===J);pe&&(C(new Set(pe.teams.map(U=>U.id))),T(J))},H=J=>{const pe=new Set(M);pe.has(J)?pe.delete(J):pe.add(J),C(pe)},z=()=>{E&&(d(t.id,E,Array.from(M)),T(null))},P=()=>{const J=R.flatMap(U=>U.rows).sort((U,O)=>O.points-U.points||O.nrr-U.nrr);if(J.length<4){alert("Need at least 4 teams with standings data to generate Semi-Finals.");return}const pe=J.slice(0,4).map(U=>({teamId:U.teamId,teamName:U.teamName,played:U.played,won:U.won,lost:U.lost,drawn:U.nr,tied:U.tied,points:U.points,nrr:U.nrr,runsFor:U.runsFor,oversFor:U.oversFor,runsAgainst:U.runsAgainst,oversAgainst:U.oversAgainst}));$S(pe,t.id,t.format),alert("Knockout Generation Logic linked. (Requires parent state update implementation)")},ne=D.filter(J=>y==="LIVE"?J.status==="Live":y==="SCHEDULED"?J.status==="Scheduled":J.status==="Completed");return i.jsxs("div",{className:"animate-in slide-in-from-bottom-8 duration-500 pb-20",children:[i.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[i.jsx("button",{onClick:s,className:"w-12 h-12 rounded-full bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-50 hover:text-black transition-all shadow-sm",children:""}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"w-16 h-16 object-contain drop-shadow-sm rounded-xl bg-white p-1 border border-slate-100"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:t.name}),i.jsxs("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:[t.format,"  ",i.jsx("span",{className:"text-indigo-500",children:t.status})]})]})]})]}),i.jsx("div",{className:"flex gap-4 mb-10 overflow-x-auto pb-4 no-scrollbar",children:["OVERVIEW","GROUPS","FIXTURES","STANDINGS","BRACKET"].map(J=>i.jsx("button",{onClick:()=>v(J),className:`px-8 py-4 rounded-3xl text-xs font-black uppercase tracking-widest whitespace-nowrap transition-all border ${g===J?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-400 border-slate-200 hover:border-slate-300 hover:text-slate-900"}`,children:J},J))}),g==="OVERVIEW"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm col-span-2",children:[i.jsx("h3",{className:"text-xl font-black mb-4",children:"Season Status"}),i.jsxs("p",{className:"text-slate-500 leading-relaxed",children:["Competition in the ",t.name," is currently ",(le=t.status)==null?void 0:le.toLowerCase(),". Tracking results across ",t.groups.length," active groups."]})]}),i.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2rem] text-white",children:[i.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest opacity-50 mb-2",children:"Total Fixtures"}),i.jsx("div",{className:"text-5xl font-black",children:D.length})]})]}),g==="GROUPS"&&i.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[i.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col md:flex-row gap-4 items-center",children:[i.jsx("input",{value:S,onChange:J=>k(J.target.value),placeholder:"New Group Name (e.g. Group A)",className:"flex-1 bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none w-full"}),i.jsx("button",{onClick:()=>{S&&(c(t.id,S),k(""))},disabled:!S,className:"bg-indigo-600 disabled:bg-slate-200 disabled:text-slate-400 text-white px-8 py-4 rounded-xl font-black uppercase text-xs tracking-widest shadow-lg w-full md:w-auto transition-all",children:"+ Create Group"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.groups.map(J=>i.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-xl hover:shadow-2xl transition-all relative overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-black text-slate-900",children:J.name}),i.jsxs("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:[J.teams.length," Teams"]})]}),i.jsx("button",{onClick:()=>G(J.id),className:"bg-slate-900 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest hover:bg-indigo-600 transition-colors",children:"Manage Squads"})]}),i.jsx("div",{className:"space-y-2 relative z-10",children:J.teams.length===0?i.jsx("div",{className:"p-4 bg-slate-50 border border-dashed border-slate-200 rounded-xl text-center text-xs font-bold text-slate-400",children:"No teams assigned yet."}):J.teams.map(pe=>i.jsxs("button",{onClick:()=>f(pe.id),className:"w-full flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-indigo-200 hover:bg-indigo-50 transition-colors",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-slate-200 flex items-center justify-center text-sm",children:""}),i.jsx("span",{className:"font-bold text-slate-700 text-sm",children:pe.name})]},pe.id))}),i.jsx("div",{className:"absolute -bottom-6 -right-6 text-9xl opacity-[0.03] select-none pointer-events-none",children:""})]},J.id))})]}),g==="FIXTURES"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("div",{className:"flex gap-2",children:["SCHEDULED","LIVE","COMPLETED"].map(J=>i.jsx("button",{onClick:()=>N(J),className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${y===J?"bg-indigo-600 text-white":"bg-white text-slate-400 border border-slate-200"}`,children:J},J))}),i.jsx("button",{onClick:r,className:"bg-white border border-slate-200 text-slate-500 px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-sm hover:border-indigo-400 hover:text-indigo-600 transition-all",children:"Auto Generate"})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[ne.map(J=>i.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-1 w-full md:w-auto text-center md:text-left",children:[i.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-1",children:[i.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-100 px-2 py-1 rounded",children:new Date(J.date).toLocaleDateString()}),i.jsx("span",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-widest",children:J.venue}),i.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest border border-slate-200 px-1.5 rounded",children:J.format})]}),i.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 text-lg",children:[i.jsx("span",{className:"font-black text-slate-900",children:J.teamAName}),i.jsx("span",{className:"text-xs font-bold text-slate-300",children:"VS"}),i.jsx("span",{className:"font-black text-slate-900",children:J.teamBName})]}),J.status==="Live"&&i.jsxs("div",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest mt-1 animate-pulse",children:["Live Score: ",J.teamAScore||"0/0"," - ",J.teamBScore||"0/0"]}),J.status==="Completed"&&i.jsx("div",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mt-1 bg-indigo-50 inline-block px-2 py-1 rounded",children:"Match Completed"}),J.result&&i.jsx("div",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest mt-1",children:J.result})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>a(J),className:"px-6 py-3 bg-slate-900 text-white text-[10px] font-black uppercase rounded-xl hover:bg-slate-800 transition-all shadow-lg min-w-[120px]",children:J.status==="Live"?"Resume Scoring":J.status==="Completed"?"View Card":"Start Match"}),i.jsx("button",{onClick:()=>m(J),className:"px-6 py-3 bg-white border border-slate-200 text-slate-900 text-[10px] font-black uppercase rounded-xl hover:bg-slate-50 transition-all",children:"Scorecard"})]})]},J.id)),ne.length===0&&i.jsxs("div",{className:"py-20 text-center bg-slate-50 rounded-[2rem] border-2 border-dashed border-slate-200 text-slate-400 font-bold uppercase text-xs",children:["No ",y.toLowerCase()," fixtures found"]})]})]}),g==="STANDINGS"&&i.jsxs("div",{className:"space-y-12 animate-in slide-in-from-right-8 pb-10",children:[R.map(({group:J,rows:pe})=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6 px-4",children:[i.jsx("h3",{className:"text-2xl font-black text-slate-900",children:J.name}),i.jsxs("span",{className:"bg-slate-200 text-slate-600 px-2 py-1 rounded text-[10px] font-black uppercase tracking-widest",children:[pe.length," Teams"]})]}),i.jsx(Dg,{rows:pe,onViewTeam:f})]},J.id)),R.length===0&&i.jsxs("div",{className:"p-20 text-center flex flex-col items-center gap-4 opacity-20",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"No groups defined"})]})]}),g==="BRACKET"&&i.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:P,className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-500 shadow-lg transition-all",children:"Auto-Generate Knockouts"})}),i.jsx(t_,{fixtures:D,onViewMatch:m})]}),E&&i.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:()=>T(null),children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[85vh] animate-in zoom-in-95",onClick:J=>J.stopPropagation(),children:[i.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50",children:[i.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Select Teams"}),i.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mt-1",children:["Adding to ",(ie=t.groups.find(J=>J.id===E))==null?void 0:ie.name]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-slate-500 mb-3",children:"Internal Squads"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:e.memberTeams.map(J=>{const pe=M.has(J.id);return i.jsxs("button",{onClick:()=>H(J.id),className:`p-4 rounded-2xl border-2 transition-all flex items-center justify-between group ${pe?"border-indigo-600 bg-indigo-50":"border-slate-100 bg-white hover:border-slate-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg ${pe?"bg-indigo-200":"bg-slate-50"}`,children:""}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:`font-black text-sm ${pe?"text-indigo-900":"text-slate-900"}`,children:J.name}),i.jsxs("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:[J.players.length," Players"]})]})]}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${pe?"bg-indigo-600 border-indigo-600":"border-slate-200 group-hover:border-slate-400"}`,children:pe&&i.jsx("span",{className:"text-white text-[10px] font-black",children:""})})]},J.id)})})]}),B.length>e.memberTeams.length&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-slate-500 mb-3",children:"Affiliated Club Teams"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:B.filter(J=>!e.memberTeams.some(pe=>pe.id===J.id)).map(J=>{const pe=M.has(J.id);return i.jsxs("button",{onClick:()=>H(J.id),className:`p-4 rounded-2xl border-2 transition-all flex items-center justify-between group ${pe?"border-emerald-600 bg-emerald-50":"border-slate-100 bg-white hover:border-slate-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg ${pe?"bg-emerald-200":"bg-slate-50"}`,children:""}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:`font-black text-sm ${pe?"text-emerald-900":"text-slate-900"}`,children:J.name}),i.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Affiliated"})]})]}),i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${pe?"bg-emerald-600 border-emerald-600":"border-slate-200 group-hover:border-slate-400"}`,children:pe&&i.jsx("span",{className:"text-white text-[10px] font-black",children:""})})]},J.id)})})]})]}),i.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>T(null),className:"px-6 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600",children:"Cancel"}),i.jsxs("button",{onClick:z,className:"px-8 py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-indigo-500 transition-all",children:["Update Group (",M.size,")"]})]})]})})]})},n_=({organization:t,onConfirm:e,onCancel:s})=>i.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 shadow-2xl animate-in zoom-in-95",children:[i.jsx("div",{className:"w-20 h-20 bg-red-50 text-red-500 rounded-3xl flex items-center justify-center text-4xl mx-auto mb-6",children:""}),i.jsx("h3",{className:"text-2xl font-black text-slate-900 text-center mb-4",children:"Delete Organization?"}),i.jsxs("p",{className:"text-slate-400 text-sm text-center mb-10 font-medium",children:["This will permanently remove ",i.jsx("span",{className:"text-slate-900 font-black",children:t.name})," and all its associated teams, matches, and data. This action cannot be undone."]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("button",{onClick:e,className:"w-full py-4 bg-red-600 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl",children:"Yes, Delete Everything"}),i.jsx("button",{onClick:s,className:"w-full py-4 text-slate-400 font-black uppercase text-xs tracking-widest hover:bg-slate-50 rounded-2xl",children:"Cancel Action"})]})]})}),i_=({scorers:t})=>i.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[i.jsxs("div",{className:"bg-slate-900 text-white p-10 rounded-[2.5rem] relative overflow-hidden",children:[i.jsxs("div",{className:"relative z-10",children:[i.jsx("h2",{className:"text-3xl font-black mb-2",children:"HR & Talent Acquisition"}),i.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"Find qualified scorers for your league"})]}),i.jsx("div",{className:"absolute top-0 right-0 p-8 text-8xl opacity-10",children:""})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(e=>{var s,a,r;return i.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] border border-slate-200 shadow-xl flex flex-col hover:border-indigo-300 transition-all group",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 bg-slate-900 text-white rounded-2xl flex items-center justify-center font-black text-xl shadow-lg",children:e.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-black text-lg text-slate-900 leading-tight",children:e.name}),i.jsx("p",{className:"text-xs font-bold text-slate-400",children:e.handle})]})]}),i.jsx("div",{className:"bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest",children:"Available"})]}),i.jsxs("div",{className:"flex-1 space-y-4 mb-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[i.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Rate"}),i.jsxs("div",{className:"text-xl font-black text-slate-900",children:["$",((s=e.scorerDetails)==null?void 0:s.hourlyRate)||"Neg","/hr"]})]}),i.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[i.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Exp"}),i.jsxs("div",{className:"text-xl font-black text-slate-900",children:[((a=e.scorerDetails)==null?void 0:a.experienceYears)||0," Yrs"]})]})]}),i.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed italic",children:['"',((r=e.scorerDetails)==null?void 0:r.bio)||"No bio provided.",'"']})]}),i.jsx("button",{className:"w-full py-4 bg-slate-900 text-white rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-600 transition-all shadow-lg",children:"Contact / Hire"})]},e.id)}),t.length===0&&i.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No scorers currently available for hire."})]})]}),a_=({player:t,isOpen:e,onClose:s,myTeams:a,onSign:r})=>{const[c,d]=j.useState(""),[f,m]=j.useState(""),[p,g]=j.useState("PERMANENT"),[v,y]=j.useState(!1),[N,S]=j.useState(null);if(!e)return null;const k=()=>{c&&(y(!0),setTimeout(()=>{y(!1),S("SUCCESS"),setTimeout(()=>{r(t.id,c),s()},1500)},2e3))};return i.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-[300] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 flex flex-col",children:[i.jsxs("div",{className:"bg-slate-900 p-8 text-center relative overflow-hidden",children:[i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-20 h-20 mx-auto bg-white p-1 rounded-full shadow-lg mb-4",children:i.jsx("img",{src:t.photoUrl||`https://ui-avatars.com/api/?name=${t.name}`,className:"w-full h-full rounded-full object-cover"})}),i.jsx("h2",{className:"text-2xl font-black text-white",children:t.name}),i.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mt-1",children:[t.role,"  ",t.teamName||"Free Agent"]})]}),i.jsx("div",{className:"absolute inset-0 bg-indigo-600/20 opacity-50"})]}),i.jsxs("div",{className:"p-8 space-y-6",children:[!v&&!N&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Destination Team"}),i.jsxs("select",{value:c,onChange:E=>d(E.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500 transition-all",children:[i.jsx("option",{value:"",children:"Select a squad..."}),a.map(E=>i.jsx("option",{value:E.id,children:E.name},E.id))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Contract Type"}),i.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[i.jsx("button",{onClick:()=>g("PERMANENT"),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase transition-all ${p==="PERMANENT"?"bg-white shadow-sm text-indigo-600":"text-slate-400"}`,children:"Full"}),i.jsx("button",{onClick:()=>g("LOAN"),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase transition-all ${p==="LOAN"?"bg-white shadow-sm text-indigo-600":"text-slate-400"}`,children:"Loan"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Fee / Salary ($)"}),i.jsx("input",{type:"number",value:f,onChange:E=>m(E.target.value),placeholder:"0.00",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500 transition-all"})]})]}),i.jsx("button",{onClick:k,disabled:!c,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 transition-all disabled:opacity-50 disabled:shadow-none",children:"Submit Offer"})]}),v&&i.jsxs("div",{className:"py-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-6"}),i.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Negotiating Terms..."}),i.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Agent is reviewing your proposal."})]}),N==="SUCCESS"&&i.jsxs("div",{className:"py-12 text-center animate-in zoom-in",children:[i.jsx("div",{className:"w-20 h-20 bg-emerald-500 rounded-full flex items-center justify-center text-4xl text-white mx-auto mb-6 shadow-xl shadow-emerald-200",children:""}),i.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Deal Sealed!"}),i.jsxs("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-widest mt-2",children:[t.name," has joined the squad."]})]})]}),!v&&!N&&i.jsx("div",{className:"bg-slate-50 p-4 text-center border-t border-slate-100",children:i.jsx("button",{onClick:s,className:"text-slate-400 font-bold text-xs uppercase tracking-widest hover:text-slate-600",children:"Cancel Negotiation"})})]})})},l_=({players:t,myTeams:e,onTransfer:s,onBack:a})=>{const[r,c]=j.useState("ALL"),[d,f]=j.useState(""),[m,p]=j.useState(null),g=j.useMemo(()=>t.filter(v=>{var y,N;return((y=v.playerDetails)==null?void 0:y.lookingForClub)||((N=v.playerDetails)==null?void 0:N.isHireable)}).filter(v=>!(r!=="ALL"&&v.role!==r||d&&!v.name.toLowerCase().includes(d.toLowerCase()))).sort((v,y)=>y.stats.runs+y.stats.wickets*20-(v.stats.runs+v.stats.wickets*20)),[t,r,d]);return i.jsxs("div",{className:"animate-in fade-in duration-500 pb-20",children:[i.jsx(a_,{player:m,isOpen:!!m,onClose:()=>p(null),myTeams:e,onSign:s}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 mb-10",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("button",{onClick:a,className:"w-12 h-12 rounded-full bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-50 hover:text-black transition-all shadow-sm",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Transfer Market"}),i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Scout & Sign Talent"})]})]}),i.jsx("div",{className:"flex gap-2 bg-white p-1.5 rounded-2xl border border-slate-200 shadow-sm overflow-x-auto max-w-full",children:["ALL","Batsman","Bowler","All-rounder","Wicket-keeper"].map(v=>i.jsx("button",{onClick:()=>c(v),className:`px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${r===v?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:bg-slate-50"}`,children:v},v))})]}),i.jsx("div",{className:"mb-8",children:i.jsx("input",{value:d,onChange:v=>f(v.target.value),placeholder:"Search players...",className:"w-full bg-white border border-slate-200 rounded-[2rem] px-8 py-5 font-bold outline-none shadow-sm focus:ring-2 focus:ring-indigo-500 transition-all text-sm"})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[g.map(v=>{var y;return i.jsxs("div",{className:"bg-white rounded-[2.5rem] border border-slate-200 shadow-xl hover:shadow-2xl hover:scale-[1.02] transition-all flex flex-col overflow-hidden group",children:[i.jsxs("div",{className:"h-24 bg-slate-900 relative",children:[i.jsx("div",{className:`absolute inset-0 bg-gradient-to-br opacity-80 ${v.role==="Batsman"?"from-indigo-600 to-blue-900":v.role==="Bowler"?"from-emerald-600 to-teal-900":"from-purple-600 to-pink-900"}`}),i.jsx("div",{className:"absolute -bottom-10 left-6",children:i.jsx("div",{className:"w-20 h-20 rounded-2xl bg-white p-1 shadow-lg",children:i.jsx("img",{src:v.photoUrl||`https://ui-avatars.com/api/?name=${v.name}`,className:"w-full h-full rounded-xl object-cover"})})}),i.jsx("div",{className:"absolute top-4 right-4",children:i.jsx("span",{className:"bg-black/30 backdrop-blur-md text-white px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border border-white/10",children:(y=v.playerDetails)!=null&&y.isHireable?"For Hire":"Free Agent"})})]}),i.jsxs("div",{className:"pt-12 px-6 pb-6 flex-1 flex flex-col",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-black text-slate-900 leading-tight",children:v.name}),i.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1",children:v.role})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 my-6",children:[i.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 text-center border border-slate-100",children:[i.jsx("div",{className:"text-xl font-black text-slate-900",children:v.stats.runs}),i.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Runs"})]}),i.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 text-center border border-slate-100",children:[i.jsx("div",{className:"text-xl font-black text-slate-900",children:v.stats.wickets}),i.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Wkts"})]})]}),i.jsx("div",{className:"mt-auto",children:i.jsx("button",{onClick:()=>p(v),className:"w-full py-4 bg-slate-900 text-white rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-600 transition-all shadow-lg",children:"Initiate Offer"})})]})]},v.id)}),g.length===0&&i.jsxs("div",{className:"col-span-full py-20 text-center",children:[i.jsx("div",{className:"text-6xl mb-4 opacity-20",children:""}),i.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"No players found matching your criteria."})]})]})]})},r_=({organization:t,onUpdateOrg:e})=>{var N;const[s,a]=j.useState(!1),[r,c]=j.useState({name:"",logoUrl:"",website:"",isActive:!0,placements:[]}),[d,f]=j.useState(!1),m=S=>{var E;const k=(E=S.target.files)==null?void 0:E[0];if(k){f(!0);const T=new FileReader;T.onload=M=>{var D;const C=new Image;C.onload=()=>{const R=document.createElement("canvas"),B=R.getContext("2d"),G=300;let H=C.width,z=C.height;H>z?H>G&&(z*=G/H,H=G):z>G&&(H*=G/z,z=G),R.width=H,R.height=z,B==null||B.drawImage(C,0,0,H,z);const P=R.toDataURL("image/png");c(ne=>({...ne,logoUrl:P})),f(!1)},C.src=(D=M.target)==null?void 0:D.result},T.readAsDataURL(k)}},p=S=>{c(k=>{const E=k.placements||[];return E.includes(S)?{...k,placements:E.filter(T=>T!==S)}:{...k,placements:[...E,S]}})},g=()=>{if(!r.name||!r.logoUrl)return;const S={id:`sp-${Date.now()}`,name:r.name,logoUrl:r.logoUrl,website:r.website,isActive:r.isActive??!0,placements:r.placements||[]},k=[...t.sponsors||[],S];e(t.id,{sponsors:k}),a(!1),c({name:"",logoUrl:"",website:"",isActive:!0,placements:[]})},v=S=>{const k=(t.sponsors||[]).filter(E=>E.id!==S);e(t.id,{sponsors:k})},y=S=>{const k=(t.sponsors||[]).map(E=>E.id===S?{...E,isActive:!E.isActive}:E);e(t.id,{sponsors:k})};return i.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[i.jsxs("div",{className:"bg-slate-900 text-white p-10 rounded-[2.5rem] relative overflow-hidden",children:[i.jsxs("div",{className:"relative z-10",children:[i.jsx("h2",{className:"text-3xl font-black mb-2",children:"Sponsors Console"}),i.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"Manage Partners & Ad Placements"})]}),i.jsx("div",{className:"absolute top-0 right-0 p-8 text-8xl opacity-10",children:""})]}),s?i.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-xl",children:[i.jsx("h3",{className:"text-xl font-black text-slate-900 mb-6",children:"Add New Sponsor"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"w-24 h-24 rounded-2xl bg-slate-50 border border-slate-200 flex items-center justify-center overflow-hidden shrink-0 relative group",children:[d?i.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}):r.logoUrl?i.jsx("img",{src:r.logoUrl,className:"w-full h-full object-contain p-2"}):i.jsx("span",{className:"text-4xl text-slate-300 font-black",children:"+"}),i.jsx("input",{type:"file",accept:"image/*",onChange:m,className:"absolute inset-0 opacity-0 cursor-pointer"})]}),i.jsxs("div",{className:"flex-1 space-y-4",children:[i.jsx("input",{value:r.name,onChange:S=>c({...r,name:S.target.value}),placeholder:"Sponsor Name",className:"w-full bg-slate-50 border border-slate-200 p-4 rounded-xl font-bold outline-none"}),i.jsx("input",{value:r.website,onChange:S=>c({...r,website:S.target.value}),placeholder:"Website URL (Optional)",className:"w-full bg-slate-50 border border-slate-200 p-4 rounded-xl font-medium text-sm outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-black text-slate-500 uppercase tracking-widest mb-3 block",children:"Ad Placements"}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{id:"MEDIA_TOP",label:"Media Feed (Top)"},{id:"MEDIA_BOTTOM",label:"Media Feed (Bottom)"},{id:"SCOREBOARD_TOP",label:"Scoreboard (Top)"},{id:"SCOREBOARD_BOTTOM",label:"Scoreboard (Bottom)"}].map(S=>{var k;return i.jsx("button",{onClick:()=>p(S.id),className:`p-3 rounded-xl text-[10px] font-black uppercase tracking-widest border transition-all ${(k=r.placements)!=null&&k.includes(S.id)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-400 border-slate-200 hover:border-slate-300"}`,children:S.label},S.id)})})]}),i.jsxs("div",{className:"flex gap-4 pt-4",children:[i.jsx("button",{onClick:()=>a(!1),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs",children:"Cancel"}),i.jsx("button",{onClick:g,disabled:!r.name||!r.logoUrl,className:"flex-1 py-4 bg-slate-900 text-white rounded-xl font-black uppercase text-xs shadow-xl disabled:opacity-50",children:"Save Sponsor"})]})]})]}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("button",{onClick:()=>a(!0),className:"bg-slate-50 border-2 border-dashed border-slate-200 rounded-[2.5rem] flex flex-col items-center justify-center p-8 hover:bg-white hover:border-indigo-400 hover:text-indigo-600 transition-all text-slate-400 gap-4 min-h-[250px]",children:[i.jsx("span",{className:"text-5xl font-thin",children:"+"}),i.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Add Sponsor"})]}),(N=t.sponsors)==null?void 0:N.map(S=>i.jsxs("div",{className:`bg-white p-6 rounded-[2.5rem] border shadow-xl flex flex-col transition-all ${S.isActive?"border-slate-200":"border-slate-100 opacity-60"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("div",{className:"w-16 h-16 bg-white border border-slate-100 rounded-xl p-2 flex items-center justify-center",children:i.jsx("img",{src:S.logoUrl,className:"max-w-full max-h-full"})}),i.jsx("div",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${S.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:S.isActive?"Active":"Paused"})]}),i.jsx("h3",{className:"text-lg font-black text-slate-900 mb-1",children:S.name}),i.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-4",children:[S.placements.length," Placements"]}),i.jsxs("div",{className:"mt-auto flex gap-2 pt-4 border-t border-slate-50",children:[i.jsx("button",{onClick:()=>y(S.id),className:"flex-1 py-2 bg-slate-50 text-slate-600 rounded-lg text-[9px] font-black uppercase hover:bg-slate-100",children:S.isActive?"Pause":"Activate"}),i.jsx("button",{onClick:()=>v(S.id),className:"w-8 h-8 flex items-center justify-center bg-red-50 text-red-400 rounded-lg hover:bg-red-100",children:""})]})]},S.id))]})]})},o_=({isOpen:t,onClose:e,onCreate:s,userRole:a})=>{const[r,c]=j.useState(""),[d,f]=j.useState("CLUB"),[m,p]=j.useState(""),[g,v]=j.useState("");if(!t)return null;const y=()=>{r&&(s({name:r,type:d,groundLocation:m,country:g}),e())},N=a==="Administrator";return i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"bg-slate-900 p-8 text-white",children:[i.jsx("h3",{className:"text-xl font-black mb-1",children:"Establish New Entity"}),i.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Create a Club or Organization"})]}),i.jsxs("div",{className:"p-8 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Entity Name"}),i.jsx("input",{value:r,onChange:S=>c(S.target.value),placeholder:"e.g. Royal Strikers CC",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500",autoFocus:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Type"}),i.jsxs("select",{value:d,onChange:S=>f(S.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500",children:[i.jsx("option",{value:"CLUB",children:"Cricket Club"}),N&&i.jsx("option",{value:"GOVERNING_BODY",children:"Governing Body"})]}),!N&&i.jsx("p",{className:"text-[9px] text-slate-400 px-1",children:"Governing Bodies restricted to Admins."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Country"}),i.jsx("input",{value:g,onChange:S=>v(S.target.value),placeholder:"e.g. Australia",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Home Ground / City"}),i.jsx("input",{value:m,onChange:S=>p(S.target.value),placeholder:"e.g. Melbourne",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500"})]}),i.jsxs("div",{className:"pt-4 flex gap-4",children:[i.jsx("button",{onClick:e,className:"flex-1 py-3 text-slate-400 font-black uppercase text-xs hover:text-slate-600 transition-all",children:"Cancel"}),i.jsxs("button",{onClick:y,disabled:!r,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-indigo-500 disabled:opacity-50 transition-all",children:["Create ",d==="CLUB"?"Club":"Org"]})]})]})]})})},c_=({issue:t,isOpen:e,onClose:s,onResolve:a})=>{const[r,c]=j.useState("");if(!e||!t)return null;const d=f=>{a(t.id,f,r),s(),c("")};return i.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 duration-300 flex flex-col max-h-[90vh]",children:[i.jsx("div",{className:"p-8 pb-4 shrink-0",children:i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest mb-3 ${t.type==="PROTEST"?"bg-red-100 text-red-600":"bg-orange-100 text-orange-600"}`,children:t.type}),i.jsx("h2",{className:"text-3xl font-black text-slate-900 leading-tight",children:t.title}),i.jsxs("p",{className:"text-slate-400 font-bold text-xs uppercase tracking-widest mt-1",children:[new Date(t.timestamp).toLocaleString(),"  ID: ",t.id]})]}),i.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 flex items-center justify-center transition-colors font-bold",children:""})]})}),i.jsxs("div",{className:"px-8 overflow-y-auto custom-scrollbar space-y-8 pb-8",children:[i.jsx("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100",children:i.jsx("p",{className:"font-bold text-slate-700 leading-relaxed whitespace-pre-wrap",children:t.description})}),t.evidenceUrls&&t.evidenceUrls.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3",children:"Evidence Attached"}),i.jsx("div",{className:"grid gap-4",children:t.evidenceUrls.map((f,m)=>i.jsxs("div",{className:"rounded-2xl overflow-hidden border border-slate-200 bg-slate-100",children:[f.toLowerCase().endsWith(".pdf")||f.includes("application/pdf")?i.jsx("iframe",{src:f,className:"w-full h-64 bg-white",title:"Evidence PDF"}):i.jsx("img",{src:f,className:"w-full h-auto object-contain max-h-96",alt:"Evidence"}),i.jsx("div",{className:"px-4 py-2 bg-white flex justify-end",children:i.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest hover:text-indigo-700",children:"Open Original "})})]},m))})]}),t.status!=="RESOLVED"&&t.status!=="DISMISSED"?i.jsxs("div",{className:"pt-6 border-t-2 border-slate-100",children:[i.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4",children:"Official Resolution"}),i.jsx("textarea",{value:r,onChange:f=>c(f.target.value),placeholder:"Enter your official response or reasoning here...",className:"w-full bg-slate-50 border-2 border-slate-200 focus:border-indigo-500 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:ring-4 focus:ring-indigo-50 h-32 resize-none mb-6 active:scale-[0.99] transition-transform"}),t.type==="PROTEST"?i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("button",{onClick:()=>d("DISMISSED"),disabled:!r.trim(),className:"py-4 bg-red-100 text-red-600 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-red-200 transition-colors disabled:opacity-50 disabled:grayscale",children:" Dismiss Protest (Lost)"}),i.jsx("button",{onClick:()=>d("UPHELD"),disabled:!r.trim(),className:"py-4 bg-emerald-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-emerald-400 transition-colors disabled:opacity-50 disabled:grayscale",children:" Uphold Protest (Won)"})]}):i.jsx("button",{onClick:()=>d("ACKNOWLEDGED"),disabled:!r.trim(),className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-indigo-500 transition-colors disabled:opacity-50 disabled:grayscale",children:" Mark as Resolved"})]}):i.jsx("div",{className:"pt-6 border-t-2 border-slate-100",children:i.jsxs("div",{className:`p-6 rounded-2xl border ${t.resolution==="UPHELD"?"bg-emerald-50 border-emerald-100":t.resolution==="DISMISSED"?"bg-red-50 border-red-100":"bg-slate-50 border-slate-200"}`,children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("span",{className:`text-xs font-black uppercase tracking-widest ${t.resolution==="UPHELD"?"text-emerald-600":t.resolution==="DISMISSED"?"text-red-600":"text-slate-500"}`,children:["Resolution: ",t.resolution]}),t.resolvedAt&&i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:new Date(t.resolvedAt).toLocaleString()})]}),i.jsx("p",{className:"font-bold text-slate-700",children:t.adminResponse})]})})]})]})})},d_=({organizations:t,standaloneMatches:e,userRole:s,onStartMatch:a,onViewMatch:r,onRequestSetup:c,onUpdateOrgs:d,onCreateOrg:f,onAddTeam:m,onRemoveTeam:p,onBulkAddPlayers:g,onAddGroup:v,onUpdateGroupTeams:y,onAddTournament:N,mediaPosts:S,onAddMediaPost:k,onViewTeam:E,onOpenMediaStudio:T,following:M,onToggleFollow:C,mockGlobalUsers:D,onAddMemberToOrg:R,onProcessApplication:B,hireableScorers:G=[],currentUserId:H,onApplyForOrg:z,onUpgradeProfile:P,onTransferPlayer:ne,currentUserProfile:le,showCaptainHub:ie,onOpenCaptainHub:J,onRequestMatchReports:pe,onUpdateProfile:U,issues:O=[],onUpdateIssues:V})=>{const[he,W]=j.useState("GLOBAL"),[A,$]=j.useState(null),[re,ve]=j.useState(null),[Ne,ge]=j.useState({createOrg:!1,deleteOrg:!1,addTeam:!1,addTournament:!1}),[Se,Ee]=j.useState(null),[Q,ye]=j.useState(null),[je,Be]=j.useState(!1),[et,ct]=j.useState({name:"",location:""}),[pt,wt]=j.useState({name:"",format:"T20"}),Fe=j.useMemo(()=>t.find(Y=>Y.id===A),[t,A]),dt=j.useMemo(()=>Fe==null?void 0:Fe.tournaments.find(Y=>Y.id===re),[Fe,re]);j.useMemo(()=>t.flatMap(Y=>Y.memberTeams),[t]);const Tt=j.useMemo(()=>t.flatMap(Y=>Y.memberTeams.flatMap(te=>te.players.map(xe=>({...xe,teamName:te.name,teamId:te.id,orgId:Y.id,orgName:Y.name})))),[t]),Nt=j.useMemo(()=>[...t.flatMap(Y=>Y.fixtures),...e].sort((Y,te)=>{const xe={Live:0,Scheduled:1,Completed:2},Re=(xe[Y.status]||1)-(xe[te.status]||1);return Re!==0?Re:Y.status==="Completed"?new Date(te.date).getTime()-new Date(Y.date).getTime():new Date(Y.date).getTime()-new Date(te.date).getTime()}),[t,e]),Et=j.useMemo(()=>[...Tt].sort((Y,te)=>te.stats.runs-Y.stats.runs).slice(0,5),[Tt]),de=j.useMemo(()=>[...Tt].sort((Y,te)=>te.stats.wickets-Y.stats.wickets).slice(0,5),[Tt]),ce=j.useMemo(()=>Fe?Fe.memberTeams.flatMap(Y=>Y.players.map(te=>({...te,teamName:Y.name,teamId:Y.id,orgId:Fe.id,orgName:Fe.name}))):[],[Fe]),be=j.useMemo(()=>t.filter(Y=>Y.members.some(te=>te.userId===H&&te.role==="Administrator")).flatMap(Y=>Y.memberTeams),[t,H]),Ae=()=>{Se&&(d(t.filter(Y=>Y.id!==Se.id)),ge({...Ne,deleteOrg:!1}),Ee(null),A===Se.id&&$(null))},Qe=()=>{ge({...Ne,createOrg:!0})},gt=()=>{A&&et.name&&(m(A,{...et,players:[]}),ge({...Ne,addTeam:!1}),ct({name:"",location:""}))},At=()=>{A&&(N(A,{id:`trn-${Date.now()}`,name:pt.name,format:pt.format,overs:20,groups:[],pointsConfig:{win:2,loss:0,tie:1,noResult:1},status:"Upcoming"}),ge({...Ne,addTournament:!1}),wt({name:"",format:"T20"}))},Ue=(Y,te)=>{if(!Fe)return;const xe={id:`grp-${Date.now()}`,name:te,teams:[]};d(t.map(Re=>Re.id===Fe.id?{...Re,tournaments:Re.tournaments.map(Ge=>Ge.id===Y?{...Ge,groups:[...Ge.groups,xe]}:Ge)}:Re))},at=(Y,te,xe)=>{Fe&&d(t.map(Re=>Re.id===Fe.id?{...Re,tournaments:Re.tournaments.map(Ge=>Ge.id===Y?{...Ge,groups:Ge.groups.map(Me=>Me.id===te?{...Me,teams:Re.memberTeams.filter(Ze=>xe.includes(Ze.id))}:Me)}:Ge)}:Re))},Zt=()=>{if(!Fe||!dt)return;const Y=dt.groups.flatMap(te=>HS(te.teams,dt.id,te.id));d(t.map(te=>te.id===Fe.id?{...te,fixtures:[...te.fixtures,...Y]}:te))},us=(Y,te)=>{d(t.map(xe=>xe.id===Y?{...xe,...te}:xe))},ws=(Y,te,xe,Re)=>{const Ge=t.find(fe=>fe.id===Y),Me=Ge==null?void 0:Ge.applications.find(fe=>fe.id===te);if(!Ge||!Me)return;const Ze=Me.type==="ORG_AFFILIATE",We=Me.applicantId,Os=t.map(fe=>{if(fe.id===Y){const Ve=fe.applications.map(es=>es.id===te?{...es,status:xe}:es);let lt=fe.childOrgIds||[];xe==="APPROVED"&&Ze&&!lt.includes(We)&&(lt=[...lt,We]);let It=fe.members,Yn=fe.memberTeams;if(xe==="APPROVED"&&!Ze&&Re&&(fe.members.some(es=>es.userId===Me.applicantId)||(It=[...fe.members,{userId:Me.applicantId,name:Me.applicantName,handle:Me.applicantHandle||"",role:Re,addedAt:Date.now()}]),Re==="Player"&&fe.memberTeams.length>0)){const es=fe.memberTeams[0],Ul={id:Me.applicantId,name:Me.applicantName,role:"All-rounder",photoUrl:Me.applicantImage,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}};Yn=fe.memberTeams.map(wn=>wn.id===es.id?{...wn,players:[...wn.players,Ul]}:wn)}return{...fe,applications:Ve,childOrgIds:lt,members:It,memberTeams:Yn}}if(fe.id===We&&xe==="APPROVED"&&Ze){const Ve=fe.parentOrgIds||[];if(!Ve.includes(Y))return{...fe,parentOrgIds:[...Ve,Y]}}return fe});B?B(Y,te,xe,Re):d(Os)},Rt=(Y,te,xe)=>{const Re=te==="DISMISSED"?"DISMISSED":"RESOLVED",Ge=O.map(Me=>Me.id===Y?{...Me,status:Re,resolution:te,adminResponse:xe,resolvedAt:Date.now()}:Me);V&&V(Ge),Be(!1)},ee=t.find(Y=>Y.id==="org-central-zone"),me=ee==null?void 0:ee.members.find(Y=>Y.userId===H),we=Y=>{var te;return s==="Administrator"||!!((te=me==null?void 0:me.permissions)!=null&&te[Y])};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 md:p-12 min-h-screen",children:[i.jsx(o_,{isOpen:Ne.createOrg,onClose:()=>ge({...Ne,createOrg:!1}),onCreate:f,userRole:s}),i.jsx(c_,{issue:Q,isOpen:je,onClose:()=>Be(!1),onResolve:Rt}),he==="GLOBAL"&&(s==="Administrator"||we("view_protests"))&&i.jsxs("div",{className:"flex gap-4 mb-8",children:[i.jsx("button",{onClick:()=>W("GLOBAL"),className:"text-2xl font-black text-slate-900 border-b-4 border-slate-900 pb-1",children:"Dashboard"}),s==="Administrator"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>W("HR"),className:"text-2xl font-black text-slate-300 hover:text-slate-500 border-b-4 border-transparent hover:border-slate-200 pb-1 transition-all",children:"HR & Talent"}),i.jsx("button",{onClick:()=>W("MARKET"),className:"text-2xl font-black text-slate-300 hover:text-slate-500 border-b-4 border-transparent hover:border-slate-200 pb-1 transition-all",children:"Transfer Market"}),i.jsx("button",{onClick:()=>W("SPONSORS"),className:"text-2xl font-black text-slate-300 hover:text-slate-500 border-b-4 border-transparent hover:border-slate-200 pb-1 transition-all",children:"Sponsors"})]}),we("view_protests")&&i.jsxs("button",{onClick:()=>W("ISSUES"),className:"text-2xl font-black text-slate-300 hover:text-slate-500 border-b-4 border-transparent hover:border-slate-200 pb-1 transition-all relative",children:["Issues",i.jsx("span",{className:"absolute -top-1 -right-2 w-3 h-3 bg-indigo-500 rounded-full border-2 border-white"})]}),s==="Administrator"&&i.jsxs("button",{onClick:()=>W("REPORTS"),className:"text-2xl font-black text-slate-300 hover:text-slate-500 border-b-4 border-transparent hover:border-slate-200 pb-1 relative transition-all",children:["Reports",Nt.some(Y=>{var te;return((te=Y.reportSubmission)==null?void 0:te.status)==="PENDING"})&&i.jsx("span",{className:"absolute -top-1 -right-2 w-3 h-3 bg-red-500 rounded-full border-2 border-white animate-pulse"})]})]}),he==="HR"&&i.jsxs("div",{children:[i.jsx("button",{onClick:()=>W("GLOBAL"),className:"mb-6 text-slate-400 font-bold uppercase text-xs tracking-widest hover:text-slate-900",children:" Back to Dashboard"}),i.jsx(i_,{scorers:G})]}),he==="MARKET"&&i.jsxs("div",{children:[i.jsx("button",{onClick:()=>W("GLOBAL"),className:"mb-6 text-slate-400 font-bold uppercase text-xs tracking-widest hover:text-slate-900",children:" Back to Dashboard"}),i.jsx(l_,{players:Tt,myTeams:be,onTransfer:(Y,te)=>ne&&ne(Y,te),onBack:()=>W("GLOBAL")})]}),he==="SPONSORS"&&i.jsxs("div",{children:[i.jsx("button",{onClick:()=>W("GLOBAL"),className:"mb-6 text-slate-400 font-bold uppercase text-xs tracking-widest hover:text-slate-900",children:" Back to Dashboard"}),i.jsx(r_,{organization:t.find(Y=>Y.id==="org-central-zone")||t[0],onUpdateOrg:us})]}),he==="ISSUES"&&i.jsxs("div",{className:"animate-in fade-in duration-500",children:[i.jsx("button",{onClick:()=>W("GLOBAL"),className:"mb-6 text-slate-400 font-bold uppercase text-xs tracking-widest hover:text-slate-900",children:" Back to Dashboard"}),i.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[i.jsx("h3",{className:"text-3xl font-black text-slate-900 mb-8 italic",children:"Protests & Issues"}),i.jsx("div",{className:"space-y-4",children:O.length===0?i.jsx("div",{className:"p-10 text-center bg-slate-50 rounded-[2rem] border border-slate-100",children:i.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"No Active Issues or Protests"})}):O.filter(Y=>(ee==null?void 0:ee.memberTeams.some(te=>te.id===Y.teamId))||!0).map(Y=>{var te;return i.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-[2rem] border border-slate-100 hover:border-indigo-200 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-xl font-black ${Y.type==="PROTEST"?"bg-red-100 text-red-500":"bg-orange-100 text-orange-500"}`,children:Y.type==="PROTEST"?"!":""}),i.jsxs("div",{children:[i.jsx("p",{className:"font-black text-slate-900 text-lg",children:Y.title}),i.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[((te=t.flatMap(xe=>xe.memberTeams).find(xe=>xe.id===Y.teamId))==null?void 0:te.name)||"Unknown Team","  ",new Date(Y.timestamp).toLocaleString()]})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${Y.status==="OPEN"?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:Y.status}),i.jsx("button",{onClick:()=>{ye(Y),Be(!0)},className:"px-6 py-2 bg-white text-slate-900 border border-slate-200 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-sm hover:shadow-md transition-all",children:"View Details"})]})]},Y.id)})})]})]}),he==="REPORTS"&&i.jsxs("div",{className:"animate-in fade-in duration-500",children:[i.jsx("button",{onClick:()=>W("GLOBAL"),className:"mb-6 text-slate-400 font-bold uppercase text-xs tracking-widest hover:text-slate-900",children:" Back to Dashboard"}),i.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[i.jsx("h3",{className:"text-3xl font-black text-slate-900 mb-8 italic",children:"Match Report Submissions"}),i.jsxs("div",{className:"space-y-4",children:[Nt.filter(Y=>Y.reportSubmission).length===0&&i.jsx("p",{className:"text-slate-400 text-center py-20 font-black uppercase text-xs tracking-widest",children:"No match reports submitted yet"}),Nt.filter(Y=>Y.reportSubmission).map(Y=>{var te,xe,Re,Ge,Me,Ze;return i.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-[2rem] border border-slate-100 hover:border-indigo-200 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-2xl flex items-center justify-center text-indigo-500 text-xl font-black",children:((te=Y.reportSubmission)==null?void 0:te.status)==="PENDING"?"?":((xe=Y.reportSubmission)==null?void 0:xe.status)==="VERIFIED"?"":""}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-black text-slate-900 text-lg",children:[Y.teamAName," vs ",Y.teamBName]}),i.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:["Submitted on ",new Date(Y.reportSubmission.timestamp).toLocaleDateString()]})]})]}),i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("span",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${((Re=Y.reportSubmission)==null?void 0:Re.status)==="VERIFIED"?"bg-emerald-100 text-emerald-600":((Ge=Y.reportSubmission)==null?void 0:Ge.status)==="REJECTED"?"bg-red-100 text-red-600":"bg-indigo-100 text-indigo-600"}`,children:(Me=Y.reportSubmission)==null?void 0:Me.status}),i.jsx("button",{onClick:()=>r(Y),className:"px-6 py-2 bg-white text-slate-900 border border-slate-200 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-sm hover:shadow-md transition-all",children:((Ze=Y.reportSubmission)==null?void 0:Ze.status)==="PENDING"?"Review & Verify":"View Details"})]})]},Y.id)})]})]})]}),he==="GLOBAL"&&i.jsx(WS,{organizations:t,onSelectOrg:Y=>{$(Y),W("ORG_LEVEL")},onRequestDeleteOrg:Y=>{Ee(Y),ge({...Ne,deleteOrg:!0})},onRequestCreateOrg:Qe,onRequestQuickMatch:c,onOpenMediaStudio:T,fixtures:Nt,topBatsmen:Et,topBowlers:de,onStartMatch:a,onViewMatch:r,onViewTeam:E,currentUserId:H,onApplyForOrg:z,onUpgradeProfile:P,following:M,onToggleFollow:C,onRequestCaptainHub:J,onRequestMatchReports:pe,showCaptainHub:ie,profile:le,onUpdateProfile:U}),he==="ORG_LEVEL"&&Fe&&i.jsx(Mg,{organization:Fe,userRole:s,onBack:()=>W("GLOBAL"),onViewTournament:Y=>{ve(Y),W("TOURNAMENT_LEVEL")},onViewPlayer:()=>{},onRequestAddTeam:()=>ge({...Ne,addTeam:!0}),onRequestAddTournament:()=>ge({...Ne,addTournament:!0}),players:ce,onViewTeam:E,isFollowed:M.orgs.includes(Fe.id),onToggleFollow:()=>C("ORG",Fe.id),globalUsers:D||[],onAddMember:Y=>R&&R(Fe.id,Y),onUpdateOrg:us,onProcessApplication:ws,allOrganizations:t,currentUserProfile:le}),he==="TOURNAMENT_LEVEL"&&dt&&Fe&&i.jsx(s_,{tournament:dt,organization:Fe,onBack:()=>W("ORG_LEVEL"),onStartMatch:a,onGenerateFixtures:Zt,onAddGroup:Ue,onUpdateGroupTeams:at,onViewTeam:E,onViewMatch:r,allOrganizations:t}),Ne.deleteOrg&&Se&&i.jsx(n_,{organization:Se,onConfirm:Ae,onCancel:()=>ge({...Ne,deleteOrg:!1})}),Ne.addTeam&&i.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 shadow-2xl",children:[i.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-8",children:"New Squad"}),i.jsx("input",{value:et.name,onChange:Y=>ct({...et,name:Y.target.value}),placeholder:"Squad Name",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none mb-4"}),i.jsx("input",{value:et.location,onChange:Y=>ct({...et,location:Y.target.value}),placeholder:"Home Ground",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none mb-8"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>ge({...Ne,addTeam:!1}),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs",children:"Cancel"}),i.jsx("button",{onClick:gt,className:"flex-1 py-4 bg-indigo-600 text-white font-black uppercase text-xs rounded-xl shadow-xl",children:"Confirm"})]})]})}),Ne.addTournament&&i.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 shadow-2xl",children:[i.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-8",children:"New League"}),i.jsx("input",{value:pt.name,onChange:Y=>wt({...pt,name:Y.target.value}),placeholder:"Season Name",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none mb-4"}),i.jsxs("select",{value:pt.format,onChange:Y=>wt({...pt,format:Y.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none mb-8",children:[i.jsx("option",{value:"T20",children:"Twenty20"}),i.jsx("option",{value:"T10",children:"T10 Series"}),i.jsx("option",{value:"50-over",children:"One Day Series"}),i.jsx("option",{value:"Test",children:"Multi-day Series"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>ge({...Ne,addTournament:!1}),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs",children:"Cancel"}),i.jsx("button",{onClick:At,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs rounded-xl shadow-xl",children:"Deploy"})]})]})})]})},u_=({teams:t,existingFixture:e,onMatchReady:s,onCancel:a,onTeamUpdate:r,onCreateTeam:c,availableOfficials:d=[]})=>{var ie,J,pe,U;const[f,m]=j.useState("team_select"),[p,g]=j.useState("HOME"),[v,y]=j.useState({teamAId:"",teamBId:"",venue:"Main Oval",format:"T20",overs:20,followOnMargin:200,matchDays:5,teamASquad:[],teamBSquad:[],tossWinnerId:"",tossDecision:"Bat",strikerId:"",nonStrikerId:"",bowlerId:"",allowFlexibleSquad:!1,isOfficial:!0,umpires:[]});j.useEffect(()=>{if(e){const O=t.find(A=>A.id===e.teamAId),V=t.find(A=>A.id===e.teamBId),W=e.format==="Test"?Math.ceil((e.customOvers||450)/90):5;y({teamAId:e.teamAId,teamBId:e.teamBId,venue:e.venue,format:e.format||"T20",overs:e.customOvers||20,followOnMargin:e.followOnMargin||200,matchDays:W,teamASquad:e.teamASquadIds||(O?O.players.slice(0,11).map(A=>A.id):[]),teamBSquad:e.teamBSquadIds||(V?V.players.slice(0,11).map(A=>A.id):[]),tossWinnerId:e.tossWinnerId||"",tossDecision:e.tossDecision||"Bat",strikerId:"",nonStrikerId:"",bowlerId:"",allowFlexibleSquad:e.allowFlexibleSquad||!1,isOfficial:e.isOfficial!==!1,umpires:e.umpires||[]}),m("squads")}},[e,t]);const N=t.find(O=>O.id===v.teamAId),S=t.find(O=>O.id===v.teamBId),[k,E]=j.useState(!1),[T,M]=j.useState(""),[C,D]=j.useState(""),R=O=>{if(p==="HOME")y(V=>({...V,teamAId:O})),g("AWAY");else{if(O===v.teamAId)return;const V=t.find(W=>W.id===v.teamAId),he=t.find(W=>W.id===O);y(W=>({...W,teamBId:O,teamASquad:V?V.players.slice(0,11).map(A=>A.id):[],teamBSquad:he?he.players.slice(0,11).map(A=>A.id):[],tossWinnerId:"",strikerId:"",nonStrikerId:"",bowlerId:""})),m("squads")}},B=(O,V)=>{const he=O==="A"?"teamASquad":"teamBSquad";y(W=>{const A=W[he];return{...W,[he]:A.includes(V)?A.filter($=>$!==V):[...A,V]}})},G=O=>{y(V=>({...V,...O,strikerId:"",nonStrikerId:"",bowlerId:""}))},H=()=>{if(!v.tossWinnerId)return null;const O=v.tossWinnerId===v.teamAId?N:S,V=v.tossWinnerId===v.teamAId?S:N;return v.tossDecision==="Bat"?O:V},z=()=>{if(!v.tossWinnerId)return null;const O=v.tossWinnerId===v.teamAId?N:S,V=v.tossWinnerId===v.teamAId?S:N;return v.tossDecision==="Bat"?V:O},P=O=>{y(V=>{const he=V.umpires.includes(O);return{...V,umpires:he?V.umpires.filter(W=>W!==O):[...V.umpires,O]}})},ne=()=>{if(!N||!S)return;const O={id:e?e.id:`match-${Date.now()}`,teamAId:N.id,teamBId:S.id,teamAName:N.name,teamBName:S.name,date:e?e.date:new Date().toISOString().split("T")[0],venue:v.venue,status:"Live",format:v.format,customOvers:v.overs,followOnMargin:v.followOnMargin,teamASquadIds:v.teamASquad,teamBSquadIds:v.teamBSquad,tossWinnerId:v.tossWinnerId,tossDecision:v.tossDecision,allowFlexibleSquad:v.allowFlexibleSquad,isOfficial:v.isOfficial,isArchived:!1,umpires:v.umpires,initialPlayers:{strikerId:v.strikerId,nonStrikerId:v.nonStrikerId,bowlerId:v.bowlerId}};s(O)},le=()=>{if(!T.trim()||!c)return;const O=C.split(`
`).filter(V=>V.trim()!=="");c(T,O),M(""),D(""),E(!1)};return i.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden bg-slate-50 w-full",children:[k&&i.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-[2rem] p-8 w-full max-w-sm shadow-2xl animate-in zoom-in-95 flex flex-col max-h-[80vh]",children:[i.jsx("h3",{className:"text-xl font-black text-slate-900 mb-4 shrink-0",children:"Add New Team"}),i.jsx("input",{value:T,onChange:O=>M(O.target.value),placeholder:"Team Name",autoFocus:!0,className:"w-full bg-slate-50 border border-slate-200 p-4 rounded-xl font-bold text-slate-800 outline-none focus:ring-2 focus:ring-indigo-500 mb-4 shrink-0"}),i.jsxs("div",{className:"flex-1 min-h-0 flex flex-col mb-6",children:[i.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 px-1",children:"Quick Add Players (Optional)"}),i.jsx("textarea",{value:C,onChange:O=>D(O.target.value),placeholder:"Enter player names (one per line)...",className:"w-full bg-slate-50 border border-slate-200 p-4 rounded-xl font-medium text-sm text-slate-800 outline-none focus:ring-2 focus:ring-indigo-500 resize-none flex-1"})]}),i.jsxs("div",{className:"flex gap-3 shrink-0",children:[i.jsx("button",{onClick:()=>E(!1),className:"flex-1 py-3 text-slate-400 font-black uppercase text-xs hover:bg-slate-50 rounded-xl transition-all",children:"Cancel"}),i.jsx("button",{onClick:le,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs rounded-xl shadow-lg hover:bg-indigo-500 transition-all",children:"Create"})]})]})}),i.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-200 bg-white z-10 shrink-0 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4 max-w-6xl mx-auto w-full",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:e?"Claim & Configure Match":"Match Setup"}),i.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest mt-0.5",children:[f==="team_select"&&"Match Configuration & Teams",f==="squads"&&"Confirm Playing 11",f==="toss"&&"The Toss",f==="officials"&&"Match Officials",f==="openers"&&"Openers"]})]}),i.jsx("button",{onClick:a,className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 hover:bg-slate-200",children:""})]}),i.jsx("div",{className:"h-1 w-full max-w-6xl mx-auto bg-slate-100 rounded-full overflow-hidden flex",children:i.jsx("div",{className:`h-full bg-indigo-600 transition-all duration-500 ${f==="team_select"?"w-[10%]":f==="squads"?"w-[30%]":f==="toss"?"w-[50%]":f==="officials"?"w-[75%]":"w-full"}`})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto scroll-container custom-scrollbar p-4 md:p-6 pb-32",children:i.jsxs("div",{className:"max-w-6xl mx-auto min-h-0",children:[f==="team_select"&&i.jsxs("div",{className:"animate-in fade-in duration-300",children:[i.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] border border-slate-200 shadow-sm mb-8",children:[i.jsxs("h3",{className:"font-black text-sm text-slate-900 mb-6 uppercase tracking-widest flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),"Match Settings"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block",children:["Format ",e&&"(Locked)"]}),i.jsxs("select",{value:v.format,disabled:!!e,onChange:O=>{const V=O.target.value;let he=20,W=1,A=0;V==="T10"&&(he=10),V==="50-over"&&(he=50),V==="Test"&&(he=450,W=5,A=200),y($=>({...$,format:V,overs:he,matchDays:W,followOnMargin:A}))},className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-900 outline-none focus:border-indigo-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx("option",{value:"T20",children:"Twenty20 (T20)"}),i.jsx("option",{value:"T10",children:"Ten10 (T10)"}),i.jsx("option",{value:"50-over",children:"One Day (50)"}),i.jsx("option",{value:"Test",children:"Test Match"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block",children:v.format==="Test"?"Match Duration":"Overs per Innings"}),v.format==="Test"?i.jsxs("div",{className:"w-full bg-slate-100 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-500 cursor-not-allowed flex items-center justify-between",children:[i.jsxs("span",{children:[v.matchDays," Days"]}),i.jsxs("span",{className:"text-[10px] bg-slate-200 px-2 py-1 rounded uppercase tracking-wider",children:["~",v.overs," Ov"]})]}):i.jsx("input",{type:"number",value:v.overs,disabled:!!e,onChange:O=>y(V=>({...V,overs:parseInt(O.target.value)||0})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-900 outline-none focus:border-indigo-500 transition-colors disabled:opacity-50"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block",children:"Match Type"}),i.jsxs("div",{onClick:()=>y(O=>({...O,isOfficial:!O.isOfficial})),className:`flex items-center justify-between bg-slate-50 border border-slate-200 rounded-xl px-4 py-2 cursor-pointer transition-colors ${v.isOfficial?"bg-indigo-50 border-indigo-200":"bg-amber-50 border-amber-200"}`,children:[i.jsxs("div",{children:[i.jsx("div",{className:`font-bold text-xs ${v.isOfficial?"text-indigo-900":"text-amber-900"}`,children:v.isOfficial?"Official Match":"Unofficial / Friendly"}),i.jsx("div",{className:"text-[8px] font-bold text-slate-400 uppercase tracking-widest",children:v.isOfficial?"Counts to Stats":"Practice Only"})]}),i.jsx("div",{className:`w-10 h-6 rounded-full transition-all relative ${v.isOfficial?"bg-indigo-600":"bg-amber-500"}`,children:i.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all shadow-sm ${v.isOfficial?"left-5":"left-1"}`})})]})]})]}),v.format==="Test"&&i.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-100 grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-top-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-widest block",children:"Scheduled Days"}),i.jsxs("select",{value:v.matchDays,disabled:!!e,onChange:O=>{const V=parseInt(O.target.value);let he=200;V>=5?he=200:V>=3?he=150:V===2?he=100:he=75,y(W=>({...W,matchDays:V,followOnMargin:he,overs:V*90}))},className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-900 outline-none focus:border-indigo-500 transition-colors disabled:opacity-50",children:[i.jsx("option",{value:5,children:"5 Days (Standard)"}),i.jsx("option",{value:4,children:"4 Days"}),i.jsx("option",{value:3,children:"3 Days"}),i.jsx("option",{value:2,children:"2 Days"}),i.jsx("option",{value:1,children:"1 Day"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-widest block",children:"Follow-On Margin"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",value:v.followOnMargin,disabled:!!e,onChange:O=>y(V=>({...V,followOnMargin:parseInt(O.target.value)||0})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-900 outline-none focus:border-indigo-500 transition-colors disabled:opacity-50"}),i.jsx("span",{className:"absolute right-4 top-3.5 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Runs"})]}),i.jsx("p",{className:"text-[9px] text-slate-400 italic",children:"Adjustable based on league rules"})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-4 px-2",children:[i.jsxs("h3",{className:"font-black text-sm text-slate-900 uppercase tracking-widest",children:["Select ",p," Team"]}),i.jsx("span",{className:"h-px bg-slate-200 flex-1"})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[i.jsxs("button",{onClick:()=>{E(!0),D("")},className:"aspect-square rounded-2xl border-2 border-dashed border-slate-200 flex flex-col items-center justify-center text-slate-400 hover:border-indigo-400 hover:text-indigo-600 hover:bg-white transition-all group",children:[i.jsx("span",{className:"text-3xl mb-1 group-hover:scale-110 transition-transform",children:"+"}),i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Add Team"})]}),t.map(O=>{const V=v.teamAId===O.id,he=v.teamBId===O.id,W=p==="HOME"&&he||p==="AWAY"&&V;return i.jsxs("button",{disabled:W,onClick:()=>R(O.id),className:`aspect-square rounded-2xl p-4 flex flex-col items-center justify-center border transition-all relative overflow-hidden group ${V?"bg-indigo-600 border-indigo-600 text-white":he?"bg-purple-600 border-purple-600 text-white":"bg-white border-slate-200 hover:border-indigo-300 hover:shadow-lg"} ${W?"opacity-30 grayscale cursor-not-allowed":""}`,children:[i.jsx("img",{src:O.logoUrl||`https://ui-avatars.com/api/?name=${O.name}`,alt:O.name,className:"w-12 h-12 rounded-full mb-3 object-cover shadow-sm bg-white"}),i.jsx("h3",{className:`font-black text-center text-xs leading-tight ${V||he?"text-white":"text-slate-900"}`,children:O.name}),i.jsxs("div",{className:`text-[8px] font-bold mt-1 ${V||he?"text-white/70":"text-slate-400"}`,children:[O.players.length," Players"]}),(V||he)&&i.jsx("div",{className:"absolute top-2 right-2 bg-white text-black text-[8px] font-black px-1.5 py-0.5 rounded uppercase tracking-widest",children:V?"Home":"Away"})]},O.id)})]}),v.teamAId&&p==="AWAY"&&i.jsxs("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-5 py-2 rounded-full shadow-2xl flex items-center gap-3 z-50 animate-in slide-in-from-bottom-10",children:[i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Home:"}),i.jsx("span",{className:"text-xs font-black",children:(ie=t.find(O=>O.id===v.teamAId))==null?void 0:ie.name}),i.jsx("button",{onClick:()=>{y(O=>({...O,teamAId:""})),g("HOME")},className:"ml-2 w-5 h-5 rounded-full bg-slate-800 flex items-center justify-center text-[10px]",children:""})]})]}),f==="squads"&&N&&S&&i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 pb-24 animate-in slide-in-from-right-8 duration-300 min-h-0",children:[N,S].map((O,V)=>{const he=V===0?"A":"B",W=he==="A"?v.teamASquad:v.teamBSquad;return i.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 flex flex-col min-h-0 shadow-sm overflow-hidden",children:[i.jsxs("div",{className:"px-5 py-4 border-b border-slate-100 flex items-center gap-3 bg-slate-50/50",children:[i.jsx("img",{src:O.logoUrl,className:"w-8 h-8 rounded-full bg-white border border-slate-100"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-black text-sm text-slate-900",children:O.name}),i.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:[W.length," Selected ",v.allowFlexibleSquad?"(Flexible)":"/ 11"]})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 max-h-[60vh]",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[O.players.map(A=>{const $=W.includes(A.id);return i.jsxs("div",{onClick:()=>B(he,A.id),className:`flex items-center gap-3 p-2 rounded-xl cursor-pointer transition-all border ${$?"bg-indigo-50 border-indigo-200":"bg-white border-transparent hover:bg-slate-50"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 border ${$?"border-indigo-300 bg-white":"border-slate-200 bg-slate-100"}`,children:i.jsx("img",{src:A.photoUrl||`https://ui-avatars.com/api/?name=${A.name}&background=random`,className:"w-full h-full rounded-full object-cover opacity-90"})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("div",{className:`text-xs font-bold truncate ${$?"text-indigo-900":"text-slate-700"}`,children:A.name}),i.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase",children:A.role})]}),i.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${$?"bg-indigo-600 border-indigo-600":"border-slate-300"}`,children:$&&i.jsx("span",{className:"text-white text-[8px] font-black",children:""})})]},A.id)}),O.players.length===0&&i.jsx("div",{className:"col-span-full p-4 text-center text-slate-400 text-xs font-bold uppercase",children:"No players in this team."})]})})]},O.id)})}),f==="toss"&&N&&S&&i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] pb-24 animate-in zoom-in-95 duration-500",children:[i.jsxs("div",{className:"flex items-center justify-center gap-8 md:gap-20 mb-12",children:[i.jsxs("div",{className:`text-center transition-all ${v.tossWinnerId===N.id?"scale-110 opacity-100":v.tossWinnerId?"opacity-40 scale-90":"opacity-100"}`,children:[i.jsx("img",{src:N.logoUrl,className:"w-20 h-20 md:w-28 md:h-28 rounded-full bg-white shadow-xl mb-4 object-cover border-4 border-white"}),i.jsx("h3",{className:"font-black text-sm md:text-lg text-slate-900",children:N.name}),i.jsx("button",{onClick:()=>G({tossWinnerId:N.id}),className:"mt-4 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-full text-[10px] font-black uppercase tracking-widest transition-colors",children:"Won Toss"})]}),i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsxs("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full bg-amber-400 border-4 border-amber-500 flex items-center justify-center shadow-xl animate-[spin_3s_ease-in-out_infinite] relative",children:[i.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-amber-300/50"}),i.jsx("span",{className:"text-4xl font-serif font-black text-amber-700 opacity-80",children:"$"})]}),i.jsx("div",{className:"text-[10px] font-black uppercase text-slate-300 tracking-[0.2em]",children:"VS"})]}),i.jsxs("div",{className:`text-center transition-all ${v.tossWinnerId===S.id?"scale-110 opacity-100":v.tossWinnerId?"opacity-40 scale-90":"opacity-100"}`,children:[i.jsx("img",{src:S.logoUrl,className:"w-20 h-20 md:w-28 md:h-28 rounded-full bg-white shadow-xl mb-4 object-cover border-4 border-white"}),i.jsx("h3",{className:"font-black text-sm md:text-lg text-slate-900",children:S.name}),i.jsx("button",{onClick:()=>G({tossWinnerId:S.id}),className:"mt-4 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-full text-[10px] font-black uppercase tracking-widest transition-colors",children:"Won Toss"})]})]}),v.tossWinnerId&&i.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-xl border border-slate-100 animate-in slide-in-from-bottom-8",children:[i.jsx("h3",{className:"text-center font-black text-slate-900 mb-4 uppercase tracking-widest text-xs",children:"Decision"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>G({tossDecision:"Bat"}),className:`px-8 py-3 rounded-xl font-black uppercase text-xs tracking-widest border transition-all ${v.tossDecision==="Bat"?"bg-slate-900 text-white border-slate-900 shadow-lg":"bg-white text-slate-400 border-slate-200 hover:bg-slate-50"}`,children:"Bat First"}),i.jsx("button",{onClick:()=>G({tossDecision:"Bowl"}),className:`px-8 py-3 rounded-xl font-black uppercase text-xs tracking-widest border transition-all ${v.tossDecision==="Bowl"?"bg-slate-900 text-white border-slate-900 shadow-lg":"bg-white text-slate-400 border-slate-200 hover:bg-slate-50"}`,children:"Bowl First"})]})]})]}),f==="officials"&&i.jsx("div",{className:"animate-in slide-in-from-right-8 duration-300 min-h-0 max-w-4xl mx-auto",children:i.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"font-black text-slate-900 text-lg",children:"Appoint Officials"}),i.jsx("span",{className:"bg-slate-100 text-slate-500 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest",children:"Optional"})]}),d.length===0?i.jsx("div",{className:"text-center py-10 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200",children:i.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"No registered officials found in this organization."})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(O=>{const V=v.umpires.includes(O.id);return i.jsxs("button",{onClick:()=>P(O.id),className:`p-4 rounded-2xl border text-left flex items-center justify-between transition-all group ${V?"bg-indigo-600 border-indigo-600 text-white shadow-lg":"bg-white border-slate-200 text-slate-700 hover:border-indigo-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black text-sm ${V?"bg-white/20":"bg-slate-100 text-slate-500"}`,children:O.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold",children:O.name}),i.jsx("div",{className:`text-[10px] font-bold uppercase ${V?"text-indigo-200":"text-slate-400"}`,children:"Official"})]})]}),V&&i.jsx("span",{className:"text-xl",children:""})]},O.id)})}),i.jsx("p",{className:"mt-6 text-[10px] text-slate-400 italic text-center",children:"Selected officials will have write access to the match if they log in."})]})}),f==="openers"&&H()&&z()&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 pb-24 animate-in slide-in-from-right-8 duration-300 min-h-0",children:[i.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-slate-200 shadow-sm flex flex-col min-h-0",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-slate-100",children:[i.jsx("img",{src:H().logoUrl,className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-black text-base text-slate-900",children:"Batting Openers"}),i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:H().name})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 shrink-0",children:[i.jsxs("div",{className:"bg-indigo-50/50 p-3 rounded-2xl border border-indigo-100",children:[i.jsx("div",{className:"text-[8px] font-black uppercase text-indigo-400 tracking-widest mb-1",children:"Striker"}),i.jsx("div",{className:"font-black text-sm text-slate-900 truncate",children:((J=H().players.find(O=>O.id===v.strikerId))==null?void 0:J.name)||"Select below"})]}),i.jsxs("div",{className:"bg-slate-50 p-3 rounded-2xl border border-slate-100",children:[i.jsx("div",{className:"text-[8px] font-black uppercase text-slate-400 tracking-widest mb-1",children:"Non-Striker"}),i.jsx("div",{className:"font-black text-sm text-slate-900 truncate",children:((pe=H().players.find(O=>O.id===v.nonStrikerId))==null?void 0:pe.name)||"Select below"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar max-h-[50vh]",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:H().players.filter(O=>(H().id===N.id?v.teamASquad:v.teamBSquad).includes(O.id)).map(O=>{const V=v.strikerId===O.id,he=v.nonStrikerId===O.id,W=V||he,A=!!v.strikerId&&!!v.nonStrikerId;return i.jsxs("button",{disabled:!W&&A,onClick:()=>{V?y($=>({...$,strikerId:""})):he?y($=>({...$,nonStrikerId:""})):v.strikerId?v.nonStrikerId||y($=>({...$,nonStrikerId:O.id})):y($=>({...$,strikerId:O.id}))},className:`p-2 rounded-xl border text-left transition-all flex items-center gap-3 ${W?"bg-slate-50 border-slate-200 opacity-100 ring-1 ring-indigo-200":"bg-white border-slate-100 hover:border-indigo-300"} ${!W&&A?"opacity-40 cursor-not-allowed":""}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 shrink-0",children:i.jsx("img",{src:O.photoUrl||`https://ui-avatars.com/api/?name=${O.name}`,className:"w-full h-full rounded-full object-cover opacity-80"})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("div",{className:"font-bold text-xs text-slate-900 truncate",children:O.name}),i.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase",children:O.role})]}),V&&i.jsx("span",{className:"text-[8px] font-black bg-indigo-600 text-white px-1.5 py-0.5 rounded uppercase",children:"STR"}),he&&i.jsx("span",{className:"text-[8px] font-black bg-slate-500 text-white px-1.5 py-0.5 rounded uppercase",children:"NON"})]},O.id)})})}),i.jsx("button",{onClick:()=>y(O=>({...O,strikerId:"",nonStrikerId:""})),className:"mt-3 text-[9px] font-bold text-slate-400 uppercase tracking-widest hover:text-red-500 text-center transition-colors shrink-0",children:"Reset Selection"})]}),i.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-slate-200 shadow-sm flex flex-col min-h-0",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-slate-100",children:[i.jsx("img",{src:z().logoUrl,className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-black text-base text-slate-900",children:"Opening Bowler"}),i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:z().name})]})]}),i.jsxs("div",{className:"mb-4 bg-emerald-50/50 p-3 rounded-2xl border border-emerald-100 shrink-0",children:[i.jsx("div",{className:"text-[8px] font-black uppercase text-emerald-500 tracking-widest mb-1",children:"Bowler"}),i.jsx("div",{className:"font-black text-sm text-slate-900 truncate",children:((U=z().players.find(O=>O.id===v.bowlerId))==null?void 0:U.name)||"Select below"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar max-h-[50vh]",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:z().players.filter(O=>(z().id===N.id?v.teamASquad:v.teamBSquad).includes(O.id)).map(O=>{const V=v.bowlerId===O.id;return i.jsxs("button",{onClick:()=>y(he=>({...he,bowlerId:O.id})),className:`p-2 rounded-xl border text-left transition-all flex items-center gap-3 ${V?"bg-emerald-50 border-emerald-300":"bg-white border-slate-100 hover:border-emerald-300"}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 shrink-0",children:i.jsx("img",{src:O.photoUrl||`https://ui-avatars.com/api/?name=${O.name}`,className:"w-full h-full rounded-full object-cover opacity-80"})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("div",{className:`font-bold text-xs truncate ${V?"text-emerald-900":"text-slate-900"}`,children:O.name}),i.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase",children:O.role})]}),V&&i.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500 flex items-center justify-center text-white text-[8px]",children:""})]},O.id)})})})]})]})]})}),i.jsxs("div",{className:"p-4 md:p-6 bg-white border-t border-slate-200 flex justify-between z-10 shrink-0 shadow-[0_-10px_40px_rgba(0,0,0,0.05)] absolute bottom-0 left-0 right-0",children:[f==="team_select"?i.jsx("button",{onClick:a,className:"px-6 py-3 rounded-xl text-slate-400 font-black uppercase text-xs tracking-widest hover:bg-slate-50",children:"Cancel Setup"}):i.jsx("button",{onClick:()=>{f==="squads"&&m("team_select"),f==="toss"&&m("squads"),f==="officials"&&m("toss"),f==="openers"&&m("officials")},disabled:f==="squads"&&!!e,className:"px-6 py-3 rounded-xl text-slate-500 font-black uppercase text-xs tracking-widest hover:bg-slate-50 disabled:opacity-30 disabled:cursor-not-allowed",children:"Back"}),f==="squads"&&i.jsx("button",{disabled:v.teamASquad.length<2||v.teamBSquad.length<2,onClick:()=>m("toss"),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 hover:scale-105 transition-all disabled:opacity-50 disabled:scale-100",children:"Confirm Squads"}),f==="toss"&&i.jsx("button",{disabled:!v.tossWinnerId,onClick:()=>m("officials"),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 hover:scale-105 transition-all disabled:opacity-50 disabled:scale-100",children:"Set Logistics"}),f==="officials"&&i.jsx("button",{onClick:()=>m("openers"),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 hover:scale-105 transition-all",children:"Continue"}),f==="openers"&&i.jsx("button",{disabled:!v.strikerId||!v.nonStrikerId||!v.bowlerId,onClick:ne,className:"px-10 py-3 bg-emerald-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-emerald-200 hover:bg-emerald-400 hover:scale-105 transition-all disabled:opacity-50 disabled:scale-100",children:"Start Match"})]})]})},f_=({onComplete:t,onCancel:e,initialMode:s="CREATE"})=>{var Ee,Q;const[a,r]=j.useState(s),[c,d]=j.useState(""),[f,m]=j.useState(""),[p,g]=j.useState(""),[v,y]=j.useState("Fan"),[N,S]=j.useState(""),[k,E]=j.useState(""),[T,M]=j.useState(!1),C=(Ee=window.wpApiSettings)==null?void 0:Ee.google_client_id,D=(Q=window.wpApiSettings)!=null&&Q.plugin_url?`${window.wpApiSettings.plugin_url}logo.jpg`:"logo.jpg",[R,B]=j.useState(""),[G,H]=j.useState(""),[z,P]=j.useState(""),[ne,le]=j.useState("Level 1"),[ie,J]=j.useState("General"),[pe,U]=j.useState("Right-hand"),[O,V]=j.useState("Right-arm Medium"),[he,W]=j.useState("Batsman"),[A,$]=j.useState(!1),re=async ye=>{ye.preventDefault(),S(""),E(""),a==="LOGIN"?Ne():a==="RECOVER"?ve():ge()},ve=async()=>{if(!f){S("Please enter your User Handle to reset.");return}M(!0),setTimeout(()=>{M(!1),E(`Recovery request sent for ${f}. Please contact your Org Admin.`)},1500)},Ne=async()=>{if(!f||!p){S("Please enter your handle and password");return}if(f.toLowerCase()==="trinity"&&p==="123#"){const je={id:"dev-dennis-trinity",name:"Dennis",handle:"Trinity",role:"Administrator",createdAt:Date.now(),password:"123#"};t(je);return}M(!0);const ye=f.startsWith("@")?f:`@${f}`;try{const je=ye.replace("@","").toLowerCase(),Be=await Eg(je);Be&&Be.profile?Be.profile.password===p?t(Be.profile):S("Incorrect password for this handle."):S("Account not found. Ensure you are using the correct handle.")}catch{S("Connection error. Please try again.")}finally{M(!1)}},ge=()=>{if(!c||!f||!p){S("All fields are required.");return}const ye=f.startsWith("@")?f:`@${f}`;Se({id:ye.replace("@","").toLowerCase(),name:c,handle:ye,password:p})},Se=ye=>{const je={id:ye.id||`user-${Date.now()}`,name:ye.name||"Anonymous",handle:ye.handle||"@anon",password:ye.password,role:v,email:ye.email,googleId:ye.googleId,avatarUrl:ye.avatarUrl,createdAt:Date.now(),scorerDetails:v==="Scorer"?{isHireable:!0,hourlyRate:Number(R)||20,experienceYears:Number(G)||0,bio:z||"Professional Scorer available for league matches."}:void 0,coachDetails:v==="Coach"?{level:ne,specialty:ie,experienceYears:Number(G)||0}:void 0,playerDetails:v==="Player"?{battingStyle:pe,bowlingStyle:O,primaryRole:he,lookingForClub:!0,isHireable:A}:void 0};t(je)};return j.useEffect(()=>{},[C,a]),i.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 bg-slate-900 overflow-hidden relative",children:[i.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-indigo-600/20 rounded-full blur-[120px] -translate-x-1/2 -translate-y-1/2"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-emerald-600/10 rounded-full blur-[120px] translate-x-1/2 translate-y-1/2"}),i.jsxs("div",{className:"max-w-md w-full bg-slate-800 rounded-[32px] p-10 border border-slate-700 shadow-2xl relative z-10 animate-in zoom-in-95 duration-500 max-h-[90vh] overflow-y-auto custom-scrollbar",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8 relative",children:[e&&i.jsx("button",{onClick:e,className:"absolute left-0 top-0 text-slate-400 hover:text-white transition-colors text-xl font-black",title:"Go Back",children:""}),i.jsx("img",{src:D,alt:"Cricket Core",className:"w-32 h-32 object-contain mb-4 drop-shadow-2xl"}),i.jsx("h1",{className:"text-3xl font-black text-white text-center",children:"Cricket-Core 2026"}),i.jsx("p",{className:"text-slate-400 text-center mt-2",children:a==="CREATE"?"Join the global network":a==="RECOVER"?"Recover Account":"Resume your career"})]}),i.jsxs("div",{className:"bg-slate-900/50 p-1 rounded-2xl flex mb-8 border border-white/5",children:[i.jsx("button",{onClick:()=>{r("CREATE"),S(""),E("")},className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] transition-all ${a==="CREATE"?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Create"}),i.jsx("button",{onClick:()=>{r("LOGIN"),S(""),E("")},className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] transition-all ${a==="LOGIN"||a==="RECOVER"?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Login"})]}),i.jsxs("form",{onSubmit:re,className:"space-y-6",children:[N&&i.jsx("div",{className:"bg-red-500/10 border border-red-500/30 text-red-400 p-3 rounded-xl text-xs font-bold text-center animate-in shake",children:N}),k&&i.jsx("div",{className:"bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 p-3 rounded-xl text-xs font-bold text-center animate-in zoom-in",children:k}),a==="CREATE"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Role Selection"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Fan","Player","Scorer","Umpire","Coach","Administrator"].map(ye=>i.jsx("button",{type:"button",onClick:()=>y(ye),className:`py-3 px-1 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all ${v===ye?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-slate-900 text-slate-400 border-slate-700 hover:border-slate-500"}`,children:ye},ye))})]}),a==="CREATE"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Full Name"}),i.jsx("input",{type:"text",required:!0,value:c,onChange:ye=>d(ye.target.value),placeholder:"e.g. Dennis",className:"w-full bg-slate-900 border border-slate-700 rounded-2xl px-5 py-4 text-white font-bold focus:ring-2 focus:ring-indigo-500 transition-all outline-none"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"System Handle"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-5 top-4 text-slate-500 font-bold",children:"@"}),i.jsx("input",{type:"text",required:!0,value:f.replace("@",""),onChange:ye=>m(ye.target.value),placeholder:"Trinity",className:"w-full bg-slate-900 border border-slate-700 rounded-2xl pl-10 pr-5 py-4 text-white font-bold focus:ring-2 focus:ring-indigo-500 transition-all outline-none"})]})]}),a!=="RECOVER"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Secure Password"}),i.jsx("input",{type:"password",required:!0,value:p,onChange:ye=>g(ye.target.value),placeholder:"",className:"w-full bg-slate-900 border border-slate-700 rounded-2xl px-5 py-4 text-white font-bold focus:ring-2 focus:ring-indigo-500 transition-all outline-none"})]}),a==="LOGIN"&&i.jsx("div",{className:"text-right",children:i.jsx("button",{type:"button",onClick:()=>{r("RECOVER"),S("")},className:"text-[10px] font-bold text-slate-400 hover:text-indigo-400 transition-colors",children:"Forgot Password?"})}),i.jsxs("div",{className:"space-y-3 mt-4",children:[i.jsx("button",{type:"submit",disabled:T,className:"w-full bg-white text-slate-900 font-black py-5 rounded-2xl transition-all shadow-xl hover:bg-slate-200 active:scale-95 uppercase tracking-[0.2em] text-xs disabled:opacity-50",children:T?"Processing...":a==="LOGIN"?"Login":a==="RECOVER"?"Reset Password":"Create Account"}),(e||a==="RECOVER")&&i.jsx("button",{type:"button",onClick:()=>{a==="RECOVER"?r("LOGIN"):e&&e()},className:"w-full bg-transparent text-slate-500 font-bold py-3 rounded-2xl hover:text-white hover:bg-slate-800 transition-all uppercase tracking-widest text-[10px]",children:a==="RECOVER"?"Back to Login":"Cancel"})]})]})]})]})};var h_={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let p_,m_;function x_(){return{geminiUrl:p_,vertexUrl:m_}}function g_(t,e,s,a){var r,c;if(!(t!=null&&t.baseUrl)){const d=x_();return e?(r=d.vertexUrl)!==null&&r!==void 0?r:s:(c=d.geminiUrl)!==null&&c!==void 0?c:a}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vn{}function _e(t,e){const s=/\{([^}]+)\}/g;return t.replace(s,(a,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const c=e[r];return c!=null?String(c):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function x(t,e,s){for(let c=0;c<e.length-1;c++){const d=e[c];if(d.endsWith("[]")){const f=d.slice(0,-2);if(!(f in t))if(Array.isArray(s))t[f]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(t[f])){const m=t[f];if(Array.isArray(s))for(let p=0;p<m.length;p++){const g=m[p];x(g,e.slice(c+1),s[p])}else for(const p of m)x(p,e.slice(c+1),s)}return}else if(d.endsWith("[0]")){const f=d.slice(0,-3);f in t||(t[f]=[{}]);const m=t[f];x(m[0],e.slice(c+1),s);return}(!t[d]||typeof t[d]!="object")&&(t[d]={}),t=t[d]}const a=e[e.length-1],r=t[a];if(r!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===r)return;if(typeof r=="object"&&typeof s=="object"&&r!==null&&s!==null)Object.assign(r,s);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof s=="object"&&s!==null&&!Array.isArray(s)?Object.assign(t,s):t[a]=s}function h(t,e,s=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let a=0;a<e.length;a++){if(typeof t!="object"||t===null)return s;const r=e[a];if(r.endsWith("[]")){const c=r.slice(0,-2);if(c in t){const d=t[c];return Array.isArray(d)?d.map(f=>h(f,e.slice(a+1),s)):s}else return s}else t=t[r]}return t}catch(a){if(a instanceof TypeError)return s;throw a}}function b_(t,e){for(const[s,a]of Object.entries(e)){const r=s.split("."),c=a.split("."),d=new Set;let f=-1;for(let m=0;m<r.length;m++)if(r[m]==="*"){f=m;break}if(f!==-1&&c.length>f)for(let m=f;m<c.length;m++){const p=c[m];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&d.add(p)}pu(t,r,c,0,d)}}function pu(t,e,s,a,r){if(a>=e.length||typeof t!="object"||t===null)return;const c=e[a];if(c.endsWith("[]")){const d=c.slice(0,-2),f=t;if(d in f&&Array.isArray(f[d]))for(const m of f[d])pu(m,e,s,a+1,r)}else if(c==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const d=t,f=Object.keys(d).filter(p=>!p.startsWith("_")&&!r.has(p)),m={};for(const p of f)m[p]=d[p];for(const[p,g]of Object.entries(m)){const v=[];for(const y of s.slice(a))y==="*"?v.push(p):v.push(y);x(d,v,g)}for(const p of f)delete d[p]}}else{const d=t;c in d&&pu(d[c],e,s,a+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uu(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v_(t){const e={},s=h(t,["operationName"]);s!=null&&x(e,["operationName"],s);const a=h(t,["resourceName"]);return a!=null&&x(e,["_url","resourceName"],a),e}function y_(t){const e={},s=h(t,["name"]);s!=null&&x(e,["name"],s);const a=h(t,["metadata"]);a!=null&&x(e,["metadata"],a);const r=h(t,["done"]);r!=null&&x(e,["done"],r);const c=h(t,["error"]);c!=null&&x(e,["error"],c);const d=h(t,["response","generateVideoResponse"]);return d!=null&&x(e,["response"],N_(d)),e}function w_(t){const e={},s=h(t,["name"]);s!=null&&x(e,["name"],s);const a=h(t,["metadata"]);a!=null&&x(e,["metadata"],a);const r=h(t,["done"]);r!=null&&x(e,["done"],r);const c=h(t,["error"]);c!=null&&x(e,["error"],c);const d=h(t,["response"]);return d!=null&&x(e,["response"],S_(d)),e}function N_(t){const e={},s=h(t,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>__(d))),x(e,["generatedVideos"],c)}const a=h(t,["raiMediaFilteredCount"]);a!=null&&x(e,["raiMediaFilteredCount"],a);const r=h(t,["raiMediaFilteredReasons"]);return r!=null&&x(e,["raiMediaFilteredReasons"],r),e}function S_(t){const e={},s=h(t,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>k_(d))),x(e,["generatedVideos"],c)}const a=h(t,["raiMediaFilteredCount"]);a!=null&&x(e,["raiMediaFilteredCount"],a);const r=h(t,["raiMediaFilteredReasons"]);return r!=null&&x(e,["raiMediaFilteredReasons"],r),e}function __(t){const e={},s=h(t,["video"]);return s!=null&&x(e,["video"],R_(s)),e}function k_(t){const e={},s=h(t,["_self"]);return s!=null&&x(e,["video"],I_(s)),e}function T_(t){const e={},s=h(t,["operationName"]);return s!=null&&x(e,["_url","operationName"],s),e}function E_(t){const e={},s=h(t,["operationName"]);return s!=null&&x(e,["_url","operationName"],s),e}function C_(t){const e={},s=h(t,["name"]);s!=null&&x(e,["name"],s);const a=h(t,["metadata"]);a!=null&&x(e,["metadata"],a);const r=h(t,["done"]);r!=null&&x(e,["done"],r);const c=h(t,["error"]);c!=null&&x(e,["error"],c);const d=h(t,["response"]);return d!=null&&x(e,["response"],j_(d)),e}function j_(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["parent"]);a!=null&&x(e,["parent"],a);const r=h(t,["documentName"]);return r!=null&&x(e,["documentName"],r),e}function Ug(t){const e={},s=h(t,["name"]);s!=null&&x(e,["name"],s);const a=h(t,["metadata"]);a!=null&&x(e,["metadata"],a);const r=h(t,["done"]);r!=null&&x(e,["done"],r);const c=h(t,["error"]);c!=null&&x(e,["error"],c);const d=h(t,["response"]);return d!=null&&x(e,["response"],A_(d)),e}function A_(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["parent"]);a!=null&&x(e,["parent"],a);const r=h(t,["documentName"]);return r!=null&&x(e,["documentName"],r),e}function R_(t){const e={},s=h(t,["uri"]);s!=null&&x(e,["uri"],s);const a=h(t,["encodedVideo"]);a!=null&&x(e,["videoBytes"],Uu(a));const r=h(t,["encoding"]);return r!=null&&x(e,["mimeType"],r),e}function I_(t){const e={},s=h(t,["gcsUri"]);s!=null&&x(e,["uri"],s);const a=h(t,["bytesBase64Encoded"]);a!=null&&x(e,["videoBytes"],Uu(a));const r=h(t,["mimeType"]);return r!=null&&x(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var k0;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(k0||(k0={}));var T0;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(T0||(T0={}));var E0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(E0||(E0={}));var Vt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Vt||(Vt={}));var C0;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(C0||(C0={}));var j0;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(j0||(j0={}));var A0;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(A0||(A0={}));var R0;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(R0||(R0={}));var I0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(I0||(I0={}));var M0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(M0||(M0={}));var D0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(D0||(D0={}));var O0;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(O0||(O0={}));var U0;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(U0||(U0={}));var P0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(P0||(P0={}));var L0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(L0||(L0={}));var B0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(B0||(B0={}));var G0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(G0||(G0={}));var q0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(q0||(q0={}));var V0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(V0||(V0={}));var H0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(H0||(H0={}));var $0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($0||($0={}));var po;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(po||(po={}));var F0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(F0||(F0={}));var z0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(z0||(z0={}));var J0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(J0||(J0={}));var mu;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(mu||(mu={}));var W0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(W0||(W0={}));var Y0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Y0||(Y0={}));var xu;(function(t){t.COLLECTION="COLLECTION"})(xu||(xu={}));var K0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(K0||(K0={}));var X0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(X0||(X0={}));var Q0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Q0||(Q0={}));var Z0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Z0||(Z0={}));var ex;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ex||(ex={}));var tx;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(tx||(tx={}));var sx;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(sx||(sx={}));var nx;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(nx||(nx={}));var ix;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ix||(ix={}));var ax;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(ax||(ax={}));var lx;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(lx||(lx={}));var rx;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(rx||(rx={}));var ox;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ox||(ox={}));var cx;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(cx||(cx={}));var dx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(dx||(dx={}));var ux;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(ux||(ux={}));var fx;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(fx||(fx={}));var hx;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(hx||(hx={}));var px;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(px||(px={}));var mx;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(mx||(mx={}));var xx;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(xx||(xx={}));var gx;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gx||(gx={}));var bx;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(bx||(bx={}));var vx;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(vx||(vx={}));var yx;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(yx||(yx={}));var wx;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(wx||(wx={}));var Nx;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Nx||(Nx={}));var xa;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(xa||(xa={}));class gu{constructor(e){const s={};for(const a of e.headers.entries())s[a[0]]=a[1];this.headers=s,this.responseInternal=e}json(){return this.responseInternal.json()}}class bl{get text(){var e,s,a,r,c,d,f,m;if(((r=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",g=!1;const v=[];for(const y of(m=(f=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[N,S]of Object.entries(y))N!=="text"&&N!=="thought"&&N!=="thoughtSignature"&&(S!==null||S!==void 0)&&v.push(N);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;g=!0,p+=y.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?p:void 0}get data(){var e,s,a,r,c,d,f,m;if(((r=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const g=[];for(const v of(m=(f=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[y,N]of Object.entries(v))y!=="inlineData"&&(N!==null||N!==void 0)&&g.push(y);v.inlineData&&typeof v.inlineData.data=="string"&&(p+=atob(v.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,s,a,r,c,d,f,m;if(((r=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(f=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,s,a,r,c,d,f,m,p;if(((r=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(m=(f=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((g==null?void 0:g.length)!==0)return(p=g==null?void 0:g[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,s,a,r,c,d,f,m,p;if(((r=(a=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(m=(f=(d=(c=this.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((g==null?void 0:g.length)!==0)return(p=g==null?void 0:g[0])===null||p===void 0?void 0:p.output}}class Sx{}class _x{}class M_{}class D_{}class O_{}class U_{}class kx{}class Tx{}class Ex{}class P_{}class mo{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const a=new mo;let r;const c=e;return s?r=w_(c):r=y_(c),Object.assign(a,r),a}}class Cx{}class jx{}class Ax{}class Rx{}class L_{}class B_{}class G_{}class Pu{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const a=new Pu,c=C_(e);return Object.assign(a,c),a}}class q_{}class V_{}class H_{}class $_{}class Ix{}class F_{get text(){var e,s,a;let r="",c=!1;const d=[];for(const f of(a=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&a!==void 0?a:[]){for(const[m,p]of Object.entries(f))m!=="text"&&m!=="thought"&&p!==null&&d.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;c=!0,r+=f.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?r:void 0}get data(){var e,s,a;let r="";const c=[];for(const d of(a=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&a!==void 0?a:[]){for(const[f,m]of Object.entries(d))f!=="inlineData"&&m!==null&&c.push(f);d.inlineData&&typeof d.inlineData.data=="string"&&(r+=atob(d.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class z_{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Lu{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const a=new Lu,c=Ug(e);return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const s=e.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Pg(t,e){const s=nt(t,e);return s?s.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${s}`:s.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${s}`:s:""}function Lg(t){return Array.isArray(t)?t.map(e=>xo(e)):[xo(t)]}function xo(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Bg(t){const e=xo(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gg(t){const e=xo(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Mx(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function qg(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Mx(e)):[Mx(t)]}function bu(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Dx(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Ox(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Qt(t){if(t==null)throw new Error("ContentUnion is required");return bu(t)?t:{role:"user",parts:qg(t)}}function Bu(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(s=>{const a=Qt(s);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(t.isVertexAI()){const s=Qt(e);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(e)?e.map(s=>Qt(s)):[Qt(e)]}function Ms(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Dx(t)||Ox(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Qt(t)]}const e=[],s=[],a=bu(t[0]);for(const r of t){const c=bu(r);if(c!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)e.push(r);else{if(Dx(r)||Ox(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(r)}}return a||e.push({role:"user",parts:qg(s)}),e}function J_(t,e){t.includes("null")&&(e.nullable=!0);const s=t.filter(a=>a!=="null");if(s.length===1)e.type=Object.values(Vt).includes(s[0].toUpperCase())?s[0].toUpperCase():Vt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const a of s)e.anyOf.push({type:Object.values(Vt).includes(a.toUpperCase())?a.toUpperCase():Vt.TYPE_UNSPECIFIED})}}function va(t){const e={},s=["items"],a=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const c=t.anyOf;c!=null&&c.length==2&&(c[0].type==="null"?(e.nullable=!0,t=c[1]):c[1].type==="null"&&(e.nullable=!0,t=c[0])),t.type instanceof Array&&J_(t.type,e);for(const[d,f]of Object.entries(t))if(f!=null)if(d=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Vt).includes(f.toUpperCase())?f.toUpperCase():Vt.TYPE_UNSPECIFIED}else if(s.includes(d))e[d]=va(f);else if(a.includes(d)){const m=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}m.push(va(p))}e[d]=m}else if(r.includes(d)){const m={};for(const[p,g]of Object.entries(f))m[p]=va(g);e[d]=m}else{if(d==="additionalProperties")continue;e[d]=f}return e}function Gu(t){return va(t)}function qu(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Vu(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Sa(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=va(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=va(e.response));return t}function _a(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const s of t)e.push(s);return e}function W_(t,e,s,a=1){const r=!e.startsWith(`${s}/`)&&e.split("/").length===a;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${s}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${s}/${e}`:e:r?`${s}/${e}`:e}function yn(t,e){if(typeof e!="string")throw new Error("name must be a string");return W_(t,e,"cachedContents")}function Vg(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Wn(t){return Uu(t)}function Y_(t){return t!=null&&typeof t=="object"&&"name"in t}function K_(t){return t!=null&&typeof t=="object"&&"video"in t}function X_(t){return t!=null&&typeof t=="object"&&"uri"in t}function Hg(t){var e;let s;if(Y_(t)&&(s=t.name),!(X_(t)&&(s=t.uri,s===void 0))&&!(K_(t)&&(s=(e=t.video)===null||e===void 0?void 0:e.uri,s===void 0))){if(typeof t=="string"&&(s=t),s===void 0)throw new Error("Could not extract file name from the provided input.");if(s.startsWith("https://")){const r=s.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${s}`);s=r[0]}else s.startsWith("files/")&&(s=s.split("files/")[1]);return s}}function $g(t,e){let s;return t.isVertexAI()?s=e?"publishers/google/models":"models":s=e?"models":"tunedModels",s}function Fg(t){for(const e of["models","tunedModels","publisherModels"])if(Q_(t,e))return t[e];return[]}function Q_(t,e){return t!==null&&typeof t=="object"&&e in t}function Z_(t,e={}){const s=t,a={name:s.name,description:s.description,parametersJsonSchema:s.inputSchema};return s.outputSchema&&(a.responseJsonSchema=s.outputSchema),e.behavior&&(a.behavior=e.behavior),{functionDeclarations:[a]}}function ek(t,e={}){const s=[],a=new Set;for(const r of t){const c=r.name;if(a.has(c))throw new Error(`Duplicate function name ${c} found in MCP tools. Please ensure function names are unique.`);a.add(c);const d=Z_(r,e);d.functionDeclarations&&s.push(...d.functionDeclarations)}return{functionDeclarations:s}}function zg(t,e){let s;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))s={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))s={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))s={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");s={inlinedRequests:e}}else s=e;const a=[s.gcsUri,s.bigqueryUri].filter(Boolean).length,r=[s.inlinedRequests,s.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return s}function tk(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Jg(t){if(typeof t!="object"||t===null)return{};const e=t,s=e.inlinedResponses;if(typeof s!="object"||s===null)return t;const r=s.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let c=!1;for(const d of r){if(typeof d!="object"||d===null)continue;const m=d.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){c=!0;break}}return c&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ka(t,e){const s=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(s))return s.split("/").pop();throw new Error(`Invalid batch job name: ${s}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(s))return s.split("/").pop();if(/^\d+$/.test(s))return s;throw new Error(`Invalid batch job name: ${s}.`)}function Wg(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sk(t){const e={},s=h(t,["responsesFile"]);s!=null&&x(e,["fileName"],s);const a=h(t,["inlinedResponses","inlinedResponses"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>Uk(d))),x(e,["inlinedResponses"],c)}const r=h(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["inlinedEmbedContentResponses"],c)}return e}function nk(t){const e={},s=h(t,["predictionsFormat"]);s!=null&&x(e,["format"],s);const a=h(t,["gcsDestination","outputUriPrefix"]);a!=null&&x(e,["gcsUri"],a);const r=h(t,["bigqueryDestination","outputUri"]);return r!=null&&x(e,["bigqueryUri"],r),e}function ik(t){const e={},s=h(t,["format"]);s!=null&&x(e,["predictionsFormat"],s);const a=h(t,["gcsUri"]);a!=null&&x(e,["gcsDestination","outputUriPrefix"],a);const r=h(t,["bigqueryUri"]);if(r!=null&&x(e,["bigqueryDestination","outputUri"],r),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(h(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ro(t){const e={},s=h(t,["name"]);s!=null&&x(e,["name"],s);const a=h(t,["metadata","displayName"]);a!=null&&x(e,["displayName"],a);const r=h(t,["metadata","state"]);r!=null&&x(e,["state"],Wg(r));const c=h(t,["metadata","createTime"]);c!=null&&x(e,["createTime"],c);const d=h(t,["metadata","endTime"]);d!=null&&x(e,["endTime"],d);const f=h(t,["metadata","updateTime"]);f!=null&&x(e,["updateTime"],f);const m=h(t,["metadata","model"]);m!=null&&x(e,["model"],m);const p=h(t,["metadata","output"]);return p!=null&&x(e,["dest"],sk(Jg(p))),e}function vu(t){const e={},s=h(t,["name"]);s!=null&&x(e,["name"],s);const a=h(t,["displayName"]);a!=null&&x(e,["displayName"],a);const r=h(t,["state"]);r!=null&&x(e,["state"],Wg(r));const c=h(t,["error"]);c!=null&&x(e,["error"],c);const d=h(t,["createTime"]);d!=null&&x(e,["createTime"],d);const f=h(t,["startTime"]);f!=null&&x(e,["startTime"],f);const m=h(t,["endTime"]);m!=null&&x(e,["endTime"],m);const p=h(t,["updateTime"]);p!=null&&x(e,["updateTime"],p);const g=h(t,["model"]);g!=null&&x(e,["model"],g);const v=h(t,["inputConfig"]);v!=null&&x(e,["src"],ak(v));const y=h(t,["outputConfig"]);y!=null&&x(e,["dest"],nk(Jg(y)));const N=h(t,["completionStats"]);return N!=null&&x(e,["completionStats"],N),e}function ak(t){const e={},s=h(t,["instancesFormat"]);s!=null&&x(e,["format"],s);const a=h(t,["gcsSource","uris"]);a!=null&&x(e,["gcsUri"],a);const r=h(t,["bigquerySource","inputUri"]);return r!=null&&x(e,["bigqueryUri"],r),e}function lk(t,e){const s={};if(h(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(h(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=h(e,["fileName"]);a!=null&&x(s,["fileName"],a);const r=h(e,["inlinedRequests"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>Ok(t,d))),x(s,["requests","requests"],c)}return s}function rk(t){const e={},s=h(t,["format"]);s!=null&&x(e,["instancesFormat"],s);const a=h(t,["gcsUri"]);a!=null&&x(e,["gcsSource","uris"],a);const r=h(t,["bigqueryUri"]);if(r!=null&&x(e,["bigquerySource","inputUri"],r),h(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(h(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ok(t){const e={},s=h(t,["data"]);if(s!=null&&x(e,["data"],s),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=h(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}function ck(t,e){const s={},a=h(e,["name"]);return a!=null&&x(s,["_url","name"],ka(t,a)),s}function dk(t,e){const s={},a=h(e,["name"]);return a!=null&&x(s,["_url","name"],ka(t,a)),s}function uk(t){const e={},s=h(t,["content"]);s!=null&&x(e,["content"],s);const a=h(t,["citationMetadata"]);a!=null&&x(e,["citationMetadata"],fk(a));const r=h(t,["tokenCount"]);r!=null&&x(e,["tokenCount"],r);const c=h(t,["finishReason"]);c!=null&&x(e,["finishReason"],c);const d=h(t,["avgLogprobs"]);d!=null&&x(e,["avgLogprobs"],d);const f=h(t,["groundingMetadata"]);f!=null&&x(e,["groundingMetadata"],f);const m=h(t,["index"]);m!=null&&x(e,["index"],m);const p=h(t,["logprobsResult"]);p!=null&&x(e,["logprobsResult"],p);const g=h(t,["safetyRatings"]);if(g!=null){let y=g;Array.isArray(y)&&(y=y.map(N=>N)),x(e,["safetyRatings"],y)}const v=h(t,["urlContextMetadata"]);return v!=null&&x(e,["urlContextMetadata"],v),e}function fk(t){const e={},s=h(t,["citationSources"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(r=>r)),x(e,["citations"],a)}return e}function Yg(t){const e={},s=h(t,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>Hk(c))),x(e,["parts"],r)}const a=h(t,["role"]);return a!=null&&x(e,["role"],a),e}function hk(t,e){const s={},a=h(t,["displayName"]);if(e!==void 0&&a!=null&&x(e,["batch","displayName"],a),h(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return s}function pk(t,e){const s={},a=h(t,["displayName"]);e!==void 0&&a!=null&&x(e,["displayName"],a);const r=h(t,["dest"]);return e!==void 0&&r!=null&&x(e,["outputConfig"],ik(tk(r))),s}function Ux(t,e){const s={},a=h(e,["model"]);a!=null&&x(s,["_url","model"],nt(t,a));const r=h(e,["src"]);r!=null&&x(s,["batch","inputConfig"],lk(t,zg(t,r)));const c=h(e,["config"]);return c!=null&&hk(c,s),s}function mk(t,e){const s={},a=h(e,["model"]);a!=null&&x(s,["model"],nt(t,a));const r=h(e,["src"]);r!=null&&x(s,["inputConfig"],rk(zg(t,r)));const c=h(e,["config"]);return c!=null&&pk(c,s),s}function xk(t,e){const s={},a=h(t,["displayName"]);return e!==void 0&&a!=null&&x(e,["batch","displayName"],a),s}function gk(t,e){const s={},a=h(e,["model"]);a!=null&&x(s,["_url","model"],nt(t,a));const r=h(e,["src"]);r!=null&&x(s,["batch","inputConfig"],_k(t,r));const c=h(e,["config"]);return c!=null&&xk(c,s),s}function bk(t,e){const s={},a=h(e,["name"]);return a!=null&&x(s,["_url","name"],ka(t,a)),s}function vk(t,e){const s={},a=h(e,["name"]);return a!=null&&x(s,["_url","name"],ka(t,a)),s}function yk(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["name"]);a!=null&&x(e,["name"],a);const r=h(t,["done"]);r!=null&&x(e,["done"],r);const c=h(t,["error"]);return c!=null&&x(e,["error"],c),e}function wk(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["name"]);a!=null&&x(e,["name"],a);const r=h(t,["done"]);r!=null&&x(e,["done"],r);const c=h(t,["error"]);return c!=null&&x(e,["error"],c),e}function Nk(t,e){const s={},a=h(e,["contents"]);if(a!=null){let c=Bu(t,a);Array.isArray(c)&&(c=c.map(d=>d)),x(s,["requests[]","request","content"],c)}const r=h(e,["config"]);return r!=null&&(x(s,["_self"],Sk(r,s)),b_(s,{"requests[].*":"requests[].request.*"})),s}function Sk(t,e){const s={},a=h(t,["taskType"]);e!==void 0&&a!=null&&x(e,["requests[]","taskType"],a);const r=h(t,["title"]);e!==void 0&&r!=null&&x(e,["requests[]","title"],r);const c=h(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&x(e,["requests[]","outputDimensionality"],c),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function _k(t,e){const s={},a=h(e,["fileName"]);a!=null&&x(s,["file_name"],a);const r=h(e,["inlinedRequests"]);return r!=null&&x(s,["requests"],Nk(t,r)),s}function kk(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const a=h(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}function Tk(t){const e={},s=h(t,["id"]);s!=null&&x(e,["id"],s);const a=h(t,["args"]);a!=null&&x(e,["args"],a);const r=h(t,["name"]);if(r!=null&&x(e,["name"],r),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ek(t){const e={},s=h(t,["allowedFunctionNames"]);s!=null&&x(e,["allowedFunctionNames"],s);const a=h(t,["mode"]);if(a!=null&&x(e,["mode"],a),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ck(t,e,s){const a={},r=h(e,["systemInstruction"]);s!==void 0&&r!=null&&x(s,["systemInstruction"],Yg(Qt(r)));const c=h(e,["temperature"]);c!=null&&x(a,["temperature"],c);const d=h(e,["topP"]);d!=null&&x(a,["topP"],d);const f=h(e,["topK"]);f!=null&&x(a,["topK"],f);const m=h(e,["candidateCount"]);m!=null&&x(a,["candidateCount"],m);const p=h(e,["maxOutputTokens"]);p!=null&&x(a,["maxOutputTokens"],p);const g=h(e,["stopSequences"]);g!=null&&x(a,["stopSequences"],g);const v=h(e,["responseLogprobs"]);v!=null&&x(a,["responseLogprobs"],v);const y=h(e,["logprobs"]);y!=null&&x(a,["logprobs"],y);const N=h(e,["presencePenalty"]);N!=null&&x(a,["presencePenalty"],N);const S=h(e,["frequencyPenalty"]);S!=null&&x(a,["frequencyPenalty"],S);const k=h(e,["seed"]);k!=null&&x(a,["seed"],k);const E=h(e,["responseMimeType"]);E!=null&&x(a,["responseMimeType"],E);const T=h(e,["responseSchema"]);T!=null&&x(a,["responseSchema"],Gu(T));const M=h(e,["responseJsonSchema"]);if(M!=null&&x(a,["responseJsonSchema"],M),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=h(e,["safetySettings"]);if(s!==void 0&&C!=null){let ie=C;Array.isArray(ie)&&(ie=ie.map(J=>$k(J))),x(s,["safetySettings"],ie)}const D=h(e,["tools"]);if(s!==void 0&&D!=null){let ie=_a(D);Array.isArray(ie)&&(ie=ie.map(J=>zk(Sa(J)))),x(s,["tools"],ie)}const R=h(e,["toolConfig"]);if(s!==void 0&&R!=null&&x(s,["toolConfig"],Fk(R)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=h(e,["cachedContent"]);s!==void 0&&B!=null&&x(s,["cachedContent"],yn(t,B));const G=h(e,["responseModalities"]);G!=null&&x(a,["responseModalities"],G);const H=h(e,["mediaResolution"]);H!=null&&x(a,["mediaResolution"],H);const z=h(e,["speechConfig"]);if(z!=null&&x(a,["speechConfig"],qu(z)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=h(e,["thinkingConfig"]);P!=null&&x(a,["thinkingConfig"],P);const ne=h(e,["imageConfig"]);ne!=null&&x(a,["imageConfig"],Dk(ne));const le=h(e,["enableEnhancedCivicAnswers"]);if(le!=null&&x(a,["enableEnhancedCivicAnswers"],le),h(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return a}function jk(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["candidates"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(p=>uk(p))),x(e,["candidates"],m)}const r=h(t,["modelVersion"]);r!=null&&x(e,["modelVersion"],r);const c=h(t,["promptFeedback"]);c!=null&&x(e,["promptFeedback"],c);const d=h(t,["responseId"]);d!=null&&x(e,["responseId"],d);const f=h(t,["usageMetadata"]);return f!=null&&x(e,["usageMetadata"],f),e}function Ak(t,e){const s={},a=h(e,["name"]);return a!=null&&x(s,["_url","name"],ka(t,a)),s}function Rk(t,e){const s={},a=h(e,["name"]);return a!=null&&x(s,["_url","name"],ka(t,a)),s}function Ik(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=h(t,["enableWidget"]);return s!=null&&x(e,["enableWidget"],s),e}function Mk(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=h(t,["timeRangeFilter"]);return s!=null&&x(e,["timeRangeFilter"],s),e}function Dk(t){const e={},s=h(t,["aspectRatio"]);s!=null&&x(e,["aspectRatio"],s);const a=h(t,["imageSize"]);if(a!=null&&x(e,["imageSize"],a),h(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Ok(t,e){const s={},a=h(e,["model"]);a!=null&&x(s,["request","model"],nt(t,a));const r=h(e,["contents"]);if(r!=null){let f=Ms(r);Array.isArray(f)&&(f=f.map(m=>Yg(m))),x(s,["request","contents"],f)}const c=h(e,["metadata"]);c!=null&&x(s,["metadata"],c);const d=h(e,["config"]);return d!=null&&x(s,["request","generationConfig"],Ck(t,d,h(s,["request"],{}))),s}function Uk(t){const e={},s=h(t,["response"]);s!=null&&x(e,["response"],jk(s));const a=h(t,["metadata"]);a!=null&&x(e,["metadata"],a);const r=h(t,["error"]);return r!=null&&x(e,["error"],r),e}function Pk(t,e){const s={},a=h(t,["pageSize"]);e!==void 0&&a!=null&&x(e,["_query","pageSize"],a);const r=h(t,["pageToken"]);if(e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),h(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return s}function Lk(t,e){const s={},a=h(t,["pageSize"]);e!==void 0&&a!=null&&x(e,["_query","pageSize"],a);const r=h(t,["pageToken"]);e!==void 0&&r!=null&&x(e,["_query","pageToken"],r);const c=h(t,["filter"]);return e!==void 0&&c!=null&&x(e,["_query","filter"],c),s}function Bk(t){const e={},s=h(t,["config"]);return s!=null&&Pk(s,e),e}function Gk(t){const e={},s=h(t,["config"]);return s!=null&&Lk(s,e),e}function qk(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["nextPageToken"]);a!=null&&x(e,["nextPageToken"],a);const r=h(t,["operations"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>ro(d))),x(e,["batchJobs"],c)}return e}function Vk(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["nextPageToken"]);a!=null&&x(e,["nextPageToken"],a);const r=h(t,["batchPredictionJobs"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>vu(d))),x(e,["batchJobs"],c)}return e}function Hk(t){const e={},s=h(t,["mediaResolution"]);s!=null&&x(e,["mediaResolution"],s);const a=h(t,["codeExecutionResult"]);a!=null&&x(e,["codeExecutionResult"],a);const r=h(t,["executableCode"]);r!=null&&x(e,["executableCode"],r);const c=h(t,["fileData"]);c!=null&&x(e,["fileData"],kk(c));const d=h(t,["functionCall"]);d!=null&&x(e,["functionCall"],Tk(d));const f=h(t,["functionResponse"]);f!=null&&x(e,["functionResponse"],f);const m=h(t,["inlineData"]);m!=null&&x(e,["inlineData"],ok(m));const p=h(t,["text"]);p!=null&&x(e,["text"],p);const g=h(t,["thought"]);g!=null&&x(e,["thought"],g);const v=h(t,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const y=h(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function $k(t){const e={},s=h(t,["category"]);if(s!=null&&x(e,["category"],s),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=h(t,["threshold"]);return a!=null&&x(e,["threshold"],a),e}function Fk(t){const e={},s=h(t,["retrievalConfig"]);s!=null&&x(e,["retrievalConfig"],s);const a=h(t,["functionCallingConfig"]);return a!=null&&x(e,["functionCallingConfig"],Ek(a)),e}function zk(t){const e={};if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(t,["computerUse"]);s!=null&&x(e,["computerUse"],s);const a=h(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const r=h(t,["codeExecution"]);if(r!=null&&x(e,["codeExecution"],r),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=h(t,["functionDeclarations"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),x(e,["functionDeclarations"],g)}const d=h(t,["googleMaps"]);d!=null&&x(e,["googleMaps"],Ik(d));const f=h(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],Mk(f));const m=h(t,["googleSearchRetrieval"]);m!=null&&x(e,["googleSearchRetrieval"],m);const p=h(t,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var gn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(gn||(gn={}));class yi{constructor(e,s,a,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(e,a,r)}init(e,s,a){var r,c;this.nameInternal=e,this.pageInternal=s[this.nameInternal]||[],this.sdkHttpResponseInternal=s==null?void 0:s.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!a||Object.keys(a).length===0?d={config:{}}:typeof a=="object"?d=Object.assign({},a):d=a,d.config&&(d.config.pageToken=s.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(c=(r=d.config)===null||r===void 0?void 0:r.pageSize)!==null&&c!==void 0?c:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jk extends vn{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new yi(gn.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(s),s),this.create=async s=>(this.apiClient.isVertexAI()&&(s.config=this.formatDestination(s.src,s.config)),this.createInternal(s)),this.createEmbeddings=async s=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(s)}}createInlinedGenerateContentRequest(e){const s=Ux(this.apiClient,e),a=s._url,r=_e("{model}:batchGenerateContent",a),f=s.batch.inputConfig.requests,m=f.requests,p=[];for(const g of m){const v=Object.assign({},g);if(v.systemInstruction){const y=v.systemInstruction;delete v.systemInstruction;const N=v.request;N.systemInstruction=y,v.request=N}p.push(v)}return f.requests=p,delete s.config,delete s._url,delete s._query,{path:r,body:s}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,s){const a=s?Object.assign({},s):{},r=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${r}`),a.dest===void 0){const c=this.getGcsUri(e),d=this.getBigqueryUri(e);if(c)c.endsWith(".jsonl")?a.dest=`${c.slice(0,-6)}/dest`:a.dest=`${c}_dest_${r}`;else if(d)a.dest=`${d}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=mk(this.apiClient,e);return f=_e("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),d.then(g=>vu(g))}else{const p=Ux(this.apiClient,e);return f=_e("{model}:batchGenerateContent",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>ro(g))}}async createEmbeddingsInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=gk(this.apiClient,e);return c=_e("{model}:asyncBatchEmbedContent",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>ro(m))}}async get(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=Rk(this.apiClient,e);return f=_e("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),d.then(g=>vu(g))}else{const p=Ak(this.apiClient,e);return f=_e("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>ro(g))}}async cancel(e){var s,a,r,c;let d="",f={};if(this.apiClient.isVertexAI()){const m=dk(this.apiClient,e);d=_e("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}else{const m=ck(this.apiClient,e);d=_e("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal})}}async listInternal(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=Gk(e);return f=_e("batchPredictionJobs",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=Vk(g),y=new Ix;return Object.assign(y,v),y})}else{const p=Bk(e);return f=_e("batches",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=qk(g),y=new Ix;return Object.assign(y,v),y})}}async delete(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=vk(this.apiClient,e);return f=_e("batchPredictionJobs/{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>wk(g))}else{const p=bk(this.apiClient,e);return f=_e("batches/{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>yk(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wk(t){const e={},s=h(t,["data"]);if(s!=null&&x(e,["data"],s),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=h(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}function Px(t){const e={},s=h(t,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>gT(c))),x(e,["parts"],r)}const a=h(t,["role"]);return a!=null&&x(e,["role"],a),e}function Yk(t,e){const s={},a=h(t,["ttl"]);e!==void 0&&a!=null&&x(e,["ttl"],a);const r=h(t,["expireTime"]);e!==void 0&&r!=null&&x(e,["expireTime"],r);const c=h(t,["displayName"]);e!==void 0&&c!=null&&x(e,["displayName"],c);const d=h(t,["contents"]);if(e!==void 0&&d!=null){let g=Ms(d);Array.isArray(g)&&(g=g.map(v=>Px(v))),x(e,["contents"],g)}const f=h(t,["systemInstruction"]);e!==void 0&&f!=null&&x(e,["systemInstruction"],Px(Qt(f)));const m=h(t,["tools"]);if(e!==void 0&&m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>vT(v))),x(e,["tools"],g)}const p=h(t,["toolConfig"]);if(e!==void 0&&p!=null&&x(e,["toolConfig"],bT(p)),h(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return s}function Kk(t,e){const s={},a=h(t,["ttl"]);e!==void 0&&a!=null&&x(e,["ttl"],a);const r=h(t,["expireTime"]);e!==void 0&&r!=null&&x(e,["expireTime"],r);const c=h(t,["displayName"]);e!==void 0&&c!=null&&x(e,["displayName"],c);const d=h(t,["contents"]);if(e!==void 0&&d!=null){let v=Ms(d);Array.isArray(v)&&(v=v.map(y=>y)),x(e,["contents"],v)}const f=h(t,["systemInstruction"]);e!==void 0&&f!=null&&x(e,["systemInstruction"],Qt(f));const m=h(t,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(y=>yT(y))),x(e,["tools"],v)}const p=h(t,["toolConfig"]);e!==void 0&&p!=null&&x(e,["toolConfig"],p);const g=h(t,["kmsKeyName"]);return e!==void 0&&g!=null&&x(e,["encryption_spec","kmsKeyName"],g),s}function Xk(t,e){const s={},a=h(e,["model"]);a!=null&&x(s,["model"],Pg(t,a));const r=h(e,["config"]);return r!=null&&Yk(r,s),s}function Qk(t,e){const s={},a=h(e,["model"]);a!=null&&x(s,["model"],Pg(t,a));const r=h(e,["config"]);return r!=null&&Kk(r,s),s}function Zk(t,e){const s={},a=h(e,["name"]);return a!=null&&x(s,["_url","name"],yn(t,a)),s}function eT(t,e){const s={},a=h(e,["name"]);return a!=null&&x(s,["_url","name"],yn(t,a)),s}function tT(t){const e={},s=h(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}function sT(t){const e={},s=h(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}function nT(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const a=h(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}function iT(t){const e={},s=h(t,["id"]);s!=null&&x(e,["id"],s);const a=h(t,["args"]);a!=null&&x(e,["args"],a);const r=h(t,["name"]);if(r!=null&&x(e,["name"],r),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aT(t){const e={},s=h(t,["allowedFunctionNames"]);s!=null&&x(e,["allowedFunctionNames"],s);const a=h(t,["mode"]);if(a!=null&&x(e,["mode"],a),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function lT(t){const e={},s=h(t,["description"]);s!=null&&x(e,["description"],s);const a=h(t,["name"]);a!=null&&x(e,["name"],a);const r=h(t,["parameters"]);r!=null&&x(e,["parameters"],r);const c=h(t,["parametersJsonSchema"]);c!=null&&x(e,["parametersJsonSchema"],c);const d=h(t,["response"]);d!=null&&x(e,["response"],d);const f=h(t,["responseJsonSchema"]);if(f!=null&&x(e,["responseJsonSchema"],f),h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function rT(t,e){const s={},a=h(e,["name"]);return a!=null&&x(s,["_url","name"],yn(t,a)),s}function oT(t,e){const s={},a=h(e,["name"]);return a!=null&&x(s,["_url","name"],yn(t,a)),s}function cT(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=h(t,["enableWidget"]);return s!=null&&x(e,["enableWidget"],s),e}function dT(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=h(t,["timeRangeFilter"]);return s!=null&&x(e,["timeRangeFilter"],s),e}function uT(t,e){const s={},a=h(t,["pageSize"]);e!==void 0&&a!=null&&x(e,["_query","pageSize"],a);const r=h(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),s}function fT(t,e){const s={},a=h(t,["pageSize"]);e!==void 0&&a!=null&&x(e,["_query","pageSize"],a);const r=h(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),s}function hT(t){const e={},s=h(t,["config"]);return s!=null&&uT(s,e),e}function pT(t){const e={},s=h(t,["config"]);return s!=null&&fT(s,e),e}function mT(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["nextPageToken"]);a!=null&&x(e,["nextPageToken"],a);const r=h(t,["cachedContents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["cachedContents"],c)}return e}function xT(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["nextPageToken"]);a!=null&&x(e,["nextPageToken"],a);const r=h(t,["cachedContents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["cachedContents"],c)}return e}function gT(t){const e={},s=h(t,["mediaResolution"]);s!=null&&x(e,["mediaResolution"],s);const a=h(t,["codeExecutionResult"]);a!=null&&x(e,["codeExecutionResult"],a);const r=h(t,["executableCode"]);r!=null&&x(e,["executableCode"],r);const c=h(t,["fileData"]);c!=null&&x(e,["fileData"],nT(c));const d=h(t,["functionCall"]);d!=null&&x(e,["functionCall"],iT(d));const f=h(t,["functionResponse"]);f!=null&&x(e,["functionResponse"],f);const m=h(t,["inlineData"]);m!=null&&x(e,["inlineData"],Wk(m));const p=h(t,["text"]);p!=null&&x(e,["text"],p);const g=h(t,["thought"]);g!=null&&x(e,["thought"],g);const v=h(t,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const y=h(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function bT(t){const e={},s=h(t,["retrievalConfig"]);s!=null&&x(e,["retrievalConfig"],s);const a=h(t,["functionCallingConfig"]);return a!=null&&x(e,["functionCallingConfig"],aT(a)),e}function vT(t){const e={};if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(t,["computerUse"]);s!=null&&x(e,["computerUse"],s);const a=h(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const r=h(t,["codeExecution"]);if(r!=null&&x(e,["codeExecution"],r),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=h(t,["functionDeclarations"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),x(e,["functionDeclarations"],g)}const d=h(t,["googleMaps"]);d!=null&&x(e,["googleMaps"],cT(d));const f=h(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],dT(f));const m=h(t,["googleSearchRetrieval"]);m!=null&&x(e,["googleSearchRetrieval"],m);const p=h(t,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}function yT(t){const e={},s=h(t,["retrieval"]);s!=null&&x(e,["retrieval"],s);const a=h(t,["computerUse"]);if(a!=null&&x(e,["computerUse"],a),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=h(t,["codeExecution"]);r!=null&&x(e,["codeExecution"],r);const c=h(t,["enterpriseWebSearch"]);c!=null&&x(e,["enterpriseWebSearch"],c);const d=h(t,["functionDeclarations"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(y=>lT(y))),x(e,["functionDeclarations"],v)}const f=h(t,["googleMaps"]);f!=null&&x(e,["googleMaps"],f);const m=h(t,["googleSearch"]);m!=null&&x(e,["googleSearch"],m);const p=h(t,["googleSearchRetrieval"]);p!=null&&x(e,["googleSearchRetrieval"],p);const g=h(t,["urlContext"]);return g!=null&&x(e,["urlContext"],g),e}function wT(t,e){const s={},a=h(t,["ttl"]);e!==void 0&&a!=null&&x(e,["ttl"],a);const r=h(t,["expireTime"]);return e!==void 0&&r!=null&&x(e,["expireTime"],r),s}function NT(t,e){const s={},a=h(t,["ttl"]);e!==void 0&&a!=null&&x(e,["ttl"],a);const r=h(t,["expireTime"]);return e!==void 0&&r!=null&&x(e,["expireTime"],r),s}function ST(t,e){const s={},a=h(e,["name"]);a!=null&&x(s,["_url","name"],yn(t,a));const r=h(e,["config"]);return r!=null&&wT(r,s),s}function _T(t,e){const s={},a=h(e,["name"]);a!=null&&x(s,["_url","name"],yn(t,a));const r=h(e,["config"]);return r!=null&&NT(r,s),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kT extends vn{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new yi(gn.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(s),s)}async create(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=Qk(this.apiClient,e);return f=_e("cachedContents",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const p=Xk(this.apiClient,e);return f=_e("cachedContents",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async get(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=oT(this.apiClient,e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const p=rT(this.apiClient,e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async delete(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=eT(this.apiClient,e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=sT(g),y=new Ax;return Object.assign(y,v),y})}else{const p=Zk(this.apiClient,e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=tT(g),y=new Ax;return Object.assign(y,v),y})}}async update(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=_T(this.apiClient,e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const p=ST(this.apiClient,e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async listInternal(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=pT(e);return f=_e("cachedContents",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=xT(g),y=new Rx;return Object.assign(y,v),y})}else{const p=hT(e);return f=_e("cachedContents",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=mT(g),y=new Rx;return Object.assign(y,v),y})}}}function go(t,e){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(s[a[r]]=t[a[r]]);return s}function Lx(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],a=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Le(t){return this instanceof Le?(this.v=t,this):new Le(t)}function $s(t,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(t,e||[]),r,c=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(N){return function(S){return Promise.resolve(S).then(N,v)}}function f(N,S){a[N]&&(r[N]=function(k){return new Promise(function(E,T){c.push([N,k,E,T])>1||m(N,k)})},S&&(r[N]=S(r[N])))}function m(N,S){try{p(a[N](S))}catch(k){y(c[0][3],k)}}function p(N){N.value instanceof Le?Promise.resolve(N.value.v).then(g,v):y(c[0][2],N)}function g(N){m("next",N)}function v(N){m("throw",N)}function y(N,S){N(S),c.shift(),c.length&&m(c[0][0],c[0][1])}}function Fs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],s;return e?e.call(t):(t=typeof Lx=="function"?Lx(t):t[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(c){s[c]=t[c]&&function(d){return new Promise(function(f,m){d=t[c](d),r(f,m,d.done,d.value)})}}function r(c,d,f,m){Promise.resolve(m).then(function(p){c({value:p,done:f})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TT(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const s=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return s===void 0?!1:Kg(s)}function Kg(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ET(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Bx(t){if(t===void 0||t.length===0)return[];const e=[],s=t.length;let a=0;for(;a<s;)if(t[a].role==="user")e.push(t[a]),a++;else{const r=[];let c=!0;for(;a<s&&t[a].role==="model";)r.push(t[a]),c&&!Kg(t[a])&&(c=!1),a++;c?e.push(...r):e.pop()}return e}class CT{constructor(e,s){this.modelsModule=e,this.apiClient=s}create(e){return new jT(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class jT{constructor(e,s,a,r={},c=[]){this.apiClient=e,this.modelsModule=s,this.model=a,this.config=r,this.history=c,this.sendPromise=Promise.resolve(),ET(c)}async sendMessage(e){var s;await this.sendPromise;const a=Qt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(s=e.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var c,d,f;const m=await r,p=(d=(c=m.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content,g=m.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let y=[];g!=null&&(y=(f=g.slice(v))!==null&&f!==void 0?f:[]);const N=p?[p]:[];this.recordHistory(a,N,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var s;await this.sendPromise;const a=Qt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(s=e.config)!==null&&s!==void 0?s:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const c=await r;return this.processStreamResponse(c,a)}getHistory(e=!1){const s=e?Bx(this.history):this.history;return structuredClone(s)}processStreamResponse(e,s){return $s(this,arguments,function*(){var r,c,d,f,m,p;const g=[];try{for(var v=!0,y=Fs(e),N;N=yield Le(y.next()),r=N.done,!r;v=!0){f=N.value,v=!1;const S=f;if(TT(S)){const k=(p=(m=S.candidates)===null||m===void 0?void 0:m[0])===null||p===void 0?void 0:p.content;k!==void 0&&g.push(k)}yield yield Le(S)}}catch(S){c={error:S}}finally{try{!v&&!r&&(d=y.return)&&(yield Le(d.call(y)))}finally{if(c)throw c.error}}this.recordHistory(s,g)})}recordHistory(e,s,a){let r=[];s.length>0&&s.every(c=>c.role!==void 0)?r=s:r.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...Bx(a)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Il extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Il.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AT(t){const e={},s=h(t,["file"]);return s!=null&&x(e,["file"],s),e}function RT(t){const e={},s=h(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}function IT(t){const e={},s=h(t,["name"]);return s!=null&&x(e,["_url","file"],Hg(s)),e}function MT(t){const e={},s=h(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}function DT(t){const e={},s=h(t,["name"]);return s!=null&&x(e,["_url","file"],Hg(s)),e}function OT(t){const e={},s=h(t,["uris"]);return s!=null&&x(e,["uris"],s),e}function UT(t,e){const s={},a=h(t,["pageSize"]);e!==void 0&&a!=null&&x(e,["_query","pageSize"],a);const r=h(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),s}function PT(t){const e={},s=h(t,["config"]);return s!=null&&UT(s,e),e}function LT(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["nextPageToken"]);a!=null&&x(e,["nextPageToken"],a);const r=h(t,["files"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["files"],c)}return e}function BT(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["files"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),x(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GT extends vn{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new yi(gn.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(s),s)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(s=>s)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=PT(e);return c=_e("files",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),r.then(m=>{const p=LT(m),g=new q_;return Object.assign(g,p),g})}}async createInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=AT(e);return c=_e("upload/v1beta/files",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>{const p=RT(m),g=new V_;return Object.assign(g,p),g})}}async get(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=DT(e);return c=_e("files/{file}",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=IT(e);return c=_e("files/{file}",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),r.then(m=>{const p=MT(m),g=new H_;return Object.assign(g,p),g})}}async registerFilesInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=OT(e);return c=_e("files:register",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>{const p=BT(m),g=new $_;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oo(t){const e={},s=h(t,["data"]);if(s!=null&&x(e,["data"],s),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=h(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}function qT(t){const e={},s=h(t,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>nE(c))),x(e,["parts"],r)}const a=h(t,["role"]);return a!=null&&x(e,["role"],a),e}function VT(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const a=h(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}function HT(t){const e={},s=h(t,["id"]);s!=null&&x(e,["id"],s);const a=h(t,["args"]);a!=null&&x(e,["args"],a);const r=h(t,["name"]);if(r!=null&&x(e,["name"],r),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $T(t){const e={},s=h(t,["description"]);s!=null&&x(e,["description"],s);const a=h(t,["name"]);a!=null&&x(e,["name"],a);const r=h(t,["parameters"]);r!=null&&x(e,["parameters"],r);const c=h(t,["parametersJsonSchema"]);c!=null&&x(e,["parametersJsonSchema"],c);const d=h(t,["response"]);d!=null&&x(e,["response"],d);const f=h(t,["responseJsonSchema"]);if(f!=null&&x(e,["responseJsonSchema"],f),h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function FT(t){const e={},s=h(t,["modelSelectionConfig"]);s!=null&&x(e,["modelConfig"],s);const a=h(t,["responseJsonSchema"]);a!=null&&x(e,["responseJsonSchema"],a);const r=h(t,["audioTimestamp"]);r!=null&&x(e,["audioTimestamp"],r);const c=h(t,["candidateCount"]);c!=null&&x(e,["candidateCount"],c);const d=h(t,["enableAffectiveDialog"]);d!=null&&x(e,["enableAffectiveDialog"],d);const f=h(t,["frequencyPenalty"]);f!=null&&x(e,["frequencyPenalty"],f);const m=h(t,["logprobs"]);m!=null&&x(e,["logprobs"],m);const p=h(t,["maxOutputTokens"]);p!=null&&x(e,["maxOutputTokens"],p);const g=h(t,["mediaResolution"]);g!=null&&x(e,["mediaResolution"],g);const v=h(t,["presencePenalty"]);v!=null&&x(e,["presencePenalty"],v);const y=h(t,["responseLogprobs"]);y!=null&&x(e,["responseLogprobs"],y);const N=h(t,["responseMimeType"]);N!=null&&x(e,["responseMimeType"],N);const S=h(t,["responseModalities"]);S!=null&&x(e,["responseModalities"],S);const k=h(t,["responseSchema"]);k!=null&&x(e,["responseSchema"],k);const E=h(t,["routingConfig"]);E!=null&&x(e,["routingConfig"],E);const T=h(t,["seed"]);T!=null&&x(e,["seed"],T);const M=h(t,["speechConfig"]);M!=null&&x(e,["speechConfig"],M);const C=h(t,["stopSequences"]);C!=null&&x(e,["stopSequences"],C);const D=h(t,["temperature"]);D!=null&&x(e,["temperature"],D);const R=h(t,["thinkingConfig"]);R!=null&&x(e,["thinkingConfig"],R);const B=h(t,["topK"]);B!=null&&x(e,["topK"],B);const G=h(t,["topP"]);if(G!=null&&x(e,["topP"],G),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function zT(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=h(t,["enableWidget"]);return s!=null&&x(e,["enableWidget"],s),e}function JT(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=h(t,["timeRangeFilter"]);return s!=null&&x(e,["timeRangeFilter"],s),e}function WT(t,e){const s={},a=h(t,["generationConfig"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig"],a);const r=h(t,["responseModalities"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","responseModalities"],r);const c=h(t,["temperature"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","temperature"],c);const d=h(t,["topP"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topP"],d);const f=h(t,["topK"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","topK"],f);const m=h(t,["maxOutputTokens"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","maxOutputTokens"],m);const p=h(t,["mediaResolution"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","mediaResolution"],p);const g=h(t,["seed"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","seed"],g);const v=h(t,["speechConfig"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","speechConfig"],Vu(v));const y=h(t,["thinkingConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","thinkingConfig"],y);const N=h(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],N);const S=h(t,["systemInstruction"]);e!==void 0&&S!=null&&x(e,["setup","systemInstruction"],qT(Qt(S)));const k=h(t,["tools"]);if(e!==void 0&&k!=null){let B=_a(k);Array.isArray(B)&&(B=B.map(G=>aE(Sa(G)))),x(e,["setup","tools"],B)}const E=h(t,["sessionResumption"]);e!==void 0&&E!=null&&x(e,["setup","sessionResumption"],iE(E));const T=h(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&x(e,["setup","inputAudioTranscription"],T);const M=h(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&x(e,["setup","outputAudioTranscription"],M);const C=h(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&x(e,["setup","realtimeInputConfig"],C);const D=h(t,["contextWindowCompression"]);e!==void 0&&D!=null&&x(e,["setup","contextWindowCompression"],D);const R=h(t,["proactivity"]);if(e!==void 0&&R!=null&&x(e,["setup","proactivity"],R),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function YT(t,e){const s={},a=h(t,["generationConfig"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig"],FT(a));const r=h(t,["responseModalities"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","responseModalities"],r);const c=h(t,["temperature"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","temperature"],c);const d=h(t,["topP"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topP"],d);const f=h(t,["topK"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","topK"],f);const m=h(t,["maxOutputTokens"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","maxOutputTokens"],m);const p=h(t,["mediaResolution"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","mediaResolution"],p);const g=h(t,["seed"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","seed"],g);const v=h(t,["speechConfig"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","speechConfig"],Vu(v));const y=h(t,["thinkingConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","thinkingConfig"],y);const N=h(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],N);const S=h(t,["systemInstruction"]);e!==void 0&&S!=null&&x(e,["setup","systemInstruction"],Qt(S));const k=h(t,["tools"]);if(e!==void 0&&k!=null){let G=_a(k);Array.isArray(G)&&(G=G.map(H=>lE(Sa(H)))),x(e,["setup","tools"],G)}const E=h(t,["sessionResumption"]);e!==void 0&&E!=null&&x(e,["setup","sessionResumption"],E);const T=h(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&x(e,["setup","inputAudioTranscription"],T);const M=h(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&x(e,["setup","outputAudioTranscription"],M);const C=h(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&x(e,["setup","realtimeInputConfig"],C);const D=h(t,["contextWindowCompression"]);e!==void 0&&D!=null&&x(e,["setup","contextWindowCompression"],D);const R=h(t,["proactivity"]);e!==void 0&&R!=null&&x(e,["setup","proactivity"],R);const B=h(t,["explicitVadSignal"]);return e!==void 0&&B!=null&&x(e,["setup","explicitVadSignal"],B),s}function KT(t,e){const s={},a=h(e,["model"]);a!=null&&x(s,["setup","model"],nt(t,a));const r=h(e,["config"]);return r!=null&&x(s,["config"],WT(r,s)),s}function XT(t,e){const s={},a=h(e,["model"]);a!=null&&x(s,["setup","model"],nt(t,a));const r=h(e,["config"]);return r!=null&&x(s,["config"],YT(r,s)),s}function QT(t){const e={},s=h(t,["musicGenerationConfig"]);return s!=null&&x(e,["musicGenerationConfig"],s),e}function ZT(t){const e={},s=h(t,["weightedPrompts"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(r=>r)),x(e,["weightedPrompts"],a)}return e}function eE(t){const e={},s=h(t,["media"]);if(s!=null){let p=Lg(s);Array.isArray(p)&&(p=p.map(g=>oo(g))),x(e,["mediaChunks"],p)}const a=h(t,["audio"]);a!=null&&x(e,["audio"],oo(Gg(a)));const r=h(t,["audioStreamEnd"]);r!=null&&x(e,["audioStreamEnd"],r);const c=h(t,["video"]);c!=null&&x(e,["video"],oo(Bg(c)));const d=h(t,["text"]);d!=null&&x(e,["text"],d);const f=h(t,["activityStart"]);f!=null&&x(e,["activityStart"],f);const m=h(t,["activityEnd"]);return m!=null&&x(e,["activityEnd"],m),e}function tE(t){const e={},s=h(t,["media"]);if(s!=null){let p=Lg(s);Array.isArray(p)&&(p=p.map(g=>g)),x(e,["mediaChunks"],p)}const a=h(t,["audio"]);a!=null&&x(e,["audio"],Gg(a));const r=h(t,["audioStreamEnd"]);r!=null&&x(e,["audioStreamEnd"],r);const c=h(t,["video"]);c!=null&&x(e,["video"],Bg(c));const d=h(t,["text"]);d!=null&&x(e,["text"],d);const f=h(t,["activityStart"]);f!=null&&x(e,["activityStart"],f);const m=h(t,["activityEnd"]);return m!=null&&x(e,["activityEnd"],m),e}function sE(t){const e={},s=h(t,["setupComplete"]);s!=null&&x(e,["setupComplete"],s);const a=h(t,["serverContent"]);a!=null&&x(e,["serverContent"],a);const r=h(t,["toolCall"]);r!=null&&x(e,["toolCall"],r);const c=h(t,["toolCallCancellation"]);c!=null&&x(e,["toolCallCancellation"],c);const d=h(t,["usageMetadata"]);d!=null&&x(e,["usageMetadata"],rE(d));const f=h(t,["goAway"]);f!=null&&x(e,["goAway"],f);const m=h(t,["sessionResumptionUpdate"]);m!=null&&x(e,["sessionResumptionUpdate"],m);const p=h(t,["voiceActivityDetectionSignal"]);p!=null&&x(e,["voiceActivityDetectionSignal"],p);const g=h(t,["voiceActivity"]);return g!=null&&x(e,["voiceActivity"],oE(g)),e}function nE(t){const e={},s=h(t,["mediaResolution"]);s!=null&&x(e,["mediaResolution"],s);const a=h(t,["codeExecutionResult"]);a!=null&&x(e,["codeExecutionResult"],a);const r=h(t,["executableCode"]);r!=null&&x(e,["executableCode"],r);const c=h(t,["fileData"]);c!=null&&x(e,["fileData"],VT(c));const d=h(t,["functionCall"]);d!=null&&x(e,["functionCall"],HT(d));const f=h(t,["functionResponse"]);f!=null&&x(e,["functionResponse"],f);const m=h(t,["inlineData"]);m!=null&&x(e,["inlineData"],oo(m));const p=h(t,["text"]);p!=null&&x(e,["text"],p);const g=h(t,["thought"]);g!=null&&x(e,["thought"],g);const v=h(t,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const y=h(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function iE(t){const e={},s=h(t,["handle"]);if(s!=null&&x(e,["handle"],s),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function aE(t){const e={};if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(t,["computerUse"]);s!=null&&x(e,["computerUse"],s);const a=h(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const r=h(t,["codeExecution"]);if(r!=null&&x(e,["codeExecution"],r),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=h(t,["functionDeclarations"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),x(e,["functionDeclarations"],g)}const d=h(t,["googleMaps"]);d!=null&&x(e,["googleMaps"],zT(d));const f=h(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],JT(f));const m=h(t,["googleSearchRetrieval"]);m!=null&&x(e,["googleSearchRetrieval"],m);const p=h(t,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}function lE(t){const e={},s=h(t,["retrieval"]);s!=null&&x(e,["retrieval"],s);const a=h(t,["computerUse"]);if(a!=null&&x(e,["computerUse"],a),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=h(t,["codeExecution"]);r!=null&&x(e,["codeExecution"],r);const c=h(t,["enterpriseWebSearch"]);c!=null&&x(e,["enterpriseWebSearch"],c);const d=h(t,["functionDeclarations"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(y=>$T(y))),x(e,["functionDeclarations"],v)}const f=h(t,["googleMaps"]);f!=null&&x(e,["googleMaps"],f);const m=h(t,["googleSearch"]);m!=null&&x(e,["googleSearch"],m);const p=h(t,["googleSearchRetrieval"]);p!=null&&x(e,["googleSearchRetrieval"],p);const g=h(t,["urlContext"]);return g!=null&&x(e,["urlContext"],g),e}function rE(t){const e={},s=h(t,["promptTokenCount"]);s!=null&&x(e,["promptTokenCount"],s);const a=h(t,["cachedContentTokenCount"]);a!=null&&x(e,["cachedContentTokenCount"],a);const r=h(t,["candidatesTokenCount"]);r!=null&&x(e,["responseTokenCount"],r);const c=h(t,["toolUsePromptTokenCount"]);c!=null&&x(e,["toolUsePromptTokenCount"],c);const d=h(t,["thoughtsTokenCount"]);d!=null&&x(e,["thoughtsTokenCount"],d);const f=h(t,["totalTokenCount"]);f!=null&&x(e,["totalTokenCount"],f);const m=h(t,["promptTokensDetails"]);if(m!=null){let N=m;Array.isArray(N)&&(N=N.map(S=>S)),x(e,["promptTokensDetails"],N)}const p=h(t,["cacheTokensDetails"]);if(p!=null){let N=p;Array.isArray(N)&&(N=N.map(S=>S)),x(e,["cacheTokensDetails"],N)}const g=h(t,["candidatesTokensDetails"]);if(g!=null){let N=g;Array.isArray(N)&&(N=N.map(S=>S)),x(e,["responseTokensDetails"],N)}const v=h(t,["toolUsePromptTokensDetails"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(S=>S)),x(e,["toolUsePromptTokensDetails"],N)}const y=h(t,["trafficType"]);return y!=null&&x(e,["trafficType"],y),e}function oE(t){const e={},s=h(t,["type"]);return s!=null&&x(e,["voiceActivityType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cE(t,e){const s={},a=h(t,["data"]);if(a!=null&&x(s,["data"],a),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=h(t,["mimeType"]);return r!=null&&x(s,["mimeType"],r),s}function dE(t,e){const s={},a=h(t,["content"]);a!=null&&x(s,["content"],a);const r=h(t,["citationMetadata"]);r!=null&&x(s,["citationMetadata"],uE(r));const c=h(t,["tokenCount"]);c!=null&&x(s,["tokenCount"],c);const d=h(t,["finishReason"]);d!=null&&x(s,["finishReason"],d);const f=h(t,["avgLogprobs"]);f!=null&&x(s,["avgLogprobs"],f);const m=h(t,["groundingMetadata"]);m!=null&&x(s,["groundingMetadata"],m);const p=h(t,["index"]);p!=null&&x(s,["index"],p);const g=h(t,["logprobsResult"]);g!=null&&x(s,["logprobsResult"],g);const v=h(t,["safetyRatings"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(S=>S)),x(s,["safetyRatings"],N)}const y=h(t,["urlContextMetadata"]);return y!=null&&x(s,["urlContextMetadata"],y),s}function uE(t,e){const s={},a=h(t,["citationSources"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),x(s,["citations"],r)}return s}function fE(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["contents"]);if(c!=null){let d=Ms(c);Array.isArray(d)&&(d=d.map(f=>f)),x(a,["contents"],d)}return a}function hE(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["tokensInfo"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),x(s,["tokensInfo"],c)}return s}function pE(t,e){const s={},a=h(t,["values"]);a!=null&&x(s,["values"],a);const r=h(t,["statistics"]);return r!=null&&x(s,["statistics"],mE(r)),s}function mE(t,e){const s={},a=h(t,["truncated"]);a!=null&&x(s,["truncated"],a);const r=h(t,["token_count"]);return r!=null&&x(s,["tokenCount"],r),s}function _o(t,e){const s={},a=h(t,["parts"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>_C(d))),x(s,["parts"],c)}const r=h(t,["role"]);return r!=null&&x(s,["role"],r),s}function xE(t,e){const s={},a=h(t,["controlType"]);a!=null&&x(s,["controlType"],a);const r=h(t,["enableControlImageComputation"]);return r!=null&&x(s,["computeControl"],r),s}function gE(t,e){const s={};if(h(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(h(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(h(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return s}function bE(t,e,s){const a={},r=h(t,["systemInstruction"]);e!==void 0&&r!=null&&x(e,["systemInstruction"],Qt(r));const c=h(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>eb(m))),x(e,["tools"],f)}const d=h(t,["generationConfig"]);return e!==void 0&&d!=null&&x(e,["generationConfig"],cC(d)),a}function vE(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["contents"]);if(c!=null){let f=Ms(c);Array.isArray(f)&&(f=f.map(m=>_o(m))),x(a,["contents"],f)}const d=h(e,["config"]);return d!=null&&gE(d),a}function yE(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["contents"]);if(c!=null){let f=Ms(c);Array.isArray(f)&&(f=f.map(m=>m)),x(a,["contents"],f)}const d=h(e,["config"]);return d!=null&&bE(d,a),a}function wE(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["totalTokens"]);r!=null&&x(s,["totalTokens"],r);const c=h(t,["cachedContentTokenCount"]);return c!=null&&x(s,["cachedContentTokenCount"],c),s}function NE(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["totalTokens"]);return r!=null&&x(s,["totalTokens"],r),s}function SE(t,e,s){const a={},r=h(e,["model"]);return r!=null&&x(a,["_url","name"],nt(t,r)),a}function _E(t,e,s){const a={},r=h(e,["model"]);return r!=null&&x(a,["_url","name"],nt(t,r)),a}function kE(t,e){const s={},a=h(t,["sdkHttpResponse"]);return a!=null&&x(s,["sdkHttpResponse"],a),s}function TE(t,e){const s={},a=h(t,["sdkHttpResponse"]);return a!=null&&x(s,["sdkHttpResponse"],a),s}function EE(t,e,s){const a={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const c=h(t,["negativePrompt"]);e!==void 0&&c!=null&&x(e,["parameters","negativePrompt"],c);const d=h(t,["numberOfImages"]);e!==void 0&&d!=null&&x(e,["parameters","sampleCount"],d);const f=h(t,["aspectRatio"]);e!==void 0&&f!=null&&x(e,["parameters","aspectRatio"],f);const m=h(t,["guidanceScale"]);e!==void 0&&m!=null&&x(e,["parameters","guidanceScale"],m);const p=h(t,["seed"]);e!==void 0&&p!=null&&x(e,["parameters","seed"],p);const g=h(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&x(e,["parameters","safetySetting"],g);const v=h(t,["personGeneration"]);e!==void 0&&v!=null&&x(e,["parameters","personGeneration"],v);const y=h(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&x(e,["parameters","includeSafetyAttributes"],y);const N=h(t,["includeRaiReason"]);e!==void 0&&N!=null&&x(e,["parameters","includeRaiReason"],N);const S=h(t,["language"]);e!==void 0&&S!=null&&x(e,["parameters","language"],S);const k=h(t,["outputMimeType"]);e!==void 0&&k!=null&&x(e,["parameters","outputOptions","mimeType"],k);const E=h(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&x(e,["parameters","outputOptions","compressionQuality"],E);const T=h(t,["addWatermark"]);e!==void 0&&T!=null&&x(e,["parameters","addWatermark"],T);const M=h(t,["labels"]);e!==void 0&&M!=null&&x(e,["labels"],M);const C=h(t,["editMode"]);e!==void 0&&C!=null&&x(e,["parameters","editMode"],C);const D=h(t,["baseSteps"]);return e!==void 0&&D!=null&&x(e,["parameters","editConfig","baseSteps"],D),a}function CE(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["prompt"]);c!=null&&x(a,["instances[0]","prompt"],c);const d=h(e,["referenceImages"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(p=>AC(p))),x(a,["instances[0]","referenceImages"],m)}const f=h(e,["config"]);return f!=null&&EE(f,a),a}function jE(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>ko(d))),x(s,["generatedImages"],c)}return s}function AE(t,e,s){const a={},r=h(t,["taskType"]);e!==void 0&&r!=null&&x(e,["requests[]","taskType"],r);const c=h(t,["title"]);e!==void 0&&c!=null&&x(e,["requests[]","title"],c);const d=h(t,["outputDimensionality"]);if(e!==void 0&&d!=null&&x(e,["requests[]","outputDimensionality"],d),h(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(h(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return a}function RE(t,e,s){const a={},r=h(t,["taskType"]);e!==void 0&&r!=null&&x(e,["instances[]","task_type"],r);const c=h(t,["title"]);e!==void 0&&c!=null&&x(e,["instances[]","title"],c);const d=h(t,["outputDimensionality"]);e!==void 0&&d!=null&&x(e,["parameters","outputDimensionality"],d);const f=h(t,["mimeType"]);e!==void 0&&f!=null&&x(e,["instances[]","mimeType"],f);const m=h(t,["autoTruncate"]);return e!==void 0&&m!=null&&x(e,["parameters","autoTruncate"],m),a}function IE(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["contents"]);if(c!=null){let m=Bu(t,c);Array.isArray(m)&&(m=m.map(p=>p)),x(a,["requests[]","content"],m)}const d=h(e,["config"]);d!=null&&AE(d,a);const f=h(e,["model"]);return f!==void 0&&x(a,["requests[]","model"],nt(t,f)),a}function ME(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["contents"]);if(c!=null){let f=Bu(t,c);Array.isArray(f)&&(f=f.map(m=>m)),x(a,["instances[]","content"],f)}const d=h(e,["config"]);return d!=null&&RE(d,a),a}function DE(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["embeddings"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),x(s,["embeddings"],d)}const c=h(t,["metadata"]);return c!=null&&x(s,["metadata"],c),s}function OE(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["predictions[]","embeddings"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>pE(f))),x(s,["embeddings"],d)}const c=h(t,["metadata"]);return c!=null&&x(s,["metadata"],c),s}function UE(t,e){const s={},a=h(t,["endpoint"]);a!=null&&x(s,["name"],a);const r=h(t,["deployedModelId"]);return r!=null&&x(s,["deployedModelId"],r),s}function PE(t,e){const s={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=h(t,["fileUri"]);a!=null&&x(s,["fileUri"],a);const r=h(t,["mimeType"]);return r!=null&&x(s,["mimeType"],r),s}function LE(t,e){const s={},a=h(t,["id"]);a!=null&&x(s,["id"],a);const r=h(t,["args"]);r!=null&&x(s,["args"],r);const c=h(t,["name"]);if(c!=null&&x(s,["name"],c),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return s}function BE(t,e){const s={},a=h(t,["allowedFunctionNames"]);a!=null&&x(s,["allowedFunctionNames"],a);const r=h(t,["mode"]);if(r!=null&&x(s,["mode"],r),h(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return s}function GE(t,e){const s={},a=h(t,["description"]);a!=null&&x(s,["description"],a);const r=h(t,["name"]);r!=null&&x(s,["name"],r);const c=h(t,["parameters"]);c!=null&&x(s,["parameters"],c);const d=h(t,["parametersJsonSchema"]);d!=null&&x(s,["parametersJsonSchema"],d);const f=h(t,["response"]);f!=null&&x(s,["response"],f);const m=h(t,["responseJsonSchema"]);if(m!=null&&x(s,["responseJsonSchema"],m),h(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return s}function qE(t,e,s,a){const r={},c=h(e,["systemInstruction"]);s!==void 0&&c!=null&&x(s,["systemInstruction"],_o(Qt(c)));const d=h(e,["temperature"]);d!=null&&x(r,["temperature"],d);const f=h(e,["topP"]);f!=null&&x(r,["topP"],f);const m=h(e,["topK"]);m!=null&&x(r,["topK"],m);const p=h(e,["candidateCount"]);p!=null&&x(r,["candidateCount"],p);const g=h(e,["maxOutputTokens"]);g!=null&&x(r,["maxOutputTokens"],g);const v=h(e,["stopSequences"]);v!=null&&x(r,["stopSequences"],v);const y=h(e,["responseLogprobs"]);y!=null&&x(r,["responseLogprobs"],y);const N=h(e,["logprobs"]);N!=null&&x(r,["logprobs"],N);const S=h(e,["presencePenalty"]);S!=null&&x(r,["presencePenalty"],S);const k=h(e,["frequencyPenalty"]);k!=null&&x(r,["frequencyPenalty"],k);const E=h(e,["seed"]);E!=null&&x(r,["seed"],E);const T=h(e,["responseMimeType"]);T!=null&&x(r,["responseMimeType"],T);const M=h(e,["responseSchema"]);M!=null&&x(r,["responseSchema"],Gu(M));const C=h(e,["responseJsonSchema"]);if(C!=null&&x(r,["responseJsonSchema"],C),h(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(h(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=h(e,["safetySettings"]);if(s!==void 0&&D!=null){let J=D;Array.isArray(J)&&(J=J.map(pe=>RC(pe))),x(s,["safetySettings"],J)}const R=h(e,["tools"]);if(s!==void 0&&R!=null){let J=_a(R);Array.isArray(J)&&(J=J.map(pe=>LC(Sa(pe)))),x(s,["tools"],J)}const B=h(e,["toolConfig"]);if(s!==void 0&&B!=null&&x(s,["toolConfig"],PC(B)),h(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=h(e,["cachedContent"]);s!==void 0&&G!=null&&x(s,["cachedContent"],yn(t,G));const H=h(e,["responseModalities"]);H!=null&&x(r,["responseModalities"],H);const z=h(e,["mediaResolution"]);z!=null&&x(r,["mediaResolution"],z);const P=h(e,["speechConfig"]);if(P!=null&&x(r,["speechConfig"],qu(P)),h(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ne=h(e,["thinkingConfig"]);ne!=null&&x(r,["thinkingConfig"],ne);const le=h(e,["imageConfig"]);le!=null&&x(r,["imageConfig"],pC(le));const ie=h(e,["enableEnhancedCivicAnswers"]);if(ie!=null&&x(r,["enableEnhancedCivicAnswers"],ie),h(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function VE(t,e,s,a){const r={},c=h(e,["systemInstruction"]);s!==void 0&&c!=null&&x(s,["systemInstruction"],Qt(c));const d=h(e,["temperature"]);d!=null&&x(r,["temperature"],d);const f=h(e,["topP"]);f!=null&&x(r,["topP"],f);const m=h(e,["topK"]);m!=null&&x(r,["topK"],m);const p=h(e,["candidateCount"]);p!=null&&x(r,["candidateCount"],p);const g=h(e,["maxOutputTokens"]);g!=null&&x(r,["maxOutputTokens"],g);const v=h(e,["stopSequences"]);v!=null&&x(r,["stopSequences"],v);const y=h(e,["responseLogprobs"]);y!=null&&x(r,["responseLogprobs"],y);const N=h(e,["logprobs"]);N!=null&&x(r,["logprobs"],N);const S=h(e,["presencePenalty"]);S!=null&&x(r,["presencePenalty"],S);const k=h(e,["frequencyPenalty"]);k!=null&&x(r,["frequencyPenalty"],k);const E=h(e,["seed"]);E!=null&&x(r,["seed"],E);const T=h(e,["responseMimeType"]);T!=null&&x(r,["responseMimeType"],T);const M=h(e,["responseSchema"]);M!=null&&x(r,["responseSchema"],Gu(M));const C=h(e,["responseJsonSchema"]);C!=null&&x(r,["responseJsonSchema"],C);const D=h(e,["routingConfig"]);D!=null&&x(r,["routingConfig"],D);const R=h(e,["modelSelectionConfig"]);R!=null&&x(r,["modelConfig"],R);const B=h(e,["safetySettings"]);if(s!==void 0&&B!=null){let V=B;Array.isArray(V)&&(V=V.map(he=>he)),x(s,["safetySettings"],V)}const G=h(e,["tools"]);if(s!==void 0&&G!=null){let V=_a(G);Array.isArray(V)&&(V=V.map(he=>eb(Sa(he)))),x(s,["tools"],V)}const H=h(e,["toolConfig"]);s!==void 0&&H!=null&&x(s,["toolConfig"],H);const z=h(e,["labels"]);s!==void 0&&z!=null&&x(s,["labels"],z);const P=h(e,["cachedContent"]);s!==void 0&&P!=null&&x(s,["cachedContent"],yn(t,P));const ne=h(e,["responseModalities"]);ne!=null&&x(r,["responseModalities"],ne);const le=h(e,["mediaResolution"]);le!=null&&x(r,["mediaResolution"],le);const ie=h(e,["speechConfig"]);ie!=null&&x(r,["speechConfig"],qu(ie));const J=h(e,["audioTimestamp"]);J!=null&&x(r,["audioTimestamp"],J);const pe=h(e,["thinkingConfig"]);pe!=null&&x(r,["thinkingConfig"],pe);const U=h(e,["imageConfig"]);if(U!=null&&x(r,["imageConfig"],mC(U)),h(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const O=h(e,["modelArmorConfig"]);return s!==void 0&&O!=null&&x(s,["modelArmorConfig"],O),r}function Gx(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["contents"]);if(c!=null){let f=Ms(c);Array.isArray(f)&&(f=f.map(m=>_o(m))),x(a,["contents"],f)}const d=h(e,["config"]);return d!=null&&x(a,["generationConfig"],qE(t,d,a)),a}function qx(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["contents"]);if(c!=null){let f=Ms(c);Array.isArray(f)&&(f=f.map(m=>m)),x(a,["contents"],f)}const d=h(e,["config"]);return d!=null&&x(a,["generationConfig"],VE(t,d,a)),a}function Vx(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(g=>dE(g))),x(s,["candidates"],p)}const c=h(t,["modelVersion"]);c!=null&&x(s,["modelVersion"],c);const d=h(t,["promptFeedback"]);d!=null&&x(s,["promptFeedback"],d);const f=h(t,["responseId"]);f!=null&&x(s,["responseId"],f);const m=h(t,["usageMetadata"]);return m!=null&&x(s,["usageMetadata"],m),s}function Hx(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["candidates"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(v=>v)),x(s,["candidates"],g)}const c=h(t,["createTime"]);c!=null&&x(s,["createTime"],c);const d=h(t,["modelVersion"]);d!=null&&x(s,["modelVersion"],d);const f=h(t,["promptFeedback"]);f!=null&&x(s,["promptFeedback"],f);const m=h(t,["responseId"]);m!=null&&x(s,["responseId"],m);const p=h(t,["usageMetadata"]);return p!=null&&x(s,["usageMetadata"],p),s}function HE(t,e,s){const a={};if(h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const c=h(t,["aspectRatio"]);e!==void 0&&c!=null&&x(e,["parameters","aspectRatio"],c);const d=h(t,["guidanceScale"]);if(e!==void 0&&d!=null&&x(e,["parameters","guidanceScale"],d),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=h(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&x(e,["parameters","safetySetting"],f);const m=h(t,["personGeneration"]);e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m);const p=h(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&x(e,["parameters","includeSafetyAttributes"],p);const g=h(t,["includeRaiReason"]);e!==void 0&&g!=null&&x(e,["parameters","includeRaiReason"],g);const v=h(t,["language"]);e!==void 0&&v!=null&&x(e,["parameters","language"],v);const y=h(t,["outputMimeType"]);e!==void 0&&y!=null&&x(e,["parameters","outputOptions","mimeType"],y);const N=h(t,["outputCompressionQuality"]);if(e!==void 0&&N!=null&&x(e,["parameters","outputOptions","compressionQuality"],N),h(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=h(t,["imageSize"]);if(e!==void 0&&S!=null&&x(e,["parameters","sampleImageSize"],S),h(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return a}function $E(t,e,s){const a={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const c=h(t,["negativePrompt"]);e!==void 0&&c!=null&&x(e,["parameters","negativePrompt"],c);const d=h(t,["numberOfImages"]);e!==void 0&&d!=null&&x(e,["parameters","sampleCount"],d);const f=h(t,["aspectRatio"]);e!==void 0&&f!=null&&x(e,["parameters","aspectRatio"],f);const m=h(t,["guidanceScale"]);e!==void 0&&m!=null&&x(e,["parameters","guidanceScale"],m);const p=h(t,["seed"]);e!==void 0&&p!=null&&x(e,["parameters","seed"],p);const g=h(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&x(e,["parameters","safetySetting"],g);const v=h(t,["personGeneration"]);e!==void 0&&v!=null&&x(e,["parameters","personGeneration"],v);const y=h(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&x(e,["parameters","includeSafetyAttributes"],y);const N=h(t,["includeRaiReason"]);e!==void 0&&N!=null&&x(e,["parameters","includeRaiReason"],N);const S=h(t,["language"]);e!==void 0&&S!=null&&x(e,["parameters","language"],S);const k=h(t,["outputMimeType"]);e!==void 0&&k!=null&&x(e,["parameters","outputOptions","mimeType"],k);const E=h(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&x(e,["parameters","outputOptions","compressionQuality"],E);const T=h(t,["addWatermark"]);e!==void 0&&T!=null&&x(e,["parameters","addWatermark"],T);const M=h(t,["labels"]);e!==void 0&&M!=null&&x(e,["labels"],M);const C=h(t,["imageSize"]);e!==void 0&&C!=null&&x(e,["parameters","sampleImageSize"],C);const D=h(t,["enhancePrompt"]);return e!==void 0&&D!=null&&x(e,["parameters","enhancePrompt"],D),a}function FE(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["prompt"]);c!=null&&x(a,["instances[0]","prompt"],c);const d=h(e,["config"]);return d!=null&&HE(d,a),a}function zE(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["prompt"]);c!=null&&x(a,["instances[0]","prompt"],c);const d=h(e,["config"]);return d!=null&&$E(d,a),a}function JE(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>aC(f))),x(s,["generatedImages"],d)}const c=h(t,["positivePromptSafetyAttributes"]);return c!=null&&x(s,["positivePromptSafetyAttributes"],Qg(c)),s}function WE(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>ko(f))),x(s,["generatedImages"],d)}const c=h(t,["positivePromptSafetyAttributes"]);return c!=null&&x(s,["positivePromptSafetyAttributes"],Zg(c)),s}function YE(t,e,s){const a={},r=h(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r),h(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(h(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const c=h(t,["durationSeconds"]);if(e!==void 0&&c!=null&&x(e,["parameters","durationSeconds"],c),h(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=h(t,["aspectRatio"]);e!==void 0&&d!=null&&x(e,["parameters","aspectRatio"],d);const f=h(t,["resolution"]);e!==void 0&&f!=null&&x(e,["parameters","resolution"],f);const m=h(t,["personGeneration"]);if(e!==void 0&&m!=null&&x(e,["parameters","personGeneration"],m),h(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=h(t,["negativePrompt"]);e!==void 0&&p!=null&&x(e,["parameters","negativePrompt"],p);const g=h(t,["enhancePrompt"]);if(e!==void 0&&g!=null&&x(e,["parameters","enhancePrompt"],g),h(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=h(t,["lastFrame"]);e!==void 0&&v!=null&&x(e,["instances[0]","lastFrame"],To(v));const y=h(t,["referenceImages"]);if(e!==void 0&&y!=null){let N=y;Array.isArray(N)&&(N=N.map(S=>XC(S))),x(e,["instances[0]","referenceImages"],N)}if(h(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(h(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return a}function KE(t,e,s){const a={},r=h(t,["numberOfVideos"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const c=h(t,["outputGcsUri"]);e!==void 0&&c!=null&&x(e,["parameters","storageUri"],c);const d=h(t,["fps"]);e!==void 0&&d!=null&&x(e,["parameters","fps"],d);const f=h(t,["durationSeconds"]);e!==void 0&&f!=null&&x(e,["parameters","durationSeconds"],f);const m=h(t,["seed"]);e!==void 0&&m!=null&&x(e,["parameters","seed"],m);const p=h(t,["aspectRatio"]);e!==void 0&&p!=null&&x(e,["parameters","aspectRatio"],p);const g=h(t,["resolution"]);e!==void 0&&g!=null&&x(e,["parameters","resolution"],g);const v=h(t,["personGeneration"]);e!==void 0&&v!=null&&x(e,["parameters","personGeneration"],v);const y=h(t,["pubsubTopic"]);e!==void 0&&y!=null&&x(e,["parameters","pubsubTopic"],y);const N=h(t,["negativePrompt"]);e!==void 0&&N!=null&&x(e,["parameters","negativePrompt"],N);const S=h(t,["enhancePrompt"]);e!==void 0&&S!=null&&x(e,["parameters","enhancePrompt"],S);const k=h(t,["generateAudio"]);e!==void 0&&k!=null&&x(e,["parameters","generateAudio"],k);const E=h(t,["lastFrame"]);e!==void 0&&E!=null&&x(e,["instances[0]","lastFrame"],zs(E));const T=h(t,["referenceImages"]);if(e!==void 0&&T!=null){let D=T;Array.isArray(D)&&(D=D.map(R=>QC(R))),x(e,["instances[0]","referenceImages"],D)}const M=h(t,["mask"]);e!==void 0&&M!=null&&x(e,["instances[0]","mask"],KC(M));const C=h(t,["compressionQuality"]);return e!==void 0&&C!=null&&x(e,["parameters","compressionQuality"],C),a}function XE(t,e){const s={},a=h(t,["name"]);a!=null&&x(s,["name"],a);const r=h(t,["metadata"]);r!=null&&x(s,["metadata"],r);const c=h(t,["done"]);c!=null&&x(s,["done"],c);const d=h(t,["error"]);d!=null&&x(s,["error"],d);const f=h(t,["response","generateVideoResponse"]);return f!=null&&x(s,["response"],tC(f)),s}function QE(t,e){const s={},a=h(t,["name"]);a!=null&&x(s,["name"],a);const r=h(t,["metadata"]);r!=null&&x(s,["metadata"],r);const c=h(t,["done"]);c!=null&&x(s,["done"],c);const d=h(t,["error"]);d!=null&&x(s,["error"],d);const f=h(t,["response"]);return f!=null&&x(s,["response"],sC(f)),s}function ZE(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["prompt"]);c!=null&&x(a,["instances[0]","prompt"],c);const d=h(e,["image"]);d!=null&&x(a,["instances[0]","image"],To(d));const f=h(e,["video"]);f!=null&&x(a,["instances[0]","video"],tb(f));const m=h(e,["source"]);m!=null&&nC(m,a);const p=h(e,["config"]);return p!=null&&YE(p,a),a}function eC(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["prompt"]);c!=null&&x(a,["instances[0]","prompt"],c);const d=h(e,["image"]);d!=null&&x(a,["instances[0]","image"],zs(d));const f=h(e,["video"]);f!=null&&x(a,["instances[0]","video"],sb(f));const m=h(e,["source"]);m!=null&&iC(m,a);const p=h(e,["config"]);return p!=null&&KE(p,a),a}function tC(t,e){const s={},a=h(t,["generatedSamples"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>rC(f))),x(s,["generatedVideos"],d)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&x(s,["raiMediaFilteredCount"],r);const c=h(t,["raiMediaFilteredReasons"]);return c!=null&&x(s,["raiMediaFilteredReasons"],c),s}function sC(t,e){const s={},a=h(t,["videos"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>oC(f))),x(s,["generatedVideos"],d)}const r=h(t,["raiMediaFilteredCount"]);r!=null&&x(s,["raiMediaFilteredCount"],r);const c=h(t,["raiMediaFilteredReasons"]);return c!=null&&x(s,["raiMediaFilteredReasons"],c),s}function nC(t,e,s){const a={},r=h(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const c=h(t,["image"]);e!==void 0&&c!=null&&x(e,["instances[0]","image"],To(c));const d=h(t,["video"]);return e!==void 0&&d!=null&&x(e,["instances[0]","video"],tb(d)),a}function iC(t,e,s){const a={},r=h(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const c=h(t,["image"]);e!==void 0&&c!=null&&x(e,["instances[0]","image"],zs(c));const d=h(t,["video"]);return e!==void 0&&d!=null&&x(e,["instances[0]","video"],sb(d)),a}function aC(t,e){const s={},a=h(t,["_self"]);a!=null&&x(s,["image"],xC(a));const r=h(t,["raiFilteredReason"]);r!=null&&x(s,["raiFilteredReason"],r);const c=h(t,["_self"]);return c!=null&&x(s,["safetyAttributes"],Qg(c)),s}function ko(t,e){const s={},a=h(t,["_self"]);a!=null&&x(s,["image"],Xg(a));const r=h(t,["raiFilteredReason"]);r!=null&&x(s,["raiFilteredReason"],r);const c=h(t,["_self"]);c!=null&&x(s,["safetyAttributes"],Zg(c));const d=h(t,["prompt"]);return d!=null&&x(s,["enhancedPrompt"],d),s}function lC(t,e){const s={},a=h(t,["_self"]);a!=null&&x(s,["mask"],Xg(a));const r=h(t,["labels"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),x(s,["labels"],c)}return s}function rC(t,e){const s={},a=h(t,["video"]);return a!=null&&x(s,["video"],WC(a)),s}function oC(t,e){const s={},a=h(t,["_self"]);return a!=null&&x(s,["video"],YC(a)),s}function cC(t,e){const s={},a=h(t,["modelSelectionConfig"]);a!=null&&x(s,["modelConfig"],a);const r=h(t,["responseJsonSchema"]);r!=null&&x(s,["responseJsonSchema"],r);const c=h(t,["audioTimestamp"]);c!=null&&x(s,["audioTimestamp"],c);const d=h(t,["candidateCount"]);d!=null&&x(s,["candidateCount"],d);const f=h(t,["enableAffectiveDialog"]);f!=null&&x(s,["enableAffectiveDialog"],f);const m=h(t,["frequencyPenalty"]);m!=null&&x(s,["frequencyPenalty"],m);const p=h(t,["logprobs"]);p!=null&&x(s,["logprobs"],p);const g=h(t,["maxOutputTokens"]);g!=null&&x(s,["maxOutputTokens"],g);const v=h(t,["mediaResolution"]);v!=null&&x(s,["mediaResolution"],v);const y=h(t,["presencePenalty"]);y!=null&&x(s,["presencePenalty"],y);const N=h(t,["responseLogprobs"]);N!=null&&x(s,["responseLogprobs"],N);const S=h(t,["responseMimeType"]);S!=null&&x(s,["responseMimeType"],S);const k=h(t,["responseModalities"]);k!=null&&x(s,["responseModalities"],k);const E=h(t,["responseSchema"]);E!=null&&x(s,["responseSchema"],E);const T=h(t,["routingConfig"]);T!=null&&x(s,["routingConfig"],T);const M=h(t,["seed"]);M!=null&&x(s,["seed"],M);const C=h(t,["speechConfig"]);C!=null&&x(s,["speechConfig"],C);const D=h(t,["stopSequences"]);D!=null&&x(s,["stopSequences"],D);const R=h(t,["temperature"]);R!=null&&x(s,["temperature"],R);const B=h(t,["thinkingConfig"]);B!=null&&x(s,["thinkingConfig"],B);const G=h(t,["topK"]);G!=null&&x(s,["topK"],G);const H=h(t,["topP"]);if(H!=null&&x(s,["topP"],H),h(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function dC(t,e,s){const a={},r=h(e,["model"]);return r!=null&&x(a,["_url","name"],nt(t,r)),a}function uC(t,e,s){const a={},r=h(e,["model"]);return r!=null&&x(a,["_url","name"],nt(t,r)),a}function fC(t,e){const s={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const a=h(t,["enableWidget"]);return a!=null&&x(s,["enableWidget"],a),s}function hC(t,e){const s={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const a=h(t,["timeRangeFilter"]);return a!=null&&x(s,["timeRangeFilter"],a),s}function pC(t,e){const s={},a=h(t,["aspectRatio"]);a!=null&&x(s,["aspectRatio"],a);const r=h(t,["imageSize"]);if(r!=null&&x(s,["imageSize"],r),h(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(h(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(h(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return s}function mC(t,e){const s={},a=h(t,["aspectRatio"]);a!=null&&x(s,["aspectRatio"],a);const r=h(t,["imageSize"]);r!=null&&x(s,["imageSize"],r);const c=h(t,["personGeneration"]);c!=null&&x(s,["personGeneration"],c);const d=h(t,["outputMimeType"]);d!=null&&x(s,["imageOutputOptions","mimeType"],d);const f=h(t,["outputCompressionQuality"]);return f!=null&&x(s,["imageOutputOptions","compressionQuality"],f),s}function xC(t,e){const s={},a=h(t,["bytesBase64Encoded"]);a!=null&&x(s,["imageBytes"],Wn(a));const r=h(t,["mimeType"]);return r!=null&&x(s,["mimeType"],r),s}function Xg(t,e){const s={},a=h(t,["gcsUri"]);a!=null&&x(s,["gcsUri"],a);const r=h(t,["bytesBase64Encoded"]);r!=null&&x(s,["imageBytes"],Wn(r));const c=h(t,["mimeType"]);return c!=null&&x(s,["mimeType"],c),s}function To(t,e){const s={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const a=h(t,["imageBytes"]);a!=null&&x(s,["bytesBase64Encoded"],Wn(a));const r=h(t,["mimeType"]);return r!=null&&x(s,["mimeType"],r),s}function zs(t,e){const s={},a=h(t,["gcsUri"]);a!=null&&x(s,["gcsUri"],a);const r=h(t,["imageBytes"]);r!=null&&x(s,["bytesBase64Encoded"],Wn(r));const c=h(t,["mimeType"]);return c!=null&&x(s,["mimeType"],c),s}function gC(t,e,s,a){const r={},c=h(e,["pageSize"]);s!==void 0&&c!=null&&x(s,["_query","pageSize"],c);const d=h(e,["pageToken"]);s!==void 0&&d!=null&&x(s,["_query","pageToken"],d);const f=h(e,["filter"]);s!==void 0&&f!=null&&x(s,["_query","filter"],f);const m=h(e,["queryBase"]);return s!==void 0&&m!=null&&x(s,["_url","models_url"],$g(t,m)),r}function bC(t,e,s,a){const r={},c=h(e,["pageSize"]);s!==void 0&&c!=null&&x(s,["_query","pageSize"],c);const d=h(e,["pageToken"]);s!==void 0&&d!=null&&x(s,["_query","pageToken"],d);const f=h(e,["filter"]);s!==void 0&&f!=null&&x(s,["_query","filter"],f);const m=h(e,["queryBase"]);return s!==void 0&&m!=null&&x(s,["_url","models_url"],$g(t,m)),r}function vC(t,e,s){const a={},r=h(e,["config"]);return r!=null&&gC(t,r,a),a}function yC(t,e,s){const a={},r=h(e,["config"]);return r!=null&&bC(t,r,a),a}function wC(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const c=h(t,["_self"]);if(c!=null){let d=Fg(c);Array.isArray(d)&&(d=d.map(f=>yu(f))),x(s,["models"],d)}return s}function NC(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const c=h(t,["_self"]);if(c!=null){let d=Fg(c);Array.isArray(d)&&(d=d.map(f=>wu(f))),x(s,["models"],d)}return s}function SC(t,e){const s={},a=h(t,["maskMode"]);a!=null&&x(s,["maskMode"],a);const r=h(t,["segmentationClasses"]);r!=null&&x(s,["maskClasses"],r);const c=h(t,["maskDilation"]);return c!=null&&x(s,["dilation"],c),s}function yu(t,e){const s={},a=h(t,["name"]);a!=null&&x(s,["name"],a);const r=h(t,["displayName"]);r!=null&&x(s,["displayName"],r);const c=h(t,["description"]);c!=null&&x(s,["description"],c);const d=h(t,["version"]);d!=null&&x(s,["version"],d);const f=h(t,["_self"]);f!=null&&x(s,["tunedModelInfo"],BC(f));const m=h(t,["inputTokenLimit"]);m!=null&&x(s,["inputTokenLimit"],m);const p=h(t,["outputTokenLimit"]);p!=null&&x(s,["outputTokenLimit"],p);const g=h(t,["supportedGenerationMethods"]);g!=null&&x(s,["supportedActions"],g);const v=h(t,["temperature"]);v!=null&&x(s,["temperature"],v);const y=h(t,["maxTemperature"]);y!=null&&x(s,["maxTemperature"],y);const N=h(t,["topP"]);N!=null&&x(s,["topP"],N);const S=h(t,["topK"]);S!=null&&x(s,["topK"],S);const k=h(t,["thinking"]);return k!=null&&x(s,["thinking"],k),s}function wu(t,e){const s={},a=h(t,["name"]);a!=null&&x(s,["name"],a);const r=h(t,["displayName"]);r!=null&&x(s,["displayName"],r);const c=h(t,["description"]);c!=null&&x(s,["description"],c);const d=h(t,["versionId"]);d!=null&&x(s,["version"],d);const f=h(t,["deployedModels"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(N=>UE(N))),x(s,["endpoints"],y)}const m=h(t,["labels"]);m!=null&&x(s,["labels"],m);const p=h(t,["_self"]);p!=null&&x(s,["tunedModelInfo"],GC(p));const g=h(t,["defaultCheckpointId"]);g!=null&&x(s,["defaultCheckpointId"],g);const v=h(t,["checkpoints"]);if(v!=null){let y=v;Array.isArray(y)&&(y=y.map(N=>N)),x(s,["checkpoints"],y)}return s}function _C(t,e){const s={},a=h(t,["mediaResolution"]);a!=null&&x(s,["mediaResolution"],a);const r=h(t,["codeExecutionResult"]);r!=null&&x(s,["codeExecutionResult"],r);const c=h(t,["executableCode"]);c!=null&&x(s,["executableCode"],c);const d=h(t,["fileData"]);d!=null&&x(s,["fileData"],PE(d));const f=h(t,["functionCall"]);f!=null&&x(s,["functionCall"],LE(f));const m=h(t,["functionResponse"]);m!=null&&x(s,["functionResponse"],m);const p=h(t,["inlineData"]);p!=null&&x(s,["inlineData"],cE(p));const g=h(t,["text"]);g!=null&&x(s,["text"],g);const v=h(t,["thought"]);v!=null&&x(s,["thought"],v);const y=h(t,["thoughtSignature"]);y!=null&&x(s,["thoughtSignature"],y);const N=h(t,["videoMetadata"]);return N!=null&&x(s,["videoMetadata"],N),s}function kC(t,e){const s={},a=h(t,["productImage"]);return a!=null&&x(s,["image"],zs(a)),s}function TC(t,e,s){const a={},r=h(t,["numberOfImages"]);e!==void 0&&r!=null&&x(e,["parameters","sampleCount"],r);const c=h(t,["baseSteps"]);e!==void 0&&c!=null&&x(e,["parameters","baseSteps"],c);const d=h(t,["outputGcsUri"]);e!==void 0&&d!=null&&x(e,["parameters","storageUri"],d);const f=h(t,["seed"]);e!==void 0&&f!=null&&x(e,["parameters","seed"],f);const m=h(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&x(e,["parameters","safetySetting"],m);const p=h(t,["personGeneration"]);e!==void 0&&p!=null&&x(e,["parameters","personGeneration"],p);const g=h(t,["addWatermark"]);e!==void 0&&g!=null&&x(e,["parameters","addWatermark"],g);const v=h(t,["outputMimeType"]);e!==void 0&&v!=null&&x(e,["parameters","outputOptions","mimeType"],v);const y=h(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&x(e,["parameters","outputOptions","compressionQuality"],y);const N=h(t,["enhancePrompt"]);e!==void 0&&N!=null&&x(e,["parameters","enhancePrompt"],N);const S=h(t,["labels"]);return e!==void 0&&S!=null&&x(e,["labels"],S),a}function EC(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["source"]);c!=null&&jC(c,a);const d=h(e,["config"]);return d!=null&&TC(d,a),a}function CC(t,e){const s={},a=h(t,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>ko(c))),x(s,["generatedImages"],r)}return s}function jC(t,e,s){const a={},r=h(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const c=h(t,["personImage"]);e!==void 0&&c!=null&&x(e,["instances[0]","personImage","image"],zs(c));const d=h(t,["productImages"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(m=>kC(m))),x(e,["instances[0]","productImages"],f)}return a}function AC(t,e){const s={},a=h(t,["referenceImage"]);a!=null&&x(s,["referenceImage"],zs(a));const r=h(t,["referenceId"]);r!=null&&x(s,["referenceId"],r);const c=h(t,["referenceType"]);c!=null&&x(s,["referenceType"],c);const d=h(t,["maskImageConfig"]);d!=null&&x(s,["maskImageConfig"],SC(d));const f=h(t,["controlImageConfig"]);f!=null&&x(s,["controlImageConfig"],xE(f));const m=h(t,["styleImageConfig"]);m!=null&&x(s,["styleImageConfig"],m);const p=h(t,["subjectImageConfig"]);return p!=null&&x(s,["subjectImageConfig"],p),s}function Qg(t,e){const s={},a=h(t,["safetyAttributes","categories"]);a!=null&&x(s,["categories"],a);const r=h(t,["safetyAttributes","scores"]);r!=null&&x(s,["scores"],r);const c=h(t,["contentType"]);return c!=null&&x(s,["contentType"],c),s}function Zg(t,e){const s={},a=h(t,["safetyAttributes","categories"]);a!=null&&x(s,["categories"],a);const r=h(t,["safetyAttributes","scores"]);r!=null&&x(s,["scores"],r);const c=h(t,["contentType"]);return c!=null&&x(s,["contentType"],c),s}function RC(t,e){const s={},a=h(t,["category"]);if(a!=null&&x(s,["category"],a),h(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=h(t,["threshold"]);return r!=null&&x(s,["threshold"],r),s}function IC(t,e){const s={},a=h(t,["image"]);return a!=null&&x(s,["image"],zs(a)),s}function MC(t,e,s){const a={},r=h(t,["mode"]);e!==void 0&&r!=null&&x(e,["parameters","mode"],r);const c=h(t,["maxPredictions"]);e!==void 0&&c!=null&&x(e,["parameters","maxPredictions"],c);const d=h(t,["confidenceThreshold"]);e!==void 0&&d!=null&&x(e,["parameters","confidenceThreshold"],d);const f=h(t,["maskDilation"]);e!==void 0&&f!=null&&x(e,["parameters","maskDilation"],f);const m=h(t,["binaryColorThreshold"]);e!==void 0&&m!=null&&x(e,["parameters","binaryColorThreshold"],m);const p=h(t,["labels"]);return e!==void 0&&p!=null&&x(e,["labels"],p),a}function DC(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["source"]);c!=null&&UC(c,a);const d=h(e,["config"]);return d!=null&&MC(d,a),a}function OC(t,e){const s={},a=h(t,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>lC(c))),x(s,["generatedMasks"],r)}return s}function UC(t,e,s){const a={},r=h(t,["prompt"]);e!==void 0&&r!=null&&x(e,["instances[0]","prompt"],r);const c=h(t,["image"]);e!==void 0&&c!=null&&x(e,["instances[0]","image"],zs(c));const d=h(t,["scribbleImage"]);return e!==void 0&&d!=null&&x(e,["instances[0]","scribble"],IC(d)),a}function PC(t,e){const s={},a=h(t,["retrievalConfig"]);a!=null&&x(s,["retrievalConfig"],a);const r=h(t,["functionCallingConfig"]);return r!=null&&x(s,["functionCallingConfig"],BE(r)),s}function LC(t,e){const s={};if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=h(t,["computerUse"]);a!=null&&x(s,["computerUse"],a);const r=h(t,["fileSearch"]);r!=null&&x(s,["fileSearch"],r);const c=h(t,["codeExecution"]);if(c!=null&&x(s,["codeExecution"],c),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=h(t,["functionDeclarations"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(y=>y)),x(s,["functionDeclarations"],v)}const f=h(t,["googleMaps"]);f!=null&&x(s,["googleMaps"],fC(f));const m=h(t,["googleSearch"]);m!=null&&x(s,["googleSearch"],hC(m));const p=h(t,["googleSearchRetrieval"]);p!=null&&x(s,["googleSearchRetrieval"],p);const g=h(t,["urlContext"]);return g!=null&&x(s,["urlContext"],g),s}function eb(t,e){const s={},a=h(t,["retrieval"]);a!=null&&x(s,["retrieval"],a);const r=h(t,["computerUse"]);if(r!=null&&x(s,["computerUse"],r),h(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=h(t,["codeExecution"]);c!=null&&x(s,["codeExecution"],c);const d=h(t,["enterpriseWebSearch"]);d!=null&&x(s,["enterpriseWebSearch"],d);const f=h(t,["functionDeclarations"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(N=>GE(N))),x(s,["functionDeclarations"],y)}const m=h(t,["googleMaps"]);m!=null&&x(s,["googleMaps"],m);const p=h(t,["googleSearch"]);p!=null&&x(s,["googleSearch"],p);const g=h(t,["googleSearchRetrieval"]);g!=null&&x(s,["googleSearchRetrieval"],g);const v=h(t,["urlContext"]);return v!=null&&x(s,["urlContext"],v),s}function BC(t,e){const s={},a=h(t,["baseModel"]);a!=null&&x(s,["baseModel"],a);const r=h(t,["createTime"]);r!=null&&x(s,["createTime"],r);const c=h(t,["updateTime"]);return c!=null&&x(s,["updateTime"],c),s}function GC(t,e){const s={},a=h(t,["labels","google-vertex-llm-tuning-base-model-id"]);a!=null&&x(s,["baseModel"],a);const r=h(t,["createTime"]);r!=null&&x(s,["createTime"],r);const c=h(t,["updateTime"]);return c!=null&&x(s,["updateTime"],c),s}function qC(t,e,s){const a={},r=h(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const c=h(t,["description"]);e!==void 0&&c!=null&&x(e,["description"],c);const d=h(t,["defaultCheckpointId"]);return e!==void 0&&d!=null&&x(e,["defaultCheckpointId"],d),a}function VC(t,e,s){const a={},r=h(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const c=h(t,["description"]);e!==void 0&&c!=null&&x(e,["description"],c);const d=h(t,["defaultCheckpointId"]);return e!==void 0&&d!=null&&x(e,["defaultCheckpointId"],d),a}function HC(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","name"],nt(t,r));const c=h(e,["config"]);return c!=null&&qC(c,a),a}function $C(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["config"]);return c!=null&&VC(c,a),a}function FC(t,e,s){const a={},r=h(t,["outputGcsUri"]);e!==void 0&&r!=null&&x(e,["parameters","storageUri"],r);const c=h(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&x(e,["parameters","safetySetting"],c);const d=h(t,["personGeneration"]);e!==void 0&&d!=null&&x(e,["parameters","personGeneration"],d);const f=h(t,["includeRaiReason"]);e!==void 0&&f!=null&&x(e,["parameters","includeRaiReason"],f);const m=h(t,["outputMimeType"]);e!==void 0&&m!=null&&x(e,["parameters","outputOptions","mimeType"],m);const p=h(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&x(e,["parameters","outputOptions","compressionQuality"],p);const g=h(t,["enhanceInputImage"]);e!==void 0&&g!=null&&x(e,["parameters","upscaleConfig","enhanceInputImage"],g);const v=h(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&x(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const y=h(t,["labels"]);e!==void 0&&y!=null&&x(e,["labels"],y);const N=h(t,["numberOfImages"]);e!==void 0&&N!=null&&x(e,["parameters","sampleCount"],N);const S=h(t,["mode"]);return e!==void 0&&S!=null&&x(e,["parameters","mode"],S),a}function zC(t,e,s){const a={},r=h(e,["model"]);r!=null&&x(a,["_url","model"],nt(t,r));const c=h(e,["image"]);c!=null&&x(a,["instances[0]","image"],zs(c));const d=h(e,["upscaleFactor"]);d!=null&&x(a,["parameters","upscaleConfig","upscaleFactor"],d);const f=h(e,["config"]);return f!=null&&FC(f,a),a}function JC(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["predictions"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>ko(d))),x(s,["generatedImages"],c)}return s}function WC(t,e){const s={},a=h(t,["uri"]);a!=null&&x(s,["uri"],a);const r=h(t,["encodedVideo"]);r!=null&&x(s,["videoBytes"],Wn(r));const c=h(t,["encoding"]);return c!=null&&x(s,["mimeType"],c),s}function YC(t,e){const s={},a=h(t,["gcsUri"]);a!=null&&x(s,["uri"],a);const r=h(t,["bytesBase64Encoded"]);r!=null&&x(s,["videoBytes"],Wn(r));const c=h(t,["mimeType"]);return c!=null&&x(s,["mimeType"],c),s}function KC(t,e){const s={},a=h(t,["image"]);a!=null&&x(s,["_self"],zs(a));const r=h(t,["maskMode"]);return r!=null&&x(s,["maskMode"],r),s}function XC(t,e){const s={},a=h(t,["image"]);a!=null&&x(s,["image"],To(a));const r=h(t,["referenceType"]);return r!=null&&x(s,["referenceType"],r),s}function QC(t,e){const s={},a=h(t,["image"]);a!=null&&x(s,["image"],zs(a));const r=h(t,["referenceType"]);return r!=null&&x(s,["referenceType"],r),s}function tb(t,e){const s={},a=h(t,["uri"]);a!=null&&x(s,["uri"],a);const r=h(t,["videoBytes"]);r!=null&&x(s,["encodedVideo"],Wn(r));const c=h(t,["mimeType"]);return c!=null&&x(s,["encoding"],c),s}function sb(t,e){const s={},a=h(t,["uri"]);a!=null&&x(s,["gcsUri"],a);const r=h(t,["videoBytes"]);r!=null&&x(s,["bytesBase64Encoded"],Wn(r));const c=h(t,["mimeType"]);return c!=null&&x(s,["mimeType"],c),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZC(t,e){const s={},a=h(t,["displayName"]);return e!==void 0&&a!=null&&x(e,["displayName"],a),s}function ej(t){const e={},s=h(t,["config"]);return s!=null&&ZC(s,e),e}function tj(t,e){const s={},a=h(t,["force"]);return e!==void 0&&a!=null&&x(e,["_query","force"],a),s}function sj(t){const e={},s=h(t,["name"]);s!=null&&x(e,["_url","name"],s);const a=h(t,["config"]);return a!=null&&tj(a,e),e}function nj(t){const e={},s=h(t,["name"]);return s!=null&&x(e,["_url","name"],s),e}function ij(t,e){const s={},a=h(t,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["customMetadata"],c)}const r=h(t,["chunkingConfig"]);return e!==void 0&&r!=null&&x(e,["chunkingConfig"],r),s}function aj(t){const e={},s=h(t,["name"]);s!=null&&x(e,["name"],s);const a=h(t,["metadata"]);a!=null&&x(e,["metadata"],a);const r=h(t,["done"]);r!=null&&x(e,["done"],r);const c=h(t,["error"]);c!=null&&x(e,["error"],c);const d=h(t,["response"]);return d!=null&&x(e,["response"],rj(d)),e}function lj(t){const e={},s=h(t,["fileSearchStoreName"]);s!=null&&x(e,["_url","file_search_store_name"],s);const a=h(t,["fileName"]);a!=null&&x(e,["fileName"],a);const r=h(t,["config"]);return r!=null&&ij(r,e),e}function rj(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["parent"]);a!=null&&x(e,["parent"],a);const r=h(t,["documentName"]);return r!=null&&x(e,["documentName"],r),e}function oj(t,e){const s={},a=h(t,["pageSize"]);e!==void 0&&a!=null&&x(e,["_query","pageSize"],a);const r=h(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),s}function cj(t){const e={},s=h(t,["config"]);return s!=null&&oj(s,e),e}function dj(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["nextPageToken"]);a!=null&&x(e,["nextPageToken"],a);const r=h(t,["fileSearchStores"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["fileSearchStores"],c)}return e}function nb(t,e){const s={},a=h(t,["mimeType"]);e!==void 0&&a!=null&&x(e,["mimeType"],a);const r=h(t,["displayName"]);e!==void 0&&r!=null&&x(e,["displayName"],r);const c=h(t,["customMetadata"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>m)),x(e,["customMetadata"],f)}const d=h(t,["chunkingConfig"]);return e!==void 0&&d!=null&&x(e,["chunkingConfig"],d),s}function uj(t){const e={},s=h(t,["fileSearchStoreName"]);s!=null&&x(e,["_url","file_search_store_name"],s);const a=h(t,["config"]);return a!=null&&nb(a,e),e}function fj(t){const e={},s=h(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hj="Content-Type",pj="X-Server-Timeout",mj="User-Agent",Nu="x-goog-api-client",xj="1.39.0",gj=`google-genai-sdk/${xj}`,bj="v1beta1",vj="v1beta";class yj{constructor(e){var s,a,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(s=e.httpOptions)===null||s===void 0?void 0:s.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const c={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const f=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!f?(c.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?c.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(c.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),c.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:bj}else{if(!this.clientOptions.apiKey)throw new Il({message:"API key must be set when using the Gemini API.",status:403});c.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:vj,c.baseUrl="https://generativelanguage.googleapis.com/"}c.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=c,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(c,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),s=new URL(e);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,s,a){const r=[this.getRequestUrlInternal(s)];return a&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,s){return!(s.baseUrl&&s.baseUrlResourceScope===xu.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e,s),r=this.constructUrl(e.path,s,a);if(e.queryParams)for(const[d,f]of Object.entries(e.queryParams))r.searchParams.append(d,String(f));let c={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else c.body=e.body;return c=await this.includeExtraHttpOptionsToRequestInit(c,s,r.toString(),e.abortSignal),this.unaryApiCall(r,c,e.httpMethod)}patchHttpOptions(e,s){const a=JSON.parse(JSON.stringify(e));for(const[r,c]of Object.entries(s))typeof c=="object"?a[r]=Object.assign(Object.assign({},a[r]),c):c!==void 0&&(a[r]=c);return a}async requestStream(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e,s),r=this.constructUrl(e.path,s,a);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let c={};return c.body=e.body,c=await this.includeExtraHttpOptionsToRequestInit(c,s,r.toString(),e.abortSignal),this.streamApiCall(r,c,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,s,a,r){if(s&&s.timeout||r){const c=new AbortController,d=c.signal;if(s.timeout&&(s==null?void 0:s.timeout)>0){const f=setTimeout(()=>c.abort(),s.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{c.abort()}),e.signal=d}return s&&s.extraBody!==null&&wj(e,s.extraBody),e.headers=await this.getHeadersInternal(s,a),e}async unaryApiCall(e,s,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:a})).then(async r=>(await $x(r),new gu(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,s,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:a})).then(async r=>(await $x(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return $s(this,arguments,function*(){var a;const r=(a=e==null?void 0:e.body)===null||a===void 0?void 0:a.getReader(),c=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let d="";const f="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:g}=yield Le(r.read());if(p){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=c.decode(g,{stream:!0});try{const S=JSON.parse(v);if("error"in S){const k=JSON.parse(JSON.stringify(S.error)),E=k.status,T=k.code,M=`got status: ${E}. ${JSON.stringify(S)}`;if(T>=400&&T<600)throw new Il({message:M,status:T})}}catch(S){if(S.name==="ApiError")throw S}d+=v;let y=-1,N=0;for(;;){y=-1,N=0;for(const E of m){const T=d.indexOf(E);T!==-1&&(y===-1||T<y)&&(y=T,N=E.length)}if(y===-1)break;const S=d.substring(0,y);d=d.substring(y+N);const k=S.trim();if(k.startsWith(f)){const E=k.substring(f.length).trim();try{const T=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Le(new gu(T))}catch(T){throw new Error(`exception parsing stream chunk ${E}. ${T}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,s){return fetch(e,s).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},s=gj+" "+this.clientOptions.userAgentExtra;return e[mj]=s,e[Nu]=s,e[hj]="application/json",e}async getHeadersInternal(e,s){const a=new Headers;if(e&&e.headers){for(const[r,c]of Object.entries(e.headers))a.append(r,c);e.timeout&&e.timeout>0&&a.append(pj,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(a,s),a}getFileName(e){var s;let a="";return typeof e=="string"&&(a=e.replace(/[/\\]+$/,""),a=(s=a.split(/[/\\]/).pop())!==null&&s!==void 0?s:""),a}async uploadFile(e,s){var a;const r={};s!=null&&(r.mimeType=s.mimeType,r.name=s.name,r.displayName=s.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const c=this.clientOptions.uploader,d=await c.stat(e);r.sizeBytes=String(d.size);const f=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:d.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const m={file:r},p=this.getFileName(e),g=_e("upload/v1beta/files",m._url),v=await this.fetchUploadUrl(g,r.sizeBytes,r.mimeType,p,m,s==null?void 0:s.httpOptions);return c.upload(e,v,this)}async uploadFileToFileSearchStore(e,s,a){var r;const c=this.clientOptions.uploader,d=await c.stat(s),f=String(d.size),m=(r=a==null?void 0:a.mimeType)!==null&&r!==void 0?r:d.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(s),v={};a!=null&&nb(a,v);const y=await this.fetchUploadUrl(p,f,m,g,v,a==null?void 0:a.httpOptions);return c.uploadToFileSearchStore(s,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,s,a,r,c,d){var f;let m={};d?m=d:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s}`,"X-Goog-Upload-Header-Content-Type":`${a}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(c),httpMethod:"POST",httpOptions:m});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(f=p==null?void 0:p.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function $x(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const s=t.status;let a;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?a=await t.json():a={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(a);throw s>=400&&s<600?new Il({message:r,status:s}):new Error(r)}}function wj(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let s={};if(typeof t.body=="string"&&t.body.length>0)try{const c=JSON.parse(t.body);if(typeof c=="object"&&c!==null&&!Array.isArray(c))s=c;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function a(c,d){const f=Object.assign({},c);for(const m in d)if(Object.prototype.hasOwnProperty.call(d,m)){const p=d[m],g=f[m];p&&typeof p=="object"&&!Array.isArray(p)&&g&&typeof g=="object"&&!Array.isArray(g)?f[m]=a(g,p):(g&&p&&typeof g!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof g}, New type: ${typeof p}. Overwriting.`),f[m]=p)}return f}const r=a(s,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nj="mcp_used/unknown";let Sj=!1;function ib(t){for(const e of t)if(_j(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Sj}function ab(t){var e;const s=(e=t[Nu])!==null&&e!==void 0?e:"";t[Nu]=(s+` ${Nj}`).trimStart()}function _j(t){return t!==null&&typeof t=="object"&&t instanceof Hu}function kj(t){return $s(this,arguments,function*(s,a=100){let r,c=0;for(;c<a;){const d=yield Le(s.listTools({cursor:r}));for(const f of d.tools)yield yield Le(f),c++;if(!d.nextCursor)break;r=d.nextCursor}})}class Hu{constructor(e=[],s){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=s}static create(e,s){return new Hu(e,s)}async initialize(){var e,s,a,r;if(this.mcpTools.length>0)return;const c={},d=[];for(const g of this.mcpClients)try{for(var f=!0,m=(s=void 0,Fs(kj(g))),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const v=r;d.push(v);const y=v.name;if(c[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);c[y]=g}}catch(v){s={error:v}}finally{try{!f&&!e&&(a=m.return)&&await a.call(m)}finally{if(s)throw s.error}}this.mcpTools=d,this.functionNameToMcpClient=c}async tool(){return await this.initialize(),ek(this.mcpTools,this.config)}async callTool(e){await this.initialize();const s=[];for(const a of e)if(a.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[a.name];let c;this.config.timeout&&(c={timeout:this.config.timeout});const d=await r.callTool({name:a.name,arguments:a.args},void 0,c);s.push({functionResponse:{name:a.name,response:d.isError?{error:d}:d}})}return s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Tj(t,e,s){const a=new z_;let r;s.data instanceof Blob?r=JSON.parse(await s.data.text()):r=JSON.parse(s.data),Object.assign(a,r),e(a)}class Ej{constructor(e,s,a){this.apiClient=e,this.auth=s,this.webSocketFactory=a}async connect(e){var s,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),d=Aj(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${r}/ws/google.ai.generativelanguage.${c}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const g=new Promise(C=>{p=C}),v=e.callbacks,y=function(){p({})},N=this.apiClient,S={onopen:y,onmessage:C=>{Tj(N,v.onmessage,C)},onerror:(s=v==null?void 0:v.onerror)!==null&&s!==void 0?s:function(C){},onclose:(a=v==null?void 0:v.onclose)!==null&&a!==void 0?a:function(C){}},k=this.webSocketFactory.create(m,jj(d),S);k.connect(),await g;const M={setup:{model:nt(this.apiClient,e.model)}};return k.send(JSON.stringify(M)),new Cj(k,this.apiClient)}}class Cj{constructor(e,s){this.conn=e,this.apiClient=s}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const s=ZT(e);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const s=QT(e);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const s={playbackControl:e};this.conn.send(JSON.stringify(s))}play(){this.sendPlaybackControl(xa.PLAY)}pause(){this.sendPlaybackControl(xa.PAUSE)}stop(){this.sendPlaybackControl(xa.STOP)}resetContext(){this.sendPlaybackControl(xa.RESET_CONTEXT)}close(){this.conn.close()}}function jj(t){const e={};return t.forEach((s,a)=>{e[a]=s}),e}function Aj(t){const e=new Headers;for(const[s,a]of Object.entries(t))e.append(s,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rj="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Ij(t,e,s){const a=new F_;let r;s.data instanceof Blob?r=await s.data.text():s.data instanceof ArrayBuffer?r=new TextDecoder().decode(s.data):r=s.data;const c=JSON.parse(r);if(t.isVertexAI()){const d=sE(c);Object.assign(a,d)}else Object.assign(a,c);e(a)}class Mj{constructor(e,s,a){this.apiClient=e,this.auth=s,this.webSocketFactory=a,this.music=new Ej(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var s,a,r,c,d,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let g;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&ib(e.config.tools)&&ab(v);const y=Pj(v);if(this.apiClient.isVertexAI()){const z=this.apiClient.getProject(),P=this.apiClient.getLocation(),ne=this.apiClient.getApiKey(),le=!!z&&!!P||!!ne;this.apiClient.getCustomBaseUrl()&&!le?g=m:(g=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y,g))}else{const z=this.apiClient.getApiKey();let P="BidiGenerateContent",ne="key";z!=null&&z.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",ne="access_token"),g=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${P}?${ne}=${z}`}let N=()=>{};const S=new Promise(z=>{N=z}),k=e.callbacks,E=function(){var z;(z=k==null?void 0:k.onopen)===null||z===void 0||z.call(k),N({})},T=this.apiClient,M={onopen:E,onmessage:z=>{Ij(T,k.onmessage,z)},onerror:(s=k==null?void 0:k.onerror)!==null&&s!==void 0?s:function(z){},onclose:(a=k==null?void 0:k.onclose)!==null&&a!==void 0?a:function(z){}},C=this.webSocketFactory.create(g,Uj(y),M);C.connect(),await S;let D=nt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const z=this.apiClient.getProject(),P=this.apiClient.getLocation();z&&P&&(D=`projects/${z}/locations/${P}/`+D)}let R={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[po.AUDIO]}:e.config.responseModalities=[po.AUDIO]),!((c=e.config)===null||c===void 0)&&c.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const B=(f=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&f!==void 0?f:[],G=[];for(const z of B)if(this.isCallableTool(z)){const P=z;G.push(await P.tool())}else G.push(z);G.length>0&&(e.config.tools=G);const H={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?R=XT(this.apiClient,H):R=KT(this.apiClient,H),delete R.config,C.send(JSON.stringify(R)),new Oj(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Dj={turnComplete:!0};class Oj{constructor(e,s){this.conn=e,this.apiClient=s}tLiveClientContent(e,s){if(s.turns!==null&&s.turns!==void 0){let a=[];try{a=Ms(s.turns),e.isVertexAI()||(a=a.map(r=>_o(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:a,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(e,s){let a=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?a=s.functionResponses:a=[s.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const c of a){if(typeof c!="object"||c===null||!("name"in c)||!("response"in c))throw new Error(`Could not parse function response, type '${typeof c}'.`);if(!e.isVertexAI()&&!("id"in c))throw new Error(Rj)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},Dj),e);const s=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(s))}sendRealtimeInput(e){let s={};this.apiClient.isVertexAI()?s={realtimeInput:tE(e)}:s={realtimeInput:eE(e)},this.conn.send(JSON.stringify(s))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function Uj(t){const e={};return t.forEach((s,a)=>{e[a]=s}),e}function Pj(t){const e=new Headers;for(const[s,a]of Object.entries(t))e.append(s,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fx=10;function zx(t){var e,s,a;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const d of(s=t==null?void 0:t.tools)!==null&&s!==void 0?s:[])if(ya(d)){r=!0;break}if(!r)return!0;const c=(a=t==null?void 0:t.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return c&&(c<0||!Number.isInteger(c))||c==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",c),!0):!1}function ya(t){return"callTool"in t&&typeof t.callTool=="function"}function Lj(t){var e,s,a;return(a=(s=(e=t.config)===null||e===void 0?void 0:e.tools)===null||s===void 0?void 0:s.some(r=>ya(r)))!==null&&a!==void 0?a:!1}function Jx(t){var e;const s=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((a,r)=>{if(ya(a))return;const c=a;c.functionDeclarations&&c.functionDeclarations.length>0&&s.push(r)}),s}function Wx(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bj extends vn{constructor(e){super(),this.apiClient=e,this.generateContent=async s=>{var a,r,c,d,f;const m=await this.processParamsMaybeAddMcpUsage(s);if(this.maybeMoveToResponseJsonSchem(s),!Lj(s)||zx(s.config))return await this.generateContentInternal(m);const p=Jx(s);if(p.length>0){const k=p.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let g,v;const y=Ms(m.contents),N=(c=(r=(a=m.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&c!==void 0?c:Fx;let S=0;for(;S<N&&(g=await this.generateContentInternal(m),!(!g.functionCalls||g.functionCalls.length===0));){const k=g.candidates[0].content,E=[];for(const T of(f=(d=s.config)===null||d===void 0?void 0:d.tools)!==null&&f!==void 0?f:[])if(ya(T)){const C=await T.callTool(g.functionCalls);E.push(...C)}S++,v={role:"user",parts:E},m.contents=Ms(m.contents),m.contents.push(k),m.contents.push(v),Wx(m.config)&&(y.push(k),y.push(v))}return Wx(m.config)&&(g.automaticFunctionCallingHistory=y),g},this.generateContentStream=async s=>{var a,r,c,d,f;if(this.maybeMoveToResponseJsonSchem(s),zx(s.config)){const v=await this.processParamsMaybeAddMcpUsage(s);return await this.generateContentStreamInternal(v)}const m=Jx(s);if(m.length>0){const v=m.map(y=>`tools[${y}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(c=(r=(a=s==null?void 0:s.config)===null||a===void 0?void 0:a.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||c===void 0?void 0:c.streamFunctionCallArguments,g=(f=(d=s==null?void 0:s.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(p&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(s)},this.generateImages=async s=>await this.generateImagesInternal(s).then(a=>{var r;let c;const d=[];if(a!=null&&a.generatedImages)for(const m of a.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((r=m==null?void 0:m.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?c=m==null?void 0:m.safetyAttributes:d.push(m);let f;return c?f={generatedImages:d,positivePromptSafetyAttributes:c,sdkHttpResponse:a.sdkHttpResponse}:f={generatedImages:d,sdkHttpResponse:a.sdkHttpResponse},f}),this.list=async s=>{var a;const d={config:Object.assign(Object.assign({},{queryBase:!0}),s==null?void 0:s.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((a=d.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new yi(gn.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(d),d)},this.editImage=async s=>{const a={model:s.model,prompt:s.prompt,referenceImages:[],config:s.config};return s.referenceImages&&s.referenceImages&&(a.referenceImages=s.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async s=>{let a={numberOfImages:1,mode:"upscale"};s.config&&(a=Object.assign(Object.assign({},a),s.config));const r={model:s.model,image:s.image,upscaleFactor:s.upscaleFactor,config:a};return await this.upscaleImageInternal(r)},this.generateVideos=async s=>{var a,r,c,d,f,m;if((s.prompt||s.image||s.video)&&s.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((a=s.video)===null||a===void 0)&&a.uri&&(!((r=s.video)===null||r===void 0)&&r.videoBytes)?s.video={uri:s.video.uri,mimeType:s.video.mimeType}:!((d=(c=s.source)===null||c===void 0?void 0:c.video)===null||d===void 0)&&d.uri&&(!((m=(f=s.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(s.source.video={uri:s.source.video.uri,mimeType:s.source.video.mimeType})),await this.generateVideosInternal(s)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var s,a,r;const c=(s=e.config)===null||s===void 0?void 0:s.tools;if(!c)return e;const d=await Promise.all(c.map(async m=>ya(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(f.config.tools=d,e.config&&e.config.tools&&ib(e.config.tools)){const m=(r=(a=e.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),ab(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var s,a,r;const c=new Map;for(const d of(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(ya(d)){const f=d,m=await f.tool();for(const p of(r=m.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(c.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);c.set(p.name,f)}}return c}async processAfcStream(e){var s,a,r;const c=(r=(a=(s=e.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:Fx;let d=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(p,g,v){return $s(this,arguments,function*(){for(var y,N,S,k,E,T;f<c;){d&&(f++,d=!1);const R=yield Le(p.processParamsMaybeAddMcpUsage(v)),B=yield Le(p.generateContentStreamInternal(R)),G=[],H=[];try{for(var M=!0,C=(N=void 0,Fs(B)),D;D=yield Le(C.next()),y=D.done,!y;M=!0){k=D.value,M=!1;const z=k;if(yield yield Le(z),z.candidates&&(!((E=z.candidates[0])===null||E===void 0)&&E.content)){H.push(z.candidates[0].content);for(const P of(T=z.candidates[0].content.parts)!==null&&T!==void 0?T:[])if(f<c&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(P.functionCall.name)){const ne=yield Le(g.get(P.functionCall.name).callTool([P.functionCall]));G.push(...ne)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(z){N={error:z}}finally{try{!M&&!y&&(S=C.return)&&(yield Le(S.call(C)))}finally{if(N)throw N.error}}if(G.length>0){d=!0;const z=new bl;z.candidates=[{content:{role:"user",parts:G}}],yield yield Le(z);const P=[];P.push(...H),P.push({role:"user",parts:G});const ne=Ms(v.contents).concat(P);v.contents=ne}else break}})})(this,m,e)}async generateContentInternal(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=qx(this.apiClient,e);return f=_e("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=Hx(g),y=new bl;return Object.assign(y,v),y})}else{const p=Gx(this.apiClient,e);return f=_e("{model}:generateContent",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=Vx(g),y=new bl;return Object.assign(y,v),y})}}async generateContentStreamInternal(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=qx(this.apiClient,e);return f=_e("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),d.then(function(v){return $s(this,arguments,function*(){var y,N,S,k;try{for(var E=!0,T=Fs(v),M;M=yield Le(T.next()),y=M.done,!y;E=!0){k=M.value,E=!1;const C=k,D=Hx(yield Le(C.json()),e);D.sdkHttpResponse={headers:C.headers};const R=new bl;Object.assign(R,D),yield yield Le(R)}}catch(C){N={error:C}}finally{try{!E&&!y&&(S=T.return)&&(yield Le(S.call(T)))}finally{if(N)throw N.error}}})})}else{const p=Gx(this.apiClient,e);return f=_e("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}),d.then(function(v){return $s(this,arguments,function*(){var y,N,S,k;try{for(var E=!0,T=Fs(v),M;M=yield Le(T.next()),y=M.done,!y;E=!0){k=M.value,E=!1;const C=k,D=Vx(yield Le(C.json()),e);D.sdkHttpResponse={headers:C.headers};const R=new bl;Object.assign(R,D),yield yield Le(R)}}catch(C){N={error:C}}finally{try{!E&&!y&&(S=T.return)&&(yield Le(S.call(T)))}finally{if(N)throw N.error}}})})}}async embedContent(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=ME(this.apiClient,e);return f=_e("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=OE(g),y=new Sx;return Object.assign(y,v),y})}else{const p=IE(this.apiClient,e);return f=_e("{model}:batchEmbedContents",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=DE(g),y=new Sx;return Object.assign(y,v),y})}}async generateImagesInternal(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=zE(this.apiClient,e);return f=_e("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=WE(g),y=new _x;return Object.assign(y,v),y})}else{const p=FE(this.apiClient,e);return f=_e("{model}:predict",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=JE(g),y=new _x;return Object.assign(y,v),y})}}async editImageInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI()){const f=CE(this.apiClient,e);return c=_e("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),r.then(m=>{const p=jE(m),g=new M_;return Object.assign(g,p),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI()){const f=zC(this.apiClient,e);return c=_e("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),r.then(m=>{const p=JC(m),g=new D_;return Object.assign(g,p),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI()){const f=EC(this.apiClient,e);return c=_e("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>{const p=CC(m),g=new O_;return Object.assign(g,p),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI()){const f=DC(this.apiClient,e);return c=_e("{model}:predict",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>{const p=OC(m),g=new U_;return Object.assign(g,p),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=uC(this.apiClient,e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),d.then(g=>wu(g))}else{const p=dC(this.apiClient,e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>yu(g))}}async listInternal(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=yC(this.apiClient,e);return f=_e("{models_url}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=NC(g),y=new kx;return Object.assign(y,v),y})}else{const p=vC(this.apiClient,e);return f=_e("{models_url}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=wC(g),y=new kx;return Object.assign(y,v),y})}}async update(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=$C(this.apiClient,e);return f=_e("{model}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),d.then(g=>wu(g))}else{const p=HC(this.apiClient,e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>yu(g))}}async delete(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=_E(this.apiClient,e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=TE(g),y=new Tx;return Object.assign(y,v),y})}else{const p=SE(this.apiClient,e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=kE(g),y=new Tx;return Object.assign(y,v),y})}}async countTokens(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=yE(this.apiClient,e);return f=_e("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=NE(g),y=new Ex;return Object.assign(y,v),y})}else{const p=vE(this.apiClient,e);return f=_e("{model}:countTokens",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=wE(g),y=new Ex;return Object.assign(y,v),y})}}async computeTokens(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI()){const f=fE(this.apiClient,e);return c=_e("{model}:computeTokens",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),r.then(m=>{const p=hE(m),g=new P_;return Object.assign(g,p),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=eC(this.apiClient,e);return f=_e("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),d.then(g=>{const v=QE(g),y=new mo;return Object.assign(y,v),y})}else{const p=ZE(this.apiClient,e);return f=_e("{model}:predictLongRunning",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d.then(g=>{const v=XE(g),y=new mo;return Object.assign(y,v),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gj extends vn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const s=e.operation,a=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=s.name.split("/operations/")[0];let c;a&&"httpOptions"in a&&(c=a.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:r,config:{httpOptions:c}});return s._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:s.name,config:a});return s._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const s=e.operation,a=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=s.name.split("/operations/")[0];let c;a&&"httpOptions"in a&&(c=a.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:r,config:{httpOptions:c}});return s._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:s.name,config:a});return s._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=E_(e);return f=_e("{operationName}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json()),d}else{const p=T_(e);return f=_e("{operationName}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json()),d}}async fetchPredictVideosOperationInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI()){const f=v_(e);return c=_e("{resourceName}:fetchPredictOperation",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qj(t){const e={},s=h(t,["data"]);if(s!=null&&x(e,["data"],s),h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=h(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}function Vj(t){const e={},s=h(t,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(c=>Xj(c))),x(e,["parts"],r)}const a=h(t,["role"]);return a!=null&&x(e,["role"],a),e}function Hj(t,e,s){const a={},r=h(e,["expireTime"]);s!==void 0&&r!=null&&x(s,["expireTime"],r);const c=h(e,["newSessionExpireTime"]);s!==void 0&&c!=null&&x(s,["newSessionExpireTime"],c);const d=h(e,["uses"]);s!==void 0&&d!=null&&x(s,["uses"],d);const f=h(e,["liveConnectConstraints"]);s!==void 0&&f!=null&&x(s,["bidiGenerateContentSetup"],Kj(t,f));const m=h(e,["lockAdditionalFields"]);return s!==void 0&&m!=null&&x(s,["fieldMask"],m),a}function $j(t,e){const s={},a=h(e,["config"]);return a!=null&&x(s,["config"],Hj(t,a,s)),s}function Fj(t){const e={};if(h(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=h(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const a=h(t,["mimeType"]);return a!=null&&x(e,["mimeType"],a),e}function zj(t){const e={},s=h(t,["id"]);s!=null&&x(e,["id"],s);const a=h(t,["args"]);a!=null&&x(e,["args"],a);const r=h(t,["name"]);if(r!=null&&x(e,["name"],r),h(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(h(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Jj(t){const e={};if(h(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=h(t,["enableWidget"]);return s!=null&&x(e,["enableWidget"],s),e}function Wj(t){const e={};if(h(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(h(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=h(t,["timeRangeFilter"]);return s!=null&&x(e,["timeRangeFilter"],s),e}function Yj(t,e){const s={},a=h(t,["generationConfig"]);e!==void 0&&a!=null&&x(e,["setup","generationConfig"],a);const r=h(t,["responseModalities"]);e!==void 0&&r!=null&&x(e,["setup","generationConfig","responseModalities"],r);const c=h(t,["temperature"]);e!==void 0&&c!=null&&x(e,["setup","generationConfig","temperature"],c);const d=h(t,["topP"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topP"],d);const f=h(t,["topK"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","topK"],f);const m=h(t,["maxOutputTokens"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","maxOutputTokens"],m);const p=h(t,["mediaResolution"]);e!==void 0&&p!=null&&x(e,["setup","generationConfig","mediaResolution"],p);const g=h(t,["seed"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","seed"],g);const v=h(t,["speechConfig"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","speechConfig"],Vu(v));const y=h(t,["thinkingConfig"]);e!==void 0&&y!=null&&x(e,["setup","generationConfig","thinkingConfig"],y);const N=h(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],N);const S=h(t,["systemInstruction"]);e!==void 0&&S!=null&&x(e,["setup","systemInstruction"],Vj(Qt(S)));const k=h(t,["tools"]);if(e!==void 0&&k!=null){let B=_a(k);Array.isArray(B)&&(B=B.map(G=>Zj(Sa(G)))),x(e,["setup","tools"],B)}const E=h(t,["sessionResumption"]);e!==void 0&&E!=null&&x(e,["setup","sessionResumption"],Qj(E));const T=h(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&x(e,["setup","inputAudioTranscription"],T);const M=h(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&x(e,["setup","outputAudioTranscription"],M);const C=h(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&x(e,["setup","realtimeInputConfig"],C);const D=h(t,["contextWindowCompression"]);e!==void 0&&D!=null&&x(e,["setup","contextWindowCompression"],D);const R=h(t,["proactivity"]);if(e!==void 0&&R!=null&&x(e,["setup","proactivity"],R),h(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function Kj(t,e){const s={},a=h(e,["model"]);a!=null&&x(s,["setup","model"],nt(t,a));const r=h(e,["config"]);return r!=null&&x(s,["config"],Yj(r,s)),s}function Xj(t){const e={},s=h(t,["mediaResolution"]);s!=null&&x(e,["mediaResolution"],s);const a=h(t,["codeExecutionResult"]);a!=null&&x(e,["codeExecutionResult"],a);const r=h(t,["executableCode"]);r!=null&&x(e,["executableCode"],r);const c=h(t,["fileData"]);c!=null&&x(e,["fileData"],Fj(c));const d=h(t,["functionCall"]);d!=null&&x(e,["functionCall"],zj(d));const f=h(t,["functionResponse"]);f!=null&&x(e,["functionResponse"],f);const m=h(t,["inlineData"]);m!=null&&x(e,["inlineData"],qj(m));const p=h(t,["text"]);p!=null&&x(e,["text"],p);const g=h(t,["thought"]);g!=null&&x(e,["thought"],g);const v=h(t,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const y=h(t,["videoMetadata"]);return y!=null&&x(e,["videoMetadata"],y),e}function Qj(t){const e={},s=h(t,["handle"]);if(s!=null&&x(e,["handle"],s),h(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Zj(t){const e={};if(h(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=h(t,["computerUse"]);s!=null&&x(e,["computerUse"],s);const a=h(t,["fileSearch"]);a!=null&&x(e,["fileSearch"],a);const r=h(t,["codeExecution"]);if(r!=null&&x(e,["codeExecution"],r),h(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=h(t,["functionDeclarations"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),x(e,["functionDeclarations"],g)}const d=h(t,["googleMaps"]);d!=null&&x(e,["googleMaps"],Jj(d));const f=h(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],Wj(f));const m=h(t,["googleSearchRetrieval"]);m!=null&&x(e,["googleSearchRetrieval"],m);const p=h(t,["urlContext"]);return p!=null&&x(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eA(t){const e=[];for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const a=t[s];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const r=Object.keys(a).map(c=>`${s}.${c}`);e.push(...r)}else e.push(s)}return e.join(",")}function tA(t,e){let s=null;const a=t.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const c=a.setup;typeof c=="object"&&c!==null?(t.bidiGenerateContentSetup=c,s=c):delete t.bidiGenerateContentSetup}else a!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(s){const c=eA(s);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)c?t.fieldMask=c:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(p=>d.includes(p)?`generationConfig.${p}`:p));const m=[];c&&m.push(c),f.length>0&&m.push(...f),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class sA extends vn{constructor(e){super(),this.apiClient=e}async create(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=$j(this.apiClient,e);c=_e("auth_tokens",f._url),d=f._query,delete f.config,delete f._url,delete f._query;const m=tA(f,e.config);return r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nA(t,e){const s={},a=h(t,["force"]);return e!==void 0&&a!=null&&x(e,["_query","force"],a),s}function iA(t){const e={},s=h(t,["name"]);s!=null&&x(e,["_url","name"],s);const a=h(t,["config"]);return a!=null&&nA(a,e),e}function aA(t){const e={},s=h(t,["name"]);return s!=null&&x(e,["_url","name"],s),e}function lA(t,e){const s={},a=h(t,["pageSize"]);e!==void 0&&a!=null&&x(e,["_query","pageSize"],a);const r=h(t,["pageToken"]);return e!==void 0&&r!=null&&x(e,["_query","pageToken"],r),s}function rA(t){const e={},s=h(t,["parent"]);s!=null&&x(e,["_url","parent"],s);const a=h(t,["config"]);return a!=null&&lA(a,e),e}function oA(t){const e={},s=h(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const a=h(t,["nextPageToken"]);a!=null&&x(e,["nextPageToken"],a);const r=h(t,["documents"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d)),x(e,["documents"],c)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cA extends vn{constructor(e){super(),this.apiClient=e,this.list=async s=>new yi(gn.PAGED_ITEM_DOCUMENTS,a=>this.listInternal({parent:s.parent,config:a.config}),await this.listInternal(s),s)}async get(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=aA(e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var s,a;let r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iA(e);r=_e("{name}",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rA(e);return c=_e("{parent}/documents",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>{const p=oA(m),g=new L_;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dA extends vn{constructor(e,s=new cA(e)){super(),this.apiClient=e,this.documents=s,this.list=async(a={})=>new yi(gn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(a),a)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ej(e);return c=_e("fileSearchStores",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async get(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=nj(e);return c=_e("{name}",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>m)}}async delete(e){var s,a;let r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sj(e);r=_e("{name}",d._url),c=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cj(e);return c=_e("fileSearchStores",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>{const p=dj(m),g=new B_;return Object.assign(g,p),g})}}async uploadToFileSearchStoreInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uj(e);return c=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>{const p=fj(m),g=new G_;return Object.assign(g,p),g})}}async importFile(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=lj(e);return c=_e("{file_search_store_name}:importFile",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),r.then(m=>{const p=aj(m),g=new Pu;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let lb=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return lb=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),s=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(+a^s()&15>>+a/4).toString(16))};const uA=()=>lb();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Su(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const _u=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ds extends Error{}class ns extends Ds{constructor(e,s,a,r){super(`${ns.makeMessage(e,s,a)}`),this.status=e,this.headers=r,this.error=s}static makeMessage(e,s,a){const r=s!=null&&s.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):a;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,s,a,r){if(!e||!r)return new Eo({message:a,cause:_u(s)});const c=s;return e===400?new ob(e,c,a,r):e===401?new cb(e,c,a,r):e===403?new db(e,c,a,r):e===404?new ub(e,c,a,r):e===409?new fb(e,c,a,r):e===422?new hb(e,c,a,r):e===429?new pb(e,c,a,r):e>=500?new mb(e,c,a,r):new ns(e,c,a,r)}}class ku extends ns{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Eo extends ns{constructor({message:e,cause:s}){super(void 0,void 0,e||"Connection error.",void 0),s&&(this.cause=s)}}class rb extends Eo{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ob extends ns{}class cb extends ns{}class db extends ns{}class ub extends ns{}class fb extends ns{}class hb extends ns{}class pb extends ns{}class mb extends ns{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fA=/^[a-z][a-z0-9+.-]*:/i,hA=t=>fA.test(t);let Tu=t=>(Tu=Array.isArray,Tu(t));const pA=Tu;let mA=pA;const Yx=mA;function xA(t){if(!t)return!0;for(const e in t)return!1;return!0}function gA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const bA=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ds(`${t} must be an integer`);if(e<0)throw new Ds(`${t} must be a positive integer`);return e},vA=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yA=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wA(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const NA=()=>{var t,e,s,a,r;const c=wA();if(c==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":Xx(Deno.build.os),"X-Stainless-Arch":Kx(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(c==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":Xx((s=globalThis.process.platform)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Arch":Kx((a=globalThis.process.arch)!==null&&a!==void 0?a:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const d=SA();return d?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${d.browser}`,"X-Stainless-Runtime-Version":d.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function SA(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:s}of t){const a=s.exec(navigator.userAgent);if(a){const r=a[1]||0,c=a[2]||0,d=a[3]||0;return{browser:e,version:`${r}.${c}.${d}`}}}return null}const Kx=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Xx=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let so;const _A=()=>so??(so=NA());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kA(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function xb(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function TA(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return xb({start(){},async pull(s){const{done:a,value:r}=await e.next();a?s.close():s.enqueue(r)},async cancel(){var s;await((s=e.return)===null||s===void 0?void 0:s.call(e))}})}function gb(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const s=await e.read();return s!=null&&s.done&&e.releaseLock(),s}catch(s){throw e.releaseLock(),s}},async return(){const s=e.cancel();return e.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function EA(t){var e,s;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((s=(e=t[Symbol.asyncIterator]()).return)===null||s===void 0?void 0:s.call(e));return}const a=t.getReader(),r=a.cancel();a.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CA=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bb=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,s=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(s?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function tu(t,e,s){return bb(),new File(t,e??"unknown_file",s)}function jA(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const AA=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vb=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",RA=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&vb(t),IA=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function MA(t,e,s){if(bb(),t=await t,RA(t))return t instanceof File?t:tu([await t.arrayBuffer()],t.name);if(IA(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),tu(await Eu(r),e,s)}const a=await Eu(t);if(e||(e=jA(t)),!(s!=null&&s.type)){const r=a.find(c=>typeof c=="object"&&"type"in c&&c.type);typeof r=="string"&&(s=Object.assign(Object.assign({},s),{type:r}))}return tu(a,e,s)}async function Eu(t){var e,s,a,r,c;let d=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)d.push(t);else if(vb(t))d.push(t instanceof Blob?t:await t.arrayBuffer());else if(AA(t))try{for(var f=!0,m=Fs(t),p;p=await m.next(),e=p.done,!e;f=!0){r=p.value,f=!1;const g=r;d.push(...await Eu(g))}}catch(g){s={error:g}}finally{try{!f&&!e&&(a=m.return)&&await a.call(m)}finally{if(s)throw s.error}}else{const g=(c=t==null?void 0:t.constructor)===null||c===void 0?void 0:c.name;throw new Error(`Unexpected data type: ${typeof t}${g?`; constructor: ${g}`:""}${DA(t)}`)}return d}function DA(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(s=>`"${s}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yb{constructor(e){this._client=e}}yb._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wb(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Qx=Object.freeze(Object.create(null)),OA=(t=wb)=>(function(s,...a){if(s.length===1)return s[0];let r=!1;const c=[],d=s.reduce((g,v,y)=>{var N,S,k;/[?#]/.test(v)&&(r=!0);const E=a[y];let T=(r?encodeURIComponent:t)(""+E);return y!==a.length&&(E==null||typeof E=="object"&&E.toString===((k=Object.getPrototypeOf((S=Object.getPrototypeOf((N=E.hasOwnProperty)!==null&&N!==void 0?N:Qx))!==null&&S!==void 0?S:Qx))===null||k===void 0?void 0:k.toString))&&(T=E+"",c.push({start:g.length+v.length,length:T.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),g+v+(y===a.length?"":T)},""),f=d.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=m.exec(f))!==null;)c.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(c.sort((g,v)=>g.start-v.start),c.length>0){let g=0;const v=c.reduce((y,N)=>{const S=" ".repeat(N.start-g),k="^".repeat(N.length);return g=N.start+N.length,y+S+k},"");throw new Ds(`Path parameters result in path with invalid segments:
${c.map(y=>y.error).join(`
`)}
${d}
${v}`)}return d}),no=OA(wb);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nb extends yb{create(e,s){var a;const{api_version:r=this._client.apiVersion}=e,c=go(e,["api_version"]);if("model"in c&&"agent_config"in c)throw new Ds("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in c&&"generation_config"in c)throw new Ds("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(no`/${r}/interactions`,Object.assign(Object.assign({body:c},s),{stream:(a=e.stream)!==null&&a!==void 0?a:!1}))}delete(e,s={},a){const{api_version:r=this._client.apiVersion}=s??{};return this._client.delete(no`/${r}/interactions/${e}`,a)}cancel(e,s={},a){const{api_version:r=this._client.apiVersion}=s??{};return this._client.post(no`/${r}/interactions/${e}/cancel`,a)}get(e,s={},a){var r;const c=s??{},{api_version:d=this._client.apiVersion}=c,f=go(c,["api_version"]);return this._client.get(no`/${d}/interactions/${e}`,Object.assign(Object.assign({query:f},a),{stream:(r=s==null?void 0:s.stream)!==null&&r!==void 0?r:!1}))}}Nb._key=Object.freeze(["interactions"]);class Sb extends Nb{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UA(t){let e=0;for(const r of t)e+=r.length;const s=new Uint8Array(e);let a=0;for(const r of t)s.set(r,a),a+=r.length;return s}let io;function $u(t){let e;return(io??(e=new globalThis.TextEncoder,io=e.encode.bind(e)))(t)}let ao;function Zx(t){let e;return(ao??(e=new globalThis.TextDecoder,ao=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Co{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const s=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?$u(e):e;this.buffer=UA([this.buffer,s]);const a=[];let r;for(;(r=PA(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){a.push(Zx(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const c=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,d=Zx(this.buffer.subarray(0,c));a.push(d),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return a}flush(){return this.buffer.length?this.decode(`
`):[]}}Co.NEWLINE_CHARS=new Set([`
`,"\r"]);Co.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function PA(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function LA(t){for(let a=0;a<t.length-1;a++){if(t[a]===10&&t[a+1]===10||t[a]===13&&t[a+1]===13)return a+2;if(t[a]===13&&t[a+1]===10&&a+3<t.length&&t[a+2]===13&&t[a+3]===10)return a+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bo={off:0,error:200,warn:300,info:400,debug:500},eg=(t,e,s)=>{if(t){if(gA(bo,t))return t;ss(s).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(bo))}`)}};function wl(){}function lo(t,e,s){return!e||bo[t]>bo[s]?wl:e[t].bind(e)}const BA={error:wl,warn:wl,info:wl,debug:wl};let tg=new WeakMap;function ss(t){var e;const s=t.logger,a=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!s)return BA;const r=tg.get(s);if(r&&r[0]===a)return r[1];const c={error:lo("error",s,a),warn:lo("warn",s,a),info:lo("info",s,a),debug:lo("debug",s,a)};return tg.set(s,[a,c]),c}const xi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,s])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":s]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ga{constructor(e,s,a){this.iterator=e,this.controller=s,this.client=a}static fromSSEResponse(e,s,a){let r=!1;const c=a?ss(a):console;function d(){return $s(this,arguments,function*(){var m,p,g,v;if(r)throw new Ds("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let y=!1;try{try{for(var N=!0,S=Fs(GA(e,s)),k;k=yield Le(S.next()),m=k.done,!m;N=!0){v=k.value,N=!1;const E=v;if(!y)if(E.data.startsWith("[DONE]")){y=!0;continue}else try{yield yield Le(JSON.parse(E.data))}catch(T){throw c.error("Could not parse message into JSON:",E.data),c.error("From chunk:",E.raw),T}}}catch(E){p={error:E}}finally{try{!N&&!m&&(g=S.return)&&(yield Le(g.call(S)))}finally{if(p)throw p.error}}y=!0}catch(E){if(Su(E))return yield Le(void 0);throw E}finally{y||s.abort()}})}return new ga(d,s,a)}static fromReadableStream(e,s,a){let r=!1;function c(){return $s(this,arguments,function*(){var m,p,g,v;const y=new Co,N=gb(e);try{for(var S=!0,k=Fs(N),E;E=yield Le(k.next()),m=E.done,!m;S=!0){v=E.value,S=!1;const T=v;for(const M of y.decode(T))yield yield Le(M)}}catch(T){p={error:T}}finally{try{!S&&!m&&(g=k.return)&&(yield Le(g.call(k)))}finally{if(p)throw p.error}}for(const T of y.flush())yield yield Le(T)})}function d(){return $s(this,arguments,function*(){var m,p,g,v;if(r)throw new Ds("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let y=!1;try{try{for(var N=!0,S=Fs(c()),k;k=yield Le(S.next()),m=k.done,!m;N=!0){v=k.value,N=!1;const E=v;y||E&&(yield yield Le(JSON.parse(E)))}}catch(E){p={error:E}}finally{try{!N&&!m&&(g=S.return)&&(yield Le(g.call(S)))}finally{if(p)throw p.error}}y=!0}catch(E){if(Su(E))return yield Le(void 0);throw E}finally{y||s.abort()}})}return new ga(d,s,a)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],s=[],a=this.iterator(),r=c=>({next:()=>{if(c.length===0){const d=a.next();e.push(d),s.push(d)}return c.shift()}});return[new ga(()=>r(e),this.controller,this.client),new ga(()=>r(s),this.controller,this.client)]}toReadableStream(){const e=this;let s;return xb({async start(){s=e[Symbol.asyncIterator]()},async pull(a){try{const{value:r,done:c}=await s.next();if(c)return a.close();const d=$u(JSON.stringify(r)+`
`);a.enqueue(d)}catch(r){a.error(r)}},async cancel(){var a;await((a=s.return)===null||a===void 0?void 0:a.call(s))}})}}function GA(t,e){return $s(this,arguments,function*(){var a,r,c,d;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ds("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ds("Attempted to iterate over a response with no body");const f=new VA,m=new Co,p=gb(t.body);try{for(var g=!0,v=Fs(qA(p)),y;y=yield Le(v.next()),a=y.done,!a;g=!0){d=y.value,g=!1;const N=d;for(const S of m.decode(N)){const k=f.decode(S);k&&(yield yield Le(k))}}}catch(N){r={error:N}}finally{try{!g&&!a&&(c=v.return)&&(yield Le(c.call(v)))}finally{if(r)throw r.error}}for(const N of m.flush()){const S=f.decode(N);S&&(yield yield Le(S))}})}function qA(t){return $s(this,arguments,function*(){var s,a,r,c;let d=new Uint8Array;try{for(var f=!0,m=Fs(t),p;p=yield Le(m.next()),s=p.done,!s;f=!0){c=p.value,f=!1;const g=c;if(g==null)continue;const v=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?$u(g):g;let y=new Uint8Array(d.length+v.length);y.set(d),y.set(v,d.length),d=y;let N;for(;(N=LA(d))!==-1;)yield yield Le(d.slice(0,N)),d=d.slice(N)}}catch(g){a={error:g}}finally{try{!f&&!s&&(r=m.return)&&(yield Le(r.call(m)))}finally{if(a)throw a.error}}d.length>0&&(yield yield Le(d))})}class VA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(e),e.startsWith(":"))return null;let[s,a,r]=HA(e,":");return r.startsWith(" ")&&(r=r.substring(1)),s==="event"?this.event=r:s==="data"&&this.data.push(r),null}}function HA(t,e){const s=t.indexOf(e);return s!==-1?[t.substring(0,s),e,t.substring(s+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $A(t,e){const{response:s,requestLogID:a,retryOfRequestLogID:r,startTime:c}=e,d=await(async()=>{var f;if(e.options.stream)return ss(t).debug("response",s.status,s.url,s.headers,s.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(s,e.controller,t):ga.fromSSEResponse(s,e.controller,t);if(s.status===204)return null;if(e.options.__binaryResponse)return s;const m=s.headers.get("content-type"),p=(f=m==null?void 0:m.split(";")[0])===null||f===void 0?void 0:f.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await s.json():await s.text()})();return ss(t).debug(`[${a}] response parsed`,xi({retryOfRequestLogID:r,url:s.url,status:s.status,body:d,durationMs:Date.now()-c})),d}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fu extends Promise{constructor(e,s,a=$A){super(r=>{r(null)}),this.responsePromise=s,this.parseResponse=a,this.client=e}_thenUnwrap(e){return new Fu(this.client,this.responsePromise,async(s,a)=>e(await this.parseResponse(s,a),a))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:s}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,s){return this.parse().then(e,s)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _b=Symbol("brand.privateNullableHeaders");function*FA(t){if(!t)return;if(_b in t){const{values:a,nulls:r}=t;yield*a.entries();for(const c of r)yield[c,null];return}let e=!1,s;t instanceof Headers?s=t.entries():Yx(t)?s=t:(e=!0,s=Object.entries(t??{}));for(let a of s){const r=a[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const c=Yx(a[1])?a[1]:[a[1]];let d=!1;for(const f of c)f!==void 0&&(e&&!d&&(d=!0,yield[r,null]),yield[r,f])}}const vl=t=>{const e=new Headers,s=new Set;for(const a of t){const r=new Set;for(const[c,d]of FA(a)){const f=c.toLowerCase();r.has(f)||(e.delete(c),r.add(f)),d===null?(e.delete(c),s.add(f)):(e.append(c,d),s.delete(f))}}return{[_b]:!0,values:e,nulls:s}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const su=t=>{var e,s,a,r,c,d;if(typeof globalThis.process<"u")return(a=(s=(e=h_)===null||e===void 0?void 0:e[t])===null||s===void 0?void 0:s.trim())!==null&&a!==void 0?a:void 0;if(typeof globalThis.Deno<"u")return(d=(c=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||c===void 0?void 0:c.call(r,t))===null||d===void 0?void 0:d.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kb;class jo{constructor(e){var s,a,r,c,d,f,m,{baseURL:p=su("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(s=su("GEMINI_API_KEY"))!==null&&s!==void 0?s:null,apiVersion:v="v1beta"}=e,y=go(e,["baseURL","apiKey","apiVersion"]);const N=Object.assign(Object.assign({apiKey:g,apiVersion:v},y),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=N.baseURL,this.timeout=(a=N.timeout)!==null&&a!==void 0?a:jo.DEFAULT_TIMEOUT,this.logger=(r=N.logger)!==null&&r!==void 0?r:console;const S="warn";this.logLevel=S,this.logLevel=(d=(c=eg(N.logLevel,"ClientOptions.logLevel",this))!==null&&c!==void 0?c:eg(su("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&d!==void 0?d:S,this.fetchOptions=N.fetchOptions,this.maxRetries=(f=N.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(m=N.fetch)!==null&&m!==void 0?m:kA(),this.encoder=CA,this._options=N,this.apiKey=g,this.apiVersion=v,this.clientAdapter=N.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:s}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!s.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const s=vl([e.headers]);if(!(s.values.has("authorization")||s.values.has("x-goog-api-key"))){if(this.apiKey)return vl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return vl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([s,a])=>typeof a<"u").map(([s,a])=>{if(typeof a=="string"||typeof a=="number"||typeof a=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(a)}`;if(a===null)return`${encodeURIComponent(s)}=`;throw new Ds(`Cannot stringify type ${typeof a}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${pa}`}defaultIdempotencyKey(){return`stainless-node-retry-${uA()}`}makeStatusError(e,s,a,r){return ns.generate(e,s,a,r)}buildURL(e,s,a){const r=!this.baseURLOverridden()&&a||this.baseURL,c=hA(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return xA(d)||(s=Object.assign(Object.assign({},d),s)),typeof s=="object"&&s&&!Array.isArray(s)&&(c.search=this.stringifyQuery(s)),c.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const s=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${s}`}}async prepareRequest(e,{url:s,options:a}){}get(e,s){return this.methodRequest("get",e,s)}post(e,s){return this.methodRequest("post",e,s)}patch(e,s){return this.methodRequest("patch",e,s)}put(e,s){return this.methodRequest("put",e,s)}delete(e,s){return this.methodRequest("delete",e,s)}methodRequest(e,s,a){return this.request(Promise.resolve(a).then(r=>Object.assign({method:e,path:s},r)))}request(e,s=null){return new Fu(this,this.makeRequest(e,s,void 0))}async makeRequest(e,s,a){var r,c,d;const f=await e,m=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;s==null&&(s=m),await this.prepareOptions(f);const{req:p,url:g,timeout:v}=await this.buildRequest(f,{retryCount:m-s});await this.prepareRequest(p,{url:g,options:f});const y="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),N=a===void 0?"":`, retryOf: ${a}`,S=Date.now();if(ss(this).debug(`[${y}] sending request`,xi({retryOfRequestLogID:a,method:f.method,url:g,options:f,headers:p.headers})),!((c=f.signal)===null||c===void 0)&&c.aborted)throw new ku;const k=new AbortController,E=await this.fetchWithTimeout(g,p,v,k).catch(_u),T=Date.now();if(E instanceof globalThis.Error){const C=`retrying, ${s} attempts remaining`;if(!((d=f.signal)===null||d===void 0)&&d.aborted)throw new ku;const D=Su(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(s)return ss(this).info(`[${y}] connection ${D?"timed out":"failed"} - ${C}`),ss(this).debug(`[${y}] connection ${D?"timed out":"failed"} (${C})`,xi({retryOfRequestLogID:a,url:g,durationMs:T-S,message:E.message})),this.retryRequest(f,s,a??y);throw ss(this).info(`[${y}] connection ${D?"timed out":"failed"} - error; no more retries left`),ss(this).debug(`[${y}] connection ${D?"timed out":"failed"} (error; no more retries left)`,xi({retryOfRequestLogID:a,url:g,durationMs:T-S,message:E.message})),D?new rb:new Eo({cause:E})}const M=`[${y}${N}] ${p.method} ${g} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${T-S}ms`;if(!E.ok){const C=await this.shouldRetry(E);if(s&&C){const z=`retrying, ${s} attempts remaining`;return await EA(E.body),ss(this).info(`${M} - ${z}`),ss(this).debug(`[${y}] response error (${z})`,xi({retryOfRequestLogID:a,url:E.url,status:E.status,headers:E.headers,durationMs:T-S})),this.retryRequest(f,s,a??y,E.headers)}const D=C?"error; no more retries left":"error; not retryable";ss(this).info(`${M} - ${D}`);const R=await E.text().catch(z=>_u(z).message),B=vA(R),G=B?void 0:R;throw ss(this).debug(`[${y}] response error (${D})`,xi({retryOfRequestLogID:a,url:E.url,status:E.status,headers:E.headers,message:G,durationMs:Date.now()-S})),this.makeStatusError(E.status,B,G,E.headers)}return ss(this).info(M),ss(this).debug(`[${y}] response start`,xi({retryOfRequestLogID:a,url:E.url,status:E.status,headers:E.headers,durationMs:T-S})),{response:E,options:f,controller:k,requestLogID:y,retryOfRequestLogID:a,startTime:S}}async fetchWithTimeout(e,s,a,r){const c=s||{},{signal:d,method:f}=c,m=go(c,["signal","method"]);d&&d.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),a),g=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,v=Object.assign(Object.assign(Object.assign({signal:r.signal},g?{duplex:"half"}:{}),{method:"GET"}),m);f&&(v.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(p)}}async shouldRetry(e){const s=e.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,s,a,r){var c;let d;const f=r==null?void 0:r.get("retry-after-ms");if(f){const p=parseFloat(f);Number.isNaN(p)||(d=p)}const m=r==null?void 0:r.get("retry-after");if(m&&!d){const p=parseFloat(m);Number.isNaN(p)?d=Date.parse(m)-Date.now():d=p*1e3}if(!(d&&0<=d&&d<60*1e3)){const p=(c=e.maxRetries)!==null&&c!==void 0?c:this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(s,p)}return await yA(d),this.makeRequest(e,s-1,a)}calculateDefaultRetryTimeoutMillis(e,s){const c=s-e,d=Math.min(.5*Math.pow(2,c),8),f=1-Math.random()*.25;return d*f*1e3}async buildRequest(e,{retryCount:s=0}={}){var a,r,c;const d=Object.assign({},e),{method:f,path:m,query:p,defaultBaseURL:g}=d,v=this.buildURL(m,p,g);"timeout"in d&&bA("timeout",d.timeout),d.timeout=(a=d.timeout)!==null&&a!==void 0?a:this.timeout;const{bodyHeaders:y,body:N}=this.buildBody({options:d}),S=await this.buildHeaders({options:e,method:f,bodyHeaders:y,retryCount:s});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:S},d.signal&&{signal:d.signal}),globalThis.ReadableStream&&N instanceof globalThis.ReadableStream&&{duplex:"half"}),N&&{body:N}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(c=d.fetchOptions)!==null&&c!==void 0?c:{}),url:v,timeout:d.timeout}}async buildHeaders({options:e,method:s,bodyHeaders:a,retryCount:r}){let c={};this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=e.idempotencyKey);const d=await this.authHeaders(e);let f=vl([c,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),_A()),this._options.defaultHeaders,a,e.headers,d]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:s}}){if(!e)return{bodyHeaders:void 0,body:void 0};const a=vl([s]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&a.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:TA(e)}:this.encoder({body:e,headers:a})}}jo.DEFAULT_TIMEOUT=6e4;class Ht extends jo{constructor(){super(...arguments),this.interactions=new Sb(this)}}kb=Ht;Ht.GeminiNextGenAPIClient=kb;Ht.GeminiNextGenAPIClientError=Ds;Ht.APIError=ns;Ht.APIConnectionError=Eo;Ht.APIConnectionTimeoutError=rb;Ht.APIUserAbortError=ku;Ht.NotFoundError=ub;Ht.ConflictError=fb;Ht.RateLimitError=pb;Ht.BadRequestError=ob;Ht.AuthenticationError=cb;Ht.InternalServerError=mb;Ht.PermissionDeniedError=db;Ht.UnprocessableEntityError=hb;Ht.toFile=MA;Ht.Interactions=Sb;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zA(t,e){const s={},a=h(t,["name"]);return a!=null&&x(s,["_url","name"],a),s}function JA(t,e){const s={},a=h(t,["name"]);return a!=null&&x(s,["_url","name"],a),s}function WA(t,e){const s={},a=h(t,["sdkHttpResponse"]);return a!=null&&x(s,["sdkHttpResponse"],a),s}function YA(t,e){const s={},a=h(t,["sdkHttpResponse"]);return a!=null&&x(s,["sdkHttpResponse"],a),s}function KA(t,e,s){const a={};if(h(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=h(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&x(e,["displayName"],r),h(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=h(t,["epochCount"]);e!==void 0&&c!=null&&x(e,["tuningTask","hyperparameters","epochCount"],c);const d=h(t,["learningRateMultiplier"]);if(d!=null&&x(a,["tuningTask","hyperparameters","learningRateMultiplier"],d),h(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(h(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(h(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(h(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(h(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const f=h(t,["batchSize"]);e!==void 0&&f!=null&&x(e,["tuningTask","hyperparameters","batchSize"],f);const m=h(t,["learningRate"]);if(e!==void 0&&m!=null&&x(e,["tuningTask","hyperparameters","learningRate"],m),h(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(h(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(h(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(h(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(h(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(h(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return a}function XA(t,e,s){const a={};let r=h(s,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const R=h(t,["validationDataset"]);e!==void 0&&R!=null&&x(e,["supervisedTuningSpec"],nu(R))}else if(r==="PREFERENCE_TUNING"){const R=h(t,["validationDataset"]);e!==void 0&&R!=null&&x(e,["preferenceOptimizationSpec"],nu(R))}else if(r==="DISTILLATION"){const R=h(t,["validationDataset"]);e!==void 0&&R!=null&&x(e,["distillationSpec"],nu(R))}const c=h(t,["tunedModelDisplayName"]);e!==void 0&&c!=null&&x(e,["tunedModelDisplayName"],c);const d=h(t,["description"]);e!==void 0&&d!=null&&x(e,["description"],d);let f=h(s,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const R=h(t,["epochCount"]);e!==void 0&&R!=null&&x(e,["supervisedTuningSpec","hyperParameters","epochCount"],R)}else if(f==="PREFERENCE_TUNING"){const R=h(t,["epochCount"]);e!==void 0&&R!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],R)}else if(f==="DISTILLATION"){const R=h(t,["epochCount"]);e!==void 0&&R!=null&&x(e,["distillationSpec","hyperParameters","epochCount"],R)}let m=h(s,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const R=h(t,["learningRateMultiplier"]);e!==void 0&&R!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],R)}else if(m==="PREFERENCE_TUNING"){const R=h(t,["learningRateMultiplier"]);e!==void 0&&R!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],R)}else if(m==="DISTILLATION"){const R=h(t,["learningRateMultiplier"]);e!==void 0&&R!=null&&x(e,["distillationSpec","hyperParameters","learningRateMultiplier"],R)}let p=h(s,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const R=h(t,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&x(e,["supervisedTuningSpec","exportLastCheckpointOnly"],R)}else if(p==="PREFERENCE_TUNING"){const R=h(t,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&x(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],R)}else if(p==="DISTILLATION"){const R=h(t,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&x(e,["distillationSpec","exportLastCheckpointOnly"],R)}let g=h(s,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const R=h(t,["adapterSize"]);e!==void 0&&R!=null&&x(e,["supervisedTuningSpec","hyperParameters","adapterSize"],R)}else if(g==="PREFERENCE_TUNING"){const R=h(t,["adapterSize"]);e!==void 0&&R!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],R)}else if(g==="DISTILLATION"){const R=h(t,["adapterSize"]);e!==void 0&&R!=null&&x(e,["distillationSpec","hyperParameters","adapterSize"],R)}let v=h(s,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const R=h(t,["tuningMode"]);e!==void 0&&R!=null&&x(e,["supervisedTuningSpec","tuningMode"],R)}const y=h(t,["customBaseModel"]);e!==void 0&&y!=null&&x(e,["customBaseModel"],y);let N=h(s,["config","method"]);if(N===void 0&&(N="SUPERVISED_FINE_TUNING"),N==="SUPERVISED_FINE_TUNING"){const R=h(t,["batchSize"]);e!==void 0&&R!=null&&x(e,["supervisedTuningSpec","hyperParameters","batchSize"],R)}let S=h(s,["config","method"]);if(S===void 0&&(S="SUPERVISED_FINE_TUNING"),S==="SUPERVISED_FINE_TUNING"){const R=h(t,["learningRate"]);e!==void 0&&R!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRate"],R)}const k=h(t,["labels"]);e!==void 0&&k!=null&&x(e,["labels"],k);const E=h(t,["beta"]);e!==void 0&&E!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","beta"],E);const T=h(t,["baseTeacherModel"]);e!==void 0&&T!=null&&x(e,["distillationSpec","baseTeacherModel"],T);const M=h(t,["tunedTeacherModelSource"]);e!==void 0&&M!=null&&x(e,["distillationSpec","tunedTeacherModelSource"],M);const C=h(t,["sftLossWeightMultiplier"]);e!==void 0&&C!=null&&x(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],C);const D=h(t,["outputUri"]);return e!==void 0&&D!=null&&x(e,["outputUri"],D),a}function QA(t,e){const s={},a=h(t,["baseModel"]);a!=null&&x(s,["baseModel"],a);const r=h(t,["preTunedModel"]);r!=null&&x(s,["preTunedModel"],r);const c=h(t,["trainingDataset"]);c!=null&&c1(c);const d=h(t,["config"]);return d!=null&&KA(d,s),s}function ZA(t,e){const s={},a=h(t,["baseModel"]);a!=null&&x(s,["baseModel"],a);const r=h(t,["preTunedModel"]);r!=null&&x(s,["preTunedModel"],r);const c=h(t,["trainingDataset"]);c!=null&&d1(c,s,e);const d=h(t,["config"]);return d!=null&&XA(d,s,e),s}function e1(t,e){const s={},a=h(t,["name"]);return a!=null&&x(s,["_url","name"],a),s}function t1(t,e){const s={},a=h(t,["name"]);return a!=null&&x(s,["_url","name"],a),s}function s1(t,e,s){const a={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const c=h(t,["pageToken"]);e!==void 0&&c!=null&&x(e,["_query","pageToken"],c);const d=h(t,["filter"]);return e!==void 0&&d!=null&&x(e,["_query","filter"],d),a}function n1(t,e,s){const a={},r=h(t,["pageSize"]);e!==void 0&&r!=null&&x(e,["_query","pageSize"],r);const c=h(t,["pageToken"]);e!==void 0&&c!=null&&x(e,["_query","pageToken"],c);const d=h(t,["filter"]);return e!==void 0&&d!=null&&x(e,["_query","filter"],d),a}function i1(t,e){const s={},a=h(t,["config"]);return a!=null&&s1(a,s),s}function a1(t,e){const s={},a=h(t,["config"]);return a!=null&&n1(a,s),s}function l1(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const c=h(t,["tunedModels"]);if(c!=null){let d=c;Array.isArray(d)&&(d=d.map(f=>Tb(f))),x(s,["tuningJobs"],d)}return s}function r1(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["nextPageToken"]);r!=null&&x(s,["nextPageToken"],r);const c=h(t,["tuningJobs"]);if(c!=null){let d=c;Array.isArray(d)&&(d=d.map(f=>Cu(f))),x(s,["tuningJobs"],d)}return s}function o1(t,e){const s={},a=h(t,["name"]);a!=null&&x(s,["model"],a);const r=h(t,["name"]);return r!=null&&x(s,["endpoint"],r),s}function c1(t,e){const s={};if(h(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(h(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=h(t,["examples"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),x(s,["examples","examples"],r)}return s}function d1(t,e,s){const a={};let r=h(s,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const d=h(t,["gcsUri"]);e!==void 0&&d!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(r==="PREFERENCE_TUNING"){const d=h(t,["gcsUri"]);e!==void 0&&d!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(r==="DISTILLATION"){const d=h(t,["gcsUri"]);e!==void 0&&d!=null&&x(e,["distillationSpec","promptDatasetUri"],d)}let c=h(s,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const d=h(t,["vertexDatasetResource"]);e!==void 0&&d!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(c==="PREFERENCE_TUNING"){const d=h(t,["vertexDatasetResource"]);e!==void 0&&d!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(c==="DISTILLATION"){const d=h(t,["vertexDatasetResource"]);e!==void 0&&d!=null&&x(e,["distillationSpec","promptDatasetUri"],d)}if(h(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function Tb(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["name"]);r!=null&&x(s,["name"],r);const c=h(t,["state"]);c!=null&&x(s,["state"],Vg(c));const d=h(t,["createTime"]);d!=null&&x(s,["createTime"],d);const f=h(t,["tuningTask","startTime"]);f!=null&&x(s,["startTime"],f);const m=h(t,["tuningTask","completeTime"]);m!=null&&x(s,["endTime"],m);const p=h(t,["updateTime"]);p!=null&&x(s,["updateTime"],p);const g=h(t,["description"]);g!=null&&x(s,["description"],g);const v=h(t,["baseModel"]);v!=null&&x(s,["baseModel"],v);const y=h(t,["_self"]);return y!=null&&x(s,["tunedModel"],o1(y)),s}function Cu(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["name"]);r!=null&&x(s,["name"],r);const c=h(t,["state"]);c!=null&&x(s,["state"],Vg(c));const d=h(t,["createTime"]);d!=null&&x(s,["createTime"],d);const f=h(t,["startTime"]);f!=null&&x(s,["startTime"],f);const m=h(t,["endTime"]);m!=null&&x(s,["endTime"],m);const p=h(t,["updateTime"]);p!=null&&x(s,["updateTime"],p);const g=h(t,["error"]);g!=null&&x(s,["error"],g);const v=h(t,["description"]);v!=null&&x(s,["description"],v);const y=h(t,["baseModel"]);y!=null&&x(s,["baseModel"],y);const N=h(t,["tunedModel"]);N!=null&&x(s,["tunedModel"],N);const S=h(t,["preTunedModel"]);S!=null&&x(s,["preTunedModel"],S);const k=h(t,["supervisedTuningSpec"]);k!=null&&x(s,["supervisedTuningSpec"],k);const E=h(t,["preferenceOptimizationSpec"]);E!=null&&x(s,["preferenceOptimizationSpec"],E);const T=h(t,["distillationSpec"]);T!=null&&x(s,["distillationSpec"],T);const M=h(t,["tuningDataStats"]);M!=null&&x(s,["tuningDataStats"],M);const C=h(t,["encryptionSpec"]);C!=null&&x(s,["encryptionSpec"],C);const D=h(t,["partnerModelTuningSpec"]);D!=null&&x(s,["partnerModelTuningSpec"],D);const R=h(t,["customBaseModel"]);R!=null&&x(s,["customBaseModel"],R);const B=h(t,["experiment"]);B!=null&&x(s,["experiment"],B);const G=h(t,["labels"]);G!=null&&x(s,["labels"],G);const H=h(t,["outputUri"]);H!=null&&x(s,["outputUri"],H);const z=h(t,["pipelineJob"]);z!=null&&x(s,["pipelineJob"],z);const P=h(t,["serviceAccount"]);P!=null&&x(s,["serviceAccount"],P);const ne=h(t,["tunedModelDisplayName"]);ne!=null&&x(s,["tunedModelDisplayName"],ne);const le=h(t,["veoTuningSpec"]);return le!=null&&x(s,["veoTuningSpec"],le),s}function u1(t,e){const s={},a=h(t,["sdkHttpResponse"]);a!=null&&x(s,["sdkHttpResponse"],a);const r=h(t,["name"]);r!=null&&x(s,["name"],r);const c=h(t,["metadata"]);c!=null&&x(s,["metadata"],c);const d=h(t,["done"]);d!=null&&x(s,["done"],d);const f=h(t,["error"]);return f!=null&&x(s,["error"],f),s}function nu(t,e){const s={},a=h(t,["gcsUri"]);a!=null&&x(s,["validationDatasetUri"],a);const r=h(t,["vertexDatasetResource"]);return r!=null&&x(s,["validationDatasetUri"],r),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f1 extends vn{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new yi(gn.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(s),s),this.get=async s=>await this.getInternal(s),this.tune=async s=>{var a;if(this.apiClient.isVertexAI())if(s.baseModel.startsWith("projects/")){const r={tunedModelName:s.baseModel};!((a=s.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(r.checkpointId=s.config.preTunedModelCheckpointId);const c=Object.assign(Object.assign({},s),{preTunedModel:r});return c.baseModel=void 0,await this.tuneInternal(c)}else{const r=Object.assign({},s);return await this.tuneInternal(r)}else{const r=Object.assign({},s),c=await this.tuneMldevInternal(r);let d="";return c.metadata!==void 0&&c.metadata.tunedModel!==void 0?d=c.metadata.tunedModel:c.name!==void 0&&c.name.includes("/operations/")&&(d=c.name.split("/operations/")[0]),{name:d,state:mu.JOB_STATE_QUEUED}}}}async getInternal(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=t1(e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>Cu(g))}else{const p=e1(e);return f=_e("{name}",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>Tb(g))}}async listInternal(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=a1(e);return f=_e("tuningJobs",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=r1(g),y=new Cx;return Object.assign(y,v),y})}else{const p=i1(e);return f=_e("tunedModels",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=l1(g),y=new Cx;return Object.assign(y,v),y})}}async cancel(e){var s,a,r,c;let d,f="",m={};if(this.apiClient.isVertexAI()){const p=JA(e);return f=_e("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=YA(g),y=new jx;return Object.assign(y,v),y})}else{const p=zA(e);return f=_e("{name}:cancel",p._url),m=p._query,delete p._url,delete p._query,d=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(c=e.config)===null||c===void 0?void 0:c.abortSignal}).then(g=>g.json().then(v=>{const y=v;return y.sdkHttpResponse={headers:g.headers},y})),d.then(g=>{const v=WA(g),y=new jx;return Object.assign(y,v),y})}}async tuneInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI()){const f=ZA(e,e);return c=_e("tuningJobs",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),r.then(m=>Cu(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var s,a;let r,c="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=QA(e);return c=_e("tunedModels",f._url),d=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:m.headers},g})),r.then(m=>u1(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h1{async download(e,s){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const p1=1024*1024*8,m1=3,x1=1e3,g1=2,vo="x-goog-upload-status";async function b1(t,e,s){var a;const r=await Eb(t,e,s),c=await(r==null?void 0:r.json());if(((a=r==null?void 0:r.headers)===null||a===void 0?void 0:a[vo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function v1(t,e,s){var a;const r=await Eb(t,e,s),c=await(r==null?void 0:r.json());if(((a=r==null?void 0:r.headers)===null||a===void 0?void 0:a[vo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=Ug(c),f=new Lu;return Object.assign(f,d),f}async function Eb(t,e,s){var a,r;let c=0,d=0,f=new gu(new Response),m="upload";for(c=t.size;d<c;){const p=Math.min(p1,c-d),g=t.slice(d,d+p);d+p>=c&&(m+=", finalize");let v=0,y=x1;for(;v<m1&&(f=await s.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(d),"Content-Length":String(p)}}}),!(!((a=f==null?void 0:f.headers)===null||a===void 0)&&a[vo]));)v++,await w1(y),y=y*g1;if(d+=p,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[vo])!=="active")break;if(c<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function y1(t){return{size:t.size,type:t.type}}function w1(t){return new Promise(e=>setTimeout(e,t))}class N1{async upload(e,s,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await b1(e,s,a)}async uploadToFileSearchStore(e,s,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await v1(e,s,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await y1(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S1{create(e,s,a){return new _1(e,s,a)}}class _1{constructor(e,s,a){this.url=e,this.headers=s,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sg="x-goog-api-key";class k1{constructor(e){this.apiKey=e}async addAuthHeaders(e,s){if(e.get(sg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(sg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T1="gl-node/";class Cb{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const s=new Ht({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=s.interactions,this._interactions}constructor(e){var s;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=e.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=e.apiKey;const a=g_(e.httpOptions,e.vertexai,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new k1(this.apiKey);this.apiClient=new yj({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:T1+"web",uploader:new N1,downloader:new h1}),this.models=new Bj(this.apiClient),this.live=new Mj(this.apiClient,r,new S1),this.batches=new Jk(this.apiClient),this.chats=new CT(this.models,this.apiClient),this.caches=new kT(this.apiClient),this.files=new GT(this.apiClient),this.operations=new Gj(this.apiClient),this.authTokens=new sA(this.apiClient),this.tunings=new f1(this.apiClient),this.fileSearchStores=new dA(this.apiClient)}}var jb={};const E1=async(t,e,s)=>{const a=jb.API_KEY;if(!a)return{analysis:"AI Coaching is disabled. Please configure process.env.API_KEY.",tactics:["Ensure API Key is set in environment","Stick to line and length","Rotate the strike"],winProbability:50};const r=new Cb({apiKey:a});try{const c=Math.floor(t.totalBalls/6),d=(t.score/(Math.max(1,t.totalBalls)/6)).toFixed(2),f=await r.models.generateContent({model:"gemini-3-flash-preview",contents:`
        You are an elite T20 Cricket Strategy Coach. Analyze this live situation:
        Match: ${e} vs ${s}
        Innings: ${t.innings}
        Score: ${t.score}/${t.wickets}
        Overs: ${c}.${t.totalBalls%6}
        Run Rate: ${d}
        
        Provide 3 specific, short, tactical instructions for the BOWLING captain to break the partnership or stem the run flow.
        Keep it punchy, aggressive, and data-driven.
      `,config:{responseMimeType:"application/json",responseSchema:{type:Vt.OBJECT,properties:{analysis:{type:Vt.STRING},tactics:{type:Vt.ARRAY,items:{type:Vt.STRING}},winProbability:{type:Vt.NUMBER}}}}});return JSON.parse(f.text||"{}")}catch(c){return console.error("Coach AI Error:",c),{analysis:"Unable to connect to strategy mainframe.",tactics:["Stick to line and length","Protect the boundaries","Rotate the strike"],winProbability:50}}},C1=async(t,e)=>{const s=jb.API_KEY;if(!s)return null;const a=new Cb({apiKey:s});try{const r=await a.models.generateContent({model:"gemini-3-flash-preview",contents:`
        Write a press kit for this cricket match:
        ${t.teamAName} vs ${t.teamBName}
        Result: ${t.result||"Match in progress"}
        Scores: ${t.teamAScore} vs ${t.teamBScore}
        Venue: ${t.venue}
        
        Generate:
        1. A catchy headline.
        2. A 100-word dramatic match summary.
        3. 3 viral style social media posts (Twitter/Instagram) with hashtags.
      `,config:{responseMimeType:"application/json",responseSchema:{type:Vt.OBJECT,properties:{headline:{type:Vt.STRING},summary:{type:Vt.STRING},socialPosts:{type:Vt.ARRAY,items:{type:Vt.STRING}}}}}});return JSON.parse(r.text||"{}")}catch(r){return console.error("Press Kit AI Error:",r),null}},j1=({onBack:t,fixtures:e,isEmbedded:s=!1})=>{var S;const[a,r]=j.useState(null),[c,d]=j.useState("LIGHT"),[f,m]=j.useState("VISUAL"),[p,g]=j.useState(!1),[v,y]=j.useState(null),N=async()=>{if(!a||!a.savedState)return;g(!0);const k=await C1(a,a.savedState);y(k),g(!1)};return i.jsxs("div",{className:`animate-in slide-in-from-bottom-8 duration-500 pb-20 ${s?"":"pt-0"}`,children:[!s&&i.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[i.jsx("button",{onClick:t,className:"w-12 h-12 rounded-full bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-50 hover:text-black transition-all shadow-sm",children:""}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:["Media ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Studio"})]}),i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Generate engaging league assets"})]})]}),i.jsxs("div",{className:"flex gap-4 mb-8",children:[i.jsx("button",{onClick:()=>m("VISUAL"),className:`px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${f==="VISUAL"?"bg-slate-900 text-white":"bg-white border border-slate-200 text-slate-400"}`,children:"Visual Generator"}),i.jsx("button",{onClick:()=>m("AI_PRESS"),className:`px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${f==="AI_PRESS"?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-400"}`,children:"AI Press Room"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[i.jsx("div",{className:"space-y-8",children:i.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-200 shadow-lg",children:[i.jsx("h3",{className:"text-xl font-black text-slate-900 mb-6",children:"Source Selection"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest mb-2 block",children:"Source Match"}),i.jsxs("select",{onChange:k=>r(e.find(E=>E.id===k.target.value)||null),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none",children:[i.jsx("option",{value:"",children:"-- Choose Fixture --"}),e.map(k=>i.jsxs("option",{value:k.id,children:[k.teamAName," vs ",k.teamBName]},k.id))]})]}),f==="VISUAL"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest mb-2 block",children:"Visual Theme"}),i.jsx("div",{className:"flex gap-2",children:["LIGHT","DARK","NEON"].map(k=>i.jsx("button",{onClick:()=>d(k),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase border transition-all ${c===k?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-500 border-slate-200"}`,children:k},k))})]}),f==="AI_PRESS"&&i.jsx("button",{onClick:N,disabled:!a||p,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl transition-all active:scale-95 disabled:opacity-50",children:p?"AI is Writing...":"Generate Press Kit"})]})]})}),i.jsx("div",{className:"bg-slate-100 p-8 rounded-[2.5rem] border border-slate-200 flex items-center justify-center relative overflow-hidden min-h-[400px]",children:a?f==="VISUAL"?i.jsx("div",{className:`aspect-[4/5] w-full max-w-sm rounded-xl p-8 flex flex-col justify-between relative overflow-hidden shadow-2xl transition-all duration-500 ${c==="LIGHT"?"bg-white text-black":c==="NEON"?"bg-black border-2 border-pink-500 text-white":"bg-slate-900 text-white"}`,children:i.jsxs("div",{className:"z-10 text-center",children:[i.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.4em] opacity-60 mb-8",children:"Match Day Live"}),i.jsxs("div",{className:"flex justify-between items-center mb-6 px-4",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"w-14 h-14 rounded-full bg-slate-100 flex items-center justify-center text-2xl font-black mb-2 text-black",children:a.teamAName.charAt(0)}),i.jsx("span",{className:"font-black text-xl leading-none",children:a.teamAScore||"0/0"})]}),i.jsx("div",{className:"text-3xl font-black opacity-30",children:"VS"}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"w-14 h-14 rounded-full bg-slate-100 flex items-center justify-center text-2xl font-black mb-2 text-black",children:a.teamBName.charAt(0)}),i.jsx("span",{className:"font-black text-xl leading-none",children:a.teamBScore||"0/0"})]})]}),i.jsx("div",{className:"py-2 px-6 rounded-lg inline-block text-[10px] font-black uppercase tracking-widest bg-black text-white",children:a.status})]})}):i.jsxs("div",{className:"w-full max-w-md space-y-4 h-full overflow-y-auto custom-scrollbar",children:[p&&i.jsxs("div",{className:"text-center py-20",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Drafting Article..."})]}),v&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[i.jsx("div",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mb-2",children:"Headline"}),i.jsx("h3",{className:"text-xl font-serif font-black text-slate-900",children:v.headline})]}),i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[i.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Social Posts"}),i.jsx("div",{className:"space-y-3",children:(S=v.socialPosts)==null?void 0:S.map((k,E)=>i.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl text-xs font-medium text-slate-700 italic border border-slate-100",children:['"',k,'"']},E))})]}),i.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[i.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Match Report"}),i.jsx("p",{className:"text-sm leading-relaxed text-slate-600",children:v.summary})]})]}),!p&&!v&&i.jsx("div",{className:"text-center py-20 text-slate-400 text-xs font-bold uppercase",children:"Ready to generate"})]}):i.jsx("div",{className:"text-slate-400 font-bold uppercase text-xs",children:"Select a match to begin"})})]})]})};function Ao(t,e,s,a,r){const c=new Map,d={wides:0,noBalls:0,byes:0,legByes:0,penalty:0,total:0},f=[];let m=0,p=0,g=0;e.forEach(M=>{c.set(M.id,{playerId:M.id,name:M.name,runs:0,balls:0,fours:0,sixes:0,strikeRate:0,scoringSequence:[],isOut:!1,dismissal:"",bowlerName:"",atCrease:M.id===a||M.id===r})}),[...t].filter(M=>M.innings===s).reverse().forEach(M=>{var D;if((D=M.commentary)!=null&&D.startsWith("EVENT"))return;if(M.extraType==="Wide"){const R=1+(M.extraRuns||0);d.wides+=R,d.total+=R,m+=R}else M.extraType==="NoBall"?(d.noBalls+=1,d.total+=1,M.batRuns===0&&M.extraRuns&&M.extraRuns>0&&(d.noBalls+=M.extraRuns,d.total+=M.extraRuns),m+=1+(M.batRuns||0)+(M.extraRuns||0)):M.extraType==="Bye"?(d.byes+=M.extraRuns||0,d.total+=M.extraRuns||0,m+=M.extraRuns||0):M.extraType==="LegBye"?(d.legByes+=M.extraRuns||0,d.total+=M.extraRuns||0,m+=M.extraRuns||0):m+=M.runs;Hs(M.extraType)&&g++;const C=c.get(M.strikerId);if(C){const R=Hs(M.extraType),B=M.extraType==="NoBall";if(R||B){let G="";if(M.isWicket&&M.outPlayerId===M.strikerId)G="W";else{const H=M.batRuns??M.runs??0;H===0?G="":G=H.toString()}if(C.scoringSequence.push(G),R||B&&(M.batRuns||0)>0){const H=M.batRuns??M.runs??0;C.runs+=H,H===4&&(C.fours+=1),H===6&&(C.sixes+=1)}(R||B)&&(C.balls+=1)}}if(M.isWicket&&M.outPlayerId){p++;const R=c.get(M.outPlayerId);R&&(R.isOut=!0,R.dismissal=M.dismissalType||M.wicketType||"Out",R.atCrease=!1,e.find(B=>!1),f.push({score:m,wicketNumber:p,over:wa(g),batterName:R.name}))}});const y=Array.from(c.values());y.forEach(M=>{M.strikeRate=M.balls>0?parseFloat((M.runs/M.balls*100).toFixed(2)):0});const N=y.filter(M=>M.balls>0||M.isOut||M.atCrease),S=y.filter(M=>!M.balls&&!M.isOut&&!M.atCrease),k=wa(g),E=g/6,T=E>0?(m/E).toFixed(2):"0.00";return{rows:N,extras:d,totalScore:`${m}/${p}`,overs:k,runRate:T,fow:f,didNotBat:S.map(M=>e.find(C=>C.id===M.playerId)).filter(Boolean)}}function zu(t,e,s){const a=new Map;e.forEach(f=>{a.set(f.id,{playerId:f.id,name:f.name,balls:0,runs:0,wickets:0,maidens:0,overs:"0.0",economy:0,oversHistory:[]})});const c=[...t.filter(f=>{var m;return f.innings===s&&!((m=f.commentary)!=null&&m.startsWith("EVENT"))})].sort((f,m)=>f.timestamp-m.timestamp),d=new Map;return c.forEach(f=>{const m=a.get(f.bowlerId);if(!m)return;if(f.extraType!=="Bye"&&f.extraType!=="LegBye"){const g=f.extraType==="Wide"||f.extraType==="NoBall"?1:0;m.runs+=f.runs+(f.extraRuns||0)+g}Hs(f.extraType)&&(m.balls+=1),f.isWicket&&f.creditBowler!==!1&&(m.wickets+=1),d.has(f.bowlerId)||d.set(f.bowlerId,new Map);const p=d.get(f.bowlerId);p.has(f.over)||p.set(f.over,[]),p.get(f.over).push(f)}),a.forEach((f,m)=>{const p=d.get(m);if(p){const g=Array.from(p.keys()).sort((v,y)=>v-y);f.oversHistory=g.map(v=>p.get(v))}}),Array.from(a.values()).filter(f=>f.balls>0||f.oversHistory.length>0).map(f=>{const m=f.balls/6;return{...f,overs:wa(f.balls),economy:m>0?parseFloat((f.runs/m).toFixed(2)):0}})}const A1=({data:t})=>{const{rows:e,extras:s,totalScore:a,overs:r,runRate:c,fow:d,didNotBat:f}=t;return i.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-xl overflow-hidden shadow-xl flex flex-col w-full",children:[i.jsx("div",{className:"overflow-x-auto no-scrollbar",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-800/50 text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] border-b border-slate-800",children:[i.jsx("th",{className:"px-3 py-2",children:"Batter"}),i.jsx("th",{className:"px-2 py-2 text-center",children:"R"}),i.jsx("th",{className:"px-2 py-2 text-center",children:"B"}),i.jsx("th",{className:"px-2 py-2 text-center",children:"4s"}),i.jsx("th",{className:"px-2 py-2 text-center",children:"6s"}),i.jsx("th",{className:"px-2 py-2 text-right pr-3",children:"SR"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-800/50",children:e.map(m=>i.jsxs("tr",{className:`group hover:bg-white/5 transition-colors ${m.atCrease?"bg-indigo-500/5":""}`,children:[i.jsx("td",{className:"px-3 py-1.5",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("span",{className:`text-[11px] font-black ${m.atCrease?"text-indigo-400":"text-slate-200"}`,children:[m.name,m.atCrease?"*":""]}),i.jsx("span",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-tighter mt-0.5 italic",children:m.isOut?m.dismissal:m.atCrease?"not out":"did not bat"})]})}),i.jsx("td",{className:"px-2 py-1.5 text-center font-black text-white text-[11px]",children:m.runs}),i.jsx("td",{className:"px-2 py-1.5 text-center text-slate-400 font-bold text-[11px]",children:m.balls}),i.jsx("td",{className:"px-2 py-1.5 text-center text-slate-500 font-medium text-[10px]",children:m.fours}),i.jsx("td",{className:"px-2 py-1.5 text-center text-slate-500 font-medium text-[10px]",children:m.sixes}),i.jsx("td",{className:"px-2 py-1.5 text-right pr-3 text-indigo-500 font-black tabular-nums text-[10px]",children:m.strikeRate})]},m.playerId))})]})}),i.jsxs("div",{className:"border-t border-slate-800 bg-slate-800/20 px-3 py-2 space-y-1",children:[i.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[i.jsx("span",{className:"font-bold text-slate-400 uppercase tracking-widest",children:"Extras"}),i.jsxs("span",{className:"font-black text-white",children:[s.total," ",i.jsxs("span",{className:"text-slate-500 font-medium ml-1",children:["(b ",s.byes,", lb ",s.legByes,", w ",s.wides,", nb ",s.noBalls,", p ",s.penalty,")"]})]})]}),i.jsxs("div",{className:"flex justify-between items-center border-t border-slate-800/50 pt-1",children:[i.jsx("span",{className:"font-black text-sm text-white uppercase tracking-widest",children:"Total"}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"font-black text-lg text-white leading-none",children:a}),i.jsxs("span",{className:"text-[10px] font-bold text-slate-400 ml-2",children:["(",r," Ov, RR: ",c,")"]})]})]})]}),f.length>0&&i.jsxs("div",{className:"px-3 py-2 border-t border-slate-800 bg-slate-900",children:[i.jsx("div",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest mb-0.5",children:"Did Not Bat"}),i.jsx("div",{className:"text-[10px] text-slate-400 font-medium leading-relaxed",children:f.map(m=>m.name).join(", ")})]}),d.length>0&&i.jsxs("div",{className:"px-3 py-2 border-t border-slate-800 bg-slate-900/50",children:[i.jsx("div",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Fall of Wickets"}),i.jsx("div",{className:"flex flex-wrap gap-1.5",children:d.map((m,p)=>i.jsxs("span",{className:"text-[9px] text-slate-300 bg-slate-800 px-1.5 py-0.5 rounded border border-slate-700",children:[i.jsxs("span",{className:"font-black text-white",children:[m.score,"-",m.wicketNumber]})," (",m.batterName,", ",m.over,")"]},p))})]})]})},R1=({rows:t})=>i.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-xl overflow-hidden shadow-xl w-full",children:i.jsx("div",{className:"overflow-x-auto no-scrollbar",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-800/50 text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] border-b border-slate-800",children:[i.jsx("th",{className:"px-3 py-2",children:"Bowler"}),i.jsx("th",{className:"px-2 py-2 text-center",children:"O"}),i.jsx("th",{className:"px-2 py-2 text-center",children:"M"}),i.jsx("th",{className:"px-2 py-2 text-center",children:"R"}),i.jsx("th",{className:"px-2 py-2 text-center",children:"W"}),i.jsx("th",{className:"px-2 py-2 text-right pr-3",children:"Econ"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-800/50",children:t.map(e=>i.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[i.jsx("td",{className:"px-3 py-1.5",children:i.jsx("span",{className:"text-[11px] font-black text-slate-200 group-hover:text-emerald-400 transition-colors",children:e.name})}),i.jsx("td",{className:"px-2 py-1.5 text-center text-slate-300 font-bold text-[11px]",children:e.overs}),i.jsx("td",{className:"px-2 py-1.5 text-center text-slate-500 font-medium text-[11px]",children:e.maidens}),i.jsx("td",{className:"px-2 py-1.5 text-center text-white font-black text-[11px]",children:e.runs}),i.jsx("td",{className:"px-2 py-1.5 text-center text-emerald-500 font-black text-[11px]",children:e.wickets}),i.jsx("td",{className:"px-2 py-1.5 text-right pr-3 text-amber-500 font-black tabular-nums text-[10px]",children:e.economy})]},e.playerId))})]})})}),I1=({data:t})=>{const{rows:e,extras:s,totalScore:a,overs:r,runRate:c,fow:d,didNotBat:f,bowlingRows:m=[]}=t,p=v=>v.bowlerName||"",g=v=>{let y=i.jsx("span",{className:"font-bold text-slate-400",children:"."});return v.isWicket?y=i.jsx("span",{className:"font-black text-red-600",children:"W"}):v.extraType==="Wide"?y=i.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[i.jsx("span",{className:"text-indigo-600 text-[10px] font-black",children:"+"}),v.extraRuns>0&&i.jsx("span",{className:"absolute -top-1 -right-1 text-[7px] text-indigo-600",children:v.extraRuns})]}):v.extraType==="NoBall"?y=i.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:i.jsx("div",{className:"w-3 h-3 rounded-full border border-purple-600 flex items-center justify-center",children:i.jsx("span",{className:"text-[6px] text-purple-600 font-bold",children:v.batRuns>0?v.batRuns:""})})}):v.extraType==="Bye"||v.extraType==="LegBye"?y=i.jsxs("span",{className:"text-[8px] font-black text-slate-500",children:["",i.jsx("span",{className:"text-[6px] align-top",children:v.extraRuns})]}):v.runs>0&&(y=i.jsx("span",{className:"font-bold text-slate-900",children:v.runs})),y};return i.jsxs("div",{className:"bg-white rounded-none md:rounded-[4px] border border-slate-300 shadow-xl overflow-hidden font-mono text-xs text-slate-800 max-w-6xl mx-auto",children:[i.jsxs("div",{className:"bg-[#fdfbf7] p-4 border-b-2 border-slate-800 flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-serif font-black text-slate-900 uppercase tracking-widest",children:"Official Scorecard"}),i.jsx("p",{className:"text-[10px] uppercase tracking-wider text-slate-500",children:"Innings Details & Analysis"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-black text-slate-900 leading-none",children:a}),i.jsxs("div",{className:"text-xs font-bold text-slate-600 mt-1",children:[r," Overs  RR ",c]})]})]}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse min-w-[900px]",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-100 text-[10px] font-bold text-slate-600 uppercase border-b border-slate-400",children:[i.jsx("th",{className:"px-3 py-2 w-10 border-r border-slate-300 text-center",children:"#"}),i.jsx("th",{className:"px-4 py-2 border-r border-slate-300 w-48",children:"Batsman"}),i.jsx("th",{className:"px-4 py-2 border-r border-slate-300 w-32",children:"How Out"}),i.jsx("th",{className:"px-4 py-2 border-r border-slate-300 w-32",children:"Bowler"}),i.jsx("th",{className:"px-3 py-2 border-r border-slate-300 min-w-[350px]",children:"Runs Scored"}),i.jsx("th",{className:"px-4 py-2 border-r border-slate-300 text-center w-16",children:"Runs"}),i.jsx("th",{className:"px-2 py-2 border-r border-slate-300 text-center text-[9px] w-12",children:"4s"}),i.jsx("th",{className:"px-2 py-2 border-r border-slate-300 text-center text-[9px] w-12",children:"6s"}),i.jsx("th",{className:"px-2 py-2 text-center text-[9px] w-12",children:"Balls"})]})}),i.jsxs("tbody",{children:[e.map((v,y)=>i.jsxs("tr",{className:"border-b border-slate-200 hover:bg-yellow-50/30 transition-colors h-12",children:[i.jsx("td",{className:"border-r border-slate-300 text-center text-slate-400 font-bold",children:y+1}),i.jsx("td",{className:"px-4 border-r border-slate-300 font-bold text-slate-900 flex items-center h-12",children:i.jsxs("div",{className:"truncate",children:[v.name," ",v.atCrease&&i.jsx("span",{className:"ml-1 text-indigo-600 text-lg leading-none",children:"*"})]})}),i.jsx("td",{className:"px-4 border-r border-slate-300 text-slate-600 italic text-[10px]",children:v.isOut?v.dismissal:v.atCrease?"not out":""}),i.jsx("td",{className:"px-4 border-r border-slate-300 text-slate-600 text-[10px] uppercase",children:p(v)}),i.jsx("td",{className:"px-2 border-r border-slate-300 bg-white align-middle",children:i.jsxs("div",{className:"flex flex-wrap items-center gap-1 leading-none py-1",children:[v.scoringSequence.length===0&&i.jsx("span",{className:"text-slate-300 text-[10px] italic",children:"Did not face"}),v.scoringSequence.map((N,S)=>i.jsx("div",{className:`
                               flex items-center justify-center w-5 h-5 text-[10px] font-bold rounded-sm border select-none
                               ${N===""?"border-slate-100 text-slate-400":N==="W"?"border-red-200 bg-red-50 text-red-600":N==="4"?"border-indigo-200 bg-indigo-50 text-indigo-700":N==="6"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 text-slate-800"}
                            `,children:N},S))]})}),i.jsx("td",{className:"px-4 border-r border-slate-300 text-center font-black text-lg bg-slate-50/50",children:v.runs}),i.jsx("td",{className:"border-r border-slate-300 text-center text-slate-500",children:v.fours}),i.jsx("td",{className:"border-r border-slate-300 text-center text-slate-500",children:v.sixes}),i.jsx("td",{className:"text-center text-slate-500",children:v.balls})]},v.playerId)),i.jsxs("tr",{className:"border-b border-slate-800 bg-slate-50 h-10 font-bold",children:[i.jsx("td",{className:"border-r border-slate-300"}),i.jsx("td",{className:"px-4 border-r border-slate-300 uppercase tracking-widest text-slate-500",children:"Extras"}),i.jsxs("td",{className:"px-4 border-r border-slate-300 col-span-2 text-[10px] text-slate-500",colSpan:2,children:["(b ",s.byes,", lb ",s.legByes,", w ",s.wides,", nb ",s.noBalls,", p ",s.penalty,")"]}),i.jsx("td",{className:"px-4 border-r border-slate-300 text-slate-400 text-[10px] uppercase tracking-widest italic flex items-center",children:"Total Extras"}),i.jsx("td",{className:"px-4 border-r border-slate-300 text-center font-black text-lg",children:s.total}),i.jsx("td",{colSpan:3})]}),f.map((v,y)=>i.jsxs("tr",{className:"border-b border-slate-200 h-10 opacity-60",children:[i.jsx("td",{className:"border-r border-slate-300 text-center text-slate-300 font-bold",children:e.length+y+1}),i.jsx("td",{className:"px-4 border-r border-slate-300 text-slate-500 italic",children:v.name}),i.jsx("td",{className:"px-4 border-r border-slate-300 text-[10px] text-slate-400",children:"Did not bat"}),i.jsx("td",{className:"px-4 border-r border-slate-300"}),i.jsx("td",{className:"px-4 border-r border-slate-300 bg-slate-50/30"}),i.jsx("td",{className:"border-r border-slate-300 bg-slate-100/50"}),i.jsx("td",{className:"border-r border-slate-300 bg-slate-100/50"}),i.jsx("td",{className:"border-r border-slate-300 bg-slate-100/50"}),i.jsx("td",{className:"bg-slate-100/50"})]},v.id))]})]})}),d.length>0&&i.jsxs("div",{className:"border-b-2 border-slate-800 p-4 bg-[#fdfbf7]",children:[i.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest mb-2 text-slate-500",children:"Fall of Wickets"}),i.jsx("div",{className:"flex flex-wrap gap-4",children:d.map((v,y)=>i.jsxs("div",{className:"flex flex-col items-center border border-slate-300 bg-white px-3 py-1 rounded-sm shadow-sm",children:[i.jsx("span",{className:"font-black text-sm",children:v.score}),i.jsx("div",{className:"w-full h-px bg-slate-200 my-0.5"}),i.jsxs("span",{className:"text-[9px] font-bold text-slate-500",children:["for ",v.wicketNumber]})]},y))})]}),i.jsxs("div",{className:"bg-white",children:[i.jsx("div",{className:"bg-slate-800 text-white p-2 text-xs font-bold uppercase tracking-widest border-b border-slate-900",children:"Bowling Analysis"}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("div",{className:"min-w-[800px]",children:[i.jsxs("div",{className:"flex border-b border-slate-300 bg-slate-100",children:[i.jsx("div",{className:"w-40 shrink-0 p-2 font-bold border-r border-slate-300 text-[10px] uppercase",children:"Bowler"}),i.jsxs("div",{className:"flex-1 flex",children:[Array.from({length:12}).map((v,y)=>i.jsxs("div",{className:"w-16 shrink-0 border-r border-slate-200 text-center p-1 text-[9px] text-slate-400",children:["Ov ",y+1]},y)),i.jsx("div",{className:"flex-1 text-[9px] text-slate-400 p-1 italic",children:"..."})]}),i.jsxs("div",{className:"w-24 shrink-0 flex text-[9px] text-center font-bold bg-slate-50 border-l border-slate-300",children:[i.jsx("div",{className:"flex-1 py-2 border-r border-slate-200",children:"O"}),i.jsx("div",{className:"flex-1 py-2 border-r border-slate-200",children:"M"}),i.jsx("div",{className:"flex-1 py-2 border-r border-slate-200",children:"R"}),i.jsx("div",{className:"flex-1 py-2",children:"W"})]})]}),m.map(v=>i.jsxs("div",{className:"flex border-b border-slate-300 h-14",children:[i.jsx("div",{className:"w-40 shrink-0 p-3 font-bold border-r border-slate-300 flex items-center text-sm truncate bg-white",children:v.name}),i.jsxs("div",{className:"flex-1 flex bg-white overflow-hidden",children:[v.oversHistory.map((y,N)=>i.jsxs("div",{className:"w-16 shrink-0 border-r border-slate-200 border-dashed flex flex-wrap content-start p-0.5 gap-px relative",children:[y.map((S,k)=>i.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-[9px] bg-slate-50 border border-slate-100 rounded-[2px]",title:S.commentary,children:g(S)},k)),i.jsx("div",{className:"absolute bottom-0.5 right-0.5 text-[7px] text-slate-300 font-mono",children:N+1})]},N)),Array.from({length:Math.max(0,12-v.oversHistory.length)}).map((y,N)=>i.jsx("div",{className:"w-16 shrink-0 border-r border-slate-100 border-dashed bg-slate-50/30"},`empty-${N}`))]}),i.jsxs("div",{className:"w-24 shrink-0 flex text-sm text-center font-bold bg-slate-50 border-l border-slate-300 items-center",children:[i.jsx("div",{className:"flex-1 text-slate-600",children:v.overs}),i.jsx("div",{className:"flex-1 text-slate-400 font-normal",children:v.maidens}),i.jsx("div",{className:"flex-1 text-slate-900",children:v.runs}),i.jsx("div",{className:"flex-1 text-red-600 font-black",children:v.wickets})]})]},v.playerId)),m.length===0&&i.jsx("div",{className:"p-8 text-center text-slate-400 text-xs uppercase italic",children:"No bowling data recorded yet."})]})})]})]})},Ol=({matchState:t,teamA:e,teamB:s,onBack:a})=>{const r=j.useMemo(()=>{const S=[];return t.inningsScores.forEach(k=>{S.includes(k.innings)||S.push(k.innings)}),S.includes(t.innings)||(t.innings===1||t.history.some(k=>k.innings===t.innings))&&S.push(t.innings),S.sort((k,E)=>k-E)},[t]),[c,d]=j.useState(r[r.length-1]||1),[f,m]=j.useState("SUMMARY"),[p,g]=j.useState(1),v=S=>{const k=t.inningsScores.find(H=>H.innings===S);let E=k==null?void 0:k.teamId;if(!E&&t.innings===S&&(E=t.battingTeamId),!E){const H=t.history.find(P=>P.innings===S),z=H==null?void 0:H.strikerId;if(z&&(e.players.some(P=>P.id===z)?E=e.id:s.players.some(P=>P.id===z)&&(E=s.id)),!E)return null}const T=E===e.id?e:s,M=E===e.id?s:e,C=t.innings===S&&!t.isCompleted,D=C?t.strikerId:"",R=C?t.nonStrikerId:"",B=Ao(t.history,T.players,S,D,R),G=zu(t.history,M.players,S);return{battingTeam:T,bowlingTeam:M,battingCard:B,bowlingCard:G}},y=v(c),N=S=>{g(k=>{const E=S==="in"?k+.1:k-.1;return Math.max(.5,Math.min(E,1.5))})};return i.jsxs("div",{className:"flex flex-col h-full bg-slate-950 text-white animate-in zoom-in-95 duration-300",children:[i.jsx("div",{className:"flex items-center justify-between p-3 border-b border-slate-800 bg-slate-900 shrink-0",children:i.jsxs("div",{className:"flex items-center gap-3",children:[a&&i.jsx("button",{onClick:a,className:"w-8 h-8 rounded-full bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 hover:text-white transition-all text-sm",children:""}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"w-8 h-8 object-contain"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-sm font-black uppercase tracking-tight",children:"Scorecard"}),i.jsxs("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:[e.name," vs ",s.name]})]})]}),t.isCompleted?i.jsxs("div",{className:"flex items-center gap-2 bg-emerald-950/30 border border-emerald-500/20 px-3 py-1 rounded-full",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full"}),i.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-widest",children:"Completed"})]}):i.jsxs("div",{className:"flex items-center gap-2 bg-indigo-950/30 border border-indigo-500/20 px-3 py-1 rounded-full animate-pulse",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),i.jsx("span",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest",children:"Live Cloud Match"})]})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex bg-slate-800 p-0.5 rounded-lg border border-slate-700",children:[i.jsx("button",{onClick:()=>N("out"),className:"w-7 h-7 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 rounded text-xs",children:"-"}),i.jsxs("span",{className:"w-8 flex items-center justify-center text-[9px] font-mono text-slate-500",children:[Math.round(p*100),"%"]}),i.jsx("button",{onClick:()=>N("in"),className:"w-7 h-7 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 rounded text-xs",children:"+"})]}),i.jsxs("div",{className:"flex bg-slate-800 p-0.5 rounded-lg border border-slate-700",children:[i.jsx("button",{onClick:()=>m("SUMMARY"),className:`px-3 py-1 rounded-md text-[9px] font-black uppercase tracking-widest transition-all ${f==="SUMMARY"?"bg-indigo-600 text-white shadow-sm":"text-slate-400 hover:text-white"}`,children:"Summary"}),i.jsx("button",{onClick:()=>m("BOOK"),className:`px-3 py-1 rounded-md text-[9px] font-black uppercase tracking-widest transition-all ${f==="BOOK"?"bg-indigo-600 text-white shadow-sm":"text-slate-400 hover:text-white"}`,children:"Book"})]})]}),i.jsx("div",{className:"flex bg-slate-900 border-b border-slate-800 overflow-x-auto no-scrollbar shrink-0",children:r.map(S=>{const k=v(S);return k?i.jsxs("button",{onClick:()=>d(S),className:`px-4 py-3 text-[10px] font-black uppercase tracking-widest whitespace-nowrap border-b-2 transition-all ${c===S?"border-indigo-500 text-white bg-slate-800":"border-transparent text-slate-500 hover:text-slate-300 hover:bg-slate-800/50"}`,children:["Inn ",S," (",k.battingTeam.name.substring(0,3).toUpperCase(),")"]},S):null})}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 bg-slate-950",children:i.jsx("div",{style:{transform:`scale(${p})`,transformOrigin:"top center",transition:"transform 0.2s ease"},children:y?f==="SUMMARY"?i.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-300",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-xs font-black text-indigo-400 uppercase tracking-widest",children:"Batting"}),i.jsx("div",{className:"text-[10px] font-bold text-slate-400",children:y.battingTeam.name})]}),i.jsx(A1,{data:y.battingCard})]}),i.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-500",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-xs font-black text-emerald-400 uppercase tracking-widest",children:"Bowling"}),i.jsx("div",{className:"text-[10px] font-bold text-slate-400",children:y.bowlingTeam.name})]}),i.jsx(R1,{rows:y.bowlingCard})]})]}):i.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-300 max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-xs font-black text-indigo-400 uppercase tracking-widest",children:"Scorebook View"}),i.jsx("div",{className:"text-[10px] font-bold text-slate-400",children:y.battingTeam.name})]}),i.jsx(I1,{data:{...y.battingCard,bowlingRows:y.bowlingCard}})]}):i.jsx("div",{className:"text-center py-20 text-slate-500 font-bold uppercase text-xs tracking-widest",children:"No data for this innings"})})})]})},ju=({isOpen:t,onClose:e,onUpload:s})=>{const a=j.useRef(null),r=j.useRef(null),[c,d]=j.useState(null),[f,m]=j.useState("PHOTO"),[p,g]=j.useState(null),[v,y]=j.useState(!1),[N,S]=j.useState("IDLE"),k=j.useRef(null),E=j.useRef([]);j.useEffect(()=>(t?T():(M(),g(null),S("IDLE")),()=>M()),[t]);const T=async()=>{try{const R=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:f==="VIDEO"});d(R),a.current&&(a.current.srcObject=R)}catch(R){console.error("Camera access denied:",R)}},M=()=>{c&&(c.getTracks().forEach(R=>R.stop()),d(null))},C=()=>{var R;if(f==="PHOTO"){if(a.current&&r.current){const B=r.current.getContext("2d");if(B){r.current.width=a.current.videoWidth,r.current.height=a.current.videoHeight,B.drawImage(a.current,0,0);const G=r.current.toDataURL("image/jpeg");g(G),M()}}}else if(v)(R=k.current)==null||R.stop(),y(!1);else{if(!c)return;E.current=[];const B=new MediaRecorder(c);B.ondataavailable=G=>E.current.push(G.data),B.onstop=()=>{const G=new Blob(E.current,{type:"video/webm"}),H=URL.createObjectURL(G);g(H),M()},B.start(),y(!0),k.current=B}},D=()=>{S("UPLOADING"),setTimeout(()=>{s&&p&&s(p,f==="PHOTO"?"IMAGE":"VIDEO"),S("SUCCESS"),setTimeout(()=>{e()},1500)},1500)};return t?i.jsxs("div",{className:"fixed inset-0 bg-black z-[300] flex flex-col animate-in fade-in duration-300",children:[i.jsxs("div",{className:"flex justify-between items-center p-6 bg-gradient-to-b from-black/80 to-transparent absolute top-0 left-0 right-0 z-20",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse shadow-[0_0_10px_red]"}),i.jsx("span",{className:"text-xs font-black text-white uppercase tracking-widest",children:"Media Center Live"})]}),i.jsx("button",{onClick:e,className:"text-white bg-white/20 hover:bg-white/30 w-8 h-8 rounded-full flex items-center justify-center backdrop-blur-md",children:""})]}),i.jsxs("div",{className:"flex-1 relative bg-black flex items-center justify-center overflow-hidden",children:[p?f==="PHOTO"?i.jsx("img",{src:p,alt:"Capture",className:"w-full h-full object-contain"}):i.jsx("video",{src:p,controls:!0,className:"w-full h-full object-contain"}):i.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),i.jsx("canvas",{ref:r,className:"hidden"}),N!=="IDLE"&&i.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex flex-col items-center justify-center z-30",children:N==="UPLOADING"?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("p",{className:"text-white font-black uppercase tracking-widest text-xs",children:"Uploading to Media Center..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-20 h-20 bg-emerald-500 rounded-full flex items-center justify-center text-4xl mb-4 animate-in zoom-in shadow-[0_0_30px_#10b981]",children:""}),i.jsx("p",{className:"text-white font-black uppercase tracking-widest text-xs",children:"Asset Secured"})]})})]}),!p&&N==="IDLE"&&i.jsxs("div",{className:"bg-black/80 backdrop-blur-md p-8 pb-12 flex flex-col gap-6",children:[i.jsxs("div",{className:"flex justify-center gap-8",children:[i.jsx("button",{onClick:()=>m("PHOTO"),className:`text-xs font-black uppercase tracking-widest transition-all ${f==="PHOTO"?"text-yellow-400 scale-110":"text-slate-500"}`,children:"Photo"}),i.jsx("button",{onClick:()=>m("VIDEO"),className:`text-xs font-black uppercase tracking-widest transition-all ${f==="VIDEO"?"text-red-500 scale-110":"text-slate-500"}`,children:"Video"})]}),i.jsx("div",{className:"flex justify-center items-center",children:i.jsx("button",{onClick:C,className:`w-20 h-20 rounded-full border-4 flex items-center justify-center transition-all active:scale-95 ${f==="VIDEO"&&v?"border-red-500 bg-red-500/20":"border-white bg-white/20 hover:bg-white/30"}`,children:i.jsx("div",{className:`transition-all duration-300 ${f==="VIDEO"&&v?"w-8 h-8 bg-red-500 rounded-sm":"w-16 h-16 bg-white rounded-full"}`})})})]}),p&&N==="IDLE"&&i.jsxs("div",{className:"bg-black/90 p-6 flex gap-4",children:[i.jsx("button",{onClick:()=>{g(null),T()},className:"flex-1 py-4 bg-slate-800 text-white rounded-2xl font-black uppercase text-xs tracking-widest",children:"Discard"}),i.jsx("button",{onClick:D,className:"flex-1 py-4 bg-indigo-600 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-lg shadow-indigo-600/30",children:"Upload Asset"})]})]}):null},M1=({fixtures:t,teams:e,mediaPosts:s,onAddMediaPost:a,onDeletePost:r,selectedMatch:c,onSelectMatch:d,canPost:f=!0,isAdmin:m=!1,organizations:p=[]})=>{const[g,v]=j.useState(null),[y,N]=j.useState(""),[S,k]=j.useState("MEDIA"),[E,T]=j.useState(!1),M=t.filter(P=>P.status==="Live"),C=j.useMemo(()=>s.filter(P=>P.type!=="NEWS").sort((P,ne)=>ne.timestamp-P.timestamp),[s]),D=P=>{console.log("Like",P)},R=P=>{navigator.share?navigator.share({title:"Cricket Core Moment",text:P.caption,url:window.location.href}).catch(console.error):alert(`Shared "${P.caption}" to clipboard!`)},B=P=>{y.trim()&&N("")},G=(P,ne)=>{const le={id:`post-${Date.now()}`,type:ne,authorName:"Fan Cam",authorAvatar:"",contentUrl:P,caption:c?`Spotted at ${c.teamAName} vs ${c.teamBName}`:"Match Day Vibes ",timestamp:Date.now(),likes:0,shares:0,comments:[],matchId:c==null?void 0:c.id};a(le)},H=P=>{const ne=Date.now()-P,le=Math.floor(ne/6e4),ie=Math.floor(le/60),J=Math.floor(ie/24);return J>0?`${J}d ago`:ie>0?`${ie}h ago`:le>0?`${le}m ago`:"Just now"},z=P=>{if(!P)return"Central Zone";const ne=p.find(le=>le.fixtures.some(ie=>ie.id===P));return ne?ne.name:"Central Zone"};if(c){const P=C.filter(V=>V.matchId===c.id),ne=c.savedState,le=e.find(V=>V.id===c.teamAId),ie=e.find(V=>V.id===c.teamBId),J=ne&&le?Ao(ne.history,le.players,1,"",""):null,pe=ne&&ie?zu(ne.history,ie.players,1):[],U=J?[...J.rows].sort((V,he)=>he.runs-V.runs)[0]:null,O=[...pe].sort((V,he)=>he.wickets-V.wickets)[0];return i.jsxs("div",{className:"animate-in slide-in-from-right h-full",children:[i.jsx(ju,{isOpen:E,onClose:()=>T(!1),onUpload:G}),i.jsxs("div",{className:"bg-slate-900 rounded-[2.5rem] p-8 text-white mb-8 shadow-2xl relative overflow-hidden shrink-0",children:[i.jsx("div",{className:"absolute top-0 right-0 p-4",children:i.jsx("button",{onClick:()=>d(null),className:"w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center text-xl backdrop-blur-md",children:""})}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.2em] bg-red-600 px-3 py-1 rounded-full mb-6 animate-pulse",children:"Live Cloud Match"}),i.jsxs("div",{className:"flex items-center gap-8 w-full justify-center",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl font-black",children:c.teamAName}),i.jsx("div",{className:"text-3xl md:text-4xl font-black mt-2 text-indigo-400",children:c.teamAScore||"0/0"})]}),i.jsx("div",{className:"text-xl font-black text-slate-600",children:"VS"}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl md:text-2xl font-black",children:c.teamBName}),i.jsx("div",{className:"text-3xl md:text-4xl font-black mt-2 text-indigo-400",children:c.teamBScore||"0/0"})]})]}),i.jsxs("div",{className:"mt-6 text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest",children:[z(c.id),"  ",c.venue,"  ",c.format]})]})]}),i.jsx("div",{className:"flex gap-2 mb-8 bg-white p-2 rounded-2xl shadow-sm border border-slate-200 justify-center sticky top-0 z-20",children:["MEDIA","SCORECARD","STATS"].map(V=>i.jsx("button",{onClick:()=>k(V),className:`px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${S===V?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:V},V))}),i.jsxs("div",{className:"space-y-6 pb-20",children:[S==="MEDIA"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-2xl p-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[i.jsxs("div",{className:"text-center md:text-left",children:[i.jsx("h4",{className:"font-black text-indigo-900",children:"Share Your Moments"}),i.jsx("p",{className:"text-xs text-indigo-600/80",children:"Upload photos directly to the live feed."})]}),f?i.jsx("button",{onClick:()=>T(!0),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-indigo-500 shadow-lg shadow-indigo-200 transition-all",children:"+ Post Now"}):i.jsx("div",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest bg-white px-4 py-2 rounded-lg border border-indigo-100",children:"Posting Restricted"})]}),P.length===0?i.jsx("div",{className:"text-center py-20 text-slate-400 text-xs uppercase font-bold bg-slate-50 rounded-[2rem] border border-dashed border-slate-200",children:"No media yet. Be the first!"}):P.map(V=>i.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-200 shadow-sm overflow-hidden animate-in fade-in relative",children:[m&&r&&i.jsx("button",{onClick:()=>{confirm("Delete post?")&&r(V.id)},className:"absolute top-4 right-4 z-10 text-slate-300 hover:text-red-500 font-bold bg-white/80 rounded-full w-6 h-6 flex items-center justify-center",children:""}),i.jsxs("div",{className:"p-4 flex items-center gap-3 border-b border-slate-50",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center font-black text-slate-500 overflow-hidden shrink-0",children:V.authorAvatar?i.jsx("img",{src:V.authorAvatar,className:"w-full h-full object-cover"}):V.authorName.charAt(0)}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs font-black text-slate-900",children:V.authorName}),i.jsx("div",{className:"text-[8px] font-bold text-slate-400 uppercase",children:H(V.timestamp)})]})]}),V.contentUrl&&V.type==="IMAGE"&&i.jsx("img",{src:V.contentUrl,className:"w-full h-auto max-h-[500px] object-contain bg-slate-50"}),V.contentUrl&&V.type==="VIDEO"&&i.jsx("video",{src:V.contentUrl,controls:!0,className:"w-full max-h-[500px] bg-black"}),i.jsxs("div",{className:"p-4",children:[i.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:V.caption}),i.jsxs("div",{className:"flex gap-4 mt-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[i.jsxs("button",{onClick:()=>D(V.id),className:"hover:text-indigo-600 transition-colors",children:[" ",V.likes]}),i.jsxs("button",{onClick:()=>v(g===V.id?null:V.id),className:"hover:text-indigo-600 transition-colors",children:[" ",V.comments.length]})]})]})]},V.id))]}),S==="SCORECARD"&&i.jsx("div",{className:"bg-slate-950 rounded-[2rem] overflow-hidden shadow-xl border border-slate-900",children:ne&&le&&ie?i.jsx(Ol,{matchState:ne,teamA:le,teamB:ie}):i.jsx("div",{className:"text-center py-20 text-slate-500 text-xs font-bold uppercase",children:"No Match Data Available"})}),S==="STATS"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-200 shadow-sm",children:[i.jsx("div",{className:"text-[10px] font-black uppercase text-indigo-500 tracking-widest mb-4",children:"Top Batter"}),U?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-3xl font-black text-slate-900 leading-tight",children:U.name}),i.jsxs("div",{className:"text-sm font-bold text-slate-500 mt-2",children:[U.runs," runs from ",U.balls," balls"]}),i.jsxs("div",{className:"mt-4 inline-block bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest",children:["SR ",U.strikeRate]})]}):i.jsx("div",{className:"text-slate-400 text-xs font-bold uppercase",children:"No records found"})]}),i.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-200 shadow-sm",children:[i.jsx("div",{className:"text-[10px] font-black uppercase text-emerald-500 tracking-widest mb-4",children:"Top Bowler"}),O?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-3xl font-black text-slate-900 leading-tight",children:O.name}),i.jsxs("div",{className:"text-sm font-bold text-slate-500 mt-2",children:[O.wickets," wickets conceded ",O.runs]}),i.jsxs("div",{className:"mt-4 inline-block bg-emerald-50 text-emerald-600 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest",children:["ECON ",O.economy]})]}):i.jsx("div",{className:"text-slate-400 text-xs font-bold uppercase",children:"No records found"})]})]})]})]})}return i.jsxs("div",{className:"space-y-12 animate-in fade-in h-full",children:[i.jsxs("section",{className:"shrink-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-red-600 animate-pulse"}),i.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest",children:"Live Instant Scores"})]}),i.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-100 px-3 py-1 rounded-full border border-slate-200",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-ping"}),i.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Streaming"})]})]}),i.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar pb-2 px-2 -mx-2",children:M.length===0?i.jsxs("div",{className:"w-full bg-slate-100 rounded-2xl p-8 text-center border border-dashed border-slate-300",children:[i.jsx("span",{className:"text-3xl block mb-2",children:""}),i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"All games concluded for today"})]}):M.map(P=>i.jsxs("button",{onClick:()=>d(P),className:"min-w-[280px] bg-slate-900 rounded-[2rem] p-6 text-white relative overflow-hidden shadow-xl shrink-0 text-left transition-all hover:scale-[1.02] active:scale-95 group border border-white/5",children:[i.jsx("div",{className:"absolute top-0 right-0 bg-red-600 text-white text-[9px] font-black px-3 py-1 rounded-bl-xl uppercase tracking-widest shadow-lg",children:"Live"}),i.jsxs("div",{className:"space-y-4 relative z-10",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-xs font-black opacity-70 uppercase tracking-widest",children:P.format}),i.jsx("span",{className:"text-[9px] font-bold text-red-400 group-hover:text-white transition-colors",children:"WATCH NOW "})]}),i.jsxs("div",{className:"flex justify-between items-center gap-4",children:[i.jsxs("div",{className:"flex flex-col flex-1",children:[i.jsx("span",{className:"text-sm font-bold truncate",children:P.teamAName}),i.jsx("span",{className:"text-2xl font-black text-indigo-400 animate-in fade-in slide-in-from-top-1 duration-700",children:P.teamAScore||"0/0"})]}),i.jsx("span",{className:"text-xs font-black text-slate-600",children:"VS"}),i.jsxs("div",{className:"flex flex-col items-end flex-1",children:[i.jsx("span",{className:"text-sm font-bold truncate",children:P.teamBName}),i.jsx("span",{className:"text-2xl font-black text-indigo-400 animate-in fade-in slide-in-from-top-1 duration-700",children:P.teamBScore||"0/0"})]})]}),i.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest text-center mt-2 border-t border-white/10 pt-2",children:z(P.id)})]})]},P.id))})]}),i.jsxs("section",{className:"max-w-2xl mx-auto space-y-8 pb-20",children:[i.jsxs("div",{className:"flex items-center justify-between px-2",children:[i.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-600"})," Recent Activity"]}),f?i.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 bg-indigo-600 text-white px-5 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-indigo-500 shadow-lg transition-all",children:[i.jsx("span",{children:""})," Post Moment"]}):i.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest bg-slate-100 px-3 py-1.5 rounded-lg border border-slate-200",children:"Posting Restricted"})]}),C.length===0?i.jsxs("div",{className:"text-center py-20 bg-white rounded-[2.5rem] border border-slate-200",children:[i.jsx("div",{className:"text-5xl mb-4",children:""}),i.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"Waiting for fan content..."})]}):C.map(P=>i.jsxs("div",{className:"bg-white rounded-[2.5rem] border border-slate-200 shadow-sm overflow-hidden animate-in slide-in-from-bottom-4 relative group",children:[m&&r&&i.jsx("button",{onClick:()=>{confirm("Delete post?")&&r(P.id)},className:"absolute top-4 right-4 z-10 text-slate-300 hover:text-red-500 font-bold bg-white/80 rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:""}),i.jsxs("div",{className:"p-5 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center font-black text-slate-500 overflow-hidden border border-slate-100 shrink-0 shadow-sm",children:P.authorAvatar?i.jsx("img",{src:P.authorAvatar,className:"w-full h-full object-cover"}):i.jsx("span",{className:"font-black text-slate-400",children:P.authorName.charAt(0)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h4",{className:"text-sm font-black text-slate-900 truncate",children:P.authorName}),P.matchId&&i.jsxs("span",{className:"text-[9px] text-slate-400",children:[" ",z(P.matchId)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-wide",children:H(P.timestamp)}),P.matchId&&i.jsx("button",{onClick:()=>{const ne=t.find(le=>le.id===P.matchId);ne&&d(ne)},className:"text-[8px] bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded font-black uppercase tracking-widest hover:bg-indigo-100",children:"View Game"})]})]})]}),P.type==="IMAGE"&&P.contentUrl&&i.jsx("div",{className:"aspect-[4/3] bg-slate-50 flex items-center justify-center overflow-hidden border-y border-slate-50",children:i.jsx("img",{src:P.contentUrl,className:"w-full h-full object-contain"})}),P.type==="VIDEO"&&P.contentUrl&&i.jsx("div",{className:"aspect-video bg-black relative flex items-center justify-center",children:i.jsx("video",{src:P.contentUrl,controls:!0,className:"w-full h-full"})}),P.type==="LIVE_STATUS"&&i.jsxs("div",{className:"p-10 bg-gradient-to-br from-indigo-600 to-indigo-900 text-white text-center flex flex-col items-center justify-center min-h-[220px]",children:[i.jsx("span",{className:"text-4xl mb-4",children:""}),i.jsx("p",{className:"text-xl font-black leading-tight tracking-tight",children:P.caption})]}),i.jsxs("div",{className:"p-6",children:[P.type!=="LIVE_STATUS"&&i.jsxs("p",{className:"text-sm font-medium text-slate-600 mb-6 leading-relaxed",children:[i.jsx("span",{className:"font-black text-slate-900 mr-1",children:P.authorName})," ",P.caption]}),i.jsxs("div",{className:"flex items-center gap-8 border-t border-slate-50 pt-5",children:[i.jsxs("button",{onClick:()=>D(P.id),className:"flex items-center gap-2 group transition-all",children:[i.jsx("span",{className:"text-xl group-hover:scale-125 transition-transform",children:""}),i.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:P.likes})]}),i.jsxs("button",{onClick:()=>v(g===P.id?null:P.id),className:"flex items-center gap-2 group transition-all",children:[i.jsx("span",{className:"text-xl group-hover:scale-125 transition-transform",children:""}),i.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:P.comments.length})]}),i.jsxs("button",{onClick:()=>R(P),className:"flex items-center gap-2 group ml-auto transition-all",children:[i.jsx("span",{className:"text-xl group-hover:scale-125 transition-transform",children:""}),i.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Share"})]})]}),g===P.id&&i.jsxs("div",{className:"mt-5 p-4 bg-slate-50 rounded-2xl animate-in slide-in-from-top-2 border border-slate-100",children:[i.jsxs("div",{className:"space-y-4 mb-4 max-h-48 overflow-y-auto no-scrollbar",children:[P.comments.map(ne=>i.jsxs("div",{className:"flex flex-col gap-0.5",children:[i.jsx("span",{className:"font-black text-slate-900 text-[10px] uppercase tracking-widest",children:ne.author}),i.jsx("span",{className:"text-slate-600 text-xs font-medium",children:ne.text})]},ne.id)),P.comments.length===0&&i.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest text-center py-4",children:"No comments yet"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{value:y,onChange:ne=>N(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&B(P.id),placeholder:"Join the discussion...",className:"flex-1 bg-white border border-slate-200 rounded-xl px-4 py-3 text-xs font-bold outline-none focus:ring-2 focus:ring-indigo-100"}),i.jsx("button",{onClick:()=>B(P.id),className:"bg-slate-900 text-white px-4 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-indigo-600 transition-colors",children:"Post"})]})]})]})]},P.id))]}),i.jsx(ju,{isOpen:E,onClose:()=>T(!1),onUpload:G})]})},D1=({posts:t,onAddPost:e,onDeletePost:s,isAdmin:a,currentUser:r})=>{const[c,d]=j.useState(!1),[f,m]=j.useState(""),[p,g]=j.useState(""),v=t.filter(N=>N.type==="NEWS").sort((N,S)=>S.timestamp-N.timestamp),y=()=>{if(!f.trim()||!p.trim()||!r)return;const N={id:`news-${Date.now()}`,type:"NEWS",authorName:r.name,authorAvatar:r.avatarUrl,title:f,caption:p,timestamp:Date.now(),likes:0,shares:0,comments:[]};e(N),d(!1),m(""),g("")};return i.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-20 animate-in fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center px-4",children:[i.jsx("h2",{className:"text-xl font-serif font-black text-slate-900 uppercase tracking-widest border-b-4 border-slate-900 pb-1",children:"Official News Board"}),a&&!c&&i.jsx("button",{onClick:()=>d(!0),className:"bg-slate-900 text-white px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-700 shadow-lg transition-all",children:"+ Write Article"})]}),c&&i.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-xl border border-slate-200 animate-in zoom-in-95",children:[i.jsx("h3",{className:"text-lg font-black text-slate-900 mb-6",children:"Draft New Article"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("input",{value:f,onChange:N=>m(N.target.value),placeholder:"Headline...",className:"w-full text-2xl font-serif font-black bg-slate-50 border-none outline-none p-4 rounded-xl placeholder:text-slate-300",autoFocus:!0}),i.jsx("textarea",{value:p,onChange:N=>g(N.target.value),placeholder:"Article content...",rows:8,className:"w-full bg-slate-50 border-none outline-none p-4 rounded-xl resize-none font-medium text-slate-700 placeholder:text-slate-300"}),i.jsxs("div",{className:"flex gap-4 pt-4",children:[i.jsx("button",{onClick:()=>d(!1),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:bg-slate-50 rounded-xl",children:"Cancel"}),i.jsx("button",{onClick:y,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs hover:bg-indigo-500 shadow-lg",children:"Publish Article"})]})]})]}),v.length===0&&!c?i.jsxs("div",{className:"text-center py-20 opacity-40",children:[i.jsx("span",{className:"text-6xl block mb-4",children:""}),i.jsx("p",{className:"text-slate-500 font-bold uppercase text-xs tracking-widest",children:"No official news yet."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:v.map(N=>i.jsxs("article",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl transition-all group relative",children:[a&&s&&i.jsx("button",{onClick:()=>{confirm("Delete article?")&&s(N.id)},className:"absolute top-6 right-6 text-slate-300 hover:text-red-500 font-bold z-10",children:""}),i.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center font-black",children:N.authorName.charAt(0)}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-bold text-slate-900",children:N.authorName}),i.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:new Date(N.timestamp).toLocaleDateString()})]})]}),i.jsx("h3",{className:"text-2xl font-serif font-black text-slate-900 mb-4 leading-tight group-hover:text-indigo-700 transition-colors",children:N.title}),i.jsx("p",{className:"text-sm text-slate-600 leading-relaxed line-clamp-4",children:N.caption}),i.jsx("button",{className:"mt-6 text-[10px] font-black uppercase tracking-widest text-indigo-500 hover:text-indigo-700",children:"Read Full Story "})]},N.id))})]})},O1=({onBack:t,fixtures:e,teams:s,players:a,mediaPosts:r,onAddMediaPost:c,onDeletePost:d,initialMatchId:f,following:m,onToggleFollow:p,onViewTeam:g,onViewPlayer:v,userRole:y,currentProfile:N,organizations:S=[],onArchiveMatch:k,onDeleteMatch:E})=>{const[T,M]=j.useState("NEWS"),[C,D]=j.useState("SCHEDULED"),[R,B]=j.useState(""),[G,H]=j.useState(null);j.useEffect(()=>{if(f){const A=e.find($=>$.id===f);A&&(H(A),M("FEED"))}},[f,e]);const z=j.useMemo(()=>e.filter(A=>C==="ARCHIVE"?A.isArchived:A.isArchived?!1:C==="UNOFFICIAL"?A.isOfficial===!1:A.isOfficial===!1?!1:C==="LIVE"?A.status==="Live":C==="SCHEDULED"?A.status==="Scheduled":C==="COMPLETED"?A.status==="Completed":!1),[e,C]),P=s.filter(A=>A.name.toLowerCase().includes(R.toLowerCase())),ne=a.filter(A=>A.name.toLowerCase().includes(R.toLowerCase())),le=A=>{H(A),A&&M("FEED")},ie=!N||N.role==="Guest",J=y==="Administrator"||y==="Scorer",pe=S.find(A=>A.id==="org-central-zone")||S[0],U=J||!ie&&(pe==null?void 0:pe.allowUserContent)!==!1,O=j.useMemo(()=>{if(T!=="STANDINGS")return[];const A=[];return S.forEach($=>{$.tournaments.forEach(re=>{const ve=$.fixtures.filter(ge=>ge.tournamentId===re.id&&ge.status==="Completed"&&ge.savedState&&ge.isOfficial!==!1);if(ve.length===0&&re.groups.every(ge=>ge.teams.length===0))return;const Ne=ve.map(ge=>{const Se=ge.savedState,Ee=Se.inningsScores.find(et=>et.teamId===ge.teamAId)||(Se.innings===1&&Se.battingTeamId===ge.teamAId?{score:Se.score,wickets:Se.wickets,overs:"0.0"}:{score:0,wickets:0,overs:"0.0"}),Q=Se.inningsScores.find(et=>et.teamId===ge.teamBId)||(Se.innings===2&&Se.battingTeamId===ge.teamBId?{score:Se.score,wickets:Se.wickets,overs:"0.0"}:{score:0,wickets:0,overs:"0.0"}),ye=typeof Ee.score=="number"?Ee.score:parseInt(Ee.score),je=typeof Q.score=="number"?Q.score:parseInt(Q.score);let Be="NO_RESULT";return ye>je?Be="HOME_WIN":je>ye?Be="AWAY_WIN":ye===je&&ye>0&&(Be="TIE"),{matchId:ge.id,teamAId:ge.teamAId,teamBId:ge.teamBId,teamAName:ge.teamAName,teamBName:ge.teamBName,teamAScore:ye,teamAWkts:Ee.wickets,teamAOvers:parseFloat(Ee.overs),teamBScore:je,teamBWkts:Q.wickets,teamBOvers:parseFloat(Q.overs),result:Be}});re.groups.forEach(ge=>{const Se=Ne.filter(Q=>{const ye=ge.teams.map(je=>je.id);return ye.includes(Q.teamAId)&&ye.includes(Q.teamBId)}),Ee=Og(Se,ge.teams);(Ee.length>0||ge.teams.length>0)&&A.push({title:`${$.name} - ${re.name} (${ge.name})`,rows:Ee})})})}),A},[S,T]),V=j.useMemo(()=>S.flatMap(A=>A.sponsors||[]).filter(A=>A.isActive),[S]),he=V.filter(A=>A.placements.includes("MEDIA_TOP")),W=V.filter(A=>A.placements.includes("MEDIA_BOTTOM"));return i.jsxs("div",{className:"h-full flex flex-col animate-in slide-in-from-bottom-8 duration-500 overflow-hidden w-full",children:[he.length>0&&i.jsx("div",{className:"bg-white py-2 px-4 flex items-center justify-center gap-8 border-b border-slate-200 shrink-0",children:he.map(A=>i.jsx("img",{src:A.logoUrl,alt:A.name,className:"h-8 object-contain opacity-80 hover:opacity-100 transition-opacity",title:A.name},A.id))}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-6 px-2 md:px-0 shrink-0 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("button",{onClick:t,className:"w-12 h-12 rounded-full bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-50 hover:text-black transition-all shadow-sm",children:""}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tight",children:"Media Center"}),i.jsx("p",{className:"text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Live Games & Fan Content"})]})]}),i.jsx("div",{className:"flex bg-white rounded-2xl p-1.5 border border-slate-200 shadow-sm self-start md:self-auto overflow-x-auto max-w-full no-scrollbar shrink-0",children:["NEWS","FEED","FIXTURES","STANDINGS","TEAMS","PLAYERS","STUDIO"].map(A=>i.jsx("button",{onClick:()=>M(A),className:`px-5 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${T===A?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:bg-slate-50"}`,children:A},A))})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden no-scrollbar pb-24 px-1 scroll-container w-full",children:[T==="NEWS"&&i.jsx(D1,{posts:r,onAddPost:c,onDeletePost:d,isAdmin:J,currentUser:N}),T==="FEED"&&i.jsx(M1,{fixtures:e,teams:s,mediaPosts:r,onAddMediaPost:c,onDeletePost:d,selectedMatch:G,onSelectMatch:le,canPost:U,isAdmin:J,organizations:S}),T==="STUDIO"&&i.jsx(j1,{onBack:()=>M("FEED"),fixtures:e,isEmbedded:!0}),T==="STANDINGS"&&i.jsx("div",{className:"space-y-8 animate-in fade-in pb-10",children:O.length===0?i.jsx("div",{className:"text-center py-20 text-slate-400 text-xs font-bold uppercase tracking-widest border-2 border-dashed border-slate-200 rounded-[2rem]",children:"No active league tables found."}):O.map((A,$)=>i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest border-l-4 border-indigo-500 pl-3",children:A.title}),i.jsx(Dg,{rows:A.rows,onViewTeam:g})]},$))}),T==="FIXTURES"&&i.jsxs("div",{className:"space-y-6 animate-in fade-in pb-10",children:[i.jsx("div",{className:"flex gap-2 border-b border-slate-200 pb-4 overflow-x-auto no-scrollbar",children:["LIVE","SCHEDULED","COMPLETED","UNOFFICIAL","ARCHIVE"].map(A=>i.jsx("button",{onClick:()=>D(A),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest whitespace-nowrap transition-all ${C===A?"bg-slate-900 text-white":"bg-white border border-slate-200 text-slate-400"}`,children:A},A))}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[z.map(A=>i.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-center gap-4 group",children:[i.jsxs("div",{className:"flex flex-col gap-1 w-full md:w-auto text-center md:text-left",children:[i.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-1",children:[i.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-100 px-2 py-1 rounded",children:new Date(A.date).toLocaleDateString()}),i.jsx("span",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-widest",children:A.venue}),i.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest border border-slate-200 px-1.5 rounded",children:A.format}),A.isOfficial===!1&&i.jsx("span",{className:"text-[10px] font-black bg-amber-100 text-amber-600 px-2 py-0.5 rounded uppercase tracking-widest",children:"Unofficial"}),A.isArchived&&i.jsx("span",{className:"text-[10px] font-black bg-slate-200 text-slate-500 px-2 py-0.5 rounded uppercase tracking-widest",children:"Archived"})]}),i.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 text-lg",children:[i.jsx("span",{className:"font-black text-slate-900",children:A.teamAName}),i.jsx("span",{className:"text-xs font-bold text-slate-300",children:"VS"}),i.jsx("span",{className:"font-black text-slate-900",children:A.teamBName})]}),A.status==="Live"&&i.jsxs("div",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest mt-1 animate-pulse",children:["Live Score: ",A.teamAScore||"0/0"," - ",A.teamBScore||"0/0"]}),A.result&&i.jsx("div",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest mt-1",children:A.result})]}),i.jsxs("div",{className:"flex gap-2 items-center",children:[J&&i.jsxs("div",{className:"flex gap-1 mr-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[!A.isArchived&&k&&i.jsx("button",{onClick:()=>k(A.id),className:"w-8 h-8 rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 flex items-center justify-center",title:"Archive",children:""}),E&&i.jsx("button",{onClick:()=>E(A.id),className:"w-8 h-8 rounded-full bg-red-50 text-red-400 hover:bg-red-100 flex items-center justify-center",title:"Delete",children:""})]}),i.jsx("button",{onClick:()=>le(A),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-lg hover:bg-indigo-500 transition-all w-full md:w-auto",children:"Scorecard"})]})]},A.id)),z.length===0&&i.jsxs("div",{className:"py-20 text-center bg-slate-50 rounded-[2rem] border-2 border-dashed border-slate-200 text-slate-400 font-bold uppercase text-xs",children:["No ",C.toLowerCase()," fixtures found"]})]})]}),(T==="TEAMS"||T==="PLAYERS")&&i.jsxs("div",{className:"space-y-6 animate-in fade-in pb-10",children:[i.jsx("input",{value:R,onChange:A=>B(A.target.value),placeholder:`Search ${T.toLowerCase()}...`,className:"w-full bg-white border border-slate-200 rounded-[2rem] px-6 py-4 font-bold outline-none shadow-sm focus:ring-2 focus:ring-indigo-500"}),T==="TEAMS"&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:P.map(A=>{const $=m.teams.includes(A.id);return i.jsxs("div",{className:"bg-white rounded-[2.5rem] p-6 border border-slate-200 shadow-sm flex flex-col gap-4 relative overflow-hidden group hover:shadow-xl transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 cursor-pointer",onClick:()=>g(A.id),children:[i.jsx("img",{src:A.logoUrl,className:"w-16 h-16 rounded-2xl bg-slate-50 object-cover"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-black text-lg text-slate-900 leading-tight",children:A.name}),i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:A.location})]})]}),i.jsx("button",{onClick:()=>p("TEAM",A.id),className:`w-full py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${$?"bg-emerald-500 text-white":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:$?"Following Team":"Follow Team"})]},A.id)})}),T==="PLAYERS"&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:ne.slice(0,48).map(A=>{const $=m.players.includes(A.id);return i.jsxs("div",{className:"bg-white rounded-[2rem] p-4 border border-slate-200 shadow-sm flex items-center gap-4 hover:border-indigo-300 transition-all group",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-slate-50 overflow-hidden cursor-pointer",onClick:()=>v(A),children:i.jsx("img",{src:A.photoUrl,className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-black text-xs text-slate-900 truncate cursor-pointer hover:underline",onClick:()=>v(A),children:A.name}),i.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase",children:A.teamName})]}),i.jsx("button",{onClick:()=>p("PLAYER",A.id),className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${$?"bg-emerald-500 text-white":"bg-slate-100 text-slate-300 hover:bg-indigo-100 hover:text-indigo-500"}`,children:$?"":"+"})]},A.id)})})]})]}),W.length>0&&i.jsx("div",{className:"bg-white py-2 px-4 flex items-center justify-center gap-8 border-t border-slate-200 shrink-0",children:W.map(A=>i.jsx("img",{src:A.logoUrl,alt:A.name,className:"h-8 object-contain opacity-80 hover:opacity-100 transition-opacity",title:A.name},A.id))})]})},U1=({team:t,isOpen:e,onClose:s,allFixtures:a,onViewPlayer:r,isFollowed:c,onToggleFollow:d,onViewMatch:f})=>{const[m,p]=j.useState("OVERVIEW"),g=j.useMemo(()=>{if(!t)return null;const v=a.filter(P=>P.teamAId===t.id||P.teamBId===t.id),y=v.filter(P=>P.status==="Completed"),N=v.filter(P=>P.status==="Scheduled");let S=0,k=0,E=0,T=0,M=0,C=0,D=0,R=0;const G=[...y].sort((P,ne)=>new Date(ne.date).getTime()-new Date(P.date).getTime()).slice(0,5).map(P=>P.winnerId===t.id?"W":P.winnerId==="TIE"?"T":P.winnerId?"L":"N").reverse();y.forEach(P=>{if(P.winnerId===t.id){S++;const ne=P.teamAId===t.id,le=P.result||"";le.includes("runs")?M++:le.includes("wickets")&&C++,ne?D++:R++}else P.winnerId==="TIE"?E++:P.winnerId?k++:T++});const H=S+k+E+T,z=H>0?Math.round(S/H*100):0;return{totalPlayed:H,wins:S,losses:k,ties:E,noResult:T,winRate:z,formGuide:G,completed:y,upcoming:N,battingFirstWins:M,battingSecondWins:C,homeWins:D,awayWins:R}},[t,a]);return!e||!t||!g?null:i.jsx("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md z-[200] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-slate-900 w-full max-w-5xl h-[85vh] rounded-[3rem] border border-slate-800 shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95 duration-300",children:[i.jsxs("div",{className:"bg-slate-950 p-8 border-b border-slate-800 flex justify-between items-start relative shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-6 z-10",children:[i.jsx("button",{onClick:s,className:"w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition-all backdrop-blur-md",title:"Close Team View",children:""}),i.jsx("div",{className:"w-24 h-24 bg-white rounded-3xl p-1 shadow-2xl",children:i.jsx("img",{src:t.logoUrl,className:"w-full h-full object-cover rounded-2xl"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-black text-white tracking-tight",children:t.name}),i.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[i.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-black uppercase tracking-widest px-3 py-1 rounded-full",children:t.management||"Club Team"}),i.jsxs("span",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:[" ",t.location||"Unknown Location"]})]})]})]}),i.jsxs("div",{className:"flex gap-3 z-10",children:[i.jsx("button",{onClick:d,className:`px-6 py-3 rounded-2xl font-black uppercase text-[10px] tracking-widest transition-all ${c?"bg-emerald-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white"}`,children:c?"Following ":"Follow Team"}),i.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full bg-slate-800 hover:bg-slate-700 text-white flex items-center justify-center transition-all",children:""})]}),i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-600/10 rounded-full blur-[80px] pointer-events-none"})]}),i.jsx("div",{className:"flex bg-slate-950 border-b border-slate-800 px-8 gap-8 shrink-0 overflow-x-auto no-scrollbar",children:["OVERVIEW","ANALYTICS","FIXTURES","SQUAD"].map(v=>i.jsx("button",{onClick:()=>p(v),className:`py-4 text-xs font-black uppercase tracking-widest border-b-4 transition-all ${m===v?"border-indigo-500 text-white":"border-transparent text-slate-500 hover:text-slate-300"}`,children:v},v))}),i.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8 bg-slate-900",children:[m==="OVERVIEW"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Matches",val:g.totalPlayed,color:"text-white"},{label:"Wins",val:g.wins,color:"text-emerald-400"},{label:"Losses",val:g.losses,color:"text-red-400"},{label:"Win Rate",val:`${g.winRate}%`,color:"text-indigo-400"}].map((v,y)=>i.jsxs("div",{className:"bg-slate-800 p-6 rounded-[2rem] border border-slate-700 text-center",children:[i.jsx("div",{className:`text-3xl font-black ${v.color}`,children:v.val}),i.jsx("div",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:v.label})]},y))}),i.jsxs("div",{className:"bg-slate-800 p-8 rounded-[2.5rem] border border-slate-700",children:[i.jsx("h3",{className:"text-xl font-black text-white mb-6",children:"Recent Form"}),i.jsxs("div",{className:"flex gap-4",children:[g.formGuide.length===0&&i.jsx("span",{className:"text-slate-500 text-xs italic",children:"No matches played yet."}),g.formGuide.map((v,y)=>i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-sm font-black text-white shadow-lg ${v==="W"?"bg-emerald-500":v==="L"?"bg-red-500":"bg-slate-500"}`,children:v},y))]})]})]}),i.jsxs("div",{className:"bg-white text-slate-900 p-8 rounded-[2.5rem] shadow-xl",children:[i.jsx("h3",{className:"text-xl font-black mb-4",children:"Team Bio"}),i.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed font-medium",children:[t.name," plays out of ",t.location,". Currently managed by ",t.management,". This squad features ",t.players.length," registered players."]}),i.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-100",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Squad Size"}),i.jsx("span",{className:"text-lg font-black",children:t.players.length})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Established"}),i.jsx("span",{className:"text-lg font-black",children:"2026"})]})]})]})]}),m==="ANALYTICS"&&i.jsx("div",{className:"space-y-8 animate-in slide-in-from-right-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-slate-800 p-8 rounded-[2.5rem] border border-slate-700",children:[i.jsx("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:" Chasing vs Defending"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-2",children:[i.jsx("span",{children:"Defending Target"}),i.jsxs("span",{className:"text-white",children:[g.battingFirstWins," Wins"]})]}),i.jsx("div",{className:"w-full bg-slate-900 rounded-full h-3 overflow-hidden",children:i.jsx("div",{className:"bg-indigo-500 h-full",style:{width:`${g.battingFirstWins/Math.max(1,g.wins)*100}%`}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-2",children:[i.jsx("span",{children:"Chasing Target"}),i.jsxs("span",{className:"text-white",children:[g.battingSecondWins," Wins"]})]}),i.jsx("div",{className:"w-full bg-slate-900 rounded-full h-3 overflow-hidden",children:i.jsx("div",{className:"bg-emerald-500 h-full",style:{width:`${g.battingSecondWins/Math.max(1,g.wins)*100}%`}})})]})]})]}),i.jsxs("div",{className:"bg-slate-800 p-8 rounded-[2.5rem] border border-slate-700",children:[i.jsx("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:" Venue Performance"}),i.jsxs("div",{className:"flex items-center justify-center gap-8 h-40",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-indigo-500 flex items-center justify-center text-2xl font-black text-white bg-indigo-500/10",children:g.homeWins}),i.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-2",children:"Home Wins"})]}),i.jsx("div",{className:"text-slate-600 text-2xl font-black",children:"VS"}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-pink-500 flex items-center justify-center text-2xl font-black text-white bg-pink-500/10",children:g.awayWins}),i.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-2",children:"Away Wins"})]})]})]})]})}),m==="FIXTURES"&&i.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4",children:[g.upcoming.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest mb-4",children:"Upcoming Matches"}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:g.upcoming.map(v=>i.jsxs("div",{className:"bg-slate-800 p-6 rounded-3xl border border-slate-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"bg-slate-900 px-4 py-2 rounded-xl text-center",children:[i.jsx("div",{className:"text-xs font-black text-slate-400 uppercase",children:new Date(v.date).toLocaleDateString("en-US",{month:"short"})}),i.jsx("div",{className:"text-xl font-black text-white",children:new Date(v.date).getDate()})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-bold text-white",children:[v.teamAName," vs ",v.teamBName]}),i.jsxs("div",{className:"text-xs text-slate-500",children:[v.venue,"  ",i.jsx("span",{className:"text-indigo-400 font-bold",children:v.format})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>f(v),className:"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-white text-[10px] font-black uppercase tracking-widest transition-all",children:"Scorecard"}),i.jsx("div",{className:"px-4 py-2 rounded-lg bg-indigo-500/10 text-indigo-400 text-[10px] font-black uppercase tracking-widest border border-indigo-500/20",children:"Scheduled"})]})]},v.id))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest mb-4",children:"Match History"}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:g.completed.map(v=>i.jsxs("div",{className:"bg-slate-800 p-6 rounded-3xl border border-slate-700 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-bold text-white mb-1",children:[v.teamAName," vs ",v.teamBName]}),i.jsxs("div",{className:"text-xs text-slate-500",children:[new Date(v.date).toLocaleDateString(),"  ",v.venue,"  ",i.jsx("span",{className:"text-indigo-400 font-bold",children:v.format})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Result"}),i.jsx("div",{className:`text-sm font-black ${v.winnerId===t.id?"text-emerald-400":"text-red-400"}`,children:v.winnerId===t.id?"WON":v.winnerId==="TIE"?"TIED":"LOST"})]}),i.jsx("button",{onClick:()=>f(v),className:"bg-slate-900 px-4 py-3 rounded-xl border border-slate-800 text-xs font-black text-slate-300 hover:text-white transition-all uppercase",children:"Scorecard"})]})]},v.id))})]})]}),m==="SQUAD"&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 animate-in slide-in-from-right-4",children:t.players.map(v=>i.jsxs("div",{onClick:()=>r(v.id),className:"bg-slate-800 p-4 rounded-2xl border border-slate-700 flex items-center gap-4 hover:border-indigo-500 transition-colors group cursor-pointer",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-slate-900 flex items-center justify-center overflow-hidden border border-slate-800",children:i.jsx("img",{src:v.photoUrl||`https://ui-avatars.com/api/?name=${v.name}&background=random`,className:"w-full h-full object-cover"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-white text-sm group-hover:text-indigo-400 transition-colors",children:v.name}),i.jsx("div",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:v.role})]})]},v.id))})]})]})})},ng=({profile:t,onUpdateProfile:e,showCaptainHub:s,onOpenCaptainHub:a})=>{const r=t.playerDetails;return r?i.jsxs("div",{className:"animate-in slide-in-from-bottom-8 space-y-8",children:[i.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-slate-900 rounded-[2.5rem] p-8 border border-slate-800 relative overflow-hidden",children:[i.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-8",children:[i.jsx("div",{className:"w-32 h-32 bg-white rounded-full flex items-center justify-center text-5xl font-black text-slate-900 shadow-2xl",children:t.name.charAt(0)}),i.jsxs("div",{className:"text-center md:text-left flex-1",children:[i.jsx("h1",{className:"text-4xl font-black text-white",children:t.name}),i.jsxs("p",{className:"text-indigo-300 font-bold uppercase text-sm tracking-widest mt-1",children:[r.primaryRole,"  ",r.battingStyle]}),i.jsxs("div",{className:"mt-6 flex flex-wrap justify-center md:justify-start gap-3",children:[i.jsx("button",{onClick:()=>e({playerDetails:{...r,lookingForClub:!r.lookingForClub}}),className:`px-6 py-3 rounded-xl font-black uppercase text-xs tracking-widest transition-all ${r.lookingForClub?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-slate-800 text-slate-400 hover:text-white"}`,children:r.lookingForClub?" Looking for Club":" Not Looking"}),s&&a&&i.jsxs("button",{onClick:a,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-lg shadow-indigo-200 hover:bg-indigo-500 transition-all flex items-center gap-2",children:[i.jsx("span",{children:""})," Captain's Hub"]}),i.jsx("button",{className:"px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-black uppercase text-xs tracking-widest transition-all",children:"Edit Stats"})]})]})]}),i.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-5 text-9xl text-white font-black",children:"CAREER"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-sm",children:[i.jsx("h3",{className:"text-xl font-black text-slate-900 mb-6",children:"Playing Attributes"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-3",children:[i.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Batting Style"}),i.jsx("span",{className:"font-black text-slate-900",children:r.battingStyle})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-3",children:[i.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Bowling Style"}),i.jsx("span",{className:"font-black text-slate-900",children:r.bowlingStyle})]}),i.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-3",children:[i.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Primary Role"}),i.jsx("span",{className:"font-black text-slate-900",children:r.primaryRole})]})]})]}),i.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2.5rem] text-white",children:[i.jsx("h3",{className:"text-xl font-black mb-6",children:"Career Statistics"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[i.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl",children:[i.jsx("div",{className:"text-3xl font-black text-emerald-400",children:"0"}),i.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Matches"})]}),i.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl",children:[i.jsx("div",{className:"text-3xl font-black text-white",children:"0"}),i.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Runs"})]}),i.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl",children:[i.jsx("div",{className:"text-3xl font-black text-white",children:"0"}),i.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Wickets"})]}),i.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl",children:[i.jsx("div",{className:"text-3xl font-black text-white",children:"0"}),i.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Catches"})]})]}),i.jsx("div",{className:"mt-6 text-center text-xs text-slate-500 italic",children:"Stats update automatically from official matches."})]})]})]}):null},Ju={Bowled:{credit:!0,team:!0,faced:!0,fielder:!1,color:"bg-red-600"},Caught:{credit:!0,team:!0,faced:!0,fielder:!0,color:"bg-red-600"},LBW:{credit:!0,team:!0,faced:!0,fielder:!1,color:"bg-red-600"},Stumped:{credit:!0,team:!0,faced:!0,fielder:!0,color:"bg-red-600"},"Hit Wicket":{credit:!0,team:!0,faced:!0,fielder:!1,color:"bg-red-600"},"Run Out":{credit:!1,team:!0,faced:!0,fielder:!0,color:"bg-slate-600"},"Obstructing Field":{credit:!1,team:!0,faced:!0,fielder:!1,color:"bg-slate-600"},"Hit Ball Twice":{credit:!1,team:!0,faced:!0,fielder:!1,color:"bg-slate-600"},"Timed Out":{credit:!1,team:!0,faced:!1,fielder:!1,color:"bg-slate-600"},"Retired Out":{credit:!1,team:!0,faced:!1,fielder:!1,color:"bg-amber-600"},"Retired Hurt":{credit:!1,team:!1,faced:!1,fielder:!1,color:"bg-amber-600"}},Ml=(t,e,s)=>{const a=e.filter(d=>d.strikerId===t&&d.innings===s&&!d.commentary.startsWith("EVENT")),r=a.reduce((d,f)=>d+f.runs,0),c=a.filter(d=>{const f=d.wicketType?Ju[d.wicketType]:null;return f&&!f.faced?!1:Hs(d.extraType)}).length;return{runs:r,balls:c,sr:c>0?(r/c*100).toFixed(0):"0",fours:a.filter(d=>d.runs===4).length,sixes:a.filter(d=>d.runs===6).length,dots:a.filter(d=>d.runs===0).length,ones:a.filter(d=>d.runs===1).length}},Ro=(t,e,s)=>{const a=e.filter(f=>f.bowlerId===t&&f.innings===s&&!f.commentary.startsWith("EVENT")),r=a.filter(f=>Hs(f.extraType)).length,c=a.reduce((f,m)=>{if(m.extraType==="Bye"||m.extraType==="LegBye")return f;const p=m.extraType==="Wide"||m.extraType==="NoBall"?1:0;return f+m.runs+p+(m.extraType==="Wide"&&m.extraRuns||0)},0),d=a.filter(f=>{var m;return f.isWicket&&(!f.wicketType||((m=Ju[f.wicketType])==null?void 0:m.credit))}).length;return{overs:`${Math.floor(r/6)}.${r%6}`,runs:c,wickets:d,econ:r>0?(c/(r/6)).toFixed(1):"0.0"}},Ab=t=>j.useMemo(()=>t.history.filter(e=>{var s;return!((s=e.commentary)!=null&&s.startsWith("EVENT"))}).map((e,s)=>{let a=`${e.runs+(e.extraRuns||0)}`,r="score",c="bg-slate-900";return e.isWicket?(a="W",r="wicket",c="bg-red-600"):e.extraType==="Wide"?(a=`${1+(e.extraRuns||0)}wd`,r="extra",c="bg-blue-600"):e.extraType==="NoBall"?(a=`${1+e.runs+(e.extraRuns||0)}nb`,r="extra",c="bg-purple-600"):e.extraType==="Bye"||e.extraType==="LegBye"?(a=`${e.extraRuns}${e.extraType==="Bye"?"b":"lb"}`,r="extra",c="bg-amber-600"):e.batRuns===4?(a="4",r="boundary",c="bg-indigo-600"):e.batRuns===6?(a="6",r="boundary",c="bg-emerald-600"):e.runs===0&&(!e.extraType||e.extraType==="None")&&(a="",r="dot",c="bg-slate-700"),{id:`timeline-${e.timestamp}-${s}`,ball:e,label:a,type:r,color:c,displayOver:`${e.over}.${e.ballNumber}`}}),[t.history]),P1=()=>{var ne,le,ie,J,pe;const[t,e]=j.useState({state:null,teams:{}}),[s,a]=j.useState("LIVE"),[r,c]=j.useState(!1),[d,f]=j.useState(""),[m,p]=j.useState(!0);if(j.useEffect(()=>{const U=new BroadcastChannel("cricket_sync_channel");return U.onmessage=O=>{O.data.type==="UPDATE"&&e({state:O.data.state,teams:O.data.teams,sponsors:O.data.sponsors||[]})},()=>U.close()},[]),!t.state)return i.jsxs("div",{className:"h-screen w-screen bg-slate-950 flex items-center justify-center flex-col text-slate-500",children:[i.jsx("div",{className:"text-4xl animate-pulse mb-4",children:""}),i.jsx("h1",{className:"text-xl font-black uppercase tracking-widest",children:"Waiting for Live Feed..."}),i.jsx("p",{className:"text-xs font-bold mt-2",children:"Scoreboard will update automatically"}),i.jsx("div",{className:"mt-8 text-[10px] font-bold text-slate-700 uppercase tracking-widest",children:"Powered by mitchipoohdevs"})]});const{state:g,teams:v,sponsors:y}=t,N=(ne=v.batting)==null?void 0:ne.players.find(U=>U.id===g.strikerId),S=(le=v.batting)==null?void 0:le.players.find(U=>U.id===g.nonStrikerId),k=(ie=v.bowling)==null?void 0:ie.players.find(U=>U.id===g.bowlerId),E=g.strikerId?Ml(g.strikerId,g.history,g.innings):null,T=g.nonStrikerId?Ml(g.nonStrikerId,g.history,g.innings):null,M=g.bowlerId?Ro(g.bowlerId,g.history,g.innings):null,C=g.totalBalls>0?(g.score/g.totalBalls*6).toFixed(2):"0.00",D=g.target&&g.totalBalls<120?((g.target-g.score)/((120-g.totalBalls)/6)).toFixed(2):null,R=Ab(g).slice(0,6).reverse(),B=g.matchTimer.startTime,G=B?Math.floor((Date.now()-B)/1e3):0,H=U=>{const O=Math.floor(U/60),V=U%60;return`${O}:${V.toString().padStart(2,"0")}`},z=(y==null?void 0:y.filter(U=>U.isActive&&U.placements.includes("SCOREBOARD_TOP")))||[],P=(y==null?void 0:y.filter(U=>U.isActive&&U.placements.includes("SCOREBOARD_BOTTOM")))||[];return i.jsxs("div",{className:"h-screen w-screen bg-slate-950 text-white overflow-hidden flex flex-col relative group",children:[i.jsx("div",{className:"absolute top-0 right-0 p-2 z-[60] opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx("button",{onClick:()=>c(!r),className:"bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded text-xs font-bold uppercase backdrop-blur-md",children:r?"Close Edit":"Edit View"})}),r&&i.jsxs("div",{className:"absolute top-10 right-2 bg-slate-800 p-4 rounded-xl shadow-2xl z-[60] border border-slate-700 w-64 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Active Tab"}),i.jsx("div",{className:"flex bg-slate-900 rounded p-1",children:["LIVE","CARD","SQUADS"].map(U=>i.jsx("button",{onClick:()=>a(U),className:`flex-1 py-1 text-[9px] font-bold uppercase rounded ${s===U?"bg-indigo-600 text-white":"text-slate-400 hover:text-white"}`,children:U},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Ticker Message"}),i.jsx("input",{value:d,onChange:U=>f(U.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 text-xs text-white",placeholder:"e.g. Lunch Break"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Show Sponsors"}),i.jsx("button",{onClick:()=>p(!m),className:`w-8 h-4 rounded-full relative transition-colors ${m?"bg-emerald-500":"bg-slate-600"}`,children:i.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${m?"left-4.5":"left-0.5"}`})})]})]}),m&&z.length>0&&s==="LIVE"&&i.jsx("div",{className:"h-16 bg-white shrink-0 flex items-center justify-center gap-8 px-8 shadow-md z-20",children:z.map(U=>i.jsx("img",{src:U.logoUrl,alt:U.name,className:"h-10 object-contain"},U.id))}),i.jsxs("div",{className:"flex-1 relative bg-[#0f172a] overflow-hidden flex flex-col",children:[s==="LIVE"&&i.jsxs("div",{className:"flex-1 flex flex-col justify-end p-8 pb-4 relative",children:[i.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] pointer-events-none"}),i.jsxs("div",{className:"absolute top-8 left-8 flex gap-6 items-start",children:[i.jsxs("div",{className:"bg-slate-900/80 backdrop-blur border border-slate-700 rounded-xl p-4 min-w-[150px] text-center",children:[i.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Match Timer"}),i.jsx("div",{className:"text-2xl font-mono font-bold text-white",children:H(G)})]}),g.target&&i.jsxs("div",{className:"bg-slate-900/80 backdrop-blur border border-slate-700 rounded-xl p-4 min-w-[150px] text-center",children:[i.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Target"}),i.jsx("div",{className:"text-2xl font-mono font-bold text-white",children:g.target}),i.jsxs("div",{className:"text-[9px] font-bold text-indigo-400 mt-1 uppercase",children:["Need ",g.target-g.score," Runs"]})]}),i.jsxs("div",{className:"bg-slate-900/80 backdrop-blur border border-slate-700 rounded-xl p-4 min-w-[150px] text-center",children:[i.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Run Rates"}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xl font-mono font-bold text-white",children:C}),i.jsx("span",{className:"text-[8px] uppercase text-slate-500",children:"CRR"})]}),D&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xl font-mono font-bold text-amber-500",children:D}),i.jsx("span",{className:"text-[8px] uppercase text-slate-500",children:"RRR"})]})]})]})]}),i.jsxs("div",{className:"flex items-end mb-4 relative z-10",children:[i.jsxs("div",{className:"bg-slate-900 text-white rounded-t-3xl rounded-bl-3xl p-8 shadow-2xl border-l-[12px] border-indigo-600 min-w-[420px] relative z-20",children:[i.jsxs("div",{className:"flex items-center gap-6 mb-4",children:[((J=v.batting)==null?void 0:J.logoUrl)&&i.jsx("img",{src:v.batting.logoUrl,className:"w-16 h-16 bg-white rounded-full p-1"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-black uppercase leading-none tracking-tight",children:((pe=v.batting)==null?void 0:pe.name)||"Batting"}),i.jsx("p",{className:"text-indigo-400 font-bold text-sm uppercase tracking-widest mt-1",children:g.innings===1?"1st Innings":"Chase"})]})]}),i.jsxs("div",{className:"flex items-baseline gap-6",children:[i.jsxs("span",{className:"text-7xl font-black tabular-nums tracking-tighter",children:[g.score,"/",g.wickets]}),i.jsxs("span",{className:"text-3xl text-slate-400 font-bold",children:[Math.floor(g.totalBalls/6),".",g.totalBalls%6," Ov"]})]})]}),i.jsx("div",{className:"bg-slate-800/95 backdrop-blur text-white p-6 mb-0 ml-[-20px] pl-12 rounded-tr-[3rem] relative z-10 border-b-8 border-slate-900 flex-1 min-w-0 max-w-5xl flex justify-between items-center shadow-xl",children:i.jsxs("div",{className:"flex-1 flex items-center justify-around px-8",children:[i.jsx("div",{className:"flex items-center gap-6",children:i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-black text-3xl leading-none flex items-center gap-3 justify-end mb-2",children:[N==null?void 0:N.name," ",i.jsx("span",{className:"w-4 h-4 bg-emerald-500 rounded-full animate-pulse shadow-[0_0_20px_#10b981]"})]}),i.jsxs("div",{className:"text-emerald-300 font-mono font-bold text-2xl",children:[E==null?void 0:E.runs,i.jsxs("span",{className:"text-lg text-slate-500 ml-2",children:["(",E==null?void 0:E.balls,")"]})]})]})}),i.jsx("div",{className:"h-16 w-px bg-slate-600 mx-8"}),i.jsx("div",{className:"flex items-center gap-6 opacity-60",children:i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-bold text-2xl leading-none text-slate-300 mb-2",children:S==null?void 0:S.name}),i.jsxs("div",{className:"text-slate-400 font-mono font-bold text-xl",children:[T==null?void 0:T.runs,i.jsxs("span",{className:"text-base text-slate-600 ml-2",children:["(",T==null?void 0:T.balls,")"]})]})]})})]})})]}),i.jsxs("div",{className:"flex gap-6 relative z-10",children:[i.jsxs("div",{className:"bg-white text-slate-900 rounded-[2rem] p-5 shadow-xl flex items-center gap-6 min-w-[400px]",children:[i.jsx("div",{className:"bg-slate-900 text-white px-4 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest",children:"Current Bowler"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-black text-2xl uppercase leading-none",children:k==null?void 0:k.name}),i.jsxs("div",{className:"font-mono text-lg font-bold text-slate-600 mt-1",children:[M==null?void 0:M.wickets,"-",M==null?void 0:M.runs," ",i.jsxs("span",{className:"text-sm text-slate-400",children:["(",M==null?void 0:M.overs,")"]})]})]})]}),i.jsxs("div",{className:"bg-slate-800/80 backdrop-blur rounded-[2rem] p-5 flex items-center gap-3 flex-1 shadow-xl border border-slate-700",children:[i.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mr-4",children:"This Over"}),R.map(U=>i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-black text-sm ${U.color} text-white shadow-lg border-2 border-white/10`,children:U.label},U.id))]})]})]}),s==="CARD"&&v.batting&&v.bowling&&i.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:i.jsx(Ol,{matchState:g,teamA:v.batting,teamB:v.bowling})}),s==="SQUADS"&&i.jsx("div",{className:"flex-1 p-8 grid grid-cols-2 gap-8",children:[v.batting,v.bowling].map(U=>U&&i.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6",children:[i.jsxs("h2",{className:"text-xl font-black mb-4 flex items-center gap-2",children:[i.jsx("img",{src:U.logoUrl,className:"w-8 h-8 bg-white rounded-full"})," ",U.name]}),i.jsx("div",{className:"grid grid-cols-1 gap-2",children:U.players.map(O=>i.jsxs("div",{className:"bg-slate-700/50 p-2 rounded flex justify-between",children:[i.jsx("span",{children:O.name}),i.jsx("span",{className:"text-slate-400 text-xs",children:O.role})]},O.id))})]},U.id))})]}),i.jsxs("div",{className:"bg-slate-900 border-t border-slate-800 shrink-0 relative z-30",children:[d&&i.jsx("div",{className:"bg-indigo-600 text-white py-1 px-4 text-xs font-black uppercase tracking-widest text-center animate-pulse",children:d}),m&&P.length>0&&i.jsx("div",{className:"h-20 bg-white flex items-center justify-center gap-12 px-8",children:P.map(U=>i.jsx("img",{src:U.logoUrl,alt:U.name,className:"h-12 object-contain grayscale hover:grayscale-0 transition-all opacity-80 hover:opacity-100"},U.id))}),i.jsx("div",{className:"bg-black py-1 text-center",children:i.jsx("p",{className:"text-[9px] font-bold text-slate-600 uppercase tracking-widest",children:"Powered by mitchipoohdevs"})})]})]})};class L1 extends Ru.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("Uncaught error:",e,s)}render(){var e,s;return this.state.hasError?i.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-950 text-white p-8 text-center",children:[i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("h1",{className:"text-2xl font-black mb-2 uppercase tracking-widest",children:"System Error"}),i.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"The application encountered a critical failure."}),i.jsx("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded-xl max-w-md w-full overflow-auto mb-6 text-left",children:i.jsx("pre",{className:"text-[10px] font-mono text-red-400 whitespace-pre-wrap break-all",children:((e=this.state.error)==null?void 0:e.message)||((s=this.state.error)==null?void 0:s.toString())})}),i.jsx("button",{onClick:()=>{localStorage.removeItem("cc_profile"),window.location.reload()},className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-black uppercase text-xs tracking-widest transition-all shadow-lg",children:"Reset & Reload"})]}):this.props.children}}const B1=(t,e)=>{const{runs:s=0,extraRuns:a=0,extraType:r="None",isWicket:c=!1}=e,d=Hs(r),f=r==="Wide"||r==="NoBall"?1:0,m=t.score+s+a+f,p=d?t.totalBalls+1:t.totalBalls;let g=t.strikerId,v=t.nonStrikerId;return(s+(["Bye","LegBye","Wide","NoBall"].includes(r)?a:0))%2!==0&&([g,v]=[v,g]),d&&p%6===0&&p>0&&([g,v]=[v,g]),{...t,score:m,totalBalls:p,strikerId:g,nonStrikerId:v}},G1=(t,e)=>{let s=t.strikerId,a=t.nonStrikerId;return s===e?s="":a===e&&(a=""),{...t,wickets:t.wickets+1,strikerId:s,nonStrikerId:a}},ig=(t,e,s)=>({...t,strikerId:s==="Striker"?e:t.strikerId,nonStrikerId:s==="NonStriker"?e:t.nonStrikerId}),q1=(t,e)=>({...t,bowlerId:e}),V1=t=>t.matchTimer.startTime?t:{...t,matchTimer:{...t.matchTimer,startTime:Date.now(),isPaused:!1}},ag=(t,e,s)=>{var g;let a={...t};if((g=e.commentary)!=null&&g.startsWith("EVENT")){e.strikerId&&(a=ig(a,e.strikerId,"Striker")),e.nonStrikerId&&(a=ig(a,e.nonStrikerId,"NonStriker")),e.bowlerId&&(a=q1(a,e.bowlerId));const v={timestamp:Date.now(),over:Math.floor(a.totalBalls/6),ballNumber:a.totalBalls%6,strikerId:a.strikerId,nonStrikerId:a.nonStrikerId,bowlerId:a.bowlerId,runs:0,batRuns:0,extraRuns:0,extraType:"None",isWicket:!1,commentary:e.commentary||"Setup Event",innings:a.innings,...e};return{...a,history:[v,...a.history]}}a=V1(a),a=B1(a,e),e.isWicket&&e.outPlayerId&&(a=G1(a,e.outPlayerId));const r=e.wicketType?Ju[e.wicketType]:null,d=Hs(e.extraType)?a.totalBalls:a.totalBalls+1,f=d%6===0?6:d%6,m=Math.floor((d-1)/6),p={timestamp:Date.now(),over:m,ballNumber:f,strikerId:t.strikerId,nonStrikerId:t.nonStrikerId,bowlerId:a.bowlerId,runs:e.runs||0,batRuns:e.extraType==="Wide"?0:e.runs||0,extraRuns:e.extraRuns||0,extraType:e.extraType||"None",isWicket:e.isWicket||!1,wicketType:e.wicketType,outPlayerId:e.outPlayerId,fielderId:e.fielderId,creditBowler:e.isWicket&&(r?r.credit:!0),teamScoreAtBall:a.score,commentary:e.isWicket?`WICKET! ${e.wicketType}`:`${(e.runs||0)+(e.extraRuns||0)+(["Wide","NoBall"].includes(e.extraType||"")?1:0)} runs ${e.extraType!=="None"?`(${e.extraType})`:""}`,innings:a.innings,...e};return{...a,history:[p,...a.history]}},H1=t=>{const{innings:e,score:s,inningsScores:a,battingTeamId:r,bowlingTeamId:c}=t,d=a.filter(p=>p.teamId===r).reduce((p,g)=>p+(g.score||0),0),f=a.filter(p=>p.teamId===c).reduce((p,g)=>p+(g.score||0),0);return d+s-f},$1=t=>{const[e,s]=j.useState(t),[a,r]=j.useState([]),c=j.useCallback(C=>{r(D=>[...D,e]),s(D=>{const R=ag(D,C);return R.testConfig&&(R.lead=H1(R),Math.floor(R.totalBalls/6)>Math.floor(D.totalBalls/6)&&(R.oversToday=(D.oversToday||0)+1)),R})},[e]),d=j.useCallback(C=>{c({runs:0,extraRuns:0,extraType:"None",isWicket:!0,wicketType:C.wicketType,outPlayerId:C.batterId,fielderId:C.fielderId,commentary:`WICKET! ${C.wicketType}`})},[c]),f=j.useCallback(()=>{if(a.length===0)return;const C=a[a.length-1];s(C),r(D=>D.slice(0,-1))},[a]),m=j.useCallback((C,D)=>{r(R=>[...R,e]),s(R=>{const B=[...R.history].reverse(),G=B.findIndex(P=>P.timestamp===C);if(G===-1)return R;B[G]={...B[G],...D};let H={...R,score:0,wickets:0,totalBalls:0,history:[]};const z=B.find(P=>P.innings===R.innings);return z&&(H.strikerId=z.strikerId,H.nonStrikerId=z.nonStrikerId,H.bowlerId=z.bowlerId),B.forEach(P=>{P.innings===R.innings?H=ag(H,P):H.history=[P,...H.history]}),H})},[e]),p=j.useCallback((C,D,R)=>{r(B=>[...B,e]),s(B=>{const G={...B};return R==="striker"&&G.strikerId===C&&(G.strikerId=D),R==="nonStriker"&&G.nonStrikerId===C&&(G.nonStrikerId=D),R==="bowler"&&G.bowlerId===C&&(G.bowlerId=D),G.history=G.history.map(H=>{const z={...H};return R==="striker"&&z.strikerId===C&&(z.strikerId=D),R==="nonStriker"&&z.nonStrikerId===C&&(z.nonStrikerId=D),R==="bowler"&&z.bowlerId===C&&(z.bowlerId=D),z.outPlayerId===C&&(z.outPlayerId=D),z}),G})},[e]),g=j.useCallback((C,D)=>{c({isWicket:D==="Retired Out",wicketType:D,outPlayerId:C,commentary:`EVENT: ${D}`,innings:e.innings})},[c,e.innings]),v=j.useCallback(C=>{c({commentary:"EVENT: Injury Replacement (Bowler)",bowlerId:C,innings:e.innings})},[c,e.innings]),y=j.useCallback(()=>{r(C=>[...C,e]),s(C=>{var D,R,B,G;return{...C,adjustments:{...C.adjustments,declared:!0,oversLost:((D=C.adjustments)==null?void 0:D.oversLost)||0,isLastHour:((R=C.adjustments)==null?void 0:R.isLastHour)||!1,dayNumber:((B=C.adjustments)==null?void 0:B.dayNumber)||1,session:((G=C.adjustments)==null?void 0:G.session)||""}}})},[e]),N=j.useCallback(()=>{r(C=>[...C,e]),s(C=>({...C,adjustments:{...C.adjustments,concluded:!0}}))},[e]),S=j.useCallback((C,D,R,B)=>{r(G=>[...G,e]),s(G=>({...G,innings:G.innings+1,battingTeamId:C,bowlingTeamId:D,score:0,wickets:0,totalBalls:0,strikerId:"",nonStrikerId:"",bowlerId:"",target:R,isFollowOnEnforced:B||G.isFollowOnEnforced,adjustments:{...G.adjustments,declared:!1,concluded:!1}}))},[e]),k=j.useCallback((C=!1)=>{r(D=>[...D,e]),s(D=>({...D,inningsScores:[...D.inningsScores,{innings:D.innings,teamId:D.battingTeamId,score:D.score,wickets:D.wickets,overs:wa(D.totalBalls)}],isCompleted:C||D.isCompleted}))},[e]),E=j.useCallback(C=>{r(D=>[...D,e]),s(D=>({...D,...C}))},[e]),T=j.useCallback(()=>{r(C=>[...C,e]),s(C=>({...C,currentDay:(C.currentDay||1)+1,oversToday:0,adjustments:{...C.adjustments,session:"Morning"}}))},[e]),M=j.useCallback(()=>{r(C=>[...C,e]),s(C=>({...C,isFollowOnEnforced:!0,innings:3,score:0,wickets:0,totalBalls:0,strikerId:"",nonStrikerId:"",bowlerId:"",battingTeamId:C.battingTeamId,bowlingTeamId:C.bowlingTeamId,adjustments:{...C.adjustments,declared:!1,concluded:!1}}))},[e]);return{state:e,history:a,applyBall:c,recordWicket:d,undoBall:f,editBall:m,canUndo:a.length>0,startInnings:S,endInnings:k,correctPlayerIdentity:p,retireBatter:g,replaceBowlerMidOver:v,declareInnings:y,concludeInnings:N,updateMetadata:E,startNewDay:T,enforceFollowOn:M}},F1=()=>{const[t,e]=j.useState("main"),[s,a]=j.useState(!1),[r,c]=j.useState(null),[d,f]=j.useState(null),[m,p]=j.useState(null),[g,v]=j.useState(null),[y,N]=j.useState(null),[S,k]=j.useState(null),[E,T]=j.useState(null),M=j.useCallback(()=>{e("main"),a(!1),c(null),f(null),p(null),v(null),N(null),k(null),T(null)},[]),C=j.useCallback(()=>{a(!0)},[]),D=j.useCallback(()=>{a(!1)},[]),R=j.useCallback(()=>{e("wide_runs")},[]),B=j.useCallback(()=>{e("nb_type")},[]),G=j.useCallback(O=>{c(O),e("nb_runs")},[]),H=j.useCallback(()=>{e("bye_runs")},[]),z=j.useCallback(()=>{e("lb_runs")},[]),P=j.useCallback(O=>{f(O),e("wicket_type_select")},[]),ne=j.useCallback(O=>{p(O),e("wicket_fielder_select")},[]),le=j.useCallback(O=>{v(O),e("wicket_assist_select")},[]),ie=j.useCallback(O=>{O&&N(O),e("main")},[]),J=j.useCallback(O=>{k(O),e("bowler_replacement_select")},[]),pe=j.useCallback(O=>{T(O),e("batter_actions_menu")},[]),U=j.useCallback(()=>{e("batter_replacement_select")},[]);return{padView:t,setPadView:e,isRunGridExpanded:s,pendingNbType:r,startWide:R,startNoBall:B,selectNoBallType:G,startByes:H,startLegByes:z,openRunGrid:C,closeRunGrid:D,pendingWicketPlayerId:d,pendingDismissalType:m,pendingFielderId:g,pendingAssistFielderId:y,startWicket:P,selectDismissalType:ne,selectFielder:le,selectAssistFielder:ie,replacementMode:S,startBowlerReplacement:J,batterActionTarget:E,openBatterActions:pe,startBatterReplacement:U,resetPad:M}},z1=(t,e,s)=>{var E;const a=(t==null?void 0:t.format)||"T20",c=(t==null?void 0:t.customOvers)??(a==="T10"?10:a==="T20"?20:a==="40-over"?40:a==="50-over"?50:90),d=((E=e.adjustments)==null?void 0:E.oversLost)||0,f=Math.max(1,(c||20)-d),m=Math.floor(f/5),p=f%5,g=Math.ceil(f/5),v=j.useMemo(()=>{const T={};return s&&s.players.forEach(M=>{T[M.id]={balls:0,overs:0}}),e.history.forEach(M=>{M.innings===e.innings&&Hs(M.extraType)&&!M.commentary.startsWith("EVENT")&&(T[M.bowlerId]||(T[M.bowlerId]={balls:0,overs:0}),T[M.bowlerId].balls++,T[M.bowlerId].overs=Math.floor(T[M.bowlerId].balls/6))}),T},[e.history,e.innings,s]),y=j.useMemo(()=>Object.values(v).filter(T=>T.balls>m*6).length,[v,m]),N=T=>{const M=v[T]||{balls:0,overs:0},C=M.overs,D=M.balls%6;let R=!1;if(e.totalBalls>0&&e.totalBalls%6===0&&e.bowlerId===T&&(R=!0),a!=="Test"){if(C>=g)return{allowed:!1,reason:"Quota Full",isConsecutive:R,oversBowled:C};if(C===m&&D===0&&y>=p&&p>0)return{allowed:!1,reason:"Max Bonus Overs Used",isConsecutive:R,oversBowled:C}}return{allowed:!R,reason:R?"Consecutive Over":"OK",isConsecutive:R,oversBowled:C}},S=4.25*60*1e3,k=f*S;return{matchFormat:a,totalOversAllowed:f,baseQuota:m,remainderQuota:p,maxQuota:g,bowlerStats:v,getBowlerAvailability:N,targetDurationMs:k}},J1=(t,e,s,a)=>{const r=j.useMemo(()=>{const m={};return s==null||s.players.forEach(p=>{m[p.id]={runs:0,balls:0,ones:0,fours:0,sixes:0,strikeRate:0,runRate:0,isOut:!1}}),t.history.forEach(p=>{var y;if(p.innings!==t.innings||(y=p.commentary)!=null&&y.startsWith("EVENT")||!p.strikerId)return;const g=m[p.strikerId];if(!g)return;if(Hs(p.extraType)&&(g.balls+=1),p.extraType!=="Wide"){const N=p.batRuns??p.runs??0;g.runs+=N,N===1&&(g.ones+=1),N===4&&(g.fours+=1),N===6&&(g.sixes+=1)}p.isWicket&&p.outPlayerId===p.strikerId&&(g.isOut=!0,g.dismissal=p.dismissalType||p.wicketType)}),Object.values(m).forEach(p=>{p.strikeRate=p.balls>0?parseFloat((p.runs/p.balls*100).toFixed(1)):0,p.runRate=p.balls>0?parseFloat((p.runs/p.balls*6).toFixed(2)):0}),m},[t.history,t.innings,s]),c=j.useMemo(()=>{const m={},p={};return a==null||a.players.forEach(g=>{m[g.id]={balls:0,runs:0,wickets:0,maidens:0,overs:"0.0",economy:0}}),t.history.forEach(g=>{var S;if(g.innings!==t.innings||(S=g.commentary)!=null&&S.startsWith("EVENT")||!g.bowlerId)return;const v=m[g.bowlerId];if(!v)return;const y=g.extraType==="Wide"||g.extraType==="NoBall"?1:0;g.extraType!=="Bye"&&g.extraType!=="LegBye"&&(v.runs+=g.runs+(g.extraRuns||0)+y),g.isWicket&&g.creditBowler&&(v.wickets+=1),Hs(g.extraType)&&(v.balls+=1);const N=g.over;p[N]||(p[N]={bowlerId:g.bowlerId,runs:0,legalBalls:0}),Hs(g.extraType)&&(p[N].legalBalls+=1),g.extraType!=="Bye"&&g.extraType!=="LegBye"&&(p[N].runs+=g.runs+(g.extraRuns||0)+y)}),Object.values(p).forEach(g=>{g.legalBalls===6&&g.runs===0&&m[g.bowlerId]&&(m[g.bowlerId].maidens+=1)}),Object.values(m).forEach(g=>{g.overs=wa(g.balls);const v=g.balls/6;g.economy=v>0?parseFloat((g.runs/v).toFixed(2)):0}),m},[t.history,t.innings,a]),d=j.useMemo(()=>t.totalBalls>0?parseFloat((t.score/t.totalBalls*6).toFixed(2)):0,[t.score,t.totalBalls]),f=j.useMemo(()=>{if(t.innings!==2||!t.target)return 0;const m=t.target-t.score,p=e*6-t.totalBalls;return p<=0?0:parseFloat((m/p*6).toFixed(2))},[t.innings,t.target,t.score,t.totalBalls,e]);return{batterStats:r,bowlerStats:c,runRate:d,requiredRate:f,overs:wa(t.totalBalls)}};function W1(){const[t,e]=j.useState(!1),[s,a]=j.useState(null),[r,c]=j.useState(null),[d,f]=j.useState(null),m=j.useCallback(g=>{c(g||null),e(!0)},[]),p=j.useCallback(()=>{e(!1),a(null),c(null),f(null)},[]);return{isOpen:t,wicketType:s,outPlayerId:r,fielderId:d,start:m,reset:p,setWicketType:a,setOutPlayerId:c,setFielderId:f}}function Y1(t,e,s,a){const c=255.13819985825657,[d,f]=j.useState(0);j.useEffect(()=>{if(!t||!s)return;f(Math.floor((Date.now()-t)/1e3));const v=setInterval(()=>{f(Math.floor((Date.now()-t)/1e3))},1e3);return()=>clearInterval(v)},[t,s]);const m=e/6,p=d/c,g=m<p-.5&&e>12;return{elapsedSeconds:d,actualOvers:m,expectedOvers:p,behindRate:g}}function K1({elapsedSeconds:t,actualOvers:e,expectedOvers:s,behindRate:a,totalInningsMinutes:r=85}){const[c,d]=j.useState(!1),f=v=>{const y=Math.abs(v),N=Math.floor(y/3600),S=Math.floor(y%3600/60),k=y%60;return N>0?`${N}:${S.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`:`${S.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`},p=r*60-t,g=e>0?t/e:0;return i.jsxs("button",{onClick:()=>d(!c),className:`
        flex items-center gap-2 px-3 py-1.5 rounded-lg border font-mono text-xs font-bold transition-all duration-300
        ${a?"bg-red-600 text-white border-red-500 shadow-[0_0_15px_rgba(220,38,38,0.6)] animate-pulse":"bg-slate-800/50 border-slate-700/50 text-slate-400 hover:bg-slate-700 hover:text-white"}
      `,children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:a?"text-white":"opacity-70",children:a?"":""}),i.jsx("span",{className:a?"text-white":"text-indigo-400",children:c?`Rem: ${f(p)}`:f(t)})]}),i.jsx("div",{className:`w-px h-3 ${a?"bg-white/30":"bg-white/10"}`}),i.jsxs("div",{className:"flex items-center gap-1.5 whitespace-nowrap",children:[i.jsxs("span",{className:"text-white",children:[e.toFixed(1)," Ov"]}),!a&&e>0&&i.jsxs("span",{className:"text-[9px] text-emerald-400 ml-1",children:["Avg ",f(Math.round(g))]})]}),a&&i.jsx("span",{className:"text-[9px] bg-white text-red-600 px-1.5 py-0.5 rounded uppercase tracking-widest font-black ml-1",children:"SLOW"})]})}const X1=({readOnly:t,compact:e,onRun:s,striker:a,onStartWicket:r,onAnalyticsClick:c,onNav:d})=>{const f=m=>`${m} ${t?"opacity-50 cursor-not-allowed pointer-events-none grayscale":""} ${e?"text-xs py-1":""}`;return i.jsxs("div",{className:"h-full w-full flex flex-col relative",children:[t&&i.jsx("div",{className:"absolute top-2 right-2 z-20 pointer-events-none",children:i.jsx("span",{className:"bg-red-600 text-white px-2 py-1 rounded text-[8px] font-black uppercase tracking-widest animate-pulse shadow-md",children:"Live View Only"})}),i.jsxs("div",{className:`grid grid-cols-4 gap-2 h-full w-full ${e?"grid-rows-[1fr_1fr_1fr_1fr]":"grid-rows-[1fr_1.25fr_1fr]"}`,children:[i.jsx("button",{onClick:()=>s(0),disabled:t,className:f("col-span-1 bg-slate-800 hover:bg-slate-700 active:bg-slate-600 text-slate-400 rounded-xl text-2xl font-black transition-all active:scale-95 shadow-sm border border-slate-700 flex items-center justify-center"),children:"0"}),i.jsx("button",{onClick:()=>s(1),disabled:t,className:f("col-span-1 bg-slate-800 hover:bg-slate-700 active:bg-slate-600 text-white rounded-xl text-2xl font-black transition-all active:scale-95 shadow-sm border border-slate-700 flex items-center justify-center"),children:"1"}),i.jsx("button",{onClick:()=>s(2),disabled:t,className:f("col-span-1 bg-slate-800 hover:bg-slate-700 active:bg-slate-600 text-white rounded-xl text-2xl font-black transition-all active:scale-95 shadow-sm border border-slate-700 flex items-center justify-center"),children:"2"}),i.jsx("button",{onClick:()=>s(3),disabled:t,className:f("col-span-1 bg-slate-800 hover:bg-slate-700 active:bg-slate-600 text-white rounded-xl text-2xl font-black transition-all active:scale-95 shadow-sm border border-slate-700 flex items-center justify-center"),children:"3"}),i.jsxs("button",{onClick:()=>s(4),disabled:t,className:f("col-span-2 bg-gradient-to-br from-indigo-600 to-indigo-800 hover:to-indigo-700 text-white rounded-2xl transition-all active:scale-95 shadow-lg shadow-indigo-900/40 border border-indigo-500/30 flex flex-col items-center justify-center group relative overflow-hidden"),children:[i.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"}),i.jsx("span",{className:`${e?"text-3xl":"text-5xl"} font-black relative z-10`,children:"4"}),!e&&i.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em] opacity-80 relative z-10",children:"Boundary"})]}),i.jsxs("button",{onClick:()=>s(6),disabled:t,className:f("col-span-2 bg-gradient-to-br from-emerald-600 to-emerald-800 hover:to-emerald-700 text-white rounded-2xl transition-all active:scale-95 shadow-lg shadow-emerald-900/40 border border-emerald-500/30 flex flex-col items-center justify-center group relative overflow-hidden"),children:[i.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"}),i.jsx("span",{className:`${e?"text-3xl":"text-5xl"} font-black relative z-10`,children:"6"}),!e&&i.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em] opacity-80 relative z-10",children:"Maximum"})]}),i.jsxs("button",{onClick:()=>d("extras"),disabled:t,className:f("col-span-2 bg-amber-700/80 hover:bg-amber-600 text-white rounded-xl text-lg font-black transition-all active:scale-95 shadow-md shadow-amber-900/30 border border-amber-500/30 flex flex-col items-center justify-center"),children:[e?"Extras":"WD / NB / B / LB",!e&&i.jsx("span",{className:"text-[8px] font-bold opacity-70 uppercase tracking-widest mt-0.5",children:"Extras Menu"})]}),i.jsxs("div",{className:"col-span-2 grid grid-cols-2 gap-2",children:[i.jsx("button",{onClick:()=>r(a==null?void 0:a.id),disabled:t,className:f("col-span-1 bg-red-700 hover:bg-red-600 text-white rounded-xl text-lg font-black transition-all active:scale-95 shadow-md shadow-red-900/30 border border-red-500/30 flex flex-col items-center justify-center"),children:"OUT"}),i.jsxs("div",{className:"col-span-1 grid grid-rows-2 gap-2",children:[i.jsxs("button",{onClick:()=>{c&&c()},className:f("bg-slate-700 hover:bg-indigo-600 text-slate-300 hover:text-white rounded-lg text-xs font-black transition-all active:scale-95 border border-slate-600 flex items-center justify-center"),title:"Shot Map",children:[" ",e?"":"Map"]}),i.jsx("button",{onClick:()=>d("events"),className:"bg-slate-800 hover:bg-slate-700 text-slate-400 rounded-lg text-lg font-black transition-all active:scale-95 border border-slate-700 flex items-center justify-center",children:""})]})]})]})]})},Q1=({readOnly:t,compact:e,onBack:s,onCommitExtra:a})=>{const[r,c]=j.useState(""),[d,f]=j.useState("Bat"),[m,p]=j.useState(0),[g,v]=j.useState(!1),[y,N]=j.useState(""),S=r==="Bye"||r==="LegBye",k=r==="NoBall";let E=[0,1,2,3,4];return S?E=[1,2,3,4]:k&&(d==="Bat"?E=[0,1,2,3,4,6]:E=[1,2,3,4]),i.jsxs("div",{className:"h-full flex flex-col animate-in zoom-in-95 p-1 gap-2",children:[i.jsx("h3",{className:"text-center font-black uppercase text-[9px] text-amber-500 tracking-widest shrink-0",children:"Select Extra Type"}),i.jsxs("div",{className:`grid gap-2 flex-1 min-h-0 ${k?"grid-rows-[2fr_1fr]":"grid-rows-1"}`,children:[i.jsx("div",{className:"grid grid-cols-2 gap-2 h-full",children:["Wide","NoBall","Bye","LegBye"].map(T=>i.jsx("button",{onClick:()=>{c(T),v(!1),T==="NoBall"?(f("Bat"),m===0&&p(0)):(T==="Bye"||T==="LegBye")&&m===0&&p(1)},disabled:t,className:`rounded-xl border font-black transition-all relative overflow-hidden flex items-center justify-center text-sm uppercase tracking-wider ${r===T?"border-amber-500 bg-amber-500/20 text-amber-500 shadow-inner":"border-slate-700 bg-slate-800 text-slate-400 hover:border-amber-500/50 hover:text-amber-500"} ${t?"opacity-50 cursor-not-allowed":""}`,children:T},T))}),k&&i.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Bat","LegBye","Bye"].map(T=>i.jsx("button",{disabled:t,onClick:()=>{f(T),T!=="Bat"&&m===0&&p(1)},className:`rounded-lg border text-[10px] font-bold uppercase tracking-widest transition-all ${d===T?"bg-amber-600 text-white border-amber-600":"bg-slate-800 text-slate-500 border-slate-700"} ${t?"opacity-50 cursor-not-allowed":""}`,children:T==="Bat"?"Off Bat":T==="LegBye"?"Leg Byes":"Byes"},T))})]}),g?i.jsxs("div",{className:"h-16 shrink-0 flex gap-2",children:[i.jsx("input",{type:"number",value:y,onChange:T=>N(T.target.value),placeholder:"Enter runs...",autoFocus:!0,disabled:t,className:"flex-1 bg-slate-800 border border-slate-600 rounded-xl px-4 text-white font-black text-xl outline-none focus:border-amber-500 disabled:opacity-50"}),i.jsx("button",{disabled:t,onClick:()=>{const T=parseInt(y);isNaN(T)||(p(T),v(!1))},className:"px-6 bg-amber-600 text-white rounded-xl font-black uppercase text-xs tracking-widest disabled:opacity-50",children:"Set"})]}):i.jsxs("div",{className:"flex gap-2 h-14 shrink-0 overflow-x-auto no-scrollbar",children:[E.map(T=>i.jsx("button",{disabled:t,onClick:()=>p(T),className:`flex-1 min-w-[3rem] rounded-lg font-black transition-all border text-lg flex flex-col items-center justify-center ${m===T?"bg-white text-slate-900 border-white shadow-lg":"bg-slate-800 text-slate-500 border-slate-700 hover:bg-slate-700 hover:text-white"} ${t?"opacity-50 cursor-not-allowed":""}`,children:i.jsxs("span",{className:"leading-none",children:["+",T]})},T)),i.jsx("button",{disabled:t,onClick:()=>v(!0),className:`flex-1 min-w-[3rem] rounded-lg font-bold transition-all border text-xs bg-slate-800 text-slate-500 border-slate-700 hover:bg-slate-700 hover:text-white uppercase tracking-widest ${t?"opacity-50 cursor-not-allowed":""}`,children:"More"})]}),i.jsxs("div",{className:"flex gap-2 h-12 mt-auto shrink-0",children:[i.jsx("button",{onClick:s,className:"w-1/3 bg-slate-800 hover:bg-slate-700 text-slate-400 font-black uppercase text-[10px] rounded-xl border border-slate-700 transition-all",children:"Cancel"}),i.jsx("button",{disabled:!r||t,onClick:()=>{a(r,m,r==="NoBall"?d==="Bat":!1)},className:"flex-1 bg-amber-600 hover:bg-amber-500 text-white font-black uppercase text-[10px] rounded-xl shadow-xl shadow-amber-900/20 transition-all disabled:opacity-50 disabled:shadow-none tracking-widest",children:"Confirm Extra"})]})]})},Z1=({readOnly:t,compact:e,onBack:s,onMediaCapture:a,onBroadcasterMode:r,onNav:c,onDeclare:d,onSubRequest:f,matchFormat:m,onToggleAnalytics:p,autoAnalytics:g,onOfficialsClick:v})=>{const y=m==="Test",N=S=>`${S} ${t?"opacity-50 cursor-not-allowed pointer-events-none grayscale":""} ${e?"text-xs py-1":""}`;return i.jsxs("div",{className:"h-full flex flex-col animate-in zoom-in-95 p-1 gap-2",children:[i.jsx("h3",{className:"text-center font-black uppercase text-[9px] text-slate-500 tracking-widest shrink-0",children:"Match Actions"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 flex-1 min-h-0 overflow-y-auto",children:[i.jsxs("button",{disabled:t,onClick:()=>{a&&a()},className:N("bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2"),children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 group-hover:bg-indigo-600 flex items-center justify-center text-xl transition-colors",children:""}),i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"Media Capture"})]}),i.jsxs("button",{onClick:()=>{r&&r()},className:"bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 group-hover:bg-green-600 flex items-center justify-center text-xl transition-colors",children:""}),i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"Broadcaster Mode"})]}),i.jsxs("button",{disabled:t,onClick:()=>c("declare_confirm"),className:N("bg-slate-800 hover:bg-red-900/30 border border-slate-700 hover:border-red-500 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2"),children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 group-hover:bg-red-600 flex items-center justify-center text-xl transition-colors",children:""}),i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"Declare Innings"})]}),i.jsxs("button",{disabled:t,onClick:()=>{f&&f()},className:N("bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2"),children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-xl group-hover:bg-amber-600 transition-colors",children:""}),i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"Substitute"})]}),p&&i.jsxs("button",{disabled:t,onClick:p,className:N(`border rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2 ${g?"bg-indigo-900/30 border-indigo-500/50 hover:bg-indigo-900/50":"bg-slate-800 border-slate-700 hover:bg-slate-700"}`),children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-xl transition-colors ${g?"bg-indigo-600 text-white":"bg-slate-700 text-slate-500"}`,children:""}),i.jsxs("div",{className:"flex flex-col items-center leading-none",children:[i.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest ${g?"text-indigo-300":"text-slate-400"}`,children:"Auto Maps"}),i.jsx("span",{className:"text-[8px] font-bold uppercase mt-1",children:g?"ON":"OFF"})]})]}),v&&i.jsxs("button",{disabled:t,onClick:v,className:N("bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2"),children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-xl group-hover:bg-purple-600 transition-colors",children:""}),i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"Officials"})]}),y&&i.jsxs("button",{disabled:t,onClick:()=>c("end_match_confirm"),className:N("bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2"),children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-xl group-hover:bg-purple-600 transition-colors",children:""}),i.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"End Match"})]})]}),i.jsx("button",{onClick:s,className:"h-12 w-full bg-slate-800 text-white rounded-xl font-black uppercase text-[10px] tracking-widest hover:bg-slate-700 shrink-0",children:"Back to Scoring"})]})},e2=({padView:t,striker:e,onDeclare:s,onEndGame:a,onEndInnings:r,onNav:c,onBack:d})=>t==="declare_confirm"?i.jsxs("div",{className:"h-full flex flex-col animate-in zoom-in-95 p-4 bg-red-950/20 rounded-2xl border border-red-500/20",children:[i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-2xl flex items-center justify-center text-4xl mb-4 shadow-lg shadow-red-600/40",children:""}),i.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight mb-2",children:"Declare Innings?"}),i.jsxs("p",{className:"text-red-300 text-xs font-bold leading-relaxed px-4",children:["This will immediately end the current innings and close batting for ",e!=null&&e.id?"the batting team":"this team","."]})]}),i.jsxs("div",{className:"flex flex-col gap-3 shrink-0",children:[i.jsx("button",{onClick:()=>{r&&(r(),d())},className:"w-full py-3 bg-red-600 hover:bg-red-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-red-900/40 transition-all active:scale-95",children:"End Innings (Conclude)"}),i.jsx("button",{onClick:()=>{s&&(s(),d())},className:"w-full py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-black uppercase text-xs tracking-widest border border-slate-600 transition-all",children:"Declare Closed"}),i.jsx("button",{onClick:()=>c("events"),className:"w-full py-3 bg-transparent text-slate-400 rounded-xl font-black uppercase text-xs tracking-widest hover:text-white transition-all",children:"Cancel"})]})]}):t==="end_match_confirm"?i.jsxs("div",{className:"h-full flex flex-col animate-in zoom-in-95 p-4 bg-purple-950/20 rounded-2xl border border-purple-500/20",children:[i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-purple-600 rounded-2xl flex items-center justify-center text-4xl mb-4 shadow-lg shadow-purple-600/40",children:""}),i.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight mb-2",children:"Conclude Match?"}),i.jsxs("p",{className:"text-purple-300 text-xs font-bold leading-relaxed px-4",children:["If time has expired or captains agree, this will end the game as a ",i.jsx("span",{className:"text-white",children:"DRAW"})," if no result was reached."]})]}),i.jsxs("div",{className:"flex flex-col gap-3 shrink-0",children:[i.jsx("button",{onClick:()=>{a&&(a(),d())},className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-purple-900/40 transition-all active:scale-95",children:"End as Draw / Result"}),i.jsx("button",{onClick:()=>c("events"),className:"w-full py-4 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-xl font-black uppercase text-xs tracking-widest transition-all",children:"Cancel"})]})]}):null,Rb=t=>{const{padView:e,onBack:s}=t;return e==="main"?i.jsx(X1,{...t}):e==="extras"?i.jsx(Q1,{...t}):e==="events"?i.jsx(Z1,{...t}):e==="declare_confirm"||e==="end_match_confirm"?i.jsx(e2,{...t}):i.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4 bg-slate-900 rounded-xl border border-slate-800",children:[i.jsx("div",{className:"text-2xl mb-2 opacity-20",children:""}),i.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"View Not Ready"}),i.jsx("button",{onClick:s,className:"mt-4 px-6 py-2 bg-slate-800 text-white rounded-lg text-[9px] font-black uppercase tracking-widest hover:bg-slate-700 transition-all",children:"Back"})]})},t2=({ball:t,battingTeam:e,bowlingTeam:s,onClose:a,onSave:r})=>{const[c,d]=j.useState(t.runs),[f,m]=j.useState(t.extraType),[p,g]=j.useState(t.extraRuns||0),[v,y]=j.useState(t.isWicket),[N,S]=j.useState(t.wicketType),[k,E]=j.useState(t.strikerId),[T,M]=j.useState(t.bowlerId),C=["Bowled","Caught","LBW","Run Out","Stumped","Hit Wicket"],D=()=>{r({runs:c,batRuns:f==="Wide"?0:c,extraType:f,extraRuns:p,isWicket:v,wicketType:v?N:void 0,strikerId:k,bowlerId:T})};return i.jsx("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2.5rem] w-full max-w-lg shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95",children:[i.jsxs("div",{className:"bg-slate-950 p-6 border-b border-slate-800 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-black text-white",children:["Edit Ball ",t.over,".",t.ballNumber]}),i.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Retroactive Scorer Override"})]}),i.jsx("button",{onClick:a,className:"w-8 h-8 rounded-full bg-slate-800 text-slate-400 hover:text-white transition-colors",children:""})]}),i.jsxs("div",{className:"p-8 space-y-6 overflow-y-auto no-scrollbar",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Striker"}),i.jsx("select",{value:k,onChange:R=>E(R.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-xs font-bold text-white outline-none",children:e==null?void 0:e.players.map(R=>i.jsx("option",{value:R.id,children:R.name},R.id))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Bowler"}),i.jsx("select",{value:T,onChange:R=>M(R.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-xs font-bold text-white outline-none",children:s==null?void 0:s.players.map(R=>i.jsx("option",{value:R.id,children:R.name},R.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Runs"}),i.jsx("input",{type:"number",value:c,onChange:R=>d(parseInt(R.target.value)||0),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-xs font-bold text-white outline-none"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Extra Type"}),i.jsxs("select",{value:f,onChange:R=>m(R.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-xs font-bold text-white outline-none",children:[i.jsx("option",{value:"None",children:"None"}),i.jsx("option",{value:"Wide",children:"Wide"}),i.jsx("option",{value:"NoBall",children:"No Ball"}),i.jsx("option",{value:"Bye",children:"Bye"}),i.jsx("option",{value:"LegBye",children:"Leg Bye"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Extra Runs"}),i.jsx("input",{type:"number",value:p,onChange:R=>g(parseInt(R.target.value)||0),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-3 text-xs font-bold text-white outline-none"})]})]}),i.jsxs("div",{className:"p-4 bg-red-500/5 rounded-2xl border border-red-500/20",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("label",{className:"text-[10px] font-black text-red-400 uppercase tracking-widest",children:"Wicket Incident"}),i.jsx("button",{onClick:()=>y(!v),className:`px-4 py-1.5 rounded-lg text-[9px] font-black uppercase transition-all ${v?"bg-red-600 text-white":"bg-slate-800 text-slate-500"}`,children:v?"Active":"No Wicket"})]}),v&&i.jsx("div",{className:"grid grid-cols-2 gap-2",children:C.map(R=>i.jsx("button",{onClick:()=>S(R),className:`p-2 rounded-xl border text-[10px] font-bold transition-all ${N===R?"border-red-500 bg-red-500/20 text-white":"border-slate-700 bg-slate-800 text-slate-500"}`,children:R},R))})]})]}),i.jsxs("div",{className:"p-6 bg-slate-950 border-t border-slate-800 flex gap-4 shrink-0",children:[i.jsx("button",{onClick:a,className:"flex-1 py-4 text-slate-500 font-black uppercase text-xs hover:text-white transition-all",children:"Cancel"}),i.jsx("button",{onClick:D,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-900/20 hover:bg-indigo-500 transition-all",children:"Update History"})]})]})})},s2=({matchState:t,battingTeam:e,bowlingTeam:s,onEditBall:a})=>{const[r,c]=j.useState(null),[d,f]=j.useState(null),m=t.history.filter(N=>{var S;return N.innings===t.innings&&!((S=N.commentary)!=null&&S.startsWith("EVENT"))}).reverse(),p=new Map;m.forEach(N=>{p.has(N.over)||p.set(N.over,[]),p.get(N.over).push(N)});const g=Array.from(p.keys()).sort((N,S)=>S-N),v=N=>N.isWicket?"W":N.extraType==="Wide"?`${1+(N.extraRuns||0)}w`:N.extraType==="NoBall"?`${1+(N.runs||0)}n`:N.extraType==="Bye"?`${N.extraRuns}b`:N.extraType==="LegBye"?`${N.extraRuns}l`:N.runs===0?"":N.runs.toString(),y=N=>N.isWicket?"bg-red-600 text-white":N.extraType!=="None"&&N.extraType?"bg-amber-600 text-white":N.runs>=4?"bg-indigo-600 text-white":N.runs===0?"bg-slate-800 text-slate-500":"bg-slate-700 text-white";return i.jsxs("div",{className:"h-full flex flex-col bg-slate-950 overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-white/5 flex justify-between items-center bg-slate-900/50",children:[i.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-slate-400",children:"Match Timeline"}),i.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:[g.length," Overs Recorded"]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar pb-24",children:[g.map(N=>{const S=p.get(N),k=S[0].bowlerId,E=s==null?void 0:s.players.find(M=>M.id===k),T=d===N;return i.jsxs("div",{className:`flex items-center px-4 py-2 border-b border-white/5 transition-colors ${T?"bg-indigo-500/10":"hover:bg-white/5"}`,children:[i.jsxs("div",{className:"w-32 shrink-0 flex flex-col justify-center",children:[i.jsxs("div",{className:"text-[10px] font-black text-indigo-500 uppercase leading-none mb-1",children:["Over ",N+1]}),i.jsx("div",{className:"text-xs font-bold text-white truncate pr-2",children:(E==null?void 0:E.name)||"Unknown"})]}),i.jsx("div",{className:"flex-1 flex items-center gap-1.5 overflow-x-auto no-scrollbar py-1",children:S.map((M,C)=>i.jsx("button",{disabled:!T,onClick:()=>c(M),className:`
                      w-7 h-7 rounded-lg flex items-center justify-center text-[10px] font-black transition-all shrink-0
                      ${y(M)}
                      ${T?"ring-2 ring-indigo-400 animate-pulse scale-105 shadow-lg":""}
                    `,children:v(M)},M.timestamp))}),i.jsx("div",{className:"w-16 shrink-0 flex justify-end",children:i.jsx("button",{onClick:()=>f(T?null:N),className:`
                    px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all
                    ${T?"bg-emerald-600 text-white shadow-lg":"bg-slate-800 text-slate-400 hover:bg-indigo-600 hover:text-white"}
                  `,children:T?"DONE":"EDIT"})})]},N)}),g.length===0&&i.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-20 opacity-20 text-center",children:[i.jsx("span",{className:"text-5xl mb-4",children:""}),i.jsx("p",{className:"text-sm font-black uppercase tracking-widest",children:"No overs bowled yet"})]})]}),r&&i.jsx(t2,{ball:r,battingTeam:e,bowlingTeam:s,onClose:()=>c(null),onSave:N=>{a(r.timestamp,N),c(null)}})]})},n2=({matchState:t,battingTeam:e,bowlingTeam:s})=>{const[a,r]=j.useState(!1),[c,d]=j.useState(!1),[f,m]=j.useState(null),p=async()=>{if(!e||!s)return;d(!0);const g=await E1(t,e.name,s.name);m(g),d(!1)};return a?i.jsxs("div",{className:"fixed bottom-6 right-6 w-80 md:w-96 bg-slate-900/95 backdrop-blur-xl border border-slate-700/50 rounded-[2rem] shadow-2xl z-[100] overflow-hidden animate-in slide-in-from-bottom-10 fade-in duration-300 flex flex-col max-h-[80vh]",children:[i.jsxs("div",{className:"p-5 border-b border-white/10 bg-gradient-to-r from-indigo-900/50 to-purple-900/50 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-600 flex items-center justify-center text-xl shadow-lg",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-black text-white text-sm",children:"AI Strat-Coach"}),i.jsx("p",{className:"text-[9px] text-indigo-300 font-bold uppercase tracking-widest",children:"Real-time Tactics"})]})]}),i.jsx("button",{onClick:()=>r(!1),className:"w-8 h-8 rounded-full bg-white/10 text-white flex items-center justify-center hover:bg-white/20",children:""})]}),i.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1",children:c?i.jsxs("div",{className:"flex flex-col items-center justify-center py-10 space-y-4",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}),i.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest animate-pulse",children:"Analyzing Match Data..."})]}):f?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-slate-800/50 rounded-2xl p-4 border border-white/5",children:[i.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase text-slate-400 mb-2",children:[i.jsx("span",{children:"Batting Win Prob"}),i.jsxs("span",{children:[f.winProbability,"%"]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-red-500 to-green-500 transition-all duration-1000",style:{width:`${f.winProbability}%`}})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2",children:"Situation Report"}),i.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed font-medium bg-white/5 p-3 rounded-xl border border-white/5",children:['"',f.analysis,'"']})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-widest mb-2",children:"Recommended Actions"}),i.jsx("div",{className:"space-y-2",children:f.tactics.map((g,v)=>i.jsxs("div",{className:"flex gap-3 items-start",children:[i.jsx("span",{className:"text-emerald-500 font-black text-lg leading-none mt-0.5",children:""}),i.jsx("p",{className:"text-xs font-bold text-white leading-tight",children:g})]},v))})]})]}):i.jsx("div",{className:"text-center py-8 text-slate-500 text-xs font-bold uppercase",children:"No insights available."})}),i.jsx("div",{className:"p-4 border-t border-white/10 bg-slate-900",children:i.jsx("button",{onClick:p,disabled:c,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg shadow-indigo-500/20 transition-all active:scale-95 disabled:opacity-50",children:c?"Thinking...":"Refresh Strategy"})})]}):i.jsxs("button",{onClick:()=>{r(!0),f||p()},className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-tr from-indigo-600 to-purple-600 rounded-full shadow-2xl flex items-center justify-center text-2xl z-[100] hover:scale-110 transition-transform group border-2 border-white/20",children:["",i.jsxs("span",{className:"absolute right-0 top-0 flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-indigo-500"})]})]})},i2=({match:t,engine:e,teams:s,battingTeam:a,bowlingTeam:r,stats:c,timer:d,pad:f,wicket:m,onExit:p,setLayoutMode:g,isAuthorized:v,handlers:y,modals:N})=>{var B,G,H,z,P,ne;const S=s.find(le=>le.id===t.teamAId),k=s.find(le=>le.id===t.teamBId),E=a==null?void 0:a.players.find(le=>le.id===e.state.strikerId),T=a==null?void 0:a.players.find(le=>le.id===e.state.nonStrikerId),M=r==null?void 0:r.players.find(le=>le.id===e.state.bowlerId),C=e.state.history.slice(0,24),D=C.filter(le=>le.pitchCoords).map(le=>({coords:le.pitchCoords,color:le.isWicket?"red":"yellow"})),R=C.filter(le=>le.shotCoords).map(le=>({coords:le.shotCoords,color:le.runs>=4?"green":"white"}));return i.jsxs("div",{className:"h-full bg-slate-950 text-white flex flex-col w-full",children:[i.jsxs("div",{className:"bg-slate-900 px-4 py-2 border-b border-slate-800 flex justify-between items-center shadow-lg z-20",children:[i.jsxs("div",{className:"flex items-center gap-4 min-w-[200px]",children:[p&&i.jsx("button",{onClick:p,className:"w-8 h-8 rounded-full bg-slate-800 text-slate-400 flex items-center justify-center hover:bg-slate-700",children:""}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-sm font-black uppercase text-white",children:[a==null?void 0:a.name," vs ",r==null?void 0:r.name]}),i.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:[t.format,"  ",c.overs," Overs"]})]})]}),i.jsx("div",{className:"flex-1 flex justify-center",children:i.jsx(K1,{elapsedSeconds:d.elapsedSeconds,actualOvers:d.actualOvers,expectedOvers:d.expectedOvers,behindRate:d.behindRate})}),i.jsxs("div",{className:"flex items-center gap-4 min-w-[200px] justify-end",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-3xl font-black text-white leading-none",children:[e.state.score,"/",e.state.wickets]}),i.jsxs("div",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-widest",children:["CRR ",c.runRate]})]}),i.jsx("div",{className:"h-8 w-px bg-slate-800"}),i.jsx("button",{onClick:()=>g("PHONE"),className:"p-2 bg-slate-800 rounded-lg text-slate-400 hover:text-white",title:"Switch to Mobile View",children:""}),i.jsx("button",{onClick:y.openScoreboardWindow,className:"bg-indigo-600 text-white px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest hover:bg-indigo-500",children:"Popout Board"})]})]}),i.jsxs("div",{className:"flex-1 overflow-hidden grid grid-cols-12 gap-0",children:[i.jsxs("div",{className:"col-span-3 border-r border-slate-800 bg-slate-925 flex flex-col",children:[i.jsx("div",{className:"flex-1 p-2",children:i.jsx(Rb,{padView:f.padView,striker:E,nonStriker:T,bowlingTeam:r,onRun:y.handleRun,onCommitExtra:y.handleCommitExtra,onStartWicket:m.start,onNav:f.setPadView,onBack:f.resetPad,onMediaCapture:()=>N.setIsCameraOpen(!0),onDeclare:e.declareInnings,onSubRequest:()=>N.setShowSubModal(!0),matchFormat:t.format,onEndGame:y.handleManualConclude,onAnalyticsClick:()=>N.setShowShotModal(!0),onBroadcasterMode:()=>N.setShowBroadcaster(!0),autoAnalytics:N.autoAnalytics,onToggleAnalytics:()=>N.setAutoAnalytics(!N.autoAnalytics),onOfficialsClick:()=>N.setShowOfficialsModal(!0),readOnly:!v||e.state.isCompleted,compact:!0})}),i.jsxs("div",{className:"p-3 bg-slate-900 border-t border-slate-800 shrink-0",children:[i.jsx("div",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-2",children:"On Strike"}),i.jsxs("div",{className:"flex justify-between items-center bg-slate-800 p-2 rounded-lg mb-2 border border-indigo-500/30",children:[i.jsx("span",{className:"text-xs font-bold text-white truncate max-w-[100px]",children:E==null?void 0:E.name}),i.jsxs("span",{className:"text-xs font-mono text-indigo-400",children:[((B=c.batterStats[e.state.strikerId])==null?void 0:B.runs)||0,"(",((G=c.batterStats[e.state.strikerId])==null?void 0:G.balls)||0,")"]})]}),i.jsxs("div",{className:"flex justify-between items-center bg-slate-800 p-2 rounded-lg border border-slate-700",children:[i.jsx("span",{className:"text-xs font-bold text-slate-400 truncate max-w-[100px]",children:T==null?void 0:T.name}),i.jsxs("span",{className:"text-xs font-mono text-slate-500",children:[((H=c.batterStats[e.state.nonStrikerId])==null?void 0:H.runs)||0,"(",((z=c.batterStats[e.state.nonStrikerId])==null?void 0:z.balls)||0,")"]})]}),i.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-800",children:[i.jsx("div",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Bowler"}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-xs font-bold text-white",children:M==null?void 0:M.name}),i.jsxs("span",{className:"text-xs font-mono text-emerald-400",children:[((P=c.bowlerStats[e.state.bowlerId])==null?void 0:P.wickets)||0,"-",((ne=c.bowlerStats[e.state.bowlerId])==null?void 0:ne.runs)||0]})]})]})]})]}),i.jsx("div",{className:"col-span-5 border-r border-slate-800 bg-slate-950 overflow-y-auto custom-scrollbar p-4",children:S&&k&&i.jsx(Ol,{matchState:e.state,teamA:S,teamB:k})}),i.jsxs("div",{className:"col-span-4 bg-slate-900 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"flex-1 p-4 overflow-y-auto custom-scrollbar space-y-6",children:[i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl border border-slate-700",children:[i.jsx("h4",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-4 text-center",children:"Pitch Map (Last 24 Balls)"}),i.jsx(Ou,{deliveries:D,readonly:!0})]}),i.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl border border-slate-700",children:[i.jsx("h4",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-widest mb-4 text-center",children:"Wagon Wheel"}),i.jsx(Du,{shots:R,readonly:!0})]})]}),i.jsx("div",{className:"h-1/3 border-t border-slate-800 bg-slate-950",children:i.jsx(s2,{matchState:e.state,battingTeam:a,bowlingTeam:r,onEditBall:e.editBall})})]})]}),i.jsx(n2,{matchState:e.state,battingTeam:a,bowlingTeam:r})]})},Is={RUN:1,FOUR:1,SIX:2,WICKET:20,MAIDEN:4,DOT_BALL:.5,CATCH:10,RUN_OUT:15,STUMPING:15,ECONOMY_BONUS:10,STRIKE_RATE_BONUS:10},a2=(t,e)=>e.map(a=>{let r=0,c=0,d=0,f=0,m=0,p=0,g=0,v=0,y=0,N=0;[1,2,3,4].forEach(E=>{const T=Ml(a.id,t.history,E);f+=T.runs,m+=T.balls,r+=T.runs*Is.RUN+T.fours*Is.FOUR+T.sixes*Is.SIX;const M=Ro(a.id,t.history,E);p+=M.wickets,g+=M.runs,c+=M.wickets*Is.WICKET;const C=t.history.filter(G=>G.bowlerId===a.id&&G.innings===E&&(G.extraType==="None"||!G.extraType)),D={};C.forEach(G=>{D[G.over]=(D[G.over]||0)+G.runs});const R=Object.values(D).filter(G=>G===0).length;c+=R*Is.MAIDEN;const B=t.history.filter(G=>G.innings===E&&G.bowlerId===a.id&&G.runs===0&&(G.extraType==="None"||!G.extraType)).length;c+=B*Is.DOT_BALL}),f>30&&m>0&&f/m*100>140&&(r+=Is.STRIKE_RATE_BONUS),f>=50&&(r+=20),f>=100&&(r+=40),p>=3&&(c+=20),p>=5&&(c+=40);const k=t.history.filter(E=>E.bowlerId===a.id&&(E.extraType==="None"||!E.extraType)).length/6;return k>=2&&g/k<6&&(c+=Is.ECONOMY_BONUS),t.history.forEach(E=>{E.isWicket&&(E.fielderId===a.id&&(E.wicketType==="Caught"&&(v++,d+=Is.CATCH),E.wicketType==="Run Out"&&(y++,d+=Is.RUN_OUT),E.wicketType==="Stumped"&&(N++,d+=Is.STUMPING)),E.assistFielderId===a.id&&E.wicketType==="Run Out"&&(d+=Is.RUN_OUT/2))}),{playerId:a.id,points:r+c+d,stats:{runs:f,balls:m,wickets:p,runsConceded:g,catches:v,runOuts:y,stumpings:N},breakdown:{battingPoints:r,bowlingPoints:c,fieldingPoints:d}}}).sort((a,r)=>r.points-a.points),Ib=(t,e,s,a)=>{const r=window.open("","","width=800,height=600");if(!r)return;let c=`
        <html>
        <head>
            <title>Match Scorecard - ${e.name} vs ${s.name}</title>
            <style>
                body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; color: #1e293b; }
                h1 { text-align: center; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; color: #0f172a; margin-bottom: 5px; }
                .match-info { text-align: center; font-size: 14px; color: #64748b; margin-bottom: 20px; }
                .innings-section { margin-bottom: 30px; page-break-inside: avoid; }
                .innings-header { background: #f1f5f9; padding: 8px 12px; font-weight: bold; font-size: 16px; border-left: 4px solid #3b82f6; display: flex; justify-content: space-between; }
                table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 12px; }
                th, td { padding: 6px 8px; text-align: left; border-bottom: 1px solid #e2e8f0; }
                th { font-weight: bold; background: #f8fafc; color: #475569; }
                .text-right { text-align: right; }
                .extras-row { font-weight: bold; background: #f8fafc; }
                .fow-section { margin-top: 10px; font-size: 11px; color: #475569; }
                .footer { text-align: center; margin-top: 40px; font-size: 12px; color: #94a3b8; border-top: 1px solid #e2e8f0; padding-top: 10px; }
                .winner-banner { text-align: center; font-size: 18px; font-weight: bold; margin: 20px 0; color: #059669; }
                .mvp-banner { text-align: center; font-size: 14px; color: #d97706; font-weight: bold; }
                @media print {
                    body { padding: 0; }
                    button { display: none; }
                }
            </style>
        </head>
        <body>
            <div style="text-align: center; margin-bottom: 10px;">
                <img src="${window.location.origin}/logo.jpg" style="height: 60px; width: auto;" />
            </div>
            <h1>${e.name} vs ${s.name}</h1>
            <div class="match-info">${a}  ${new Date().toLocaleDateString()}</div>
    `;const d=t.inningsScores.map(f=>f.innings).sort((f,m)=>f-m);d.includes(t.innings)||d.push(t.innings),d.forEach(f=>{let m;const p=t.inningsScores.find(S=>S.innings===f);if(p)m=p.teamId;else if(f===t.innings)m=t.battingTeamId;else return;const g=m===e.id?e:s,v=m===e.id?s:e,y=Ao(t.history,g.players,f,"",""),N=zu(t.history,v.players,f);c+=`
            <div class="innings-section">
                <div class="innings-header">
                    <span>${g.name} Innings</span>
                    <span>${y.totalScore} (${y.overs} ov)</span>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Batter</th>
                            <th></th>
                            <th class="text-right">R</th>
                            <th class="text-right">B</th>
                            <th class="text-right">4s</th>
                            <th class="text-right">6s</th>
                            <th class="text-right">SR</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${y.rows.map(S=>`
                            <tr>
                                <td>${S.name} ${S.isOut?"":"*"}</td>
                                <td>${S.dismissal}</td>
                                <td class="text-right"><strong>${S.runs}</strong></td>
                                <td class="text-right">${S.balls}</td>
                                <td class="text-right">${S.fours}</td>
                                <td class="text-right">${S.sixes}</td>
                                <td class="text-right">${S.strikeRate}</td>
                            </tr>
                        `).join("")}
                        <tr class="extras-row">
                            <td colspan="2">Extras</td>
                            <td colspan="5">
                              ${y.extras.total} 
                              (w ${y.extras.wides}, nb ${y.extras.noBalls}, b ${y.extras.byes}, lb ${y.extras.legByes}, p ${y.extras.penalty})
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="fow-section">
                    <strong>Fall of Wickets:</strong> 
                    ${y.fow.map(S=>`${S.score}-${S.wicketNumber} (${S.batterName}, ${S.over})`).join(", ")}
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Bowler</th>
                            <th class="text-right">O</th>
                            <th class="text-right">M</th>
                            <th class="text-right">R</th>
                            <th class="text-right">W</th>
                            <th class="text-right">Eco</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${N.map(S=>`
                            <tr>
                                <td>${S.name}</td>
                                <td class="text-right">${S.overs}</td>
                                <td class="text-right">${S.maidens}</td>
                                <td class="text-right">${S.runs}</td>
                                <td class="text-right"><strong>${S.wickets}</strong></td>
                                <td class="text-right">${S.economy}</td>
                            </tr>
                        `).join("")}
                    </tbody>
                </table>
            </div>
        `}),c+=`
            <div class="footer">
                Generated by Cricket Core 2026
            </div>
            <script>
                window.onload = function() { window.print(); }
            <\/script>
        </body>
        </html>
    `,r.document.write(c),r.document.close()},Mb=({matchState:t,teamA:e,teamB:s,format:a="Cricket Match",onExit:r,onViewScorecard:c})=>{const d=()=>{Ib(t,e,s,a)},f=j.useMemo(()=>{var B,G,H;const E=((B=t.inningsScores.find(z=>z.teamId===e.id))==null?void 0:B.score)||0,T=((G=t.inningsScores.find(z=>z.teamId===s.id))==null?void 0:G.score)||0,M=((H=t.inningsScores.find(z=>z.teamId===s.id))==null?void 0:H.wickets)||0;let C="Match Concluded",D="Scores Level",R=null;return E>T?(C=`${e.name} Win`,D=`by ${E-T} runs`,R=e.id):T>E?(C=`${s.name} Win`,D=`by ${10-M} wickets`,R=s.id):C="Match Tied",{text:C,subText:D,winnerId:R}},[t,e,s]),m=j.useMemo(()=>{const E=[...e.players,...s.players],M=a2(t,E)[0];return{player:E.find(D=>D.id===M.playerId),stats:M.stats,points:M.points}},[t,e,s]),p=(E,T)=>{const M=E===e.id?e:s,C=E===e.id?s:e,D=Ao(t.history,M.players,T,"",""),R=D.totalScore,B=D.rows.sort((H,z)=>z.runs-H.runs).slice(0,3).filter(H=>H.balls>0).map(H=>({p:M.players.find(P=>P.name===H.name)||{name:H.name,id:"unknown"},s:{runs:H.runs,balls:H.balls}})),G=C.players.map(H=>({p:H,s:Ro(H.id,t.history,T)})).sort((H,z)=>z.s.wickets-H.s.wickets||H.s.runs-z.s.runs).slice(0,3).filter(H=>parseFloat(H.s.overs)>0);return{team:M,score:R,batters:B,bowlers:G}},g=t.history.find(E=>E.innings===1),v=g==null?void 0:g.strikerId;let y=t.battingTeamId;if(v&&(e.players.some(E=>E.id===v)?y=e.id:s.players.some(E=>E.id===v)&&(y=s.id)),!g&&t.inningsScores.length>0){const E=t.inningsScores.find(T=>T.innings===1);E&&(y=E.teamId)}const N=y===e.id?s.id:e.id,S=p(y,1),k=p(N,2);return i.jsx("div",{className:"fixed inset-0 bg-gray-100 z-[200] overflow-y-auto",children:i.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-gray-50 shadow-2xl relative",children:[i.jsxs("div",{className:"bg-white p-4 border-b border-gray-200 flex justify-between items-center sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"h-8 w-8 object-contain"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-sm font-black text-gray-800 uppercase tracking-tight",children:"Match Result"}),i.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:a})]})]}),i.jsx("button",{onClick:r,className:"bg-gray-100 p-2 rounded-full hover:bg-gray-200",children:""})]}),i.jsxs("div",{className:"p-4 space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"bg-teal-600 p-3 flex justify-between items-center text-white",children:[i.jsx("div",{className:"font-bold text-sm tracking-wide",children:S.team.name}),i.jsx("div",{className:"font-black text-lg",children:S.score})]}),i.jsxs("div",{className:"p-2 grid grid-cols-2 gap-2 text-xs",children:[i.jsx("div",{className:"space-y-1",children:S.batters.map((E,T)=>i.jsxs("div",{className:"flex justify-between p-1 bg-gray-50 rounded",children:[i.jsx("span",{className:"truncate w-20 font-medium",children:E.p.name}),i.jsxs("span",{className:"font-bold",children:[E.s.runs," ",i.jsxs("span",{className:"text-gray-400 font-normal",children:["(",E.s.balls,")"]})]})]},T))}),i.jsx("div",{className:"space-y-1",children:S.bowlers.map((E,T)=>i.jsxs("div",{className:"flex justify-between p-1 bg-gray-50 rounded",children:[i.jsx("span",{className:"truncate w-20 font-medium",children:E.p.name}),i.jsxs("span",{className:"font-bold",children:[E.s.wickets,"-",E.s.runs," ",i.jsxs("span",{className:"text-gray-400 font-normal",children:["(",E.s.overs,")"]})]})]},T))})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"bg-orange-500 p-3 flex justify-between items-center text-white",children:[i.jsx("div",{className:"font-bold text-sm tracking-wide",children:k.team.name}),i.jsx("div",{className:"font-black text-lg",children:k.score})]}),i.jsxs("div",{className:"p-2 grid grid-cols-2 gap-2 text-xs",children:[i.jsx("div",{className:"space-y-1",children:k.batters.map((E,T)=>i.jsxs("div",{className:"flex justify-between p-1 bg-gray-50 rounded",children:[i.jsx("span",{className:"truncate w-20 font-medium",children:E.p.name}),i.jsxs("span",{className:"font-bold",children:[E.s.runs," ",i.jsxs("span",{className:"text-gray-400 font-normal",children:["(",E.s.balls,")"]})]})]},T))}),i.jsx("div",{className:"space-y-1",children:k.bowlers.map((E,T)=>i.jsxs("div",{className:"flex justify-between p-1 bg-gray-50 rounded",children:[i.jsx("span",{className:"truncate w-20 font-medium",children:E.p.name}),i.jsxs("span",{className:"font-bold",children:[E.s.wickets,"-",E.s.runs," ",i.jsxs("span",{className:"text-gray-400 font-normal",children:["(",E.s.overs,")"]})]})]},T))})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-emerald-500 p-6 rounded-2xl text-center text-white shadow-lg",children:[i.jsx("h2",{className:"text-2xl font-black uppercase tracking-tight leading-none mb-1",children:f.text}),i.jsx("p",{className:"text-sm font-bold opacity-90 uppercase tracking-widest",children:f.subText})]}),m.player&&i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Man of the Match"}),i.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex items-center gap-4 text-left",children:[i.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full overflow-hidden shrink-0",children:i.jsx("img",{src:m.player.photoUrl||`https://ui-avatars.com/api/?name=${m.player.name}`,className:"w-full h-full object-cover"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-black text-gray-800",children:m.player.name}),i.jsxs("div",{className:"text-xs text-gray-500 font-medium mt-0.5",children:[m.stats.runs>0&&i.jsxs("span",{className:"mr-2",children:[" ",m.stats.runs]}),m.stats.wickets>0&&i.jsxs("span",{children:[" ",m.stats.wickets]})]})]}),i.jsxs("div",{className:"ml-auto text-right",children:[i.jsx("div",{className:"text-xl font-black text-teal-600 leading-none",children:Math.round(m.points)}),i.jsx("div",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"PTS"})]})]})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("button",{onClick:d,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl uppercase text-xs tracking-widest shadow-lg shadow-indigo-600/20",children:"Download PDF Scorebook"}),i.jsx("button",{onClick:c,className:"w-full py-4 bg-white border-2 border-slate-200 text-slate-700 font-bold rounded-xl uppercase text-xs tracking-widest hover:bg-slate-50",children:"View Full Scorecard"}),i.jsx("button",{onClick:r,className:"w-full py-4 bg-gray-900 text-white font-bold rounded-xl uppercase text-xs tracking-widest",children:"Return to Dashboard"})]})]})]})})},l2=({match:t,engine:e,teams:s,battingTeam:a,bowlingTeam:r,stats:c,pad:d,wicket:f,rules:m,timer:p,onExit:g,setLayoutMode:v,isAuthorized:y,handlers:N,modals:S,onEditPlayer:k,onBallClick:E,mobileTab:T,setMobileTab:M})=>{const C=a==null?void 0:a.players.find(P=>P.id===e.state.strikerId),D=a==null?void 0:a.players.find(P=>P.id===e.state.nonStrikerId);r==null||r.players.find(P=>P.id===e.state.bowlerId);const R=s.find(P=>P.id===t.teamAId),B=s.find(P=>P.id===t.teamBId),G=[...e.state.history].reverse(),H=e.state.target?e.state.target-e.state.score:0,z=m.totalOversAllowed*6-e.state.totalBalls;return i.jsxs("div",{className:"h-full bg-white text-slate-900 flex flex-col w-full relative",children:[i.jsxs("div",{className:"bg-white border-b border-gray-200 shrink-0 sticky top-0 z-50",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 pb-2",children:[i.jsx("button",{onClick:g,className:"w-8 h-8 rounded-full bg-gray-100 text-gray-600 flex items-center justify-center hover:bg-gray-200",children:""}),i.jsx("span",{className:"font-bold text-gray-900 text-lg",children:"Match Centre"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:e.undoBall,disabled:!e.canUndo,className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${e.canUndo?"bg-orange-100 text-orange-600 hover:bg-orange-200":"bg-gray-100 text-gray-300"}`,children:""}),i.jsx("button",{onClick:()=>v("DESKTOP"),className:"w-8 h-8 rounded-full bg-gray-100 text-gray-600 flex items-center justify-center hover:bg-gray-200",children:""})]})]}),i.jsx("div",{className:"flex justify-around items-center px-4",children:["SCORING","SCORECARD","BALLS","INFO"].map(P=>i.jsx("button",{onClick:()=>M(P),className:`pb-3 text-xs font-bold uppercase tracking-wider border-b-2 transition-all ${T===P?"text-teal-700 border-teal-700":"text-gray-400 border-transparent"}`,children:P},P))})]}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-0 relative bg-gray-50",children:[T==="SCORING"&&i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pt-2 pb-2 space-y-2 no-scrollbar",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("h2",{className:"text-[10px] font-black uppercase text-gray-500 tracking-widest",children:a==null?void 0:a.name}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-[9px] font-bold text-teal-600 bg-teal-50 px-2 py-0.5 rounded-full border border-teal-100",children:[" ",(()=>{const P=(p==null?void 0:p.elapsedSeconds)||0,ne=Math.floor(P/60),le=P%60;return`${ne}:${le.toString().padStart(2,"0")}`})()]}),i.jsx("span",{className:"text-[9px] font-bold text-gray-400 uppercase",children:e.state.innings===1?"1st Innings":"2nd Innings"})]})]}),i.jsxs("div",{className:"text-5xl font-black text-teal-900 mb-1 leading-none tracking-tight",children:[e.state.score,"-",e.state.wickets]}),i.jsxs("div",{className:"flex justify-center gap-4 text-[10px] font-bold text-gray-600 mb-2",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-[8px] text-gray-400 uppercase",children:"Ex"}),i.jsx("span",{children:e.state.history.filter(P=>P.innings===e.state.innings&&P.extraRuns&&P.extraRuns>0).reduce((P,ne)=>P+(ne.extraRuns||0),0)})]}),i.jsx("div",{className:"h-6 w-px bg-gray-300"}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-[8px] text-gray-400 uppercase",children:"Ov"}),i.jsxs("span",{children:[Math.floor(e.state.totalBalls/6),".",e.state.totalBalls%6," ",i.jsxs("span",{className:"text-gray-400 font-normal",children:["/ ",m.totalOversAllowed]})]})]}),i.jsx("div",{className:"h-6 w-px bg-gray-300"}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-[8px] text-gray-400 uppercase",children:"CRR"}),i.jsx("span",{children:c.runRate})]})]}),e.state.innings===2&&i.jsxs("div",{className:"bg-orange-50 rounded-lg p-1.5 border border-orange-100 inline-block min-w-[80%]",children:[i.jsxs("div",{className:"flex justify-center gap-3 text-[9px] font-bold text-orange-800 uppercase mb-0.5",children:[i.jsxs("span",{children:["Target ",e.state.target]}),i.jsxs("span",{children:["Req RR ",c.requiredRate]})]}),i.jsxs("div",{className:"text-[10px] font-black text-orange-600",children:["Need ",H," runs of ",z," balls"]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[i.jsxs("div",{className:"flex bg-gray-50 p-2 text-[9px] font-bold text-gray-500 uppercase tracking-wider border-b border-gray-100",children:[i.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[i.jsx("span",{className:"text-orange-500",children:""})," Batsman"]}),i.jsx("div",{className:"w-8 text-center",children:"R"}),i.jsx("div",{className:"w-8 text-center",children:"B"}),i.jsx("div",{className:"w-6 text-center",children:"4s"}),i.jsx("div",{className:"w-6 text-center",children:"6s"}),i.jsx("div",{className:"w-10 text-center",children:"SR"})]}),[e.state.strikerId,e.state.nonStrikerId].filter(Boolean).map(P=>{const ne=a==null?void 0:a.players.find(pe=>pe.id===P),le=(ne==null?void 0:ne.name)||"Unknown Batter",ie=c.batterStats[P]||{runs:0,balls:0,fours:0,sixes:0,strikeRate:0},J=P===e.state.strikerId;return i.jsxs("div",{className:"flex items-center p-2 border-b border-gray-50 last:border-0 hover:bg-gray-50 transition-colors min-h-[40px]",children:[i.jsx("div",{onClick:()=>d.openBatterActions(J?"striker":"nonStriker"),className:"flex-1 font-bold text-gray-800 text-xs flex items-center cursor-pointer",children:J?i.jsx("span",{className:"bg-orange-500 text-white px-2 py-0.5 rounded-full shadow-sm truncate max-w-[120px] block",children:le}):i.jsx("span",{className:"pl-1 truncate max-w-[120px] block",children:le})}),i.jsx("button",{onClick:pe=>{pe.stopPropagation(),k(J?"@striker":"@nonStriker")},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-indigo-600 hover:bg-slate-100 rounded-full mr-1 transition-colors",children:""}),i.jsx("div",{className:`w-8 text-center font-bold text-xs ${J?"text-teal-700":"text-gray-900"}`,children:ie.runs}),i.jsx("div",{className:"w-8 text-center text-[10px] text-gray-500 font-bold",children:ie.balls}),i.jsx("div",{className:"w-6 text-center text-[10px] text-gray-400",children:ie.fours}),i.jsx("div",{className:"w-6 text-center text-[10px] text-gray-400",children:ie.sixes}),i.jsx("div",{className:"w-10 text-center text-[9px] text-gray-500 font-mono",children:ie.strikeRate})]},P)}),!e.state.strikerId&&!e.state.nonStrikerId&&i.jsx("div",{className:"p-4 text-center text-[10px] text-gray-400 italic",children:"No batters at crease. Select Play/Start Match."})]}),e.state.bowlerId&&i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[i.jsxs("div",{className:"flex bg-gray-50 p-2 text-[9px] font-bold text-gray-500 uppercase tracking-wider border-b border-gray-100",children:[i.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[i.jsx("span",{className:"text-teal-600",children:""})," Bowler"]}),i.jsx("div",{className:"w-8 text-center",children:"O"}),i.jsx("div",{className:"w-8 text-center",children:"M"}),i.jsx("div",{className:"w-8 text-center",children:"R"}),i.jsx("div",{className:"w-6 text-center",children:"W"}),i.jsx("div",{className:"w-10 text-center",children:"Eco"})]}),(()=>{const P=e.state.bowlerId,ne=r==null?void 0:r.players.find(J=>J.id===P),le=(ne==null?void 0:ne.name)||"Unknown Bowler",ie=c.bowlerStats[P]||{overs:0,maidens:0,runs:0,wickets:0,economy:0};return i.jsxs("div",{className:"flex items-center p-2 min-h-[40px]",children:[i.jsx("div",{onClick:()=>d.startBowlerReplacement("correction"),className:"flex-1 font-bold text-gray-800 text-xs pl-1 truncate cursor-pointer",children:le}),i.jsx("button",{onClick:J=>{J.stopPropagation(),k("bowler")},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-indigo-600 hover:bg-slate-100 rounded-full mr-1 transition-colors",children:""}),i.jsx("div",{className:"w-8 text-center text-[10px] text-gray-500 font-bold",children:ie.overs}),i.jsx("div",{className:"w-8 text-center text-[10px] text-gray-400",children:ie.maidens}),i.jsx("div",{className:"w-8 text-center text-[10px] text-gray-400",children:ie.runs}),i.jsx("div",{className:"w-6 text-center font-black text-xs text-teal-700",children:ie.wickets}),i.jsx("div",{className:"w-10 text-center text-[9px] text-gray-500 font-mono",children:ie.economy})]})})()]})]}),i.jsx("div",{className:"shrink-0 bg-white border-y border-gray-200 py-3 relative shadow-inner z-10",children:i.jsxs("div",{className:"flex items-center gap-3 px-4 overflow-x-auto no-scrollbar",children:[i.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase shrink-0 sticky left-0 bg-white pr-2",children:"Recent"}),e.state.history.slice(-12).reverse().map((P,ne)=>i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold shrink-0 shadow-sm border ${P.isWicket?"bg-red-500 text-white border-red-600":P.runs>=4?"bg-teal-600 text-white border-teal-700":"bg-gray-100 text-gray-600 border-gray-200"}`,children:P.isWicket?"W":P.runs+(P.extraRuns||0)},ne))]})}),i.jsx("div",{className:"shrink-0 bg-gray-200 shadow-[0_-5px_15px_rgba(0,0,0,0.1)] z-20 rounded-t-3xl mt-[-10px] relative border-t border-gray-300",children:i.jsx("div",{className:"pb-safe pt-2 h-56",children:i.jsx(Rb,{padView:d.padView,striker:C,nonStriker:D,bowlingTeam:r,onRun:N.handleRun,onCommitExtra:N.handleCommitExtra,onStartWicket:f.start,onNav:d.setPadView,onBack:d.resetPad,onMediaCapture:()=>S.setIsCameraOpen(!0),onDeclare:e.declareInnings,onEndInnings:e.concludeInnings,onSubRequest:()=>S.setShowSubModal(!0),onEndGame:N.handleManualConclude,onAnalyticsClick:()=>S.setShowShotModal(!0),onBroadcasterMode:()=>S.setShowBroadcaster(!0),matchFormat:t.format,autoAnalytics:S.autoAnalytics,onToggleAnalytics:()=>S.setAutoAnalytics(!S.autoAnalytics),onOfficialsClick:()=>S.setShowOfficialsModal(!0),readOnly:!y||e.state.isCompleted,compact:!0})})})]}),T==="SCORECARD"&&i.jsx("div",{className:"p-4 bg-gray-50 min-h-full",children:R&&B&&i.jsx(Ol,{matchState:e.state,teamA:R,teamB:B})}),T==="SUMMARY"&&i.jsx("div",{className:"h-full overflow-y-auto no-scrollbar relative",children:i.jsx(Mb,{matchState:e.state,teamA:R,teamB:B,format:t.format,onExit:()=>M("SCORING"),onViewScorecard:()=>M("SCORECARD")})}),T==="BALLS"&&i.jsx("div",{className:"p-4 space-y-2 overflow-y-auto h-full bg-gray-50",children:G.map((P,ne)=>{var U;const le=O=>s.flatMap(V=>V.players).find(V=>V.id===O),ie=le(P.bowlerId),J=le(P.strikerId),pe=P.extraType&&P.extraType!=="None";return i.jsxs("div",{onClick:()=>E&&E(P),className:"bg-white p-3 rounded-xl border border-gray-200 shadow-sm flex justify-between items-center cursor-pointer hover:bg-slate-50 active:bg-slate-100 transition-colors",children:[i.jsxs("div",{className:"flex flex-col items-center min-w-[3rem] border-r border-gray-100 pr-3 mr-3",children:[i.jsxs("div",{className:"text-xs font-black text-gray-700",children:[P.over,".",P.ballNumber]}),i.jsxs("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded mt-1 ${P.innings===1?"bg-indigo-50 text-indigo-600":"bg-orange-50 text-orange-600"}`,children:["Inn ",P.innings]})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"text-[10px] uppercase font-bold text-gray-400 mb-0.5 tracking-wider",children:[((U=ie==null?void 0:ie.name)==null?void 0:U.split(" ").pop())||"Unknown"," to"]}),i.jsx("div",{className:"text-xs font-bold text-gray-900 truncate",children:(J==null?void 0:J.name)||"Unknown Batter"}),P.isWicket&&i.jsxs("div",{className:"text-[10px] font-bold text-red-600 mt-1 flex items-center gap-1",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),"WICKET (",P.wicketType,")"]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1 text-right pl-2",children:[i.jsx("div",{className:`text-lg font-black leading-none ${P.isWicket?"text-red-500":P.runs>=4?"text-teal-600":"text-gray-800"}`,children:P.runs+(P.extraRuns||0)}),pe&&i.jsxs("div",{className:"text-[9px] font-bold text-orange-500 bg-orange-50 px-1 rounded uppercase",children:[P.extraType," ",P.extraRuns?`+${P.extraRuns}`:""]})]})]},ne)})})]})]})},r2=({matchState:t,battingTeam:e,bowlingTeam:s,onClose:a})=>{const r=e==null?void 0:e.players.find(N=>N.id===t.strikerId),c=e==null?void 0:e.players.find(N=>N.id===t.nonStrikerId),d=s==null?void 0:s.players.find(N=>N.id===t.bowlerId),f=t.strikerId?Ml(t.strikerId,t.history,t.innings):null,m=t.nonStrikerId?Ml(t.nonStrikerId,t.history,t.innings):null,p=t.bowlerId?Ro(t.bowlerId,t.history,t.innings):null,g=Ab(t).slice(0,6).reverse(),v=t.totalBalls>0?(t.score/t.totalBalls*6).toFixed(1):"0.0",y=t.totalBalls>0?Math.round(t.score/t.totalBalls*(t.innings===1,120)):0;return i.jsxs("div",{className:"fixed inset-0 z-[500] bg-[#00FF00] overflow-hidden cursor-none hover:cursor-default group",children:[i.jsx("button",{onClick:a,className:"absolute top-4 right-4 bg-black/50 text-white px-4 py-2 rounded-full font-bold opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-md hover:bg-red-600",children:"Exit Broadcaster Mode"}),i.jsxs("div",{className:"absolute bottom-10 left-10 right-10 flex flex-col gap-4",children:[i.jsxs("div",{className:"flex items-end",children:[i.jsxs("div",{className:"bg-[#0f172a] text-white rounded-t-3xl rounded-bl-3xl p-6 shadow-2xl border-l-8 border-indigo-600 min-w-[300px] relative z-20",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[(e==null?void 0:e.logoUrl)&&i.jsx("img",{src:e.logoUrl,className:"w-12 h-12 bg-white rounded-full p-1"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-black uppercase leading-none tracking-tight",children:(e==null?void 0:e.name)||"Batting Team"}),i.jsx("p",{className:"text-indigo-400 font-bold text-sm uppercase tracking-widest",children:t.innings===1?"1st Innings":"Target Chase"})]})]}),i.jsxs("div",{className:"flex items-baseline gap-4",children:[i.jsxs("span",{className:"text-6xl font-black tabular-nums tracking-tighter",children:[t.score,"/",t.wickets]}),i.jsxs("span",{className:"text-2xl text-slate-400 font-bold",children:[Math.floor(t.totalBalls/6),".",t.totalBalls%6," Ov"]})]}),i.jsxs("div",{className:"mt-2 flex gap-4 text-xs font-bold text-slate-400 uppercase tracking-widest",children:[i.jsxs("span",{children:["CRR: ",v]}),y>0&&i.jsxs("span",{children:["Proj: ",y]})]})]}),i.jsx("div",{className:"bg-slate-900/95 backdrop-blur text-white p-4 mb-0 ml-[-20px] pl-10 rounded-tr-3xl relative z-10 border-b-4 border-slate-800 flex-1 min-w-0 max-w-2xl flex justify-between items-center shadow-xl",children:i.jsxs("div",{className:"flex-1 flex items-center justify-around",children:[i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-black text-xl leading-none flex items-center gap-2 justify-end",children:[r==null?void 0:r.name," ",i.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})]}),i.jsxs("div",{className:"text-indigo-300 font-mono font-bold text-lg",children:[f==null?void 0:f.runs,i.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["(",f==null?void 0:f.balls,")"]})]})]})}),i.jsx("div",{className:"h-10 w-px bg-slate-700 mx-4"}),i.jsx("div",{className:"flex items-center gap-3 opacity-70",children:i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-bold text-lg leading-none text-slate-300",children:c==null?void 0:c.name}),i.jsxs("div",{className:"text-slate-400 font-mono font-bold text-base",children:[m==null?void 0:m.runs,i.jsxs("span",{className:"text-xs text-slate-600 ml-1",children:["(",m==null?void 0:m.balls,")"]})]})]})})]})})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"bg-white text-slate-900 rounded-3xl p-4 shadow-xl flex items-center gap-6 min-w-[350px]",children:[i.jsx("div",{className:"bg-slate-900 text-white px-3 py-1 rounded text-[10px] font-black uppercase tracking-widest",children:"Bowler"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-black text-xl uppercase leading-none",children:d==null?void 0:d.name}),i.jsxs("div",{className:"font-mono text-sm font-bold text-slate-600 mt-1",children:[p==null?void 0:p.wickets,"-",p==null?void 0:p.runs," ",i.jsxs("span",{className:"text-[10px] text-slate-400",children:["(",p==null?void 0:p.overs,")"]})]})]})]}),i.jsxs("div",{className:"bg-slate-900/80 backdrop-blur rounded-3xl p-4 flex items-center gap-2 flex-1 shadow-xl",children:[i.jsx("div",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mr-2",children:"This Over"}),g.map(N=>i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-black text-xs ${N.color} text-white shadow-md border-2 border-white/10`,children:N.label},N.id))]})]})]})]})},o2=({isOpen:t,onClose:e,onSave:s,existingPitch:a,existingShot:r})=>{const[c,d]=j.useState(a),[f,m]=j.useState(r),[p,g]=j.useState("PITCH");return t?i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2.5rem] w-full max-w-sm shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[85vh]",children:[i.jsxs("div",{className:"p-6 bg-slate-950 border-b border-slate-800",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight",children:"Shot Analytics"}),i.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Moneyball Data Entry"})]}),i.jsx("div",{className:"bg-red-600 text-white text-[8px] font-black px-2 py-1 rounded-lg animate-pulse uppercase tracking-widest",children:"New Event"})]}),i.jsxs("div",{className:"flex bg-slate-800 rounded-xl p-1",children:[i.jsxs("button",{onClick:()=>g("PITCH"),className:`flex-1 py-2.5 rounded-lg text-[10px] font-black uppercase transition-all flex items-center justify-center gap-2 ${p==="PITCH"?"bg-white text-slate-900 shadow-lg":"text-slate-400"}`,children:[i.jsx("span",{children:""})," Pitch Location"]}),i.jsxs("button",{onClick:()=>g("SHOT"),className:`flex-1 py-2.5 rounded-lg text-[10px] font-black uppercase transition-all flex items-center justify-center gap-2 ${p==="SHOT"?"bg-white text-slate-900 shadow-lg":"text-slate-400"}`,children:[i.jsx("span",{children:""})," Hit Direction"]})]})]}),i.jsx("div",{className:"flex-1 p-6 bg-slate-900 flex items-center justify-center relative",children:p==="PITCH"?i.jsxs("div",{className:"w-full animate-in slide-in-from-left-4",children:[i.jsx("p",{className:"text-center text-[10px] text-slate-500 mb-6 font-bold uppercase tracking-widest bg-slate-800 py-2 rounded-full border border-white/5 px-4 mx-4",children:"Tap where the ball pitched"}),i.jsx(Ou,{onRecord:v=>{d(v),setTimeout(()=>g("SHOT"),300)},deliveries:c?[{coords:c,color:"red"}]:[]})]}):i.jsxs("div",{className:"w-full animate-in slide-in-from-right-4",children:[i.jsx("p",{className:"text-center text-[10px] text-slate-500 mb-6 font-bold uppercase tracking-widest bg-slate-800 py-2 rounded-full border border-white/5 px-4 mx-4",children:"Tap where the ball traveled"}),i.jsx(Du,{onRecord:m,shots:f?[{coords:f,color:"yellow"}]:[]})]})}),i.jsxs("div",{className:"p-6 border-t border-slate-800 bg-slate-950 flex gap-4",children:[i.jsx("button",{onClick:e,className:"flex-1 py-4 text-slate-500 font-black uppercase text-xs hover:text-white transition-all",children:"Skip Ball"}),i.jsx("button",{onClick:()=>{s(c,f),e()},disabled:!c&&!f,className:"flex-1 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:scale-105 active:scale-95 transition-all disabled:opacity-50 disabled:grayscale",children:"Log Analytics"})]})]})}):null},c2=({open:t,batters:e,fielders:s,wicketType:a,outPlayerId:r,fielderId:c,onSelectType:d,onSelectOutPlayer:f,onSelectFielder:m,onConfirm:p,onCancel:g})=>{if(!t)return null;const v=["Bowled","Caught","LBW","Run Out","Stumped","Hit Wicket","Timed Out","Retired Out","Retired Hurt"],y=a==="Caught"||a==="Stumped"||a==="Run Out";return i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",children:i.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[3rem] p-8 w-full max-w-xl shadow-2xl animate-in zoom-in-95 duration-300",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-black text-white",children:"Dismissal Record"}),i.jsx("p",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest mt-1",children:"Official Match Event"})]}),i.jsx("button",{onClick:g,className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-slate-400 hover:text-white transition-colors",children:""})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1 mb-3 block",children:"Method of Dismissal"}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:v.map(N=>i.jsx("button",{onClick:()=>d(N),className:`py-3 rounded-2xl text-[11px] font-black transition-all border ${a===N?"bg-red-600 border-red-500 text-white shadow-lg shadow-red-600/20":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,children:N},N))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1 mb-3 block",children:"Dismissed Batter"}),i.jsx("div",{className:"space-y-2",children:e.map(N=>i.jsxs("button",{onClick:()=>f(N.id),className:`w-full p-4 rounded-2xl text-left transition-all border flex justify-between items-center ${r===N.id?"bg-slate-800 border-indigo-500 text-white ring-1 ring-indigo-500/50":"bg-slate-800/50 border-slate-700 text-slate-400 opacity-60"}`,children:[i.jsx("span",{className:"font-bold text-xs",children:N.name}),r===N.id&&i.jsx("span",{className:"text-indigo-500",children:""})]},N.id))})]}),i.jsxs("div",{className:y?"opacity-100":"opacity-30 pointer-events-none",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1 mb-3 block",children:"Fielder Involved"}),i.jsxs("select",{value:c||"",onChange:N=>m(N.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-2xl p-4 text-xs font-bold text-white outline-none focus:border-red-500 appearance-none shadow-inner",children:[i.jsx("option",{value:"",children:"Select Fielder..."}),s.map(N=>i.jsx("option",{value:N.id,children:N.name},N.id))]})]})]})]}),i.jsxs("div",{className:"flex gap-4 pt-10",children:[i.jsx("button",{onClick:g,className:"flex-1 py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest text-slate-500 hover:bg-slate-800 transition-all",children:"Discard"}),i.jsx("button",{onClick:p,disabled:!a||!r,className:"flex-1 py-4 bg-red-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl shadow-red-600/20 hover:bg-red-500 transition-all active:scale-95 disabled:opacity-30",children:"Record Wicket"})]})]})})},d2=({isOpen:t,overNumber:e,bowlingTeamName:s,currentBowlerId:a,bowlers:r,onSelectBowler:c,getAvailability:d})=>t?i.jsx("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md z-[50] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] overflow-hidden shadow-2xl animate-in zoom-in-95",children:[i.jsxs("div",{className:"bg-slate-900 p-8 text-center",children:[i.jsxs("h2",{className:"text-2xl font-black text-white uppercase italic tracking-wider",children:["Over ",e," Complete"]}),i.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mt-2",children:["Select Next Bowler for ",s]})]}),i.jsx("div",{className:"p-4 bg-slate-50 max-h-[60vh] overflow-y-auto custom-scrollbar",children:i.jsx("div",{className:"grid grid-cols-1 gap-2",children:r.map(f=>{const m=d(f.id),p=f.id===a;return i.jsxs("button",{disabled:!m.allowed,onClick:()=>c(f.id),className:`w-full p-4 rounded-xl flex items-center justify-between border-2 transition-all ${p?"border-slate-200 bg-slate-100 opacity-50 cursor-not-allowed":m.allowed?"border-white bg-white shadow-sm hover:border-indigo-500 hover:shadow-md":"border-slate-100 bg-white opacity-40 grayscale"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-black ${p?"bg-slate-300 text-slate-500":"bg-indigo-100 text-indigo-600"}`,children:f.name.charAt(0)}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-bold text-sm text-slate-900",children:f.name}),i.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:f.role})]})]}),!m.allowed&&i.jsx("span",{className:"text-[9px] font-black text-red-400 uppercase tracking-wider",children:m.reason})]},f.id)})})})]})}):null,u2=({isOpen:t,title:e,reason:s,battingTeamName:a,score:r,isMatchOver:c,onNextInnings:d,onFinishMatch:f,onContinue:m,canEnforceFollowOn:p,onEnforceFollowOn:g,onViewScorecard:v,onDownloadPDF:y,leadMessage:N})=>t?i.jsx("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md z-[200] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[3rem] w-full max-w-lg shadow-2xl overflow-hidden animate-in zoom-in-95 text-center",children:[i.jsxs("div",{className:"bg-slate-950 p-10 border-b border-slate-800 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),i.jsx("div",{className:"text-4xl mb-4",children:""}),i.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tight mb-2",children:e}),i.jsx("div",{className:"inline-block px-4 py-1 bg-slate-800 rounded-full border border-slate-700 text-xs font-bold text-slate-400 uppercase tracking-widest",children:s})]}),i.jsxs("div",{className:"p-10 space-y-8",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-widest mb-2",children:[a," Finished At"]}),i.jsx("div",{className:"text-5xl font-black text-white tracking-tighter",children:r}),(e==="Innings Break"||e==="End of 1st Innings")&&i.jsx("div",{className:"mt-2 text-sm text-indigo-400 font-bold uppercase tracking-wide"})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[c?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:f,className:"w-full py-5 bg-emerald-500 hover:bg-emerald-400 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl shadow-emerald-500/20 transition-all active:scale-95",children:"Finalize Match Result"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[v&&i.jsx("button",{onClick:v,className:"py-4 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-bold uppercase text-[10px] tracking-widest transition-all",children:"View Scorecard"}),y&&i.jsx("button",{onClick:y,className:"py-4 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-bold uppercase text-[10px] tracking-widest transition-all",children:"Download PDF"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:d,className:"w-full py-5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-600/20 transition-all active:scale-95",children:"Start Next Innings"}),p&&g&&i.jsx("button",{onClick:g,className:"w-full py-5 bg-amber-600 hover:bg-amber-500 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl shadow-amber-600/20 transition-all active:scale-95 border-2 border-amber-400",children:"Enforce Follow-On"})]}),m&&i.jsx("button",{onClick:m,className:"w-full py-4 text-slate-400 font-black uppercase text-xs tracking-widest hover:text-white transition-all",children:"Continue Batting"})]})]})]})}):null,f2=({isOpen:t,battingPlayers:e,bowlingPlayers:s,onConfirm:a})=>{const[r,c]=j.useState(""),[d,f]=j.useState(""),[m,p]=j.useState(""),[g,v]=j.useState("");if(j.useEffect(()=>{t&&(c(""),f(""),p(""),v(""))},[t]),!t)return null;const y=()=>{if(!r||!d||!m){v("All fields are required to start the match.");return}if(r===d){v("Striker and Non-Striker must be different players.");return}a(r.trim(),d.trim(),m.trim())};return i.jsx("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md z-[200] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2.5rem] w-full max-w-lg shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-300",children:[i.jsxs("div",{className:"bg-slate-950 p-8 border-b border-slate-800 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center text-3xl shadow-lg shadow-indigo-600/20 mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Ready to Play?"}),i.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mt-2",children:"Select opening players to start innings"})]}),i.jsxs("div",{className:"p-8 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest px-1",children:"Striker"}),i.jsxs("select",{value:r,onChange:N=>c(N.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-4 text-xs font-bold text-white outline-none focus:border-indigo-500 transition-all appearance-none",children:[i.jsx("option",{value:"",children:"Select Batter..."}),e.map(N=>i.jsx("option",{value:N.id,children:N.name},N.id))]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest px-1",children:"Non-Striker"}),i.jsxs("select",{value:d,onChange:N=>f(N.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-4 text-xs font-bold text-white outline-none focus:border-indigo-500 transition-all appearance-none",children:[i.jsx("option",{value:"",children:"Select Batter..."}),e.map(N=>i.jsx("option",{value:N.id,children:N.name},N.id))]})]})]}),i.jsxs("div",{className:"space-y-2 pt-2",children:[i.jsx("label",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest px-1",children:"Opening Bowler"}),i.jsxs("select",{value:m,onChange:N=>p(N.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-4 text-xs font-bold text-white outline-none focus:border-emerald-500 transition-all appearance-none",children:[i.jsx("option",{value:"",children:"Select Bowler..."}),s.map(N=>i.jsx("option",{value:N.id,children:N.name},N.id))]})]}),g&&i.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-3 text-red-400 text-[10px] font-bold uppercase text-center animate-in shake",children:g}),i.jsx("button",{onClick:y,className:"w-full py-5 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-600/20 transition-all active:scale-95 mt-4",children:"Start Play"})]})]})})},lg=({isOpen:t,teamName:e,availableBatters:s,targetRole:a,onSelect:r})=>{const[c,d]=j.useState("");return t?i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[150] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2.5rem] w-full max-w-md shadow-2xl animate-in zoom-in-95 overflow-hidden",children:[i.jsxs("div",{className:"bg-slate-950 p-6 border-b border-slate-800 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-xl mx-auto flex items-center justify-center text-2xl shadow-lg mb-3",children:""}),i.jsx("h3",{className:"text-xl font-black text-white uppercase",children:"New Batter Required"}),i.jsxs("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-widest mt-1",children:["Select ",a," for ",e]})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[s.length===0?i.jsx("div",{className:"text-center p-4 bg-red-500/10 rounded-xl text-red-400 font-bold text-xs uppercase",children:"No more batters available."}):i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto custom-scrollbar pr-1",children:s.map(f=>i.jsxs("button",{onClick:()=>d(f.id),className:`w-full p-4 rounded-xl text-left border transition-all flex justify-between items-center ${c===f.id?"bg-indigo-600 border-indigo-500 text-white shadow-lg":"bg-slate-800 border-slate-700 text-slate-300 hover:border-slate-500"}`,children:[i.jsx("span",{className:"font-bold text-sm",children:f.name}),i.jsx("span",{className:"text-[9px] font-mono opacity-60 uppercase",children:f.role})]},f.id))}),i.jsxs("button",{onClick:()=>c&&r(c),disabled:!c,className:"w-full py-4 bg-white text-slate-900 rounded-xl font-black uppercase text-xs tracking-widest shadow-xl disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 transition-all mt-4",children:["Confirm ",a]})]})]})}):null},h2=({isOpen:t,onClose:e,teamName:s,currentPlayerId:a,currentPlayerName:r,role:c,availablePlayers:d,onReplace:f,onRetire:m,onInjury:p})=>{const[g,v]=j.useState("REPLACE"),[y,N]=j.useState(""),[S,k]=j.useState("Retired Hurt");if(!t)return null;const E=()=>{g==="REPLACE"?y&&y!==a&&(f(a,y,c==="Striker"?"striker":c==="NonStriker"?"nonStriker":"bowler"),e()):g==="RETIRE"&&m?(m(a,S),e()):g==="INJURY"&&p&&y&&(p(y),e())};return i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95",children:[i.jsxs("div",{className:"bg-slate-100 p-6 border-b border-slate-200",children:[i.jsxs("h3",{className:"font-black text-slate-800 text-lg uppercase tracking-tight",children:["Edit ",c]}),i.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:r})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[i.jsx("button",{onClick:()=>v("REPLACE"),className:`flex-1 py-3 rounded-lg text-xs font-black uppercase tracking-widest transition-all ${g==="REPLACE"?"bg-white shadow-sm text-indigo-600":"text-slate-400"}`,children:"Correction"}),c!=="Bowler"?i.jsx("button",{onClick:()=>v("RETIRE"),className:`flex-1 py-3 rounded-lg text-xs font-black uppercase tracking-widest transition-all ${g==="RETIRE"?"bg-white shadow-sm text-red-600":"text-slate-400"}`,children:"Retire"}):i.jsx("button",{onClick:()=>v("INJURY"),className:`flex-1 py-3 rounded-lg text-xs font-black uppercase tracking-widest transition-all ${g==="INJURY"?"bg-white shadow-sm text-orange-600":"text-slate-400"}`,children:"Injury"})]}),g==="REPLACE"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-xs text-slate-500",children:["Select the correct player who should be ",i.jsx("strong",{children:c}),". This will retroactively fix the current ball state but won't change history."]}),i.jsx(rg,{available:d,current:a,selected:y,onChange:N})]}),g==="INJURY"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-xs text-slate-500",children:[i.jsx("strong",{children:"Injury Replacement:"})," The new bowler will complete the current over."]}),i.jsx(rg,{available:d,current:a,selected:y,onChange:N})]}),g==="RETIRE"&&i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-red-500 px-1",children:"Retirement Type"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>k("Retired Hurt"),className:`p-3 rounded-xl border-2 text-xs font-bold transition-all ${S==="Retired Hurt"?"border-orange-500 bg-orange-50 text-orange-700":"border-slate-100 bg-slate-50 text-slate-400"}`,children:[" Retired Hurt",i.jsx("span",{className:"block text-[9px] font-normal mt-1 text-slate-500",children:"Can return later (Not Out)"})]}),i.jsxs("button",{onClick:()=>k("Retired Out"),className:`p-3 rounded-xl border-2 text-xs font-bold transition-all ${S==="Retired Out"?"border-red-500 bg-red-50 text-red-700":"border-slate-100 bg-slate-50 text-slate-400"}`,children:[" Retired Out",i.jsx("span",{className:"block text-[9px] font-normal mt-1 text-slate-500",children:"Cannot return (Wicket)"})]})]})]})})]}),i.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[i.jsx("button",{onClick:e,className:"flex-1 py-4 text-xs font-black uppercase tracking-widest text-slate-400 hover:bg-slate-100 rounded-xl transition-colors",children:"Cancel"}),i.jsx("button",{onClick:E,disabled:(g==="REPLACE"||g==="INJURY")&&!y,className:"flex-1 py-4 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest shadow-lg hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Confirm"})]})]})})},rg=({available:t,current:e,selected:s,onChange:a})=>i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-500 px-1",children:"Swap With"}),i.jsxs("select",{value:s,onChange:r=>a(r.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-4 text-sm font-bold text-slate-700 outline-none focus:border-indigo-500",children:[i.jsx("option",{value:"",children:"Select teammate..."}),t.filter(r=>r.id!==e).map(r=>i.jsx("option",{value:r.id,children:r.name},r.id))]})]}),p2=({isOpen:t,onClose:e,ball:s,onSave:a})=>{const[r,c]=j.useState(0),[d,f]=j.useState("None"),[m,p]=j.useState(0),[g,v]=j.useState(!1),[y,N]=j.useState("");if(j.useEffect(()=>{s&&(c(s.runs||0),f(s.extraType||"None"),p(s.extraRuns||0),v(s.isWicket||!1),N(s.wicketType||""))},[s]),!t||!s)return null;const S=()=>{a({runs:r,extraType:d,extraRuns:m,isWicket:g,wicketType:g?y:void 0}),e()};return i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95",children:[i.jsxs("div",{className:"bg-slate-100 p-6 border-b border-slate-200",children:[i.jsx("h3",{className:"font-black text-slate-800 text-lg uppercase tracking-tight",children:"Edit Ball"}),i.jsxs("p",{className:"text-sm font-mono text-slate-500 font-bold",children:[new Date(s.timestamp).toLocaleTimeString(),"  ",s.bowlerId?"Valid Ball":"Extra"]})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-500 px-1",children:"Runs (Off Bat)"}),i.jsx("div",{className:"flex gap-2",children:[0,1,2,3,4,6].map(k=>i.jsx("button",{onClick:()=>c(k),className:`w-10 h-10 rounded-full font-bold text-sm transition-all ${r===k?"bg-indigo-600 text-white shadow-md scale-110":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:k},k))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-500 px-1",children:"Extras"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:["None","Wide","NoBall","Bye","LegBye"].map(k=>i.jsx("button",{onClick:()=>f(k),className:`py-2 rounded-lg text-xs font-bold transition-all ${d===k?"bg-orange-500 text-white shadow-md":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:k},k))}),d!=="None"&&i.jsxs("div",{className:"flex items-center gap-4 mt-2 bg-slate-50 p-3 rounded-xl",children:[i.jsx("span",{className:"text-xs font-bold text-slate-600",children:"Extra Runs:"}),i.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(k=>i.jsx("button",{onClick:()=>p(k),className:`w-8 h-8 rounded-lg font-bold text-xs ${m===k?"bg-orange-500 text-white":"bg-white border border-slate-200 text-slate-600"}`,children:k},k))})]})]}),i.jsxs("div",{className:"flex items-center justify-between bg-red-50 p-4 rounded-xl border border-red-100",children:[i.jsx("span",{className:"font-black text-red-700 uppercase text-xs tracking-widest",children:"Is Wicket?"}),i.jsx("div",{onClick:()=>v(!g),className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${g?"bg-red-500":"bg-gray-300"}`,children:i.jsx("div",{className:`w-4 h-4 rounded-full bg-white absolute top-1 transition-all shadow-sm ${g?"left-7":"left-1"}`})})]})]}),i.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[i.jsx("button",{onClick:e,className:"flex-1 py-4 text-xs font-black uppercase tracking-widest text-slate-400 hover:bg-slate-100 rounded-xl transition-colors",children:"Cancel"}),i.jsx("button",{onClick:S,className:"flex-1 py-4 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest shadow-lg hover:bg-slate-800 transition-all",children:"Save Changes"})]})]})})},m2=({isOpen:t,onClose:e,currentUmpires:s,availableOfficials:a,onSave:r})=>{const[c,d]=j.useState([]),[f,m]=j.useState("");if(j.useEffect(()=>{t&&d(s||[])},[t,s]),!t)return null;const p=g=>{c.includes(g)?d(c.filter(v=>v!==g)):(c.length>=2,d([...c,g]))};return i.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[80vh]",children:[i.jsxs("div",{className:"bg-slate-900 p-8 border-b border-slate-800",children:[i.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:"Match Officials"}),i.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Assign Umpires & Referees"})]}),i.jsxs("div",{className:"p-6 flex-1 overflow-y-auto custom-scrollbar space-y-4",children:[a.length===0&&i.jsx("div",{className:"text-center py-8 text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No officials found in this organization."}),i.jsx("div",{className:"grid grid-cols-1 gap-2",children:a.map(g=>{const v=c.includes(g.id);return i.jsxs("button",{onClick:()=>p(g.id),className:`p-4 rounded-xl border flex items-center justify-between transition-all ${v?"bg-indigo-600 border-indigo-600 text-white shadow-md":"bg-slate-50 border-slate-100 text-slate-600 hover:bg-slate-100"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black ${v?"bg-white text-indigo-600":"bg-white border border-slate-200"}`,children:g.name.charAt(0)}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-bold text-sm",children:g.name}),i.jsxs("div",{className:`text-[10px] uppercase font-bold ${v?"text-indigo-200":"text-slate-400"}`,children:["ID: ",g.handle]})]})]}),v&&i.jsx("span",{className:"text-xl",children:""})]},g.id)})})]}),i.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-4",children:[i.jsx("button",{onClick:e,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600 transition-all",children:"Cancel"}),i.jsxs("button",{onClick:()=>{r(c),e()},className:"flex-1 py-4 bg-emerald-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-emerald-400 transition-all",children:["Confirm Officials (",c.length,")"]})]})]})})},x2=(t,e,s=11,a=!1,r="T20")=>{var m,p;if((m=t.adjustments)!=null&&m.declared)return"Declared";if((p=t.adjustments)!=null&&p.concluded)return"Match Concluded";const c=s>0?s:11,d=Math.max(0,c-1),f=a?d:Math.min(10,d);return t.wickets>=f?"All Out":r!=="Test"&&t.totalBalls>=e*6?"Overs Completed":t.target!==void 0&&t.score>=t.target?"Target Chased":null},g2=({match:t,teams:e,userRole:s,onUpdateMatchState:a,onComplete:r,onAddMediaPost:c,onExit:d,currentUserId:f,organizations:m})=>{var we,Y,te,xe,Re,Ge,Me,Ze,We,Os;const[p,g]=j.useState(window.innerWidth>1024?"DESKTOP":"PHONE"),v=t.savedState||{battingTeamId:t.teamAId,bowlingTeamId:t.teamBId,score:0,wickets:0,totalBalls:0,strikerId:((we=t.initialPlayers)==null?void 0:we.strikerId)||"",nonStrikerId:((Y=t.initialPlayers)==null?void 0:Y.nonStrikerId)||"",bowlerId:((te=t.initialPlayers)==null?void 0:te.bowlerId)||"",innings:1,history:[],inningsScores:[],isCompleted:!1,matchTimer:{startTime:null,totalAllowances:0,isPaused:!1,lastPauseTime:null},umpires:t.umpires||[]},y=$1(v),N=F1(),S=W1(),k=e.find(fe=>fe.id===y.state.battingTeamId),E=e.find(fe=>fe.id===y.state.bowlingTeamId),T=z1(t,y.state,E),M=J1(y.state,T.totalOversAllowed,k,E),C=Y1(y.state.matchTimer.startTime,y.state.totalBalls,!y.state.isCompleted&&!y.state.matchTimer.isPaused),[D,R]=j.useState(!1),[B,G]=j.useState(!1),[H,z]=j.useState(!y.state.strikerId&&!t.savedState),[P,ne]=j.useState(!1),[le,ie]=j.useState(!1),[J,pe]=j.useState(!1),[U,O]=j.useState(!1),[V,he]=j.useState("SCORING"),[W,A]=j.useState({open:!1,reason:null}),[$,re]=j.useState(null),[ve,Ne]=j.useState(null),[ge,Se]=j.useState(null),[Ee,Q]=j.useState("SUMMARY"),ye=s==="Scorer"||s==="Administrator"||s==="Umpire"&&((xe=t.umpires)==null?void 0:xe.includes(f)),je=j.useMemo(()=>{const fe=m.find(Ve=>Ve.fixtures.some(lt=>lt.id===t.id));return fe?fe.members.filter(Ve=>Ve.role==="Umpire"||Ve.role==="Match Official").map(Ve=>({id:Ve.userId,name:Ve.name,handle:Ve.handle,role:"Umpire",createdAt:Ve.addedAt})):[]},[m,t.id]);j.useEffect(()=>{a(t.id,y.state)},[y.state,t.id]),j.useEffect(()=>{const fe=x2(y.state,T.totalOversAllowed,k==null?void 0:k.players.length,t.allowFlexibleSquad,t.format);fe?A({open:!0,reason:fe}):!y.state.isCompleted&&!H&&(y.state.strikerId?y.state.nonStrikerId||Se("NonStriker"):Se("Striker"))},[y.state,T.totalOversAllowed,k,t,H]);const Be=fe=>{y.applyBall({runs:fe}),J&&G(!0)},et=(fe,Ve,lt)=>{let It="None";fe==="Wide"&&(It="Wide"),fe==="NoBall"&&(It="NoBall"),fe==="Bye"&&(It="Bye"),fe==="LegBye"&&(It="LegBye"),y.applyBall({extraType:It,extraRuns:Ve,runs:lt?Ve:0,batRuns:lt?Ve:0}),N.resetPad()},ct=()=>{t.format==="Test"&&y.state.innings<4?(y.endInnings(!1),y.startInnings(y.state.bowlingTeamId,y.state.battingTeamId,void 0,!1)):y.state.innings===1&&(y.endInnings(!1),y.startInnings(y.state.bowlingTeamId,y.state.battingTeamId,y.state.score+1),y.endInnings(!1),y.startInnings(y.state.bowlingTeamId,y.state.battingTeamId,y.state.score+1)),A({open:!1,reason:null}),z(!0)},pt=j.useMemo(()=>!y.state.testConfig||!y.state.lead?null:y.state.lead>0?`${k==null?void 0:k.name} leads by ${y.state.lead}`:`${k==null?void 0:k.name} trails by ${Math.abs(y.state.lead)}`,[y.state.lead,k]),wt=()=>{y.endInnings(!0),a(t.id,y.state,"Completed"),r()},Fe=()=>{y.endInnings(!0),a(t.id,y.state,"Completed"),r()},dt=()=>{y.startInnings(y.state.battingTeamId,y.state.bowlingTeamId,void 0,!0),A({open:!1,reason:null})},Tt=t.format==="Test"&&y.state.innings===2,Nt=(fe,Ve)=>{y.state.history.length>0&&y.editBall(y.state.history[0].timestamp,{pitchCoords:fe,shotCoords:Ve})},Et=()=>{const lt=(window.screen.width-800)/2,It=(window.screen.height-600)/2;window.open(`${window.location.origin}${window.location.pathname}?mode=scoreboard`,"ScoreboardWindow",`width=800,height=600,left=${lt},top=${It}`)},de=fe=>{y.updateMetadata({umpires:fe})};j.useEffect(()=>{const fe=new BroadcastChannel("cricket_sync_channel");return fe.postMessage({type:"UPDATE",state:y.state,teams:{batting:k,bowling:E}}),()=>fe.close()},[y.state,k,E]);const ce=()=>y.state.history[0],be=k==null?void 0:k.players.find(fe=>fe.id===y.state.strikerId),Ae=k==null?void 0:k.players.find(fe=>fe.id===y.state.nonStrikerId),Qe=new Set(y.state.history.filter(fe=>fe.innings===y.state.innings&&fe.isWicket&&fe.outPlayerId).map(fe=>fe.outPlayerId)),gt=((k==null?void 0:k.id)===t.teamAId?t.teamASquadIds:t.teamBSquadIds)||[],At=((E==null?void 0:E.id)===t.teamAId?t.teamASquadIds:t.teamBSquadIds)||[],Ue=!t.allowFlexibleSquad,at=(k==null?void 0:k.players.filter(fe=>fe.id!==y.state.strikerId&&fe.id!==y.state.nonStrikerId&&!Qe.has(fe.id)&&(!Ue||gt.length===0||gt.includes(fe.id))))||[],Zt=(E==null?void 0:E.players.filter(fe=>!Ue||At.length===0||At.includes(fe.id)))||[],us=at,ws=Math.floor(y.state.totalBalls/6),Rt=y.state.history.some(fe=>{var Ve;return fe.innings===y.state.innings&&fe.over===ws&&((Ve=fe.commentary)==null?void 0:Ve.startsWith("EVENT: New Bowler"))}),ee=y.state.totalBalls>0&&y.state.totalBalls%6===0&&!y.state.isCompleted&&!Rt;if(y.state.isCompleted)return Ee==="SCORECARD"?i.jsx("div",{className:"h-full bg-slate-950",children:i.jsx(Ol,{matchState:y.state,teamA:e.find(fe=>fe.id===t.teamAId),teamB:e.find(fe=>fe.id===t.teamBId),onBack:()=>Q("SUMMARY")})}):i.jsx(Mb,{matchState:y.state,teamA:e.find(fe=>fe.id===t.teamAId),teamB:e.find(fe=>fe.id===t.teamBId),format:t.format,onExit:d,onViewScorecard:()=>Q("SCORECARD")});const me={match:t,engine:y,teams:e,battingTeam:k,bowlingTeam:E,stats:M,timer:C,pad:N,wicket:S,rules:T,onExit:d,layoutMode:p,setLayoutMode:g,isAuthorized:s==="Scorer"||s==="Administrator",onComplete:r,handlers:{handleRun:Be,handleCommitExtra:et,handleMatchFinish:wt,handleManualConclude:Fe,openScoreboardWindow:Et,handleUpdateOfficials:de,handleAnalyticsSave:Nt},modals:{setIsCameraOpen:ie,setShowSubModal:ne,setShowBroadcaster:R,setShowOfficialsModal:O,setShowShotModal:G,autoAnalytics:J,setAutoAnalytics:pe},onEditPlayer:re,onBallClick:Ne,mobileTab:V,setMobileTab:he};return i.jsxs("div",{className:"h-full w-full",children:[p==="DESKTOP"?i.jsx(i2,{...me}):i.jsx(l2,{...me}),t.format==="Test"&&i.jsxs("div",{className:"fixed top-20 right-4 z-40 bg-slate-900/80 backdrop-blur text-white text-[10px] p-2 rounded-lg border border-slate-700 pointer-events-none",children:[i.jsxs("div",{className:"font-bold uppercase tracking-widest text-indigo-400",children:["Day ",y.state.currentDay||1]}),i.jsx("div",{className:"font-mono text-xs",children:pt})]}),i.jsx(o2,{isOpen:B,onClose:()=>G(!1),onSave:Nt,existingPitch:(Re=ce())==null?void 0:Re.pitchCoords,existingShot:(Ge=ce())==null?void 0:Ge.shotCoords}),i.jsx(c2,{open:S.isOpen,batters:[be,Ae].filter(Boolean),fielders:Zt,wicketType:S.wicketType,outPlayerId:S.outPlayerId,fielderId:S.fielderId,onSelectType:S.setWicketType,onSelectOutPlayer:S.setOutPlayerId,onSelectFielder:S.setFielderId,onConfirm:()=>{y.recordWicket({type:"WICKET",wicketType:S.wicketType,batterId:S.outPlayerId,fielderId:S.fielderId||void 0}),S.reset()},onCancel:S.reset}),i.jsx(d2,{isOpen:ee&&ye,overNumber:Math.floor(y.state.totalBalls/6)+1,bowlingTeamName:(E==null?void 0:E.name)||"",currentBowlerId:y.state.bowlerId,bowlers:Zt,getAvailability:T.getBowlerAvailability,onSelectBowler:fe=>y.applyBall({commentary:"EVENT: New Bowler",bowlerId:fe})}),i.jsx(u2,{isOpen:W.open,title:t.format==="Test"&&y.state.innings===4&&W.reason!=="Target Chased"?"Match Drawn?":"Innings Over",reason:W.reason||"",battingTeamName:(k==null?void 0:k.name)||"",score:`${y.state.score}/${y.state.wickets}`,isMatchOver:y.state.innings===(t.format==="Test"?4:2)&&t.format!=="Test",onNextInnings:ct,onFinishMatch:wt,canEnforceFollowOn:Tt,onEnforceFollowOn:dt,onViewScorecard:()=>{A(fe=>({...fe,open:!1})),window.innerWidth<=1024&&he("SCORECARD")},leadMessage:pt,onDownloadPDF:()=>{const fe=e.find(lt=>lt.id===t.teamAId),Ve=e.find(lt=>lt.id===t.teamBId);fe&&Ve&&Ib(y.state,fe,Ve,t.format||"Cricket Match")}}),i.jsx(f2,{isOpen:H,battingPlayers:at,bowlingPlayers:Zt,onConfirm:(fe,Ve,lt)=>{y.updateMetadata({strikerId:fe,nonStrikerId:Ve,bowlerId:lt}),setTimeout(()=>{y.applyBall({commentary:"EVENT: Match Started",strikerId:fe,nonStrikerId:Ve,bowlerId:lt,innings:y.state.innings})},50),z(!1)}}),N.padView==="bowler_replacement_select"&&i.jsx(lg,{isOpen:!0,teamName:(E==null?void 0:E.name)||"",availableBatters:Zt.filter(fe=>fe.id!==y.state.bowlerId),targetRole:"Striker",onSelect:fe=>{y.replaceBowlerMidOver(fe),N.resetPad(),re(null)}}),ge&&!H&&ye&&i.jsx(lg,{isOpen:!0,teamName:(k==null?void 0:k.name)||"",availableBatters:us,targetRole:ge,onSelect:fe=>{y.applyBall({commentary:`EVENT: New Batter (${ge})`,[ge.toLowerCase()+"Id"]:fe}),Se(null)}}),i.jsx(ju,{isOpen:le,onClose:()=>ie(!1),onUpload:(fe,Ve)=>{c({id:Date.now().toString(),type:Ve,contentUrl:fe,authorName:"Scorer",caption:"Match Moment",timestamp:Date.now(),likes:0,shares:0,comments:[]}),ie(!1)}}),D&&i.jsx(r2,{matchState:y.state,battingTeam:k,bowlingTeam:E,onClose:()=>R(!1)}),i.jsx(m2,{isOpen:U,onClose:()=>O(!1),currentUmpires:y.state.umpires||[],availableOfficials:je,onSave:de}),$&&i.jsx(h2,{isOpen:!0,onClose:()=>re(null),teamName:$==="bowler"?(E==null?void 0:E.name)||"":(k==null?void 0:k.name)||"",currentPlayerId:$==="bowler"?y.state.bowlerId:$==="@striker"?y.state.strikerId:y.state.nonStrikerId,currentPlayerName:($==="bowler"?(Ze=(Me=E==null?void 0:E.players)==null?void 0:Me.find(fe=>fe.id===y.state.bowlerId))==null?void 0:Ze.name:(Os=(We=k==null?void 0:k.players)==null?void 0:We.find(fe=>fe.id===($==="@striker"?y.state.strikerId:y.state.nonStrikerId)))==null?void 0:Os.name)||"Unknown Player",role:$==="bowler"?"Bowler":$==="@striker"?"Striker":"NonStriker",availablePlayers:$==="bowler"?Zt:us,onReplace:(fe,Ve,lt)=>{y.correctPlayerIdentity(fe,Ve,lt),re(null)},onRetire:(fe,Ve)=>{y.retireBatter(fe,Ve),re(null),setTimeout(()=>{Se($==="@striker"?"Striker":"NonStriker")},100)},onInjury:fe=>{y.replaceBowlerMidOver(fe),re(null)}}),i.jsx(p2,{isOpen:!!ve,onClose:()=>Ne(null),ball:ve,onSave:fe=>{ve&&y.editBall(ve.timestamp,fe)}})]})},b2=({fixture:t,team:e,onCancel:s,onSubmit:a,currentUserId:r,allPlayers:c})=>{const[d,f]=j.useState(1),[m,p]=j.useState(""),[g,v]=j.useState(""),[y,N]=j.useState(""),[S,k]=j.useState(""),[E,T]=j.useState(""),[M,C]=j.useState(""),[D,R]=j.useState(""),[B,G]=j.useState(""),[H,z]=j.useState(null),[P,ne]=j.useState(null),le=j.useMemo(()=>t.teamASquadIds?c.filter(ce=>{var be;return(be=t.teamASquadIds)==null?void 0:be.includes(ce.id)}):c.filter(ce=>ce.teamId===t.teamAId),[c,t]),ie=j.useMemo(()=>t.teamBSquadIds?c.filter(ce=>{var be;return(be=t.teamBSquadIds)==null?void 0:be.includes(ce.id)}):c.filter(ce=>ce.teamId===t.teamBId),[c,t]),[J,pe]=j.useState(()=>[...le,...ie].map(be=>({playerId:be.id,playerName:be.name,runs:0,balls:0,fours:0,sixes:0,wickets:0,overs:0,maidens:0,runsConceded:0,catches:0,stumpings:0,runOuts:0}))),[U,O]=j.useState(0),[V,he]=j.useState(""),[W,A]=j.useState(0),[$,re]=j.useState(""),[ve,Ne]=j.useState(0),[ge,Se]=j.useState(0),[Ee,Q]=j.useState(0),[ye,je]=j.useState(""),[Be,et]=j.useState(0),[ct,pt]=j.useState(""),[wt,Fe]=j.useState("TEAM_A"),dt=(ce,be,Ae)=>{pe(Qe=>Qe.map(gt=>gt.playerId===ce?{...gt,[be]:Ae}:gt))},Tt=ce=>{var Ae;const be=(Ae=ce.target.files)==null?void 0:Ae[0];if(be){const Qe=URL.createObjectURL(be);z(Qe),ne(be.type==="application/pdf"?"pdf":"image")}},Nt=ce=>{ce.preventDefault();const be={id:`report-${Date.now()}`,matchId:t.id,submittedBy:r,timestamp:Date.now(),status:"PENDING",teamAScore:parseInt(m)||0,teamAWickets:parseInt(g)||0,teamAOvers:y||"0",teamBScore:parseInt(S)||0,teamBWickets:parseInt(E)||0,teamBOvers:M||"0",playerPerformances:J,scorecardPhotoUrl:H||void 0,umpires:[D,B].filter(Boolean),umpireRatings:{...D?{[D]:{rating:U,comment:V}}:{},...B?{[B]:{rating:W,comment:$}}:{}},facilityRating:{pitch:ve,outfield:ge,facilities:Ee,comment:ye},spiritRating:{rating:Be,comment:ct}};a(be)},Et=wt==="TEAM_A"?le:ie,de=wt==="TEAM_A"?t.teamAName:t.teamBName;return i.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-2xl border border-slate-100 max-w-5xl mx-auto min-h-[80vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:"Match Report"}),i.jsxs("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest mt-1",children:[t.format,"  ",t.venue]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${d===1?"bg-indigo-600 scale-125":"bg-slate-200"}`}),i.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${d===2?"bg-indigo-600 scale-125":"bg-slate-200"}`}),i.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${d===3?"bg-indigo-600 scale-125":"bg-slate-200"}`})]})]}),i.jsx("form",{onSubmit:Nt,className:"flex-1 flex flex-col",children:d===1?i.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"text-xl font-black text-slate-900 border-b-2 border-slate-100 pb-2 flex justify-between",children:[t.teamAName,i.jsx("span",{className:"text-slate-300 text-sm",children:"Team A"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Runs"}),i.jsx("input",{type:"number",min:"0",value:m,onChange:ce=>p(ce.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Wkts"}),i.jsx("input",{type:"number",min:"0",max:"10",value:g,onChange:ce=>v(ce.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Overs"}),i.jsx("input",{type:"text",value:y,onChange:ce=>N(ce.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0.0"})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("h3",{className:"text-xl font-black text-slate-900 border-b-2 border-slate-100 pb-2 flex justify-between",children:[t.teamBName,i.jsx("span",{className:"text-slate-300 text-sm",children:"Team B"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Runs"}),i.jsx("input",{type:"number",min:"0",value:S,onChange:ce=>k(ce.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Wkts"}),i.jsx("input",{type:"number",min:"0",max:"10",value:E,onChange:ce=>T(ce.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Overs"}),i.jsx("input",{type:"text",value:M,onChange:ce=>C(ce.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0.0"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-6 border-t border-slate-100",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Umpire 1"}),i.jsx("input",{type:"text",value:D,onChange:ce=>R(ce.target.value),className:"w-full bg-slate-50 border border-slate-200 focus:border-indigo-500 rounded-xl px-4 py-3 font-bold text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 placeholder:text-slate-300",placeholder:"Name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Umpire 2"}),i.jsx("input",{type:"text",value:B,onChange:ce=>G(ce.target.value),className:"w-full bg-slate-50 border border-slate-200 focus:border-indigo-500 rounded-xl px-4 py-3 font-bold text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 placeholder:text-slate-300",placeholder:"Name"})]})]}),i.jsxs("div",{className:"mt-8 bg-indigo-50 p-8 rounded-[2.5rem] border border-indigo-100",children:[i.jsxs("h3",{className:"text-xl font-black text-indigo-900 mb-6 flex items-center gap-2",children:[i.jsx("span",{children:""})," Scorecard File",i.jsx("span",{className:"text-[10px] bg-white text-indigo-500 px-2 py-1 rounded-md uppercase tracking-wider",children:"Required"})]}),i.jsx("div",{className:"relative flex flex-col items-center justify-center border-2 border-dashed border-indigo-200 rounded-[2rem] p-10 bg-white/50 hover:bg-white transition-all group cursor-pointer",children:H?i.jsxs("div",{className:"relative w-full h-48 rounded-2xl overflow-hidden shadow-lg bg-white flex items-center justify-center",children:[P==="image"?i.jsx("img",{src:H,className:"w-full h-full object-contain"}):i.jsxs("div",{className:"text-center p-6",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsx("p",{className:"font-black text-slate-900 mt-2",children:"PDF Document Uploaded"})]}),i.jsx("button",{type:"button",onClick:ce=>{ce.preventDefault(),z(null)},className:"absolute top-4 right-4 bg-red-500 text-white p-2 rounded-full shadow-xl hover:bg-red-600 transition-colors z-10",children:""})]}):i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-2xl flex items-center justify-center text-indigo-500 mb-4 mx-auto group-hover:scale-110 transition-transform",children:""}),i.jsx("p",{className:"text-indigo-900 font-black uppercase text-xs tracking-widest",children:"Click to upload Scorecard"}),i.jsx("p",{className:"text-slate-400 font-bold text-[10px] mt-2 italic",children:"Support: JPG, PNG, PDF"}),i.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:Tt,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})})]}),i.jsxs("div",{className:"flex gap-4 mt-auto pt-8",children:[i.jsx("button",{type:"button",onClick:s,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs tracking-widest hover:text-slate-600 transition-colors",children:"Cancel"}),i.jsx("button",{type:"button",onClick:()=>f(2),disabled:!m||!S||!H,className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-2xl shadow-xl hover:bg-indigo-500 disabled:opacity-50 disabled:grayscale transition-all",children:"Next: Player Stats "})]})]}):d===2?i.jsxs("div",{className:"flex-1 flex flex-col animate-in fade-in slide-in-from-right-8 duration-500",children:[i.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-2xl border border-slate-200 shadow-inner mb-6 mx-auto w-full max-w-md",children:[i.jsx("button",{type:"button",onClick:()=>Fe("TEAM_A"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${wt==="TEAM_A"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"}`,children:t.teamAName}),i.jsx("button",{type:"button",onClick:()=>Fe("TEAM_B"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${wt==="TEAM_B"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"}`,children:t.teamBName})]}),i.jsxs("div",{className:"flex-1 overflow-visible",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4 px-2",children:[i.jsxs("h3",{className:"text-xl font-black text-slate-900",children:[de," Performance"]}),i.jsxs("span",{className:"bg-slate-100 text-slate-500 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider",children:[Et.length," Players"]})]}),i.jsx("div",{className:"max-h-[50vh] overflow-y-auto pr-2 custom-scrollbar space-y-3",children:Et.map(ce=>{const be=J.find(Ae=>Ae.playerId===ce.id)||{runs:0,balls:0,wickets:0,overs:0,runsConceded:0,catches:0};return i.jsxs("div",{className:"p-5 bg-slate-50 rounded-[1.5rem] border border-slate-200 hover:border-indigo-200 transition-all",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("p",{className:"font-black text-slate-900 text-sm uppercase tracking-tight",children:ce.name}),i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:ce.role==="All-rounder"?"All-Rndr":ce.role})]}),i.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Runs"}),i.jsx("input",{type:"number",min:"0",value:be.runs,onChange:Ae=>dt(ce.id,"runs",parseInt(Ae.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Balls"}),i.jsx("input",{type:"number",min:"0",value:be.balls,onChange:Ae=>dt(ce.id,"balls",parseInt(Ae.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Wkts"}),i.jsx("input",{type:"number",min:"0",value:be.wickets,onChange:Ae=>dt(ce.id,"wickets",parseInt(Ae.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Overs"}),i.jsx("input",{type:"number",min:"0",value:be.overs,onChange:Ae=>dt(ce.id,"overs",parseInt(Ae.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Conc"}),i.jsx("input",{type:"number",min:"0",value:be.runsConceded,onChange:Ae=>dt(ce.id,"runsConceded",parseInt(Ae.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Catch"}),i.jsx("input",{type:"number",min:"0",value:be.catches,onChange:Ae=>dt(ce.id,"catches",parseInt(Ae.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]})]})]},ce.id)})})]}),i.jsxs("div",{className:"flex gap-4 mt-6 pt-6 border-t border-slate-100",children:[i.jsx("button",{type:"button",onClick:()=>f(1),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs tracking-widest hover:text-slate-600 transition-colors",children:" Back"}),i.jsx("button",{type:"button",onClick:()=>f(3),className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-2xl shadow-xl hover:bg-indigo-500 transition-all",children:"Next: Ratings "})]})]}):i.jsxs("div",{className:"flex-1 flex flex-col animate-in fade-in slide-in-from-right-8 duration-500",children:[i.jsxs("div",{className:"space-y-8 overflow-y-auto custom-scrollbar max-h-[60vh] pr-2",children:[(D||B)&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-black text-slate-900 border-b-2 border-slate-100 pb-2",children:"Umpire Performance"}),[{name:D,rating:U,setRating:O,comment:V,setComment:he},{name:B,rating:W,setRating:A,comment:$,setComment:re}].filter(ce=>ce.name).map((ce,be)=>i.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h4",{className:"font-bold text-slate-900",children:ce.name}),i.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(Ae=>i.jsx("button",{type:"button",onClick:()=>ce.setRating(Ae),className:`text-2xl transition-transform hover:scale-110 ${Ae<=ce.rating?"grayscale-0":"grayscale opacity-30"}`,children:""},Ae))})]}),i.jsx("input",{value:ce.comment,onChange:Ae=>ce.setComment(Ae.target.value),placeholder:`Feedback for ${ce.name}...`,className:"w-full bg-white border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:border-indigo-500"})]},be))]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-black text-slate-900 border-b-2 border-slate-100 pb-2",children:"Ground & Facilities"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{label:"Pitch Quality",val:ve,set:Ne},{label:"Outfield",val:ge,set:Se},{label:"Facilities",val:Ee,set:Q}].map((ce,be)=>i.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-200 text-center",children:[i.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:ce.label}),i.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4,5].map(Ae=>i.jsx("button",{type:"button",onClick:()=>ce.set(Ae),className:`text-xl transition-transform hover:scale-110 ${Ae<=ce.val?"grayscale-0":"grayscale opacity-30"}`,children:""},Ae))})]},be))}),i.jsx("textarea",{value:ye,onChange:ce=>je(ce.target.value),placeholder:"Any comments on the ground conditions?",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:border-indigo-500 h-24 resize-none"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-black text-slate-900 border-b-2 border-slate-100 pb-2",children:"Spirit of the Game"}),i.jsxs("div",{className:"bg-indigo-50 p-6 rounded-2xl border border-indigo-100",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[i.jsxs("p",{className:"font-bold text-indigo-900 text-sm",children:["Rate the opposition (",wt==="TEAM_A"?t.teamBName:t.teamAName,") behavior"]}),i.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(ce=>i.jsx("button",{type:"button",onClick:()=>et(ce),className:`text-3xl transition-transform hover:scale-110 ${ce<=Be?"grayscale-0":"grayscale opacity-30"}`,children:""},ce))})]}),i.jsx("textarea",{value:ct,onChange:ce=>pt(ce.target.value),placeholder:"Comments on sportsmanship...",className:"w-full bg-white border border-indigo-200 rounded-xl px-4 py-3 text-sm outline-none focus:border-indigo-500 h-20 resize-none"})]})]})]}),i.jsxs("div",{className:"flex gap-4 mt-8 pt-6 border-t border-slate-100",children:[i.jsx("button",{type:"button",onClick:()=>f(2),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs tracking-widest hover:text-slate-600 transition-colors",children:" Back"}),i.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-emerald-500 text-white font-black uppercase text-xs tracking-[0.2em] rounded-2xl shadow-xl hover:bg-emerald-400 transition-all",children:"Submit Report "})]})]})})]})},v2=({isOpen:t,onClose:e,onSubmit:s,teamId:a,currentUserId:r,matchId:c})=>{const[d,f]=j.useState("GAME_ISSUE"),[m,p]=j.useState(""),[g,v]=j.useState(""),[y,N]=j.useState("");if(!t)return null;const S=k=>{k.preventDefault();const E={id:`issue-${Date.now()}`,matchId:c,lodgedBy:r,teamId:a,type:d,title:m,description:g,status:"OPEN",evidenceUrls:y?[y]:[],timestamp:Date.now()};s(E),e()};return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in duration-200",children:i.jsxs("div",{className:"bg-white rounded-[2rem] w-full max-w-lg shadow-2xl border border-slate-100 flex flex-col max-h-[90vh]",children:[i.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Lodge Report"}),i.jsx("p",{className:"text-slate-400 font-bold text-xs uppercase tracking-widest mt-1",children:"Raise an issue or protest"})]}),i.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-slate-50 hover:bg-slate-100 flex items-center justify-center text-slate-400 font-black transition-colors",children:""})]}),i.jsxs("form",{onSubmit:S,className:"p-8 space-y-6 overflow-y-auto",children:[i.jsx("div",{className:"flex bg-slate-100 p-1.5 rounded-xl",children:["GAME_ISSUE","PROTEST","FEEDBACK"].map(k=>i.jsx("button",{type:"button",onClick:()=>f(k),className:`flex-1 py-3 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${d===k?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:k.replace("_"," ")},k))}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Subject / Title"}),i.jsx("input",{required:!0,value:m,onChange:k=>p(k.target.value),className:"w-full bg-slate-50 border-2 border-slate-100 focus:border-indigo-500 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-50 transition-all placeholder:text-slate-300",placeholder:"Brief subject..."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Detailed Description"}),i.jsx("textarea",{required:!0,value:g,onChange:k=>v(k.target.value),className:"w-full bg-slate-50 border-2 border-slate-100 focus:border-indigo-500 rounded-xl px-4 py-3 font-medium text-slate-700 outline-none focus:ring-4 focus:ring-indigo-50 transition-all placeholder:text-slate-300 min-h-[120px] resize-none",placeholder:"Describe the issue, incident, or feedback in detail..."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Upload Evidence (Optional)"}),i.jsx("div",{className:"relative border-2 border-dashed border-slate-200 rounded-xl p-6 bg-slate-50 hover:bg-white hover:border-indigo-200 transition-all text-center group",children:y?i.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-slate-100 shadow-sm relative z-20",children:[i.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[i.jsx("span",{className:"text-2xl flex-shrink-0",children:y.includes("pdf")||y.includes("doc")?"":""}),i.jsxs("div",{className:"text-left overflow-hidden",children:[i.jsx("p",{className:"text-xs font-black text-slate-900 line-clamp-1",children:"Evidence Attached"}),i.jsx("p",{className:"text-[9px] font-bold text-emerald-500 uppercase",children:"Ready to submit"})]})]}),i.jsx("button",{type:"button",onClick:k=>{k.preventDefault(),k.stopPropagation(),N("")},className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-50 text-slate-400 hover:text-red-500 transition-colors",children:""})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-12 h-12 bg-indigo-50 text-indigo-500 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform",children:""}),i.jsx("p",{className:"text-slate-400 font-bold text-xs uppercase tracking-widest",children:"Click to upload evidence"}),i.jsx("p",{className:"text-[9px] text-slate-300 mt-1 font-medium",children:"Supports Photos, PDF, Word Docs"}),i.jsx("input",{type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:k=>{var E;if((E=k.target.files)!=null&&E[0]){const T=URL.createObjectURL(k.target.files[0]);N(T)}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"})]})})]})]}),i.jsx("div",{className:"p-8 border-t border-slate-100 bg-slate-50 rounded-b-[2rem]",children:i.jsx("button",{onClick:S,className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-xl shadow-xl hover:bg-indigo-500 transition-all hover:scale-[1.02] active:scale-[0.98]",children:"Submit Report"})})]})})},y2=({team:t,fixtures:e,allPlayers:s,onBack:a,onSubmitReport:r,onLodgeProtest:c,currentUser:d,issues:f=[]})=>{const[m,p]=j.useState("OVERVIEW"),[g,v]=j.useState(null),[y,N]=j.useState(!1),S=j.useMemo(()=>[...t.players].sort((M,C)=>{const D=(M.stats.runs+M.stats.wickets*25)/(M.stats.matches||1);return(C.stats.runs+C.stats.wickets*25)/(C.stats.matches||1)-D}).slice(0,11),[t.players]),k=j.useMemo(()=>e.filter(T=>!T.reportSubmission&&(T.teamAId===t.id||T.teamBId===t.id)&&(T.status==="Completed"||new Date(T.date).getTime()<Date.now())),[e,t.id]);j.useEffect(()=>{k.length>0&&console.log("Push Notification Sent: Captain Report Required for",k.map(T=>T.id))},[k.length]);const E=e.filter(T=>T.reportSubmission&&(T.teamAId===t.id||T.teamBId===t.id)).map(T=>T.reportSubmission);return i.jsxs("div",{className:"max-w-6xl mx-auto p-6 md:p-12 min-h-screen animate-in fade-in slide-in-from-bottom-4 duration-700",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-12 gap-8",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:a,className:"text-slate-400 font-bold uppercase text-[10px] tracking-[0.2em] mb-4 hover:text-indigo-500 transition-colors",children:" Registry Home"}),i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-2xl",children:t.name.charAt(0)}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:[t.name," Hub"]}),i.jsxs("p",{className:"text-slate-500 font-bold uppercase text-xs tracking-widest mt-1",children:["Captain: ",d.name]})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[i.jsx("button",{onClick:()=>N(!0),className:"bg-red-50 text-red-500 px-6 py-3 rounded-xl font-black text-[10px] uppercase tracking-[0.2em] hover:bg-red-100 transition-colors shadow-sm border border-red-100",children:" Lodge Report"}),i.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-2xl border border-slate-200 shadow-inner w-fit",children:[i.jsx("button",{onClick:()=>p("OVERVIEW"),className:`px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${m==="OVERVIEW"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"}`,children:"Squad"}),i.jsx("button",{onClick:()=>p("INSIGHTS"),className:`px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${m==="INSIGHTS"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"}`,children:"Insights"}),i.jsxs("button",{onClick:()=>p("REPORTS"),className:`px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${m==="REPORTS"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"} relative`,children:["Reports",k.length>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white animate-pulse"})]})]})]})]}),m==="OVERVIEW"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[i.jsx("div",{className:"lg:col-span-2 space-y-8",children:i.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[i.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-8 flex items-center gap-3",children:["Current Squad",i.jsxs("span",{className:"text-xs bg-indigo-50 text-indigo-500 px-3 py-1 rounded-full",children:[t.players.length," Players"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.players.map(T=>i.jsxs("div",{className:"flex items-center justify-between p-5 bg-slate-50 rounded-3xl border border-slate-100 hover:border-indigo-200 transition-all group",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-200 overflow-hidden",children:T.photoUrl?i.jsx("img",{src:T.photoUrl,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400 font-black text-xs",children:"PIC"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-black text-slate-900 group-hover:text-indigo-600 transition-colors uppercase text-sm tracking-tight",children:T.name}),i.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:T.role})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-lg font-black text-slate-900",children:T.stats.runs}),i.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase",children:"Runs"})]})]},T.id))})]})}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-10 shadow-2xl text-white",children:[i.jsxs("h3",{className:"text-2xl font-black mb-8 flex items-center gap-3",children:["Submissions",k.length>0&&i.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),k.length===0?i.jsx("div",{className:"text-center py-10 opacity-40",children:i.jsx("p",{className:"font-bold text-sm",children:"All match results submitted."})}):i.jsx("div",{className:"space-y-4",children:k.map(T=>i.jsxs("div",{className:"p-6 bg-white/10 rounded-[2rem] border border-white/5 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest",children:"Post-Match Report"}),i.jsx("p",{className:"text-[10px] font-black text-white/40 uppercase",children:T.date})]}),i.jsxs("p",{className:"font-black text-xl leading-none",children:[T.teamAName," vs ",T.teamBName]}),i.jsx("button",{onClick:()=>{v(T),p("REPORT_FORM")},className:"w-full py-4 bg-indigo-600 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] shadow-xl hover:bg-indigo-500 transition-all",children:"Open Result Sheet"})]},T.id))})]}),i.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[i.jsx("h3",{className:"text-xl font-black text-slate-900 mb-6",children:"History"}),i.jsxs("div",{className:"space-y-4",children:[E.length===0&&i.jsx("p",{className:"text-slate-400 text-center py-8 font-bold text-xs uppercase tracking-widest",children:"No reports yet"}),E.slice(0,3).map(T=>{var M,C;return i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-black text-slate-900 text-[10px] uppercase tracking-tight",children:[(M=e.find(D=>D.id===T.matchId))==null?void 0:M.teamAName," v ",(C=e.find(D=>D.id===T.matchId))==null?void 0:C.teamBName]}),i.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest leading-loose",children:new Date(T.timestamp).toLocaleDateString()})]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-[7px] font-black uppercase tracking-widest ${T.status==="VERIFIED"?"bg-emerald-50 text-emerald-600":T.status==="REJECTED"?"bg-red-50 text-red-600":"bg-indigo-50 text-indigo-600"}`,children:T.status})]},T.id)})]})]})]})]}),m==="REPORTS"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[i.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-8 flex items-center gap-3",children:["Match Reports History",i.jsxs("span",{className:"text-xs bg-indigo-50 text-indigo-500 px-3 py-1 rounded-full",children:[E.length," Submitted"]})]}),i.jsxs("div",{className:"space-y-4",children:[E.length===0&&i.jsxs("div",{className:"text-center py-20 flex flex-col items-center gap-4",children:[i.jsx("span",{className:"text-4xl opacity-20",children:""}),i.jsx("p",{className:"text-slate-400 font-black uppercase text-xs tracking-widest",children:"No reports submitted yet"})]}),E.map(T=>{var M,C;return i.jsxs("div",{className:"p-6 bg-slate-50 rounded-[2rem] border border-slate-200 flex items-center justify-between group hover:border-indigo-200 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-xl font-black ${T.status==="VERIFIED"?"bg-emerald-100 text-emerald-600":T.status==="REJECTED"?"bg-red-100 text-red-600":"bg-indigo-100 text-indigo-600"}`,children:T.status==="VERIFIED"?"":T.status==="REJECTED"?"":"?"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-black text-slate-900 text-lg uppercase tracking-tight",children:[(M=e.find(D=>D.id===T.matchId))==null?void 0:M.teamAName," vs ",(C=e.find(D=>D.id===T.matchId))==null?void 0:C.teamBName]}),i.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:["Submitted: ",new Date(T.timestamp).toLocaleDateString()]})]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i.jsx("span",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${T.status==="VERIFIED"?"bg-emerald-100 text-emerald-600":T.status==="REJECTED"?"bg-red-100 text-red-600":"bg-indigo-100 text-indigo-600"}`,children:T.status}),T.adminFeedback&&i.jsxs("p",{className:"text-[9px] font-bold text-red-500 max-w-[150px] text-right italic",children:['"',T.adminFeedback,'"']})]})]},T.id)})]})]}),i.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[i.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-8 flex items-center gap-3",children:["Protests & Issues",i.jsxs("span",{className:"text-xs bg-orange-50 text-orange-500 px-3 py-1 rounded-full",children:[f.filter(T=>T.teamId===t.id).length," Lodged"]})]}),i.jsxs("div",{className:"space-y-4",children:[f.filter(T=>T.teamId===t.id).length===0&&i.jsxs("div",{className:"text-center py-10 flex flex-col items-center gap-4",children:[i.jsx("span",{className:"text-4xl opacity-20",children:""}),i.jsx("p",{className:"text-slate-400 font-black uppercase text-xs tracking-widest",children:"No active issues or protests"})]}),f.filter(T=>T.teamId===t.id).map(T=>i.jsxs("div",{className:"p-6 bg-slate-50 rounded-[2rem] border border-slate-200 space-y-4 hover:border-indigo-200 transition-all",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg font-black ${T.type==="PROTEST"?"bg-red-100 text-red-500":"bg-orange-100 text-orange-500"}`,children:T.type==="PROTEST"?"!":""}),i.jsxs("div",{children:[i.jsx("p",{className:"font-black text-slate-900 uppercase tracking-tight text-sm",children:T.title}),i.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:new Date(T.timestamp).toLocaleDateString()})]})]}),i.jsx("span",{className:`px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-widest ${T.status==="OPEN"?"bg-red-50 text-red-500":T.status==="RESOLVED"||T.status==="DISMISSED"?"bg-emerald-50 text-emerald-600":"bg-indigo-50 text-indigo-500"}`,children:T.status==="RESOLVED"&&T.resolution==="DISMISSED"?"DISMISSED":T.status})]}),T.adminResponse&&i.jsxs("div",{className:`p-4 rounded-2xl border text-xs font-bold ${T.resolution==="UPHELD"?"bg-emerald-50 border-emerald-100 text-emerald-800":T.resolution==="DISMISSED"?"bg-red-50 border-red-100 text-red-800":"bg-slate-100 border-slate-200 text-slate-600"}`,children:[i.jsx("p",{className:"uppercase text-[8px] opacity-50 mb-1",children:"Admin Response:"}),'"',T.adminResponse,'"']})]},T.id))]})]})]}),i.jsx("div",{className:"space-y-8",children:i.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-10 shadow-2xl text-white",children:[i.jsxs("h3",{className:"text-2xl font-black mb-8 flex items-center gap-3",children:["Action Required",k.length>0&&i.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),k.length===0?i.jsx("div",{className:"text-center py-10 opacity-40",children:i.jsx("p",{className:"font-bold text-sm uppercase tracking-[0.2em] text-[10px]",children:"All results submitted"})}):i.jsx("div",{className:"space-y-4",children:k.map(T=>i.jsxs("div",{className:"p-6 bg-white/10 rounded-[2rem] border border-white/5 space-y-4",children:[i.jsxs("p",{className:"font-black text-xl leading-none",children:[T.teamAName," vs ",T.teamBName]}),i.jsx("button",{onClick:()=>{v(T),p("REPORT_FORM")},className:"w-full py-4 bg-indigo-600 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] shadow-xl hover:bg-indigo-500 transition-all",children:"Submit Result"})]},T.id))})]})})]}),m==="INSIGHTS"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[i.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[i.jsxs("h3",{className:"text-3xl font-black text-slate-900 mb-8 flex items-center gap-4",children:["Best Playing 11",i.jsx("span",{className:"text-[10px] bg-slate-100 px-4 py-2 rounded-full font-black text-slate-400 uppercase tracking-[0.2em] border border-slate-200",children:"AI Logic"})]}),i.jsx("div",{className:"space-y-3",children:S.map((T,M)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-xs font-black text-indigo-500 w-4",children:M+1}),i.jsxs("div",{children:[i.jsx("p",{className:"font-black text-slate-900 text-sm uppercase",children:T.name}),i.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:T.role})]})]}),i.jsx("div",{className:"flex items-center gap-6",children:i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-black text-indigo-600 text-xs",children:((T.stats.runs+T.stats.wickets*25)/(T.stats.matches||1)).toFixed(1)}),i.jsx("p",{className:"text-[7px] font-black text-slate-400 uppercase",children:"Impact"})]})})]},T.id))})]}),i.jsx("div",{className:"space-y-10",children:i.jsxs("div",{className:"bg-indigo-600 rounded-[3rem] p-12 text-white shadow-2xl flex flex-col justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-4xl font-black tracking-tighter mb-4 italic",children:"Performance Summary"}),i.jsx("p",{className:"text-indigo-100 font-bold opacity-80 leading-relaxed",children:"Based on overall season statistics, your squad has a strong batting core. The AI suggests focusing on death bowling efficiency in upcoming practices."})]}),i.jsxs("div",{className:"mt-12 grid grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-black",children:t.players.reduce((T,M)=>T+M.stats.runs,0)}),i.jsx("p",{className:"text-[8px] font-black uppercase text-indigo-200 tracking-widest",children:"Runs"})]}),i.jsxs("div",{className:"text-center border-x border-indigo-400/30",children:[i.jsx("p",{className:"text-3xl font-black",children:t.players.reduce((T,M)=>T+M.stats.wickets,0)}),i.jsx("p",{className:"text-[8px] font-black uppercase text-indigo-200 tracking-widest",children:"Wickets"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-black",children:t.players.length}),i.jsx("p",{className:"text-[8px] font-black uppercase text-indigo-200 tracking-widest",children:"Squad"})]})]})]})})]}),m==="REPORT_FORM"&&g&&i.jsx(b2,{fixture:g,onCancel:()=>p("OVERVIEW"),onSubmit:T=>{r(T),p("OVERVIEW")},team:t,currentUserId:d.id,allPlayers:s}),y&&i.jsx(v2,{isOpen:y,onClose:()=>N(!1),onSubmit:T=>{console.log("Issue lodged:",T),c(T),N(!1),alert("Report Logged Successfully. Admin will review shortly.")},teamId:t.id,currentUserId:d.id})]})},w2=({submission:t,fixture:e,onApprove:s,onReject:a,onBack:r})=>{const[c,d]=j.useState(""),[f,m]=j.useState(!1);return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 md:p-12 h-full overflow-y-auto custom-scrollbar animate-in fade-in duration-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-12",children:[i.jsxs("div",{children:[i.jsx("button",{onClick:r,className:"text-slate-400 font-bold uppercase text-[10px] tracking-[0.2em] mb-4 hover:text-indigo-500 transition-colors",children:" Pending Reports"}),i.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tighter italic",children:"Review Match Result"}),i.jsxs("p",{className:"text-slate-500 font-bold uppercase text-xs tracking-widest mt-1",children:["Submitted: ",new Date(t.timestamp).toLocaleString()]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>m(!0),className:"px-8 py-4 bg-white text-red-500 border border-red-100 rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-lg hover:bg-red-50 transition-all",children:"Reject Report"}),i.jsx("button",{onClick:()=>s(t.id),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-2xl hover:bg-indigo-500 transition-all",children:"Verify & Update Stats"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 pb-20",children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-4 shadow-2xl overflow-hidden aspect-[3/4] group relative",children:[t.scorecardPhotoUrl?t.scorecardPhotoUrl.includes("application/pdf")||t.scorecardPhotoUrl.toLowerCase().endsWith(".pdf")?i.jsx("iframe",{src:t.scorecardPhotoUrl,className:"w-full h-full rounded-[2rem] bg-white",title:"Scorecard PDF"}):i.jsx("img",{src:t.scorecardPhotoUrl,className:"w-full h-full object-contain rounded-[2rem] group-hover:scale-105 transition-transform duration-700 cursor-zoom-in",alt:"Scorecard"}):i.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-white/20",children:[i.jsx("span",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"font-black uppercase text-xs tracking-widest",children:"No scorecard photo attached"})]}),i.jsx("a",{href:t.scorecardPhotoUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-6 right-6 bg-white/10 backdrop-blur-md text-white px-4 py-2 rounded-lg font-bold text-xs uppercase hover:bg-white/20 transition-colors",children:"Open Original "})]}),i.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.3em] text-center italic",children:"Scorecard verification document"})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[i.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-8 border-b-2 border-slate-50 pb-4",children:"Match Summary"}),i.jsxs("div",{className:"grid grid-cols-2 gap-10",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:e.teamAName}),i.jsxs("p",{className:"text-3xl font-black text-slate-900",children:[t.teamAScore,"/",t.teamAWickets]}),i.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase",children:["Overs: ",t.teamAOvers]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:e.teamBName}),i.jsxs("p",{className:"text-3xl font-black text-slate-900",children:[t.teamBScore,"/",t.teamBWickets]}),i.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase",children:["Overs: ",t.teamBOvers]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100 overflow-hidden",children:[i.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-8 border-b-2 border-slate-50 pb-4",children:"Player Contributions"}),i.jsx("div",{className:"max-h-[40vh] overflow-y-auto pr-4 custom-scrollbar",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-50",children:[i.jsx("th",{className:"pb-4",children:"Player"}),i.jsx("th",{className:"pb-4 text-right",children:"Runs"}),i.jsx("th",{className:"pb-4 text-right",children:"Wkts"}),i.jsx("th",{className:"pb-4 text-right",children:"Ovs"}),i.jsx("th",{className:"pb-4 text-right",children:"Conc"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-50",children:t.playerPerformances.map(p=>i.jsxs("tr",{className:"group",children:[i.jsx("td",{className:"py-4 font-black text-slate-700 text-sm",children:p.playerName}),i.jsx("td",{className:"py-4 text-right font-black text-indigo-600",children:p.runs}),i.jsx("td",{className:"py-4 text-right font-black text-emerald-600",children:p.wickets}),i.jsx("td",{className:"py-4 text-right font-bold text-slate-500",children:p.overs}),i.jsx("td",{className:"py-4 text-right font-bold text-slate-400",children:p.runsConceded})]},p.playerId))})]})})]})]})]}),f&&i.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-md z-[100] flex items-center justify-center p-6",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[3rem] p-12 shadow-2xl animate-in zoom-in duration-300",children:[i.jsx("h3",{className:"text-3xl font-black text-slate-900 mb-4 italic",children:"Rejection Feedback"}),i.jsx("p",{className:"text-slate-500 font-bold mb-8 leading-relaxed",children:"Please let the captain know why this report is being rejected so they can fix and resubmit."}),i.jsx("textarea",{value:c,onChange:p=>d(p.target.value),placeholder:"e.g. Scanned photo is blurry, or runs total does not match...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-6 font-bold text-slate-700 outline-none focus:ring-2 focus:ring-red-500 h-40 resize-none mb-8"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs tracking-widest",children:"Nevermind"}),i.jsx("button",{onClick:()=>a(t.id,c),disabled:!c,className:"flex-[2] py-4 bg-red-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl disabled:opacity-50",children:"Send Rejection"})]})]})})]})},Db=()=>{const[t,e]=j.useState(null),[s,a]=j.useState(null),[r,c]=j.useState(!0);return j.useEffect(()=>{Gs.auth.getSession().then(({data:{session:N}})=>{a(N),e((N==null?void 0:N.user)??null),c(!1)});const{data:{subscription:y}}=Gs.auth.onAuthStateChange((N,S)=>{a(S),e((S==null?void 0:S.user)??null),c(!1)});return()=>y.unsubscribe()},[]),{user:t,session:s,loading:r,signInWithGoogle:async()=>{const{error:y}=await Gs.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});return y&&console.error("Google sign in error:",y),{error:y}},signInWithFacebook:async()=>{const{error:y}=await Gs.auth.signInWithOAuth({provider:"facebook",options:{redirectTo:window.location.origin}});return y&&console.error("Facebook sign in error:",y),{error:y}},signInWithEmail:async(y,N)=>{const{data:S,error:k}=await Gs.auth.signInWithPassword({email:y,password:N});return{data:S,error:k}},signUpWithEmail:async(y,N,S)=>{const{data:k,error:E}=await Gs.auth.signUp({email:y,password:N,options:{data:{name:S,handle:`@${y.split("@")[0]}`}}});return k.user&&!E&&await Gs.from("user_profiles").insert({id:k.user.id,email:y,name:S,handle:`@${y.split("@")[0]}`,avatar_url:k.user.user_metadata.avatar_url||"",role:"Fan"}),{data:k,error:E}},signOut:async()=>{const{error:y}=await Gs.auth.signOut();return{error:y}},getUserProfile:async()=>{var S;if(!t)return null;const{data:y,error:N}=await Gs.from("user_profiles").select("*").eq("id",t.id).single();return N?(console.error("Error fetching user profile:",N),null):{id:y.id,name:y.name||t.email||"User",handle:y.handle||`@${(S=t.email)==null?void 0:S.split("@")[0]}`,email:y.email||t.email,avatarUrl:y.avatar_url||t.user_metadata.avatar_url,role:y.role||"Fan",createdAt:new Date(y.created_at).getTime()}}}},N2=({isOpen:t,onClose:e,onSuccess:s,initialMode:a="signin"})=>{const{signInWithGoogle:r,signInWithFacebook:c,signInWithEmail:d,signUpWithEmail:f}=Db(),[m,p]=j.useState(a);Ru.useEffect(()=>{t&&p(a)},[t,a]);const[g,v]=j.useState(""),[y,N]=j.useState(""),[S,k]=j.useState(""),[E,T]=j.useState(""),[M,C]=j.useState(!1);if(!t)return null;const D=async()=>{C(!0),T("");const{error:B}=await r();B&&(T(B.message),C(!1))},R=async B=>{B.preventDefault(),C(!0),T("");const G=m==="signin"?await d(g,y):await f(g,y,S);G.error?(T(G.error.message),C(!1)):(s(),e())};return i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-slate-900 rounded-3xl max-w-md w-full p-8 relative border border-slate-700",children:[i.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-white text-2xl",children:""}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:m==="signin"?"Welcome Back":"Create Account"}),i.jsx("p",{className:"text-slate-400 text-sm mb-6",children:m==="signin"?"Sign in to access your cricket stats and teams":"Join the Cricket Core community"}),E&&i.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 p-3 rounded-xl mb-4 text-sm",children:E}),i.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[i.jsxs("button",{onClick:async()=>{C(!0),T("");const{error:B}=await c();B&&(T(B.message),C(!1))},disabled:M,className:"w-full bg-[#1877F2] text-white py-3 rounded-xl font-semibold flex items-center justify-center gap-3 hover:bg-[#1864D9] transition-colors disabled:opacity-50",children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.791-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Continue with Facebook"]}),i.jsxs("button",{onClick:D,disabled:M,className:"w-full bg-white text-slate-900 py-3 rounded-xl font-semibold flex items-center justify-center gap-3 hover:bg-slate-100 transition-colors disabled:opacity-50",children:[i.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})]}),i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"flex-1 h-px bg-slate-700"}),i.jsx("span",{className:"text-slate-500 text-xs",children:"OR"}),i.jsx("div",{className:"flex-1 h-px bg-slate-700"})]}),i.jsxs("form",{onSubmit:R,className:"space-y-4",children:[m==="signup"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Name"}),i.jsx("input",{type:"text",value:S,onChange:B=>k(B.target.value),className:"w-full bg-slate-800 text-white p-3 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none",placeholder:"Your name",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:g,onChange:B=>v(B.target.value),className:"w-full bg-slate-800 text-white p-3 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none",placeholder:"you@example.com",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),i.jsx("input",{type:"password",value:y,onChange:B=>N(B.target.value),className:"w-full bg-slate-800 text-white p-3 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none",placeholder:"",required:!0,minLength:6})]}),i.jsx("button",{type:"submit",disabled:M,className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors disabled:opacity-50",children:M?"Please wait...":m==="signin"?"Sign In":"Create Account"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("button",{onClick:()=>p(m==="signin"?"signup":"signin"),className:"text-indigo-400 hover:text-indigo-300 text-sm",children:m==="signin"?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})},og={id:"guest",name:"Visitor",handle:"guest",role:"Guest",createdAt:Date.now()},S2=()=>{var ws,Rt;if(new URLSearchParams(window.location.search).get("mode")==="scoreboard")return i.jsx(P1,{});const[s,a]=j.useState(!0),{orgs:r,standaloneMatches:c,mediaPosts:d,profile:f,settings:m,following:p,setOrgs:g,setStandaloneMatches:v,setMediaPosts:y,updateProfile:N,updateSettings:S,updateFollowing:k,syncNow:E}=jg(),[T,M]=j.useState(()=>localStorage.getItem("cc_theme")||"light"),[C,D]=j.useState("media"),[R,B]=j.useState(null),[G,H]=j.useState(null),[z,P]=j.useState(null),[ne,le]=j.useState(null),[ie,J]=j.useState(null),[pe,U]=j.useState(!1),[O,V]=j.useState(!1),[he,W]=j.useState([]),[A,$]=j.useState(!1),[re,ve]=j.useState("signin"),[Ne,ge]=j.useState("CREATE"),{user:Se,loading:Ee,getUserProfile:Q,signOut:ye}=Db();j.useEffect(()=>{Se&&!Ee?Q().then(ee=>{ee&&N(ee)}):!Se&&!Ee&&f.role!=="Guest"&&N({id:"guest",name:"Visitor",handle:"guest",role:"Guest",createdAt:Date.now()})},[Se,Ee]),j.useEffect(()=>{var Y;const ee=(Y=window.wpApiSettings)!=null&&Y.plugin_url?`${window.wpApiSettings.plugin_url}logo.jpg`:"logo.jpg",me=new Image;me.src=ee;const we=setTimeout(()=>{a(!1)},2500);return()=>clearTimeout(we)},[]),j.useEffect(()=>{const ee=Date.now()-2592e5;let me=!1;const we=c.map(te=>te.status==="Completed"&&!te.isArchived&&new Date(te.date).getTime()<ee?(me=!0,{...te,isArchived:!0}):te),Y=r.map(te=>({...te,fixtures:te.fixtures.map(xe=>xe.status==="Completed"&&!xe.isArchived&&new Date(xe.date).getTime()<ee?(me=!0,{...xe,isArchived:!0}):xe)}));me&&(v(we),g(Y),console.log("Auto-archived old matches."))},[c,r]),j.useEffect(()=>{if(R){const ee=(c||[]).find(me=>me.id===R.id)||(r||[]).flatMap(me=>me.fixtures).find(me=>me.id===R.id);ee&&ee.savedState&&JSON.stringify(ee.savedState)!==JSON.stringify(R.savedState)&&B(ee)}},[c,r,R==null?void 0:R.id]),j.useEffect(()=>{(f==null?void 0:f.role)==="Guest"&&!["media","scorer","setup"].includes(C)&&D("media")},[f,C]),j.useEffect(()=>{localStorage.setItem("cc_theme",T),T==="light"?document.body.classList.add("light-theme"):document.body.classList.remove("light-theme")},[T]);const je=j.useMemo(()=>{const ee=new Map;return r.forEach(me=>me.memberTeams.forEach(we=>ee.set(we.id,we))),Array.from(ee.values())},[r]),Be=j.useMemo(()=>r.flatMap(ee=>ee.memberTeams.flatMap(me=>me.players.map(we=>({...we,teamName:me.name,teamId:me.id,orgId:ee.id,orgName:ee.name})))),[r]),et=j.useMemo(()=>[...c,...r.flatMap(ee=>ee.fixtures)],[c,r]),ct=j.useMemo(()=>!f||f.role!=="Player"?null:je.find(ee=>ee.players.some(me=>me.id===f.id)),[f,je]),pt=j.useMemo(()=>et.find(ee=>ee.id===z),[z,et]),wt=j.useMemo(()=>{var ee;return f&&f.role==="Scorer"&&((ee=f.scorerDetails)!=null&&ee.isHireable)?[f]:[]},[f]),Fe=(ee,me)=>{if((f==null?void 0:f.role)==="Guest"){U(!0);return}const we=ee==="TEAM"?p.teams:ee==="PLAYER"?p.players:p.orgs,Y=we.includes(me)?we.filter(te=>te!==me):[...we,me];k({...p,[ee==="TEAM"?"teams":ee==="PLAYER"?"players":"orgs"]:Y})};j.useEffect(()=>{if(R&&R.savedState&&"BroadcastChannel"in window)try{const ee=r.find(te=>te.fixtures.some(xe=>xe.id===R.id)),me=new BroadcastChannel("cricket_sync_channel"),we=je.find(te=>te.id===R.teamAId),Y=je.find(te=>te.id===R.teamBId);me.postMessage({type:"UPDATE",state:R.savedState,teams:{batting:we,bowling:Y},sponsors:(ee==null?void 0:ee.sponsors)||[]})}catch(ee){console.warn("BroadcastChannel error",ee)}},[R,r,je]);const dt=ee=>{let me=[...c],we=[...r];const Y={...ee,scorerId:f==null?void 0:f.id};if(G){const te={...Y,id:G.id};me=me.map(xe=>xe.id===te.id?te:xe),we=we.map(xe=>({...xe,fixtures:xe.fixtures.map(Re=>Re.id===te.id?te:Re)})),B(te),H(null)}else{const te={...Y,isOfficial:Y.isOfficial??!1};me=[te,...me],B(te)}v(me),g(we),D("scorer")},Tt=(ee,me,we)=>{const Y=Ge=>{const Me=me.inningsScores.find(Ze=>Ze.teamId===Ge);return Me?`${Me.score}/${Me.wickets}`:me.battingTeamId===Ge?`${me.score}/${me.wickets}`:"0/0"},te=Ge=>Ge.id===ee?{...Ge,savedState:me,status:we||(me.isCompleted?"Completed":"Live"),teamAScore:Y(Ge.teamAId),teamBScore:Y(Ge.teamBId)}:Ge,xe=c.map(te),Re=r.map(Ge=>({...Ge,fixtures:Ge.fixtures.map(te)}));v(xe),g(Re)},Nt=ee=>{const me={id:`org-${Date.now()}`,name:ee.name||"Untitled",type:ee.type||"CLUB",description:"",address:"",country:ee.country||"",groundLocation:"",establishedYear:new Date().getFullYear(),logoUrl:"",tournaments:[],groups:[],memberTeams:[],fixtures:[],members:f?[{userId:f.id,name:f.name,handle:f.handle,role:"Administrator",addedAt:Date.now()}]:[],applications:[],isPublic:!0,allowUserContent:!0,sponsors:[]},we=[...r,me];g(we)},Et=(ee,me)=>{const we={...me,id:`tm-${Date.now()}`,players:[]},Y=r.map(te=>te.id===ee?{...te,memberTeams:[...te.memberTeams,we]}:te);g(Y)},de=(ee,me)=>{let we=r.find(xe=>xe.name==="Quick Play Teams");const Y=me.map((xe,Re)=>({id:`pl-${Date.now()}-${Re}`,name:xe,role:"All-rounder",stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}}));if(Y.length===0)for(let xe=1;xe<=12;xe++)Y.push({id:`pl-auto-${Date.now()}-${xe}`,name:`Player ${xe}`,role:xe===12?"Bowler":xe<3?"Batsman":"All-rounder",stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}});const te={id:`tm-${Date.now()}`,name:ee,players:Y};if(we){const xe=r.map(Re=>Re.id===we.id?{...Re,memberTeams:[...Re.memberTeams,te]}:Re);g(xe)}else{const xe={id:`org-qp-${Date.now()}`,name:"Quick Play Teams",type:"CLUB",memberTeams:[te],tournaments:[],groups:[],fixtures:[],members:f?[{userId:f.id,name:f.name,handle:f.handle,role:"Administrator",addedAt:Date.now()}]:[],applications:[],country:"Global",groundLocation:"Virtual",establishedYear:new Date().getFullYear(),logoUrl:"",isPublic:!1,sponsors:[]},Re=[...r,xe];g(Re)}},ce=ee=>{const me=[ee,...d];y(me)},be=ee=>{const me=d.filter(we=>we.id!==ee);y(me)},Ae=ee=>{if(!f||f.role==="Guest"){U(!0);return}const me=r.map(we=>{if(we.id===ee){const Y={id:`app-${Date.now()}`,type:"USER_JOIN",applicantId:f.id,applicantName:f.name,applicantHandle:f.handle,applicantImage:f.avatarUrl,status:"PENDING",timestamp:Date.now()};return{...we,applications:[...we.applications||[],Y]}}return we});g(me),alert("Application Sent!"),V(!1)},Qe=(ee,me,we,Y)=>{var Ze;const te=r.find(We=>We.id===ee),xe=te==null?void 0:te.applications.find(We=>We.id===me);if(!te||!xe)return;const Re=xe.type==="ORG_AFFILIATE",Ge=xe.applicantId,Me=r.map(We=>{if(We.id===ee){const Os=We.applications.map(It=>It.id===me?{...It,status:we}:It);let fe=We.childOrgIds||[];we==="APPROVED"&&Re&&!fe.includes(Ge)&&(fe=[...fe,Ge]);let Ve=We.members,lt=We.memberTeams;if(we==="APPROVED"&&!Re&&Y&&(We.members.some(It=>It.userId===xe.applicantId)||(Ve=[...We.members,{userId:xe.applicantId,name:xe.applicantName,handle:xe.applicantHandle||"",role:Y,addedAt:Date.now()}]),Y==="Player"&&We.memberTeams.length>0)){const It=We.memberTeams[0],Yn={id:xe.applicantId,name:xe.applicantName,role:"All-rounder",photoUrl:xe.applicantImage,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}};lt=We.memberTeams.map(es=>es.id===It.id?{...es,players:[...es.players,Yn]}:es)}return{...We,applications:Os,childOrgIds:fe,members:Ve,memberTeams:lt}}if(We.id===Ge&&we==="APPROVED"&&Re){const Os=We.parentOrgIds||[];if(!Os.includes(ee))return{...We,parentOrgIds:[...Os,ee]}}return We});if(g(Me),!Re&&we==="APPROVED"&&(f==null?void 0:f.id)===xe.applicantId){if((Ze=f.joinedClubIds)!=null&&Ze.includes(ee))return;const We={...f,joinedClubIds:[...f.joinedClubIds||[],ee],notifications:[...f.notifications||[],{id:`notif-${Date.now()}`,type:"ALERT",title:"Application Accepted",message:`You have been accepted into ${te.name}.`,timestamp:Date.now(),read:!1}]};N(We)}},gt=ee=>{const me=r.map(we=>we.fixtures.some(te=>te.id===ee.matchId)?{...we,fixtures:we.fixtures.map(te=>te.id===ee.matchId?{...te,reportSubmission:ee}:te)}:we);g(me),alert("Match Report Submitted for Admin Verification!")},At=ee=>{const me=et.find(Y=>{var te;return((te=Y.reportSubmission)==null?void 0:te.id)===ee});if(!me||!me.reportSubmission)return;const we=FS(r,me.reportSubmission);g(we),P(null),alert("Match Verified! Player stats have been updated.")},Ue=(ee,me)=>{const we=r.map(Y=>({...Y,fixtures:Y.fixtures.map(te=>{var xe;return((xe=te.reportSubmission)==null?void 0:xe.id)===ee?{...te,reportSubmission:{...te.reportSubmission,status:"REJECTED",adminFeedback:me}}:te})}));g(we),P(null),alert("Report Rejected.")},at=ee=>{const me={id:`dev-${ee.toLowerCase()}-${Date.now()}`,createdAt:Date.now()};let we;switch(ee){case"ADMIN":we={...me,name:"Central Zone Admin",handle:"@cz_admin",role:"Administrator",joinedClubIds:["org-central-zone"]};const Y=r.find(te=>te.id==="org-central-zone");if(Y){if(!Y.members.some(te=>te.userId===we.id)){const te=r.map(xe=>xe.id==="org-central-zone"?{...xe,members:[...xe.members,{userId:we.id,name:we.name,handle:we.handle,role:"Administrator",addedAt:Date.now()}]}:xe);g(te)}}else g([...r,{id:"org-central-zone",name:"Central Zone",type:"GOVERNING_BODY",country:"Global",isPublic:!0,allowUserContent:!0,tournaments:[],groups:[],memberTeams:[],fixtures:[],members:[{userId:we.id,name:we.name,handle:we.handle,role:"Administrator",addedAt:Date.now()}],applications:[],sponsors:[],establishedYear:2026}]);break;case"SCORER":we={...me,name:"Dev Scorer",handle:"@dev_scorer",role:"Scorer",scorerDetails:{isHireable:!0,experienceYears:5}};break;case"PLAYER":we={...me,name:"Dev Player",handle:"@dev_player",role:"Player",playerDetails:{battingStyle:"Right-hand",bowlingStyle:"Leg-break",primaryRole:"All-rounder",lookingForClub:!0,isHireable:!1}};break;case"CAPTAIN":if(we={...me,id:"dev-captain-fixed",name:"Dev Captain",handle:"@the_captain",role:"Player",playerDetails:{battingStyle:"Right-hand",bowlingStyle:"Medium-fast",primaryRole:"Batsman",lookingForClub:!1,isHireable:!1}},je.length>0){const te=je[0];let xe=[...r],Re=!1;if(te.players.some(Me=>Me.id===we.id)||(xe=xe.map(Me=>Me.memberTeams.some(Ze=>Ze.id===te.id)?{...Me,memberTeams:Me.memberTeams.map(Ze=>Ze.id===te.id?{...Ze,players:[...Ze.players,{id:we.id,name:we.name,role:"Batsman",stats:{runs:1250,wickets:12,ballsFaced:1100,ballsBowled:240,runsConceded:180,matches:45,catches:15,runOuts:2,stumpings:0,fours:120,sixes:45,hundreds:2,fifties:8,ducks:1,threeWickets:1,fiveWickets:0,maidens:4}}]}:Ze)}:Me),Re=!0),!et.some(Me=>(Me.teamAId===te.id||Me.teamBId===te.id)&&Me.status==="Completed"&&!Me.reportSubmission)){const Me=`fixture-mock-pending-${Date.now()}`;xe=xe.map(Ze=>Ze.memberTeams.some(We=>We.id===te.id)?{...Ze,fixtures:[...Ze.fixtures,{id:Me,teamAId:te.id,teamBId:"mock-opp-1",teamAName:te.name,teamBName:"Challengers XI",date:new Date(Date.now()-864e5).toISOString(),venue:"Demo Ground",status:"Completed",type:"T20",isOfficial:!0,oversPerInnings:20}]}:Ze),Re=!0}Re&&g(xe)}break;case"GUEST":we=og;break;default:we={...me,name:`Dev ${ee}`,handle:`@dev_${ee.toLowerCase()}`,role:ee}}N(we),D(ee==="CAPTAIN"?"captain_hub":"home")},Zt=async ee=>{N(ee),U(!1),D("home")};if(s){const ee=(ws=window.wpApiSettings)!=null&&ws.plugin_url?`${window.wpApiSettings.plugin_url}logo.svg`:"logo.svg";return i.jsxs("div",{className:"fixed inset-0 bg-slate-950 flex flex-col items-center justify-center z-[9999] animate-in fade-in duration-500",children:[i.jsxs("div",{className:"flex flex-col items-center mb-12",children:[i.jsxs("div",{className:"relative w-32 h-32 mb-6",children:[i.jsx("div",{className:"absolute inset-0 bg-indigo-500 blur-[60px] opacity-20 rounded-full animate-pulse"}),i.jsx("img",{src:ee,className:"w-full h-full object-contain relative z-10 drop-shadow-2xl",alt:"Cricket Core"})]}),i.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter mb-2",children:"CRICKET CORE"}),i.jsx("p",{className:"text-emerald-500 font-bold uppercase tracking-[0.3em] text-xs",children:"2026 Edition"})]}),i.jsxs("div",{className:"absolute bottom-12 text-center space-y-4",children:[i.jsx("div",{className:"w-12 h-1 bg-slate-800 rounded-full mx-auto mb-6 overflow-hidden",children:i.jsx("div",{className:"h-full bg-indigo-500 animate-[loading_2s_ease-in-out_infinite] w-1/2"})}),i.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em]",children:"Cricket is Life, Enjoy It"}),i.jsx("p",{className:"text-slate-600 text-[9px] font-bold uppercase tracking-widest",children:"Powered by Mitchipoohdevs"})]}),i.jsx("style",{children:"@keyframes loading { 0% { transform: translateX(-100%); } 50% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }"})]})}if(!f||pe)return i.jsx(f_,{onComplete:Zt,onCancel:pe?()=>U(!1):void 0,initialMode:Ne});const us=f.joinedClubIds&&f.joinedClubIds.length>0?r.find(ee=>ee.id===f.joinedClubIds[0]):null;return i.jsxs(L1,{children:[i.jsxs(VS,{activeTab:C,onTabChange:D,profile:f,theme:T,onThemeToggle:()=>M(ee=>ee==="light"?"dark":"light"),settings:m,onToggleSetting:ee=>S({...m,[ee]:ee==="devMode"?!m.devMode:!m[ee]}),onEditProfile:()=>{f.role==="Guest"?(ge("CREATE"),U(!0)):(U(!0),ge("CREATE"))},onApplyForAccreditation:()=>V(!0),onSignOut:async()=>{Se&&await ye(),N(og)},onSignIn:()=>{ge("LOGIN"),U(!0)},onSwitchProfile:at,showCaptainHub:!!ct,children:[i.jsx(Ag,{isOpen:O,onClose:()=>V(!1),organizations:r.filter(ee=>{var me;return ee.isPublic!==!1&&!((me=f.joinedClubIds)!=null&&me.includes(ee.id))}),onApply:Ae}),i.jsxs("div",{id:"csp-view-container",className:"h-full flex flex-col min-h-0",children:[i.jsx(U1,{team:je.find(ee=>ee.id===ne)||null,isOpen:!!ne,onClose:()=>le(null),allFixtures:et,onViewPlayer:ee=>J(ee),isFollowed:ne?p.teams.includes(ne):!1,onToggleFollow:()=>ne&&Fe("TEAM",ne),onViewMatch:ee=>{P(ee.id),D("media")}}),i.jsx(Rg,{player:Be.find(ee=>ee.id===ie)||null,isOpen:!!ie,onClose:()=>J(null),isFollowed:ie?p.players.includes(ie):!1,onToggleFollow:()=>ie&&Fe("PLAYER",ie),allFixtures:et,onViewMatch:ee=>{P(ee.id),D("media")}}),C==="home"&&i.jsx(d_,{organizations:r,standaloneMatches:c,userRole:f.role,onStartMatch:ee=>{B(ee),D("scorer")},onViewMatch:ee=>{P(ee.id),D("media")},onRequestSetup:()=>{H(null),D("setup")},onUpdateOrgs:g,onCreateOrg:Nt,onAddTeam:Et,onRemoveTeam:(ee,me)=>{const we=r.map(Y=>Y.id===ee?{...Y,memberTeams:Y.memberTeams.filter(te=>te.id!==me)}:Y);g(we)},onBulkAddPlayers:(ee,me)=>{const we=r.map(Y=>({...Y,memberTeams:Y.memberTeams.map(te=>te.id===ee?{...te,players:[...te.players,...me]}:te)}));g(we)},onAddGroup:(ee,me)=>{const we=r.map(Y=>Y.id===ee?{...Y,groups:[...Y.groups,{id:`grp-${Date.now()}`,name:me,teams:[]}]}:Y);g(we)},onUpdateGroupTeams:(ee,me,we)=>{const Y=r.map(te=>te.id===ee?{...te,groups:te.groups.map(xe=>xe.id===me?{...xe,teams:te.memberTeams.filter(Re=>we.includes(Re.id))}:xe)}:te);g(Y)},onAddTournament:(ee,me)=>{const we=r.map(Y=>Y.id===ee?{...Y,tournaments:[...Y.tournaments,me]}:Y);g(we)},mediaPosts:d,onAddMediaPost:ce,onViewTeam:ee=>le(ee),onOpenMediaStudio:()=>D("media"),following:p,onToggleFollow:Fe,hireableScorers:wt,currentUserId:f.id,onApplyForOrg:Ae,onProcessApplication:Qe,currentUserProfile:f,showCaptainHub:!!ct,onOpenCaptainHub:()=>D("captain_hub"),onRequestMatchReports:()=>D("captain_hub"),onUpdateProfile:N,issues:he,onUpdateIssues:W}),C==="my_club"&&us&&i.jsx(Mg,{organization:us,userRole:"Player",onBack:()=>D("home"),onViewTournament:()=>{},onViewPlayer:ee=>J(ee.id),onRequestAddTeam:()=>{},onRequestAddTournament:()=>{},players:Be.filter(ee=>ee.orgId===us.id),onViewTeam:le,isFollowed:p.orgs.includes(us.id),onToggleFollow:()=>Fe("ORG",us.id),globalUsers:[],onAddMember:()=>{},currentUserProfile:f}),C==="career"&&f.role!=="Player"&&i.jsx("div",{className:"max-w-4xl mx-auto p-6 md:p-12 min-h-screen",children:i.jsx(ng,{profile:f,onUpdateProfile:N,showCaptainHub:!!ct,onOpenCaptainHub:()=>D("captain_hub")})}),C==="career"&&f.role==="Player"&&i.jsx(ng,{profile:f,onUpdateProfile:N,showCaptainHub:!!ct,onOpenCaptainHub:()=>D("captain_hub")}),C==="setup"&&i.jsx(u_,{teams:je,existingFixture:G,onMatchReady:dt,onCancel:()=>{H(null),D("home")},onCreateTeam:de}),C==="scorer"&&(R?i.jsx(g2,{match:R,teams:je,userRole:f.role,organizations:r,onUpdateOrgs:g,onUpdateMatchState:Tt,onComplete:()=>D("home"),onRequestNewMatch:()=>D("setup"),onAddMediaPost:ce,onExit:()=>D("home"),currentUserId:f.id}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center pb-20",children:[" ",i.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-6",children:"Cloud Sync Scoring"})," ",i.jsx("button",{onClick:()=>D("setup"),className:"bg-indigo-600 text-white px-10 py-5 rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl",children:"Start New Cloud Match"})," "]})),C==="captain_hub"&&ct&&i.jsx(y2,{team:ct,fixtures:et,allPlayers:Be,onBack:()=>D("home"),onSubmitReport:gt,onLodgeProtest:ee=>W([...he,ee]),currentUser:f,issues:he}),C==="media"&&z&&((Rt=pt==null?void 0:pt.reportSubmission)==null?void 0:Rt.status)==="PENDING"&&f.role==="Administrator"?i.jsx(w2,{submission:pt.reportSubmission,fixture:pt,onApprove:At,onReject:Ue,onBack:()=>P(null)}):C==="media"&&i.jsx(O1,{onBack:()=>D("home"),fixtures:et,teams:je,players:Be,mediaPosts:d,onAddMediaPost:ce,onDeletePost:be,initialMatchId:z,following:p,onToggleFollow:Fe,onViewTeam:le,onViewPlayer:ee=>J(ee.id),userRole:f.role,currentProfile:f,organizations:r})]})]}),i.jsx(N2,{isOpen:A,onClose:()=>$(!1),initialMode:re,onSuccess:()=>{$(!1)}})]})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{var e;const t=(e=window.wpApiSettings)!=null&&e.plugin_url?`${window.wpApiSettings.plugin_url}sw.js`:"/sw.js";navigator.serviceWorker.register(t).then(s=>{console.log("SW registered: ",s)}).catch(s=>{console.log("SW registration failed: ",s)})});const Ob=document.getElementById("root");if(!Ob)throw new Error("Could not find root element to mount to");const _2=nw.createRoot(Ob);_2.render(i.jsx(Ru.StrictMode,{children:i.jsx(GS,{children:i.jsx(S2,{})})}));
